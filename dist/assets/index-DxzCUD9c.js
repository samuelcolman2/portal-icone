(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function MI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Vg={exports:{}},ec={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IS;function a2(){if(IS)return ec;IS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return ec.Fragment=e,ec.jsx=t,ec.jsxs=t,ec}var xS;function l2(){return xS||(xS=1,Vg.exports=a2()),Vg.exports}var S=l2(),Ug={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bS;function u2(){if(bS)return Ve;bS=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),E=Symbol.iterator;function I(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,O={};function K(F,te,fe){this.props=F,this.context=te,this.refs=O,this.updater=fe||N}K.prototype.isReactComponent={},K.prototype.setState=function(F,te){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,te,"setState")},K.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function Z(){}Z.prototype=K.prototype;function j(F,te,fe){this.props=F,this.context=te,this.refs=O,this.updater=fe||N}var ae=j.prototype=new Z;ae.constructor=j,U(ae,K.prototype),ae.isPureReactComponent=!0;var me=Array.isArray;function ce(){}var R={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function D(F,te,fe){var ge=fe.ref;return{$$typeof:n,type:F,key:te,ref:ge!==void 0?ge:null,props:fe}}function L(F,te){return D(F.type,te,F.props)}function P(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function q(F){var te={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(fe){return te[fe]})}var k=/\/+/g;function Be(F,te){return typeof F=="object"&&F!==null&&F.key!=null?q(""+F.key):te.toString(36)}function ht(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(ce,ce):(F.status="pending",F.then(function(te){F.status==="pending"&&(F.status="fulfilled",F.value=te)},function(te){F.status==="pending"&&(F.status="rejected",F.reason=te)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function W(F,te,fe,ge,Ie){var Me=typeof F;(Me==="undefined"||Me==="boolean")&&(F=null);var De=!1;if(F===null)De=!0;else switch(Me){case"bigint":case"string":case"number":De=!0;break;case"object":switch(F.$$typeof){case n:case e:De=!0;break;case y:return De=F._init,W(De(F._payload),te,fe,ge,Ie)}}if(De)return Ie=Ie(F),De=ge===""?"."+Be(F,0):ge,me(Ie)?(fe="",De!=null&&(fe=De.replace(k,"$&/")+"/"),W(Ie,te,fe,"",function(Pe){return Pe})):Ie!=null&&(P(Ie)&&(Ie=L(Ie,fe+(Ie.key==null||F&&F.key===Ie.key?"":(""+Ie.key).replace(k,"$&/")+"/")+De)),te.push(Ie)),1;De=0;var et=ge===""?".":ge+":";if(me(F))for(var je=0;je<F.length;je++)ge=F[je],Me=et+Be(ge,je),De+=W(ge,te,fe,Me,Ie);else if(je=I(F),typeof je=="function")for(F=je.call(F),je=0;!(ge=F.next()).done;)ge=ge.value,Me=et+Be(ge,je++),De+=W(ge,te,fe,Me,Ie);else if(Me==="object"){if(typeof F.then=="function")return W(ht(F),te,fe,ge,Ie);throw te=String(F),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return De}function ue(F,te,fe){if(F==null)return F;var ge=[],Ie=0;return W(F,ge,"","",function(Me){return te.call(fe,Me,Ie++)}),ge}function le(F){if(F._status===-1){var te=F._result;te=te(),te.then(function(fe){(F._status===0||F._status===-1)&&(F._status=1,F._result=fe)},function(fe){(F._status===0||F._status===-1)&&(F._status=2,F._result=fe)}),F._status===-1&&(F._status=0,F._result=te)}if(F._status===1)return F._result.default;throw F._result}var Te=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},Ce={map:ue,forEach:function(F,te,fe){ue(F,function(){te.apply(this,arguments)},fe)},count:function(F){var te=0;return ue(F,function(){te++}),te},toArray:function(F){return ue(F,function(te){return te})||[]},only:function(F){if(!P(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Ve.Activity=T,Ve.Children=Ce,Ve.Component=K,Ve.Fragment=t,Ve.Profiler=r,Ve.PureComponent=j,Ve.StrictMode=i,Ve.Suspense=f,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(F){return R.H.useMemoCache(F)}},Ve.cache=function(F){return function(){return F.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(F,te,fe){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var ge=U({},F.props),Ie=F.key;if(te!=null)for(Me in te.key!==void 0&&(Ie=""+te.key),te)!M.call(te,Me)||Me==="key"||Me==="__self"||Me==="__source"||Me==="ref"&&te.ref===void 0||(ge[Me]=te[Me]);var Me=arguments.length-2;if(Me===1)ge.children=fe;else if(1<Me){for(var De=Array(Me),et=0;et<Me;et++)De[et]=arguments[et+2];ge.children=De}return D(F.type,Ie,ge)},Ve.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:a,_context:F},F},Ve.createElement=function(F,te,fe){var ge,Ie={},Me=null;if(te!=null)for(ge in te.key!==void 0&&(Me=""+te.key),te)M.call(te,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(Ie[ge]=te[ge]);var De=arguments.length-2;if(De===1)Ie.children=fe;else if(1<De){for(var et=Array(De),je=0;je<De;je++)et[je]=arguments[je+2];Ie.children=et}if(F&&F.defaultProps)for(ge in De=F.defaultProps,De)Ie[ge]===void 0&&(Ie[ge]=De[ge]);return D(F,Me,Ie)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(F){return{$$typeof:d,render:F}},Ve.isValidElement=P,Ve.lazy=function(F){return{$$typeof:y,_payload:{_status:-1,_result:F},_init:le}},Ve.memo=function(F,te){return{$$typeof:h,type:F,compare:te===void 0?null:te}},Ve.startTransition=function(F){var te=R.T,fe={};R.T=fe;try{var ge=F(),Ie=R.S;Ie!==null&&Ie(fe,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(ce,Te)}catch(Me){Te(Me)}finally{te!==null&&fe.types!==null&&(te.types=fe.types),R.T=te}},Ve.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ve.use=function(F){return R.H.use(F)},Ve.useActionState=function(F,te,fe){return R.H.useActionState(F,te,fe)},Ve.useCallback=function(F,te){return R.H.useCallback(F,te)},Ve.useContext=function(F){return R.H.useContext(F)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(F,te){return R.H.useDeferredValue(F,te)},Ve.useEffect=function(F,te){return R.H.useEffect(F,te)},Ve.useEffectEvent=function(F){return R.H.useEffectEvent(F)},Ve.useId=function(){return R.H.useId()},Ve.useImperativeHandle=function(F,te,fe){return R.H.useImperativeHandle(F,te,fe)},Ve.useInsertionEffect=function(F,te){return R.H.useInsertionEffect(F,te)},Ve.useLayoutEffect=function(F,te){return R.H.useLayoutEffect(F,te)},Ve.useMemo=function(F,te){return R.H.useMemo(F,te)},Ve.useOptimistic=function(F,te){return R.H.useOptimistic(F,te)},Ve.useReducer=function(F,te,fe){return R.H.useReducer(F,te,fe)},Ve.useRef=function(F){return R.H.useRef(F)},Ve.useState=function(F){return R.H.useState(F)},Ve.useSyncExternalStore=function(F,te,fe){return R.H.useSyncExternalStore(F,te,fe)},Ve.useTransition=function(){return R.H.useTransition()},Ve.version="19.2.0",Ve}var RS;function fy(){return RS||(RS=1,Ug.exports=u2()),Ug.exports}var X=fy();const c2=MI(X);var Og={exports:{}},tc={},Fg={exports:{}},qg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NS;function d2(){return NS||(NS=1,(function(n){function e(W,ue){var le=W.length;W.push(ue);e:for(;0<le;){var Te=le-1>>>1,Ce=W[Te];if(0<r(Ce,ue))W[Te]=ue,W[le]=Ce,le=Te;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var ue=W[0],le=W.pop();if(le!==ue){W[0]=le;e:for(var Te=0,Ce=W.length,F=Ce>>>1;Te<F;){var te=2*(Te+1)-1,fe=W[te],ge=te+1,Ie=W[ge];if(0>r(fe,le))ge<Ce&&0>r(Ie,fe)?(W[Te]=Ie,W[ge]=le,Te=ge):(W[Te]=fe,W[te]=le,Te=te);else if(ge<Ce&&0>r(Ie,le))W[Te]=Ie,W[ge]=le,Te=ge;else break e}}return ue}function r(W,ue){var le=W.sortIndex-ue.sortIndex;return le!==0?le:W.id-ue.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();n.unstable_now=function(){return l.now()-d}}var f=[],h=[],y=1,T=null,E=3,I=!1,N=!1,U=!1,O=!1,K=typeof setTimeout=="function"?setTimeout:null,Z=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;function ae(W){for(var ue=t(h);ue!==null;){if(ue.callback===null)i(h);else if(ue.startTime<=W)i(h),ue.sortIndex=ue.expirationTime,e(f,ue);else break;ue=t(h)}}function me(W){if(U=!1,ae(W),!N)if(t(f)!==null)N=!0,ce||(ce=!0,q());else{var ue=t(h);ue!==null&&ht(me,ue.startTime-W)}}var ce=!1,R=-1,M=5,D=-1;function L(){return O?!0:!(n.unstable_now()-D<M)}function P(){if(O=!1,ce){var W=n.unstable_now();D=W;var ue=!0;try{e:{N=!1,U&&(U=!1,Z(R),R=-1),I=!0;var le=E;try{t:{for(ae(W),T=t(f);T!==null&&!(T.expirationTime>W&&L());){var Te=T.callback;if(typeof Te=="function"){T.callback=null,E=T.priorityLevel;var Ce=Te(T.expirationTime<=W);if(W=n.unstable_now(),typeof Ce=="function"){T.callback=Ce,ae(W),ue=!0;break t}T===t(f)&&i(f),ae(W)}else i(f);T=t(f)}if(T!==null)ue=!0;else{var F=t(h);F!==null&&ht(me,F.startTime-W),ue=!1}}break e}finally{T=null,E=le,I=!1}ue=void 0}}finally{ue?q():ce=!1}}}var q;if(typeof j=="function")q=function(){j(P)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,Be=k.port2;k.port1.onmessage=P,q=function(){Be.postMessage(null)}}else q=function(){K(P,0)};function ht(W,ue){R=K(function(){W(n.unstable_now())},ue)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return E},n.unstable_next=function(W){switch(E){case 1:case 2:case 3:var ue=3;break;default:ue=E}var le=E;E=ue;try{return W()}finally{E=le}},n.unstable_requestPaint=function(){O=!0},n.unstable_runWithPriority=function(W,ue){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var le=E;E=W;try{return ue()}finally{E=le}},n.unstable_scheduleCallback=function(W,ue,le){var Te=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Te+le:Te):le=Te,W){case 1:var Ce=-1;break;case 2:Ce=250;break;case 5:Ce=1073741823;break;case 4:Ce=1e4;break;default:Ce=5e3}return Ce=le+Ce,W={id:y++,callback:ue,priorityLevel:W,startTime:le,expirationTime:Ce,sortIndex:-1},le>Te?(W.sortIndex=le,e(h,W),t(f)===null&&W===t(h)&&(U?(Z(R),R=-1):U=!0,ht(me,le-Te))):(W.sortIndex=Ce,e(f,W),N||I||(N=!0,ce||(ce=!0,q()))),W},n.unstable_shouldYield=L,n.unstable_wrapCallback=function(W){var ue=E;return function(){var le=E;E=ue;try{return W.apply(this,arguments)}finally{E=le}}}})(qg)),qg}var MS;function f2(){return MS||(MS=1,Fg.exports=d2()),Fg.exports}var Bg={exports:{}},wn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var DS;function h2(){if(DS)return wn;DS=1;var n=fy();function e(f){var h="https://react.dev/errors/"+f;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var y=2;y<arguments.length;y++)h+="&args[]="+encodeURIComponent(arguments[y])}return"Minified React error #"+f+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(f,h,y){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:f,containerInfo:h,implementation:y}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(f,h){if(f==="font")return"";if(typeof h=="string")return h==="use-credentials"?h:""}return wn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,wn.createPortal=function(f,h){var y=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)throw Error(e(299));return a(f,h,null,y)},wn.flushSync=function(f){var h=l.T,y=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=h,i.p=y,i.d.f()}},wn.preconnect=function(f,h){typeof f=="string"&&(h?(h=h.crossOrigin,h=typeof h=="string"?h==="use-credentials"?h:"":void 0):h=null,i.d.C(f,h))},wn.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},wn.preinit=function(f,h){if(typeof f=="string"&&h&&typeof h.as=="string"){var y=h.as,T=d(y,h.crossOrigin),E=typeof h.integrity=="string"?h.integrity:void 0,I=typeof h.fetchPriority=="string"?h.fetchPriority:void 0;y==="style"?i.d.S(f,typeof h.precedence=="string"?h.precedence:void 0,{crossOrigin:T,integrity:E,fetchPriority:I}):y==="script"&&i.d.X(f,{crossOrigin:T,integrity:E,fetchPriority:I,nonce:typeof h.nonce=="string"?h.nonce:void 0})}},wn.preinitModule=function(f,h){if(typeof f=="string")if(typeof h=="object"&&h!==null){if(h.as==null||h.as==="script"){var y=d(h.as,h.crossOrigin);i.d.M(f,{crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0})}}else h==null&&i.d.M(f)},wn.preload=function(f,h){if(typeof f=="string"&&typeof h=="object"&&h!==null&&typeof h.as=="string"){var y=h.as,T=d(y,h.crossOrigin);i.d.L(f,y,{crossOrigin:T,integrity:typeof h.integrity=="string"?h.integrity:void 0,nonce:typeof h.nonce=="string"?h.nonce:void 0,type:typeof h.type=="string"?h.type:void 0,fetchPriority:typeof h.fetchPriority=="string"?h.fetchPriority:void 0,referrerPolicy:typeof h.referrerPolicy=="string"?h.referrerPolicy:void 0,imageSrcSet:typeof h.imageSrcSet=="string"?h.imageSrcSet:void 0,imageSizes:typeof h.imageSizes=="string"?h.imageSizes:void 0,media:typeof h.media=="string"?h.media:void 0})}},wn.preloadModule=function(f,h){if(typeof f=="string")if(h){var y=d(h.as,h.crossOrigin);i.d.m(f,{as:typeof h.as=="string"&&h.as!=="script"?h.as:void 0,crossOrigin:y,integrity:typeof h.integrity=="string"?h.integrity:void 0})}else i.d.m(f)},wn.requestFormReset=function(f){i.d.r(f)},wn.unstable_batchedUpdates=function(f,h){return f(h)},wn.useFormState=function(f,h,y){return l.H.useFormState(f,h,y)},wn.useFormStatus=function(){return l.H.useHostTransitionStatus()},wn.version="19.2.0",wn}var kS;function p2(){if(kS)return Bg.exports;kS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Bg.exports=h2(),Bg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PS;function m2(){if(PS)return tc;PS=1;var n=f2(),e=fy(),t=p2();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function d(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function f(s){if(a(s)!==s)throw Error(i(188))}function h(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var u=s,c=o;;){var _=u.return;if(_===null)break;var v=_.alternate;if(v===null){if(c=_.return,c!==null){u=c;continue}break}if(_.child===v.child){for(v=_.child;v;){if(v===u)return f(_),s;if(v===c)return f(_),o;v=v.sibling}throw Error(i(188))}if(u.return!==c.return)u=_,c=v;else{for(var w=!1,x=_.child;x;){if(x===u){w=!0,u=_,c=v;break}if(x===c){w=!0,c=_,u=v;break}x=x.sibling}if(!w){for(x=v.child;x;){if(x===u){w=!0,u=v,c=_;break}if(x===c){w=!0,c=v,u=_;break}x=x.sibling}if(!w)throw Error(i(189))}}if(u.alternate!==c)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:o}function y(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=y(s),o!==null)return o;s=s.sibling}return null}var T=Object.assign,E=Symbol.for("react.element"),I=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),U=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),K=Symbol.for("react.profiler"),Z=Symbol.for("react.consumer"),j=Symbol.for("react.context"),ae=Symbol.for("react.forward_ref"),me=Symbol.for("react.suspense"),ce=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),L=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function q(s){return s===null||typeof s!="object"?null:(s=P&&s[P]||s["@@iterator"],typeof s=="function"?s:null)}var k=Symbol.for("react.client.reference");function Be(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===k?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case U:return"Fragment";case K:return"Profiler";case O:return"StrictMode";case me:return"Suspense";case ce:return"SuspenseList";case D:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case N:return"Portal";case j:return s.displayName||"Context";case Z:return(s._context.displayName||"Context")+".Consumer";case ae:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return o=s.displayName||null,o!==null?o:Be(s.type)||"Memo";case M:o=s._payload,s=s._init;try{return Be(s(o))}catch{}}return null}var ht=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Te=[],Ce=-1;function F(s){return{current:s}}function te(s){0>Ce||(s.current=Te[Ce],Te[Ce]=null,Ce--)}function fe(s,o){Ce++,Te[Ce]=s.current,s.current=o}var ge=F(null),Ie=F(null),Me=F(null),De=F(null);function et(s,o){switch(fe(Me,o),fe(Ie,s),fe(ge,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?JE(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=JE(o),s=WE(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}te(ge),fe(ge,s)}function je(){te(ge),te(Ie),te(Me)}function Pe(s){s.memoizedState!==null&&fe(De,s);var o=ge.current,u=WE(o,s.type);o!==u&&(fe(Ie,s),fe(ge,u))}function ot(s){Ie.current===s&&(te(ge),te(Ie)),De.current===s&&(te(De),Wu._currentValue=le)}var se,de;function xe(s){if(se===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);se=o&&o[1]||"",de=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+se+s+de}var Tt=!1;function Ct(s,o){if(!s||Tt)return"";Tt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(o){var re=function(){throw Error()};if(Object.defineProperty(re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(re,[])}catch(Q){var $=Q}Reflect.construct(s,[],re)}else{try{re.call()}catch(Q){$=Q}s.call(re.prototype)}}else{try{throw Error()}catch(Q){$=Q}(re=s())&&typeof re.catch=="function"&&re.catch(function(){})}}catch(Q){if(Q&&$&&typeof Q.stack=="string")return[Q.stack,$.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var _=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");_&&_.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var v=c.DetermineComponentFrameRoot(),w=v[0],x=v[1];if(w&&x){var V=w.split(`
`),Y=x.split(`
`);for(_=c=0;c<V.length&&!V[c].includes("DetermineComponentFrameRoot");)c++;for(;_<Y.length&&!Y[_].includes("DetermineComponentFrameRoot");)_++;if(c===V.length||_===Y.length)for(c=V.length-1,_=Y.length-1;1<=c&&0<=_&&V[c]!==Y[_];)_--;for(;1<=c&&0<=_;c--,_--)if(V[c]!==Y[_]){if(c!==1||_!==1)do if(c--,_--,0>_||V[c]!==Y[_]){var ee=`
`+V[c].replace(" at new "," at ");return s.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",s.displayName)),ee}while(1<=c&&0<=_);break}}}finally{Tt=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?xe(u):""}function Pt(s,o){switch(s.tag){case 26:case 27:case 5:return xe(s.type);case 16:return xe("Lazy");case 13:return s.child!==o&&o!==null?xe("Suspense Fallback"):xe("Suspense");case 19:return xe("SuspenseList");case 0:case 15:return Ct(s.type,!1);case 11:return Ct(s.type.render,!1);case 1:return Ct(s.type,!0);case 31:return xe("Activity");default:return""}}function ri(s){try{var o="",u=null;do o+=Pt(s,u),u=s,s=s.return;while(s);return o}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var pt=Object.prototype.hasOwnProperty,Et=n.unstable_scheduleCallback,$n=n.unstable_cancelCallback,po=n.unstable_shouldYield,ad=n.unstable_requestPaint,Nn=n.unstable_now,mo=n.unstable_getCurrentPriorityLevel,Zl=n.unstable_ImmediatePriority,eu=n.unstable_UserBlockingPriority,sr=n.unstable_NormalPriority,Fp=n.unstable_LowPriority,ld=n.unstable_IdlePriority,ud=n.log,cd=n.unstable_setDisableYieldValue,wi=null,pn=null;function oi(s){if(typeof ud=="function"&&cd(s),pn&&typeof pn.setStrictMode=="function")try{pn.setStrictMode(wi,s)}catch{}}var qt=Math.clz32?Math.clz32:fd,dd=Math.log,ya=Math.LN2;function fd(s){return s>>>=0,s===0?32:31-(dd(s)/ya|0)|0}var $i=256,go=262144,Yt=4194304;function ji(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Ji(s,o,u){var c=s.pendingLanes;if(c===0)return 0;var _=0,v=s.suspendedLanes,w=s.pingedLanes;s=s.warmLanes;var x=c&134217727;return x!==0?(c=x&~v,c!==0?_=ji(c):(w&=x,w!==0?_=ji(w):u||(u=x&~s,u!==0&&(_=ji(u))))):(x=c&~v,x!==0?_=ji(x):w!==0?_=ji(w):u||(u=c&~s,u!==0&&(_=ji(u)))),_===0?0:o!==0&&o!==_&&(o&v)===0&&(v=_&-_,u=o&-o,v>=u||v===32&&(u&4194048)!==0)?o:_}function Ai(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function qp(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hd(){var s=Yt;return Yt<<=1,(Yt&62914560)===0&&(Yt=4194304),s}function Wi(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function _o(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Bp(s,o,u,c,_,v){var w=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var x=s.entanglements,V=s.expirationTimes,Y=s.hiddenUpdates;for(u=w&~u;0<u;){var ee=31-qt(u),re=1<<ee;x[ee]=0,V[ee]=-1;var $=Y[ee];if($!==null)for(Y[ee]=null,ee=0;ee<$.length;ee++){var Q=$[ee];Q!==null&&(Q.lane&=-536870913)}u&=~re}c!==0&&yo(s,c,0),v!==0&&_===0&&s.tag!==0&&(s.suspendedLanes|=v&~(w&~o))}function yo(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var c=31-qt(o);s.entangledLanes|=o,s.entanglements[c]=s.entanglements[c]|1073741824|u&261930}function tu(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var c=31-qt(u),_=1<<c;_&o|s[c]&o&&(s[c]|=o),u&=~_}}function nu(s,o){var u=o&-o;return u=(u&42)!==0?1:vo(u),(u&(s.suspendedLanes|o))!==0?0:u}function vo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function ws(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function pd(){var s=ue.p;return s!==0?s:(s=window.event,s===void 0?32:vS(s.type))}function Ii(s,o){var u=ue.p;try{return ue.p=s,o()}finally{ue.p=u}}var xi=Math.random().toString(36).slice(2),Kt="__reactFiber$"+xi,ln="__reactProps$"+xi,Qi="__reactContainer$"+xi,va="__reactEvents$"+xi,Gp="__reactListeners$"+xi,md="__reactHandles$"+xi,gd="__reactResources$"+xi,Xi="__reactMarker$"+xi;function Ta(s){delete s[Kt],delete s[ln],delete s[va],delete s[Gp],delete s[md]}function Zi(s){var o=s[Kt];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Qi]||u[Kt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=iS(s);s!==null;){if(u=s[Kt])return u;s=iS(s)}return o}s=u,u=s.parentNode}return null}function ai(s){if(s=s[Kt]||s[Qi]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function jn(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function es(s){var o=s[gd];return o||(o=s[gd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function $t(s){s[Xi]=!0}var iu=new Set,su={};function ts(s,o){ns(s,o),ns(s+"Capture",o)}function ns(s,o){for(su[s]=o,s=0;s<o.length;s++)iu.add(o[s])}var ru=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ou={},au={};function _d(s){return pt.call(au,s)?!0:pt.call(ou,s)?!1:ru.test(s)?au[s]=!0:(ou[s]=!0,!1)}function Ea(s,o,u){if(_d(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var c=o.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function Jn(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function jt(s,o,u,c){if(c===null)s.removeAttribute(u);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+c)}}function un(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function rr(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function lu(s,o,u){var c=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var _=c.get,v=c.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return _.call(this)},set:function(w){u=""+w,v.call(this,w)}}),Object.defineProperty(s,o,{enumerable:c.enumerable}),{getValue:function(){return u},setValue:function(w){u=""+w},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function ct(s){if(!s._valueTracker){var o=rr(s)?"checked":"value";s._valueTracker=lu(s,o,""+s[o])}}function To(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),c="";return s&&(c=rr(s)?s.checked?"true":"false":s.value),s=c,s!==u?(o.setValue(s),!0):!1}function is(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Eo=/[\n"\\]/g;function Vn(s){return s.replace(Eo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Sa(s,o,u,c,_,v,w,x){s.name="",w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?s.type=w:s.removeAttribute("type"),o!=null?w==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+un(o)):s.value!==""+un(o)&&(s.value=""+un(o)):w!=="submit"&&w!=="reset"||s.removeAttribute("value"),o!=null?uu(s,w,un(o)):u!=null?uu(s,w,un(u)):c!=null&&s.removeAttribute("value"),_==null&&v!=null&&(s.defaultChecked=!!v),_!=null&&(s.checked=_&&typeof _!="function"&&typeof _!="symbol"),x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"?s.name=""+un(x):s.removeAttribute("name")}function yd(s,o,u,c,_,v,w,x){if(v!=null&&typeof v!="function"&&typeof v!="symbol"&&typeof v!="boolean"&&(s.type=v),o!=null||u!=null){if(!(v!=="submit"&&v!=="reset"||o!=null)){ct(s);return}u=u!=null?""+un(u):"",o=o!=null?""+un(o):u,x||o===s.value||(s.value=o),s.defaultValue=o}c=c??_,c=typeof c!="function"&&typeof c!="symbol"&&!!c,s.checked=x?s.checked:!!c,s.defaultChecked=!!c,w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(s.name=w),ct(s)}function uu(s,o,u){o==="number"&&is(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function or(s,o,u,c){if(s=s.options,o){o={};for(var _=0;_<u.length;_++)o["$"+u[_]]=!0;for(u=0;u<s.length;u++)_=o.hasOwnProperty("$"+s[u].value),s[u].selected!==_&&(s[u].selected=_),_&&c&&(s[u].defaultSelected=!0)}else{for(u=""+un(u),o=null,_=0;_<s.length;_++){if(s[_].value===u){s[_].selected=!0,c&&(s[_].defaultSelected=!0);return}o!==null||s[_].disabled||(o=s[_])}o!==null&&(o.selected=!0)}}function vd(s,o,u){if(o!=null&&(o=""+un(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+un(u):""}function ar(s,o,u,c){if(o==null){if(c!=null){if(u!=null)throw Error(i(92));if(ht(c)){if(1<c.length)throw Error(i(93));c=c[0]}u=c}u==null&&(u=""),o=u}u=un(o),s.defaultValue=u,c=s.textContent,c===u&&c!==""&&c!==null&&(s.value=c),ct(s)}function Un(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Td=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cu(s,o,u){var c=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?c?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":c?s.setProperty(o,u):typeof u!="number"||u===0||Td.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function du(s,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,u!=null){for(var c in u)!u.hasOwnProperty(c)||o!=null&&o.hasOwnProperty(c)||(c.indexOf("--")===0?s.setProperty(c,""):c==="float"?s.cssFloat="":s[c]="");for(var _ in o)c=o[_],o.hasOwnProperty(_)&&u[_]!==c&&cu(s,_,c)}else for(var v in o)o.hasOwnProperty(v)&&cu(s,v,o[v])}function Ca(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ed=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),lr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function wa(s){return lr.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function bi(){}var fu=null;function li(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ur=null,ss=null;function So(s){var o=ai(s);if(o&&(s=o.stateNode)){var u=s[ln]||null;e:switch(s=o.stateNode,o.type){case"input":if(Sa(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Vn(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var c=u[o];if(c!==s&&c.form===s.form){var _=c[ln]||null;if(!_)throw Error(i(90));Sa(c,_.value,_.defaultValue,_.defaultValue,_.checked,_.defaultChecked,_.type,_.name)}}for(o=0;o<u.length;o++)c=u[o],c.form===s.form&&To(c)}break e;case"textarea":vd(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&or(s,!!u.multiple,o,!1)}}}var Aa=!1;function cr(s,o,u){if(Aa)return s(o,u);Aa=!0;try{var c=s(o);return c}finally{if(Aa=!1,(ur!==null||ss!==null)&&(mf(),ur&&(o=ur,s=ss,ss=ur=null,So(o),s)))for(o=0;o<s.length;o++)So(s[o])}}function Ri(s,o){var u=s.stateNode;if(u===null)return null;var c=u[ln]||null;if(c===null)return null;u=c[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(s=s.type,c=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!c;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Co=!1;if(ui)try{var mt={};Object.defineProperty(mt,"passive",{get:function(){Co=!0}}),window.addEventListener("test",mt,mt),window.removeEventListener("test",mt,mt)}catch{Co=!1}var rs=null,hu=null,wo=null;function pu(){if(wo)return wo;var s,o=hu,u=o.length,c,_="value"in rs?rs.value:rs.textContent,v=_.length;for(s=0;s<u&&o[s]===_[s];s++);var w=u-s;for(c=1;c<=w&&o[u-c]===_[v-c];c++);return wo=_.slice(s,1<c?1-c:void 0)}function Ao(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function As(){return!0}function Ni(){return!1}function mn(s){function o(u,c,_,v,w){this._reactName=u,this._targetInst=_,this.type=c,this.nativeEvent=v,this.target=w,this.currentTarget=null;for(var x in s)s.hasOwnProperty(x)&&(u=s[x],this[x]=u?u(v):v[x]);return this.isDefaultPrevented=(v.defaultPrevented!=null?v.defaultPrevented:v.returnValue===!1)?As:Ni,this.isPropagationStopped=Ni,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=As)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=As)},persist:function(){},isPersistent:As}),o}var Is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},os=mn(Is),dr=T({},Is,{view:0,detail:0}),mu=mn(dr),fr,Ia,as,xa=T({},dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hr,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==as&&(as&&s.type==="mousemove"?(fr=s.screenX-as.screenX,Ia=s.screenY-as.screenY):Ia=fr=0,as=s),fr)},movementY:function(s){return"movementY"in s?s.movementY:Ia}}),gu=mn(xa),Io=T({},xa,{dataTransfer:0}),Sd=mn(Io),Cd=T({},dr,{relatedTarget:0}),xo=mn(Cd),_u=T({},Is,{animationName:0,elapsedTime:0,pseudoElement:0}),wd=mn(_u),ba=T({},Is,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Ad=mn(ba),Id=T({},Is,{data:0}),ls=mn(Id),xd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Rd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nd(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Rd[s])?!!o[s]:!1}function hr(){return Nd}var Mn=T({},dr,{key:function(s){if(s.key){var o=xd[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=Ao(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?bd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hr,charCode:function(s){return s.type==="keypress"?Ao(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ao(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Md=mn(Mn),Dd=T({},xa,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xs=mn(Dd),m=T({},dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hr}),C=mn(m),A=T({},Is,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=mn(A),H=T({},xa,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),J=mn(H),pe=T({},Is,{newState:0,oldState:0}),Oe=mn(pe),Bt=[9,13,27,32],at=ui&&"CompositionEvent"in window,Dt=null;ui&&"documentMode"in document&&(Dt=document.documentMode);var ci=ui&&"TextEvent"in window&&!Dt,us=ui&&(!at||Dt&&8<Dt&&11>=Dt),Mi=" ",Di=!1;function bo(s,o){switch(s){case"keyup":return Bt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ra(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Na=!1;function M1(s,o){switch(s){case"compositionend":return Ra(o);case"keypress":return o.which!==32?null:(Di=!0,Mi);case"textInput":return s=o.data,s===Mi&&Di?null:s;default:return null}}function D1(s,o){if(Na)return s==="compositionend"||!at&&bo(s,o)?(s=pu(),wo=hu=rs=null,Na=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return us&&o.locale!=="ko"?null:o.data;default:return null}}var k1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o0(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!k1[s.type]:o==="textarea"}function a0(s,o,u,c){ur?ss?ss.push(c):ss=[c]:ur=c,o=Sf(o,"onChange"),0<o.length&&(u=new os("onChange","change",null,u,c),s.push({event:u,listeners:o}))}var yu=null,vu=null;function P1(s){HE(s,0)}function kd(s){var o=jn(s);if(To(o))return s}function l0(s,o){if(s==="change")return o}var u0=!1;if(ui){var Hp;if(ui){var zp="oninput"in document;if(!zp){var c0=document.createElement("div");c0.setAttribute("oninput","return;"),zp=typeof c0.oninput=="function"}Hp=zp}else Hp=!1;u0=Hp&&(!document.documentMode||9<document.documentMode)}function d0(){yu&&(yu.detachEvent("onpropertychange",f0),vu=yu=null)}function f0(s){if(s.propertyName==="value"&&kd(vu)){var o=[];a0(o,vu,s,li(s)),cr(P1,o)}}function L1(s,o,u){s==="focusin"?(d0(),yu=o,vu=u,yu.attachEvent("onpropertychange",f0)):s==="focusout"&&d0()}function V1(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return kd(vu)}function U1(s,o){if(s==="click")return kd(o)}function O1(s,o){if(s==="input"||s==="change")return kd(o)}function F1(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Wn=typeof Object.is=="function"?Object.is:F1;function Tu(s,o){if(Wn(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),c=Object.keys(o);if(u.length!==c.length)return!1;for(c=0;c<u.length;c++){var _=u[c];if(!pt.call(o,_)||!Wn(s[_],o[_]))return!1}return!0}function h0(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function p0(s,o){var u=h0(s);s=0;for(var c;u;){if(u.nodeType===3){if(c=s+u.textContent.length,s<=o&&c>=o)return{node:u,offset:o-s};s=c}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=h0(u)}}function m0(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?m0(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function g0(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=is(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=is(s.document)}return o}function Yp(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var q1=ui&&"documentMode"in document&&11>=document.documentMode,Ma=null,Kp=null,Eu=null,$p=!1;function _0(s,o,u){var c=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;$p||Ma==null||Ma!==is(c)||(c=Ma,"selectionStart"in c&&Yp(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Eu&&Tu(Eu,c)||(Eu=c,c=Sf(Kp,"onSelect"),0<c.length&&(o=new os("onSelect","select",null,o,u),s.push({event:o,listeners:c}),o.target=Ma)))}function Ro(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var Da={animationend:Ro("Animation","AnimationEnd"),animationiteration:Ro("Animation","AnimationIteration"),animationstart:Ro("Animation","AnimationStart"),transitionrun:Ro("Transition","TransitionRun"),transitionstart:Ro("Transition","TransitionStart"),transitioncancel:Ro("Transition","TransitionCancel"),transitionend:Ro("Transition","TransitionEnd")},jp={},y0={};ui&&(y0=document.createElement("div").style,"AnimationEvent"in window||(delete Da.animationend.animation,delete Da.animationiteration.animation,delete Da.animationstart.animation),"TransitionEvent"in window||delete Da.transitionend.transition);function No(s){if(jp[s])return jp[s];if(!Da[s])return s;var o=Da[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in y0)return jp[s]=o[u];return s}var v0=No("animationend"),T0=No("animationiteration"),E0=No("animationstart"),B1=No("transitionrun"),G1=No("transitionstart"),H1=No("transitioncancel"),S0=No("transitionend"),C0=new Map,Jp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Jp.push("scrollEnd");function ki(s,o){C0.set(s,o),ts(o,[s])}var Pd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},di=[],ka=0,Wp=0;function Ld(){for(var s=ka,o=Wp=ka=0;o<s;){var u=di[o];di[o++]=null;var c=di[o];di[o++]=null;var _=di[o];di[o++]=null;var v=di[o];if(di[o++]=null,c!==null&&_!==null){var w=c.pending;w===null?_.next=_:(_.next=w.next,w.next=_),c.pending=_}v!==0&&w0(u,_,v)}}function Vd(s,o,u,c){di[ka++]=s,di[ka++]=o,di[ka++]=u,di[ka++]=c,Wp|=c,s.lanes|=c,s=s.alternate,s!==null&&(s.lanes|=c)}function Qp(s,o,u,c){return Vd(s,o,u,c),Ud(s)}function Mo(s,o){return Vd(s,null,null,o),Ud(s)}function w0(s,o,u){s.lanes|=u;var c=s.alternate;c!==null&&(c.lanes|=u);for(var _=!1,v=s.return;v!==null;)v.childLanes|=u,c=v.alternate,c!==null&&(c.childLanes|=u),v.tag===22&&(s=v.stateNode,s===null||s._visibility&1||(_=!0)),s=v,v=v.return;return s.tag===3?(v=s.stateNode,_&&o!==null&&(_=31-qt(u),s=v.hiddenUpdates,c=s[_],c===null?s[_]=[o]:c.push(o),o.lane=u|536870912),v):null}function Ud(s){if(50<Hu)throw Hu=0,og=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Pa={};function z1(s,o,u,c){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qn(s,o,u,c){return new z1(s,o,u,c)}function Xp(s){return s=s.prototype,!(!s||!s.isReactComponent)}function bs(s,o){var u=s.alternate;return u===null?(u=Qn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function A0(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function Od(s,o,u,c,_,v){var w=0;if(c=s,typeof s=="function")Xp(s)&&(w=1);else if(typeof s=="string")w=JM(s,u,ge.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case D:return s=Qn(31,u,o,_),s.elementType=D,s.lanes=v,s;case U:return Do(u.children,_,v,o);case O:w=8,_|=24;break;case K:return s=Qn(12,u,o,_|2),s.elementType=K,s.lanes=v,s;case me:return s=Qn(13,u,o,_),s.elementType=me,s.lanes=v,s;case ce:return s=Qn(19,u,o,_),s.elementType=ce,s.lanes=v,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case j:w=10;break e;case Z:w=9;break e;case ae:w=11;break e;case R:w=14;break e;case M:w=16,c=null;break e}w=29,u=Error(i(130,s===null?"null":typeof s,"")),c=null}return o=Qn(w,u,o,_),o.elementType=s,o.type=c,o.lanes=v,o}function Do(s,o,u,c){return s=Qn(7,s,c,o),s.lanes=u,s}function Zp(s,o,u){return s=Qn(6,s,null,o),s.lanes=u,s}function I0(s){var o=Qn(18,null,null,0);return o.stateNode=s,o}function em(s,o,u){return o=Qn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var x0=new WeakMap;function fi(s,o){if(typeof s=="object"&&s!==null){var u=x0.get(s);return u!==void 0?u:(o={value:s,source:o,stack:ri(o)},x0.set(s,o),o)}return{value:s,source:o,stack:ri(o)}}var La=[],Va=0,Fd=null,Su=0,hi=[],pi=0,pr=null,cs=1,ds="";function Rs(s,o){La[Va++]=Su,La[Va++]=Fd,Fd=s,Su=o}function b0(s,o,u){hi[pi++]=cs,hi[pi++]=ds,hi[pi++]=pr,pr=s;var c=cs;s=ds;var _=32-qt(c)-1;c&=~(1<<_),u+=1;var v=32-qt(o)+_;if(30<v){var w=_-_%5;v=(c&(1<<w)-1).toString(32),c>>=w,_-=w,cs=1<<32-qt(o)+_|u<<_|c,ds=v+s}else cs=1<<v|u<<_|c,ds=s}function tm(s){s.return!==null&&(Rs(s,1),b0(s,1,0))}function nm(s){for(;s===Fd;)Fd=La[--Va],La[Va]=null,Su=La[--Va],La[Va]=null;for(;s===pr;)pr=hi[--pi],hi[pi]=null,ds=hi[--pi],hi[pi]=null,cs=hi[--pi],hi[pi]=null}function R0(s,o){hi[pi++]=cs,hi[pi++]=ds,hi[pi++]=pr,cs=o.id,ds=o.overflow,pr=s}var gn=null,bt=null,Ze=!1,mr=null,mi=!1,im=Error(i(519));function gr(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Cu(fi(o,s)),im}function N0(s){var o=s.stateNode,u=s.type,c=s.memoizedProps;switch(o[Kt]=s,o[ln]=c,u){case"dialog":Ye("cancel",o),Ye("close",o);break;case"iframe":case"object":case"embed":Ye("load",o);break;case"video":case"audio":for(u=0;u<Yu.length;u++)Ye(Yu[u],o);break;case"source":Ye("error",o);break;case"img":case"image":case"link":Ye("error",o),Ye("load",o);break;case"details":Ye("toggle",o);break;case"input":Ye("invalid",o),yd(o,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":Ye("invalid",o);break;case"textarea":Ye("invalid",o),ar(o,c.value,c.defaultValue,c.children)}u=c.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||c.suppressHydrationWarning===!0||$E(o.textContent,u)?(c.popover!=null&&(Ye("beforetoggle",o),Ye("toggle",o)),c.onScroll!=null&&Ye("scroll",o),c.onScrollEnd!=null&&Ye("scrollend",o),c.onClick!=null&&(o.onclick=bi),o=!0):o=!1,o||gr(s,!0)}function M0(s){for(gn=s.return;gn;)switch(gn.tag){case 5:case 31:case 13:mi=!1;return;case 27:case 3:mi=!0;return;default:gn=gn.return}}function Ua(s){if(s!==gn)return!1;if(!Ze)return M0(s),Ze=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||Eg(s.type,s.memoizedProps)),u=!u),u&&bt&&gr(s),M0(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));bt=nS(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));bt=nS(s)}else o===27?(o=bt,Nr(s.type)?(s=Ig,Ig=null,bt=s):bt=o):bt=gn?_i(s.stateNode.nextSibling):null;return!0}function ko(){bt=gn=null,Ze=!1}function sm(){var s=mr;return s!==null&&(Bn===null?Bn=s:Bn.push.apply(Bn,s),mr=null),s}function Cu(s){mr===null?mr=[s]:mr.push(s)}var rm=F(null),Po=null,Ns=null;function _r(s,o,u){fe(rm,o._currentValue),o._currentValue=u}function Ms(s){s._currentValue=rm.current,te(rm)}function om(s,o,u){for(;s!==null;){var c=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,c!==null&&(c.childLanes|=o)):c!==null&&(c.childLanes&o)!==o&&(c.childLanes|=o),s===u)break;s=s.return}}function am(s,o,u,c){var _=s.child;for(_!==null&&(_.return=s);_!==null;){var v=_.dependencies;if(v!==null){var w=_.child;v=v.firstContext;e:for(;v!==null;){var x=v;v=_;for(var V=0;V<o.length;V++)if(x.context===o[V]){v.lanes|=u,x=v.alternate,x!==null&&(x.lanes|=u),om(v.return,u,s),c||(w=null);break e}v=x.next}}else if(_.tag===18){if(w=_.return,w===null)throw Error(i(341));w.lanes|=u,v=w.alternate,v!==null&&(v.lanes|=u),om(w,u,s),w=null}else w=_.child;if(w!==null)w.return=_;else for(w=_;w!==null;){if(w===s){w=null;break}if(_=w.sibling,_!==null){_.return=w.return,w=_;break}w=w.return}_=w}}function Oa(s,o,u,c){s=null;for(var _=o,v=!1;_!==null;){if(!v){if((_.flags&524288)!==0)v=!0;else if((_.flags&262144)!==0)break}if(_.tag===10){var w=_.alternate;if(w===null)throw Error(i(387));if(w=w.memoizedProps,w!==null){var x=_.type;Wn(_.pendingProps.value,w.value)||(s!==null?s.push(x):s=[x])}}else if(_===De.current){if(w=_.alternate,w===null)throw Error(i(387));w.memoizedState.memoizedState!==_.memoizedState.memoizedState&&(s!==null?s.push(Wu):s=[Wu])}_=_.return}s!==null&&am(o,s,u,c),o.flags|=262144}function qd(s){for(s=s.firstContext;s!==null;){if(!Wn(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Lo(s){Po=s,Ns=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function _n(s){return D0(Po,s)}function Bd(s,o){return Po===null&&Lo(s),D0(s,o)}function D0(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Ns===null){if(s===null)throw Error(i(308));Ns=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Ns=Ns.next=o;return u}var Y1=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,c){s.push(c)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},K1=n.unstable_scheduleCallback,$1=n.unstable_NormalPriority,Jt={$$typeof:j,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lm(){return{controller:new Y1,data:new Map,refCount:0}}function wu(s){s.refCount--,s.refCount===0&&K1($1,function(){s.controller.abort()})}var Au=null,um=0,Fa=0,qa=null;function j1(s,o){if(Au===null){var u=Au=[];um=0,Fa=fg(),qa={status:"pending",value:void 0,then:function(c){u.push(c)}}}return um++,o.then(k0,k0),o}function k0(){if(--um===0&&Au!==null){qa!==null&&(qa.status="fulfilled");var s=Au;Au=null,Fa=0,qa=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function J1(s,o){var u=[],c={status:"pending",value:null,reason:null,then:function(_){u.push(_)}};return s.then(function(){c.status="fulfilled",c.value=o;for(var _=0;_<u.length;_++)(0,u[_])(o)},function(_){for(c.status="rejected",c.reason=_,_=0;_<u.length;_++)(0,u[_])(void 0)}),c}var P0=W.S;W.S=function(s,o){_E=Nn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&j1(s,o),P0!==null&&P0(s,o)};var Vo=F(null);function cm(){var s=Vo.current;return s!==null?s:St.pooledCache}function Gd(s,o){o===null?fe(Vo,Vo.current):fe(Vo,o.pool)}function L0(){var s=cm();return s===null?null:{parent:Jt._currentValue,pool:s}}var Ba=Error(i(460)),dm=Error(i(474)),Hd=Error(i(542)),zd={then:function(){}};function V0(s){return s=s.status,s==="fulfilled"||s==="rejected"}function U0(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(bi,bi),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,F0(s),s;default:if(typeof o.status=="string")o.then(bi,bi);else{if(s=St,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(c){if(o.status==="pending"){var _=o;_.status="fulfilled",_.value=c}},function(c){if(o.status==="pending"){var _=o;_.status="rejected",_.reason=c}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,F0(s),s}throw Oo=o,Ba}}function Uo(s){try{var o=s._init;return o(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Oo=u,Ba):u}}var Oo=null;function O0(){if(Oo===null)throw Error(i(459));var s=Oo;return Oo=null,s}function F0(s){if(s===Ba||s===Hd)throw Error(i(483))}var Ga=null,Iu=0;function Yd(s){var o=Iu;return Iu+=1,Ga===null&&(Ga=[]),U0(Ga,s,o)}function xu(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function Kd(s,o){throw o.$$typeof===E?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function q0(s){function o(G,B){if(s){var z=G.deletions;z===null?(G.deletions=[B],G.flags|=16):z.push(B)}}function u(G,B){if(!s)return null;for(;B!==null;)o(G,B),B=B.sibling;return null}function c(G){for(var B=new Map;G!==null;)G.key!==null?B.set(G.key,G):B.set(G.index,G),G=G.sibling;return B}function _(G,B){return G=bs(G,B),G.index=0,G.sibling=null,G}function v(G,B,z){return G.index=z,s?(z=G.alternate,z!==null?(z=z.index,z<B?(G.flags|=67108866,B):z):(G.flags|=67108866,B)):(G.flags|=1048576,B)}function w(G){return s&&G.alternate===null&&(G.flags|=67108866),G}function x(G,B,z,ne){return B===null||B.tag!==6?(B=Zp(z,G.mode,ne),B.return=G,B):(B=_(B,z),B.return=G,B)}function V(G,B,z,ne){var we=z.type;return we===U?ee(G,B,z.props.children,ne,z.key):B!==null&&(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===M&&Uo(we)===B.type)?(B=_(B,z.props),xu(B,z),B.return=G,B):(B=Od(z.type,z.key,z.props,null,G.mode,ne),xu(B,z),B.return=G,B)}function Y(G,B,z,ne){return B===null||B.tag!==4||B.stateNode.containerInfo!==z.containerInfo||B.stateNode.implementation!==z.implementation?(B=em(z,G.mode,ne),B.return=G,B):(B=_(B,z.children||[]),B.return=G,B)}function ee(G,B,z,ne,we){return B===null||B.tag!==7?(B=Do(z,G.mode,ne,we),B.return=G,B):(B=_(B,z),B.return=G,B)}function re(G,B,z){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Zp(""+B,G.mode,z),B.return=G,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case I:return z=Od(B.type,B.key,B.props,null,G.mode,z),xu(z,B),z.return=G,z;case N:return B=em(B,G.mode,z),B.return=G,B;case M:return B=Uo(B),re(G,B,z)}if(ht(B)||q(B))return B=Do(B,G.mode,z,null),B.return=G,B;if(typeof B.then=="function")return re(G,Yd(B),z);if(B.$$typeof===j)return re(G,Bd(G,B),z);Kd(G,B)}return null}function $(G,B,z,ne){var we=B!==null?B.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return we!==null?null:x(G,B,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===we?V(G,B,z,ne):null;case N:return z.key===we?Y(G,B,z,ne):null;case M:return z=Uo(z),$(G,B,z,ne)}if(ht(z)||q(z))return we!==null?null:ee(G,B,z,ne,null);if(typeof z.then=="function")return $(G,B,Yd(z),ne);if(z.$$typeof===j)return $(G,B,Bd(G,z),ne);Kd(G,z)}return null}function Q(G,B,z,ne,we){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return G=G.get(z)||null,x(B,G,""+ne,we);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case I:return G=G.get(ne.key===null?z:ne.key)||null,V(B,G,ne,we);case N:return G=G.get(ne.key===null?z:ne.key)||null,Y(B,G,ne,we);case M:return ne=Uo(ne),Q(G,B,z,ne,we)}if(ht(ne)||q(ne))return G=G.get(z)||null,ee(B,G,ne,we,null);if(typeof ne.then=="function")return Q(G,B,z,Yd(ne),we);if(ne.$$typeof===j)return Q(G,B,z,Bd(B,ne),we);Kd(B,ne)}return null}function Ee(G,B,z,ne){for(var we=null,nt=null,Se=B,qe=B=0,We=null;Se!==null&&qe<z.length;qe++){Se.index>qe?(We=Se,Se=null):We=Se.sibling;var it=$(G,Se,z[qe],ne);if(it===null){Se===null&&(Se=We);break}s&&Se&&it.alternate===null&&o(G,Se),B=v(it,B,qe),nt===null?we=it:nt.sibling=it,nt=it,Se=We}if(qe===z.length)return u(G,Se),Ze&&Rs(G,qe),we;if(Se===null){for(;qe<z.length;qe++)Se=re(G,z[qe],ne),Se!==null&&(B=v(Se,B,qe),nt===null?we=Se:nt.sibling=Se,nt=Se);return Ze&&Rs(G,qe),we}for(Se=c(Se);qe<z.length;qe++)We=Q(Se,G,qe,z[qe],ne),We!==null&&(s&&We.alternate!==null&&Se.delete(We.key===null?qe:We.key),B=v(We,B,qe),nt===null?we=We:nt.sibling=We,nt=We);return s&&Se.forEach(function(Lr){return o(G,Lr)}),Ze&&Rs(G,qe),we}function be(G,B,z,ne){if(z==null)throw Error(i(151));for(var we=null,nt=null,Se=B,qe=B=0,We=null,it=z.next();Se!==null&&!it.done;qe++,it=z.next()){Se.index>qe?(We=Se,Se=null):We=Se.sibling;var Lr=$(G,Se,it.value,ne);if(Lr===null){Se===null&&(Se=We);break}s&&Se&&Lr.alternate===null&&o(G,Se),B=v(Lr,B,qe),nt===null?we=Lr:nt.sibling=Lr,nt=Lr,Se=We}if(it.done)return u(G,Se),Ze&&Rs(G,qe),we;if(Se===null){for(;!it.done;qe++,it=z.next())it=re(G,it.value,ne),it!==null&&(B=v(it,B,qe),nt===null?we=it:nt.sibling=it,nt=it);return Ze&&Rs(G,qe),we}for(Se=c(Se);!it.done;qe++,it=z.next())it=Q(Se,G,qe,it.value,ne),it!==null&&(s&&it.alternate!==null&&Se.delete(it.key===null?qe:it.key),B=v(it,B,qe),nt===null?we=it:nt.sibling=it,nt=it);return s&&Se.forEach(function(o2){return o(G,o2)}),Ze&&Rs(G,qe),we}function yt(G,B,z,ne){if(typeof z=="object"&&z!==null&&z.type===U&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var we=z.key;B!==null;){if(B.key===we){if(we=z.type,we===U){if(B.tag===7){u(G,B.sibling),ne=_(B,z.props.children),ne.return=G,G=ne;break e}}else if(B.elementType===we||typeof we=="object"&&we!==null&&we.$$typeof===M&&Uo(we)===B.type){u(G,B.sibling),ne=_(B,z.props),xu(ne,z),ne.return=G,G=ne;break e}u(G,B);break}else o(G,B);B=B.sibling}z.type===U?(ne=Do(z.props.children,G.mode,ne,z.key),ne.return=G,G=ne):(ne=Od(z.type,z.key,z.props,null,G.mode,ne),xu(ne,z),ne.return=G,G=ne)}return w(G);case N:e:{for(we=z.key;B!==null;){if(B.key===we)if(B.tag===4&&B.stateNode.containerInfo===z.containerInfo&&B.stateNode.implementation===z.implementation){u(G,B.sibling),ne=_(B,z.children||[]),ne.return=G,G=ne;break e}else{u(G,B);break}else o(G,B);B=B.sibling}ne=em(z,G.mode,ne),ne.return=G,G=ne}return w(G);case M:return z=Uo(z),yt(G,B,z,ne)}if(ht(z))return Ee(G,B,z,ne);if(q(z)){if(we=q(z),typeof we!="function")throw Error(i(150));return z=we.call(z),be(G,B,z,ne)}if(typeof z.then=="function")return yt(G,B,Yd(z),ne);if(z.$$typeof===j)return yt(G,B,Bd(G,z),ne);Kd(G,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,B!==null&&B.tag===6?(u(G,B.sibling),ne=_(B,z),ne.return=G,G=ne):(u(G,B),ne=Zp(z,G.mode,ne),ne.return=G,G=ne),w(G)):u(G,B)}return function(G,B,z,ne){try{Iu=0;var we=yt(G,B,z,ne);return Ga=null,we}catch(Se){if(Se===Ba||Se===Hd)throw Se;var nt=Qn(29,Se,null,G.mode);return nt.lanes=ne,nt.return=G,nt}finally{}}}var Fo=q0(!0),B0=q0(!1),yr=!1;function fm(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hm(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function vr(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Tr(s,o,u){var c=s.updateQueue;if(c===null)return null;if(c=c.shared,(lt&2)!==0){var _=c.pending;return _===null?o.next=o:(o.next=_.next,_.next=o),c.pending=o,o=Ud(s),w0(s,null,u),o}return Vd(s,c,o,u),Ud(s)}function bu(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var c=o.lanes;c&=s.pendingLanes,u|=c,o.lanes=u,tu(s,u)}}function pm(s,o){var u=s.updateQueue,c=s.alternate;if(c!==null&&(c=c.updateQueue,u===c)){var _=null,v=null;if(u=u.firstBaseUpdate,u!==null){do{var w={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};v===null?_=v=w:v=v.next=w,u=u.next}while(u!==null);v===null?_=v=o:v=v.next=o}else _=v=o;u={baseState:c.baseState,firstBaseUpdate:_,lastBaseUpdate:v,shared:c.shared,callbacks:c.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var mm=!1;function Ru(){if(mm){var s=qa;if(s!==null)throw s}}function Nu(s,o,u,c){mm=!1;var _=s.updateQueue;yr=!1;var v=_.firstBaseUpdate,w=_.lastBaseUpdate,x=_.shared.pending;if(x!==null){_.shared.pending=null;var V=x,Y=V.next;V.next=null,w===null?v=Y:w.next=Y,w=V;var ee=s.alternate;ee!==null&&(ee=ee.updateQueue,x=ee.lastBaseUpdate,x!==w&&(x===null?ee.firstBaseUpdate=Y:x.next=Y,ee.lastBaseUpdate=V))}if(v!==null){var re=_.baseState;w=0,ee=Y=V=null,x=v;do{var $=x.lane&-536870913,Q=$!==x.lane;if(Q?(Je&$)===$:(c&$)===$){$!==0&&$===Fa&&(mm=!0),ee!==null&&(ee=ee.next={lane:0,tag:x.tag,payload:x.payload,callback:null,next:null});e:{var Ee=s,be=x;$=o;var yt=u;switch(be.tag){case 1:if(Ee=be.payload,typeof Ee=="function"){re=Ee.call(yt,re,$);break e}re=Ee;break e;case 3:Ee.flags=Ee.flags&-65537|128;case 0:if(Ee=be.payload,$=typeof Ee=="function"?Ee.call(yt,re,$):Ee,$==null)break e;re=T({},re,$);break e;case 2:yr=!0}}$=x.callback,$!==null&&(s.flags|=64,Q&&(s.flags|=8192),Q=_.callbacks,Q===null?_.callbacks=[$]:Q.push($))}else Q={lane:$,tag:x.tag,payload:x.payload,callback:x.callback,next:null},ee===null?(Y=ee=Q,V=re):ee=ee.next=Q,w|=$;if(x=x.next,x===null){if(x=_.shared.pending,x===null)break;Q=x,x=Q.next,Q.next=null,_.lastBaseUpdate=Q,_.shared.pending=null}}while(!0);ee===null&&(V=re),_.baseState=V,_.firstBaseUpdate=Y,_.lastBaseUpdate=ee,v===null&&(_.shared.lanes=0),Ar|=w,s.lanes=w,s.memoizedState=re}}function G0(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function H0(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)G0(u[s],o)}var Ha=F(null),$d=F(0);function z0(s,o){s=qs,fe($d,s),fe(Ha,o),qs=s|o.baseLanes}function gm(){fe($d,qs),fe(Ha,Ha.current)}function _m(){qs=$d.current,te(Ha),te($d)}var Xn=F(null),gi=null;function Er(s){var o=s.alternate;fe(Gt,Gt.current&1),fe(Xn,s),gi===null&&(o===null||Ha.current!==null||o.memoizedState!==null)&&(gi=s)}function ym(s){fe(Gt,Gt.current),fe(Xn,s),gi===null&&(gi=s)}function Y0(s){s.tag===22?(fe(Gt,Gt.current),fe(Xn,s),gi===null&&(gi=s)):Sr()}function Sr(){fe(Gt,Gt.current),fe(Xn,Xn.current)}function Zn(s){te(Xn),gi===s&&(gi=null),te(Gt)}var Gt=F(0);function jd(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||wg(u)||Ag(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ds=0,Fe=null,gt=null,Wt=null,Jd=!1,za=!1,qo=!1,Wd=0,Mu=0,Ya=null,W1=0;function Lt(){throw Error(i(321))}function vm(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Wn(s[u],o[u]))return!1;return!0}function Tm(s,o,u,c,_,v){return Ds=v,Fe=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,W.H=s===null||s.memoizedState===null?bT:Lm,qo=!1,v=u(c,_),qo=!1,za&&(v=$0(o,u,c,_)),K0(s),v}function K0(s){W.H=Pu;var o=gt!==null&&gt.next!==null;if(Ds=0,Wt=gt=Fe=null,Jd=!1,Mu=0,Ya=null,o)throw Error(i(300));s===null||Qt||(s=s.dependencies,s!==null&&qd(s)&&(Qt=!0))}function $0(s,o,u,c){Fe=s;var _=0;do{if(za&&(Ya=null),Mu=0,za=!1,25<=_)throw Error(i(301));if(_+=1,Wt=gt=null,s.updateQueue!=null){var v=s.updateQueue;v.lastEffect=null,v.events=null,v.stores=null,v.memoCache!=null&&(v.memoCache.index=0)}W.H=RT,v=o(u,c)}while(za);return v}function Q1(){var s=W.H,o=s.useState()[0];return o=typeof o.then=="function"?Du(o):o,s=s.useState()[0],(gt!==null?gt.memoizedState:null)!==s&&(Fe.flags|=1024),o}function Em(){var s=Wd!==0;return Wd=0,s}function Sm(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function Cm(s){if(Jd){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}Jd=!1}Ds=0,Wt=gt=Fe=null,za=!1,Mu=Wd=0,Ya=null}function Dn(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Fe.memoizedState=Wt=s:Wt=Wt.next=s,Wt}function Ht(){if(gt===null){var s=Fe.alternate;s=s!==null?s.memoizedState:null}else s=gt.next;var o=Wt===null?Fe.memoizedState:Wt.next;if(o!==null)Wt=o,gt=s;else{if(s===null)throw Fe.alternate===null?Error(i(467)):Error(i(310));gt=s,s={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Wt===null?Fe.memoizedState=Wt=s:Wt=Wt.next=s}return Wt}function Qd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Du(s){var o=Mu;return Mu+=1,Ya===null&&(Ya=[]),s=U0(Ya,s,o),o=Fe,(Wt===null?o.memoizedState:Wt.next)===null&&(o=o.alternate,W.H=o===null||o.memoizedState===null?bT:Lm),s}function Xd(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Du(s);if(s.$$typeof===j)return _n(s)}throw Error(i(438,String(s)))}function wm(s){var o=null,u=Fe.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var c=Fe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(o={data:c.data.map(function(_){return _.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=Qd(),Fe.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),c=0;c<s;c++)u[c]=L;return o.index++,u}function ks(s,o){return typeof o=="function"?o(s):o}function Zd(s){var o=Ht();return Am(o,gt,s)}function Am(s,o,u){var c=s.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=u;var _=s.baseQueue,v=c.pending;if(v!==null){if(_!==null){var w=_.next;_.next=v.next,v.next=w}o.baseQueue=_=v,c.pending=null}if(v=s.baseState,_===null)s.memoizedState=v;else{o=_.next;var x=w=null,V=null,Y=o,ee=!1;do{var re=Y.lane&-536870913;if(re!==Y.lane?(Je&re)===re:(Ds&re)===re){var $=Y.revertLane;if($===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),re===Fa&&(ee=!0);else if((Ds&$)===$){Y=Y.next,$===Fa&&(ee=!0);continue}else re={lane:0,revertLane:Y.revertLane,gesture:null,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(x=V=re,w=v):V=V.next=re,Fe.lanes|=$,Ar|=$;re=Y.action,qo&&u(v,re),v=Y.hasEagerState?Y.eagerState:u(v,re)}else $={lane:re,revertLane:Y.revertLane,gesture:Y.gesture,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},V===null?(x=V=$,w=v):V=V.next=$,Fe.lanes|=re,Ar|=re;Y=Y.next}while(Y!==null&&Y!==o);if(V===null?w=v:V.next=x,!Wn(v,s.memoizedState)&&(Qt=!0,ee&&(u=qa,u!==null)))throw u;s.memoizedState=v,s.baseState=w,s.baseQueue=V,c.lastRenderedState=v}return _===null&&(c.lanes=0),[s.memoizedState,c.dispatch]}function Im(s){var o=Ht(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var c=u.dispatch,_=u.pending,v=o.memoizedState;if(_!==null){u.pending=null;var w=_=_.next;do v=s(v,w.action),w=w.next;while(w!==_);Wn(v,o.memoizedState)||(Qt=!0),o.memoizedState=v,o.baseQueue===null&&(o.baseState=v),u.lastRenderedState=v}return[v,c]}function j0(s,o,u){var c=Fe,_=Ht(),v=Ze;if(v){if(u===void 0)throw Error(i(407));u=u()}else u=o();var w=!Wn((gt||_).memoizedState,u);if(w&&(_.memoizedState=u,Qt=!0),_=_.queue,Rm(Q0.bind(null,c,_,s),[s]),_.getSnapshot!==o||w||Wt!==null&&Wt.memoizedState.tag&1){if(c.flags|=2048,Ka(9,{destroy:void 0},W0.bind(null,c,_,u,o),null),St===null)throw Error(i(349));v||(Ds&127)!==0||J0(c,o,u)}return u}function J0(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Fe.updateQueue,o===null?(o=Qd(),Fe.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function W0(s,o,u,c){o.value=u,o.getSnapshot=c,X0(o)&&Z0(s)}function Q0(s,o,u){return u(function(){X0(o)&&Z0(s)})}function X0(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Wn(s,u)}catch{return!0}}function Z0(s){var o=Mo(s,2);o!==null&&Gn(o,s,2)}function xm(s){var o=Dn();if(typeof s=="function"){var u=s;if(s=u(),qo){oi(!0);try{u()}finally{oi(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:s},o}function eT(s,o,u,c){return s.baseState=u,Am(s,gt,typeof c=="function"?c:ks)}function X1(s,o,u,c,_){if(nf(s))throw Error(i(485));if(s=o.action,s!==null){var v={payload:_,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(w){v.listeners.push(w)}};W.T!==null?u(!0):v.isTransition=!1,c(v),u=o.pending,u===null?(v.next=o.pending=v,tT(o,v)):(v.next=u.next,o.pending=u.next=v)}}function tT(s,o){var u=o.action,c=o.payload,_=s.state;if(o.isTransition){var v=W.T,w={};W.T=w;try{var x=u(_,c),V=W.S;V!==null&&V(w,x),nT(s,o,x)}catch(Y){bm(s,o,Y)}finally{v!==null&&w.types!==null&&(v.types=w.types),W.T=v}}else try{v=u(_,c),nT(s,o,v)}catch(Y){bm(s,o,Y)}}function nT(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(c){iT(s,o,c)},function(c){return bm(s,o,c)}):iT(s,o,u)}function iT(s,o,u){o.status="fulfilled",o.value=u,sT(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,tT(s,u)))}function bm(s,o,u){var c=s.pending;if(s.pending=null,c!==null){c=c.next;do o.status="rejected",o.reason=u,sT(o),o=o.next;while(o!==c)}s.action=null}function sT(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function rT(s,o){return o}function oT(s,o){if(Ze){var u=St.formState;if(u!==null){e:{var c=Fe;if(Ze){if(bt){t:{for(var _=bt,v=mi;_.nodeType!==8;){if(!v){_=null;break t}if(_=_i(_.nextSibling),_===null){_=null;break t}}v=_.data,_=v==="F!"||v==="F"?_:null}if(_){bt=_i(_.nextSibling),c=_.data==="F!";break e}}gr(c)}c=!1}c&&(o=u[0])}}return u=Dn(),u.memoizedState=u.baseState=o,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:rT,lastRenderedState:o},u.queue=c,u=AT.bind(null,Fe,c),c.dispatch=u,c=xm(!1),v=Pm.bind(null,Fe,!1,c.queue),c=Dn(),_={state:o,dispatch:null,action:s,pending:null},c.queue=_,u=X1.bind(null,Fe,_,v,u),_.dispatch=u,c.memoizedState=s,[o,u,!1]}function aT(s){var o=Ht();return lT(o,gt,s)}function lT(s,o,u){if(o=Am(s,o,rT)[0],s=Zd(ks)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var c=Du(o)}catch(w){throw w===Ba?Hd:w}else c=o;o=Ht();var _=o.queue,v=_.dispatch;return u!==o.memoizedState&&(Fe.flags|=2048,Ka(9,{destroy:void 0},Z1.bind(null,_,u),null)),[c,v,s]}function Z1(s,o){s.action=o}function uT(s){var o=Ht(),u=gt;if(u!==null)return lT(o,u,s);Ht(),o=o.memoizedState,u=Ht();var c=u.queue.dispatch;return u.memoizedState=s,[o,c,!1]}function Ka(s,o,u,c){return s={tag:s,create:u,deps:c,inst:o,next:null},o=Fe.updateQueue,o===null&&(o=Qd(),Fe.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(c=u.next,u.next=s,s.next=c,o.lastEffect=s),s}function cT(){return Ht().memoizedState}function ef(s,o,u,c){var _=Dn();Fe.flags|=s,_.memoizedState=Ka(1|o,{destroy:void 0},u,c===void 0?null:c)}function tf(s,o,u,c){var _=Ht();c=c===void 0?null:c;var v=_.memoizedState.inst;gt!==null&&c!==null&&vm(c,gt.memoizedState.deps)?_.memoizedState=Ka(o,v,u,c):(Fe.flags|=s,_.memoizedState=Ka(1|o,v,u,c))}function dT(s,o){ef(8390656,8,s,o)}function Rm(s,o){tf(2048,8,s,o)}function eM(s){Fe.flags|=4;var o=Fe.updateQueue;if(o===null)o=Qd(),Fe.updateQueue=o,o.events=[s];else{var u=o.events;u===null?o.events=[s]:u.push(s)}}function fT(s){var o=Ht().memoizedState;return eM({ref:o,nextImpl:s}),function(){if((lt&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function hT(s,o){return tf(4,2,s,o)}function pT(s,o){return tf(4,4,s,o)}function mT(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function gT(s,o,u){u=u!=null?u.concat([s]):null,tf(4,4,mT.bind(null,o,s),u)}function Nm(){}function _T(s,o){var u=Ht();o=o===void 0?null:o;var c=u.memoizedState;return o!==null&&vm(o,c[1])?c[0]:(u.memoizedState=[s,o],s)}function yT(s,o){var u=Ht();o=o===void 0?null:o;var c=u.memoizedState;if(o!==null&&vm(o,c[1]))return c[0];if(c=s(),qo){oi(!0);try{s()}finally{oi(!1)}}return u.memoizedState=[c,o],c}function Mm(s,o,u){return u===void 0||(Ds&1073741824)!==0&&(Je&261930)===0?s.memoizedState=o:(s.memoizedState=u,s=vE(),Fe.lanes|=s,Ar|=s,u)}function vT(s,o,u,c){return Wn(u,o)?u:Ha.current!==null?(s=Mm(s,u,c),Wn(s,o)||(Qt=!0),s):(Ds&42)===0||(Ds&1073741824)!==0&&(Je&261930)===0?(Qt=!0,s.memoizedState=u):(s=vE(),Fe.lanes|=s,Ar|=s,o)}function TT(s,o,u,c,_){var v=ue.p;ue.p=v!==0&&8>v?v:8;var w=W.T,x={};W.T=x,Pm(s,!1,o,u);try{var V=_(),Y=W.S;if(Y!==null&&Y(x,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ee=J1(V,c);ku(s,o,ee,ni(s))}else ku(s,o,c,ni(s))}catch(re){ku(s,o,{then:function(){},status:"rejected",reason:re},ni())}finally{ue.p=v,w!==null&&x.types!==null&&(w.types=x.types),W.T=w}}function tM(){}function Dm(s,o,u,c){if(s.tag!==5)throw Error(i(476));var _=ET(s).queue;TT(s,_,o,le,u===null?tM:function(){return ST(s),u(c)})}function ET(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:le},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ks,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function ST(s){var o=ET(s);o.next===null&&(o=s.alternate.memoizedState),ku(s,o.next.queue,{},ni())}function km(){return _n(Wu)}function CT(){return Ht().memoizedState}function wT(){return Ht().memoizedState}function nM(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=ni();s=vr(u);var c=Tr(o,s,u);c!==null&&(Gn(c,o,u),bu(c,o,u)),o={cache:lm()},s.payload=o;return}o=o.return}}function iM(s,o,u){var c=ni();u={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},nf(s)?IT(o,u):(u=Qp(s,o,u,c),u!==null&&(Gn(u,s,c),xT(u,o,c)))}function AT(s,o,u){var c=ni();ku(s,o,u,c)}function ku(s,o,u,c){var _={lane:c,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(nf(s))IT(o,_);else{var v=s.alternate;if(s.lanes===0&&(v===null||v.lanes===0)&&(v=o.lastRenderedReducer,v!==null))try{var w=o.lastRenderedState,x=v(w,u);if(_.hasEagerState=!0,_.eagerState=x,Wn(x,w))return Vd(s,o,_,0),St===null&&Ld(),!1}catch{}finally{}if(u=Qp(s,o,_,c),u!==null)return Gn(u,s,c),xT(u,o,c),!0}return!1}function Pm(s,o,u,c){if(c={lane:2,revertLane:fg(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},nf(s)){if(o)throw Error(i(479))}else o=Qp(s,u,c,2),o!==null&&Gn(o,s,2)}function nf(s){var o=s.alternate;return s===Fe||o!==null&&o===Fe}function IT(s,o){za=Jd=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function xT(s,o,u){if((u&4194048)!==0){var c=o.lanes;c&=s.pendingLanes,u|=c,o.lanes=u,tu(s,u)}}var Pu={readContext:_n,use:Xd,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt};Pu.useEffectEvent=Lt;var bT={readContext:_n,use:Xd,useCallback:function(s,o){return Dn().memoizedState=[s,o===void 0?null:o],s},useContext:_n,useEffect:dT,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,ef(4194308,4,mT.bind(null,o,s),u)},useLayoutEffect:function(s,o){return ef(4194308,4,s,o)},useInsertionEffect:function(s,o){ef(4,2,s,o)},useMemo:function(s,o){var u=Dn();o=o===void 0?null:o;var c=s();if(qo){oi(!0);try{s()}finally{oi(!1)}}return u.memoizedState=[c,o],c},useReducer:function(s,o,u){var c=Dn();if(u!==void 0){var _=u(o);if(qo){oi(!0);try{u(o)}finally{oi(!1)}}}else _=o;return c.memoizedState=c.baseState=_,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:_},c.queue=s,s=s.dispatch=iM.bind(null,Fe,s),[c.memoizedState,s]},useRef:function(s){var o=Dn();return s={current:s},o.memoizedState=s},useState:function(s){s=xm(s);var o=s.queue,u=AT.bind(null,Fe,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:Nm,useDeferredValue:function(s,o){var u=Dn();return Mm(u,s,o)},useTransition:function(){var s=xm(!1);return s=TT.bind(null,Fe,s.queue,!0,!1),Dn().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var c=Fe,_=Dn();if(Ze){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),St===null)throw Error(i(349));(Je&127)!==0||J0(c,o,u)}_.memoizedState=u;var v={value:u,getSnapshot:o};return _.queue=v,dT(Q0.bind(null,c,v,s),[s]),c.flags|=2048,Ka(9,{destroy:void 0},W0.bind(null,c,v,u,o),null),u},useId:function(){var s=Dn(),o=St.identifierPrefix;if(Ze){var u=ds,c=cs;u=(c&~(1<<32-qt(c)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Wd++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=W1++,o="_"+o+"r_"+u.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:km,useFormState:oT,useActionState:oT,useOptimistic:function(s){var o=Dn();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Pm.bind(null,Fe,!0,u),u.dispatch=o,[s,o]},useMemoCache:wm,useCacheRefresh:function(){return Dn().memoizedState=nM.bind(null,Fe)},useEffectEvent:function(s){var o=Dn(),u={impl:s};return o.memoizedState=u,function(){if((lt&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Lm={readContext:_n,use:Xd,useCallback:_T,useContext:_n,useEffect:Rm,useImperativeHandle:gT,useInsertionEffect:hT,useLayoutEffect:pT,useMemo:yT,useReducer:Zd,useRef:cT,useState:function(){return Zd(ks)},useDebugValue:Nm,useDeferredValue:function(s,o){var u=Ht();return vT(u,gt.memoizedState,s,o)},useTransition:function(){var s=Zd(ks)[0],o=Ht().memoizedState;return[typeof s=="boolean"?s:Du(s),o]},useSyncExternalStore:j0,useId:CT,useHostTransitionStatus:km,useFormState:aT,useActionState:aT,useOptimistic:function(s,o){var u=Ht();return eT(u,gt,s,o)},useMemoCache:wm,useCacheRefresh:wT};Lm.useEffectEvent=fT;var RT={readContext:_n,use:Xd,useCallback:_T,useContext:_n,useEffect:Rm,useImperativeHandle:gT,useInsertionEffect:hT,useLayoutEffect:pT,useMemo:yT,useReducer:Im,useRef:cT,useState:function(){return Im(ks)},useDebugValue:Nm,useDeferredValue:function(s,o){var u=Ht();return gt===null?Mm(u,s,o):vT(u,gt.memoizedState,s,o)},useTransition:function(){var s=Im(ks)[0],o=Ht().memoizedState;return[typeof s=="boolean"?s:Du(s),o]},useSyncExternalStore:j0,useId:CT,useHostTransitionStatus:km,useFormState:uT,useActionState:uT,useOptimistic:function(s,o){var u=Ht();return gt!==null?eT(u,gt,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:wm,useCacheRefresh:wT};RT.useEffectEvent=fT;function Vm(s,o,u,c){o=s.memoizedState,u=u(c,o),u=u==null?o:T({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var Um={enqueueSetState:function(s,o,u){s=s._reactInternals;var c=ni(),_=vr(c);_.payload=o,u!=null&&(_.callback=u),o=Tr(s,_,c),o!==null&&(Gn(o,s,c),bu(o,s,c))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var c=ni(),_=vr(c);_.tag=1,_.payload=o,u!=null&&(_.callback=u),o=Tr(s,_,c),o!==null&&(Gn(o,s,c),bu(o,s,c))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=ni(),c=vr(u);c.tag=2,o!=null&&(c.callback=o),o=Tr(s,c,u),o!==null&&(Gn(o,s,u),bu(o,s,u))}};function NT(s,o,u,c,_,v,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(c,v,w):o.prototype&&o.prototype.isPureReactComponent?!Tu(u,c)||!Tu(_,v):!0}function MT(s,o,u,c){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,c),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,c),o.state!==s&&Um.enqueueReplaceState(o,o.state,null)}function Bo(s,o){var u=o;if("ref"in o){u={};for(var c in o)c!=="ref"&&(u[c]=o[c])}if(s=s.defaultProps){u===o&&(u=T({},u));for(var _ in s)u[_]===void 0&&(u[_]=s[_])}return u}function DT(s){Pd(s)}function kT(s){console.error(s)}function PT(s){Pd(s)}function sf(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(c){setTimeout(function(){throw c})}}function LT(s,o,u){try{var c=s.onCaughtError;c(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(_){setTimeout(function(){throw _})}}function Om(s,o,u){return u=vr(u),u.tag=3,u.payload={element:null},u.callback=function(){sf(s,o)},u}function VT(s){return s=vr(s),s.tag=3,s}function UT(s,o,u,c){var _=u.type.getDerivedStateFromError;if(typeof _=="function"){var v=c.value;s.payload=function(){return _(v)},s.callback=function(){LT(o,u,c)}}var w=u.stateNode;w!==null&&typeof w.componentDidCatch=="function"&&(s.callback=function(){LT(o,u,c),typeof _!="function"&&(Ir===null?Ir=new Set([this]):Ir.add(this));var x=c.stack;this.componentDidCatch(c.value,{componentStack:x!==null?x:""})})}function sM(s,o,u,c,_){if(u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(o=u.alternate,o!==null&&Oa(o,u,_,!0),u=Xn.current,u!==null){switch(u.tag){case 31:case 13:return gi===null?gf():u.alternate===null&&Vt===0&&(Vt=3),u.flags&=-257,u.flags|=65536,u.lanes=_,c===zd?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([c]):o.add(c),ug(s,c,_)),!1;case 22:return u.flags|=65536,c===zd?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([c])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([c]):u.add(c)),ug(s,c,_)),!1}throw Error(i(435,u.tag))}return ug(s,c,_),gf(),!1}if(Ze)return o=Xn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=_,c!==im&&(s=Error(i(422),{cause:c}),Cu(fi(s,u)))):(c!==im&&(o=Error(i(423),{cause:c}),Cu(fi(o,u))),s=s.current.alternate,s.flags|=65536,_&=-_,s.lanes|=_,c=fi(c,u),_=Om(s.stateNode,c,_),pm(s,_),Vt!==4&&(Vt=2)),!1;var v=Error(i(520),{cause:c});if(v=fi(v,u),Gu===null?Gu=[v]:Gu.push(v),Vt!==4&&(Vt=2),o===null)return!0;c=fi(c,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=_&-_,u.lanes|=s,s=Om(u.stateNode,c,s),pm(u,s),!1;case 1:if(o=u.type,v=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ir===null||!Ir.has(v))))return u.flags|=65536,_&=-_,u.lanes|=_,_=VT(_),UT(_,s,u,c),pm(u,_),!1}u=u.return}while(u!==null);return!1}var Fm=Error(i(461)),Qt=!1;function yn(s,o,u,c){o.child=s===null?B0(o,null,u,c):Fo(o,s.child,u,c)}function OT(s,o,u,c,_){u=u.render;var v=o.ref;if("ref"in c){var w={};for(var x in c)x!=="ref"&&(w[x]=c[x])}else w=c;return Lo(o),c=Tm(s,o,u,w,v,_),x=Em(),s!==null&&!Qt?(Sm(s,o,_),Ps(s,o,_)):(Ze&&x&&tm(o),o.flags|=1,yn(s,o,c,_),o.child)}function FT(s,o,u,c,_){if(s===null){var v=u.type;return typeof v=="function"&&!Xp(v)&&v.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=v,qT(s,o,v,c,_)):(s=Od(u.type,null,c,o,o.mode,_),s.ref=o.ref,s.return=o,o.child=s)}if(v=s.child,!$m(s,_)){var w=v.memoizedProps;if(u=u.compare,u=u!==null?u:Tu,u(w,c)&&s.ref===o.ref)return Ps(s,o,_)}return o.flags|=1,s=bs(v,c),s.ref=o.ref,s.return=o,o.child=s}function qT(s,o,u,c,_){if(s!==null){var v=s.memoizedProps;if(Tu(v,c)&&s.ref===o.ref)if(Qt=!1,o.pendingProps=c=v,$m(s,_))(s.flags&131072)!==0&&(Qt=!0);else return o.lanes=s.lanes,Ps(s,o,_)}return qm(s,o,u,c,_)}function BT(s,o,u,c){var _=c.children,v=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((o.flags&128)!==0){if(v=v!==null?v.baseLanes|u:u,s!==null){for(c=o.child=s.child,_=0;c!==null;)_=_|c.lanes|c.childLanes,c=c.sibling;c=_&~v}else c=0,o.child=null;return GT(s,o,v,u,c)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&Gd(o,v!==null?v.cachePool:null),v!==null?z0(o,v):gm(),Y0(o);else return c=o.lanes=536870912,GT(s,o,v!==null?v.baseLanes|u:u,u,c)}else v!==null?(Gd(o,v.cachePool),z0(o,v),Sr(),o.memoizedState=null):(s!==null&&Gd(o,null),gm(),Sr());return yn(s,o,_,u),o.child}function Lu(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function GT(s,o,u,c,_){var v=cm();return v=v===null?null:{parent:Jt._currentValue,pool:v},o.memoizedState={baseLanes:u,cachePool:v},s!==null&&Gd(o,null),gm(),Y0(o),s!==null&&Oa(s,o,c,!0),o.childLanes=_,null}function rf(s,o){return o=af({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function HT(s,o,u){return Fo(o,s.child,null,u),s=rf(o,o.pendingProps),s.flags|=2,Zn(o),o.memoizedState=null,s}function rM(s,o,u){var c=o.pendingProps,_=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Ze){if(c.mode==="hidden")return s=rf(o,c),o.lanes=536870912,Lu(null,s);if(ym(o),(s=bt)?(s=tS(s,mi),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:pr!==null?{id:cs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},u=I0(s),u.return=o,o.child=u,gn=o,bt=null)):s=null,s===null)throw gr(o);return o.lanes=536870912,null}return rf(o,c)}var v=s.memoizedState;if(v!==null){var w=v.dehydrated;if(ym(o),_)if(o.flags&256)o.flags&=-257,o=HT(s,o,u);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(Qt||Oa(s,o,u,!1),_=(u&s.childLanes)!==0,Qt||_){if(c=St,c!==null&&(w=nu(c,u),w!==0&&w!==v.retryLane))throw v.retryLane=w,Mo(s,w),Gn(c,s,w),Fm;gf(),o=HT(s,o,u)}else s=v.treeContext,bt=_i(w.nextSibling),gn=o,Ze=!0,mr=null,mi=!1,s!==null&&R0(o,s),o=rf(o,c),o.flags|=4096;return o}return s=bs(s.child,{mode:c.mode,children:c.children}),s.ref=o.ref,o.child=s,s.return=o,s}function of(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function qm(s,o,u,c,_){return Lo(o),u=Tm(s,o,u,c,void 0,_),c=Em(),s!==null&&!Qt?(Sm(s,o,_),Ps(s,o,_)):(Ze&&c&&tm(o),o.flags|=1,yn(s,o,u,_),o.child)}function zT(s,o,u,c,_,v){return Lo(o),o.updateQueue=null,u=$0(o,c,u,_),K0(s),c=Em(),s!==null&&!Qt?(Sm(s,o,v),Ps(s,o,v)):(Ze&&c&&tm(o),o.flags|=1,yn(s,o,u,v),o.child)}function YT(s,o,u,c,_){if(Lo(o),o.stateNode===null){var v=Pa,w=u.contextType;typeof w=="object"&&w!==null&&(v=_n(w)),v=new u(c,v),o.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Um,o.stateNode=v,v._reactInternals=o,v=o.stateNode,v.props=c,v.state=o.memoizedState,v.refs={},fm(o),w=u.contextType,v.context=typeof w=="object"&&w!==null?_n(w):Pa,v.state=o.memoizedState,w=u.getDerivedStateFromProps,typeof w=="function"&&(Vm(o,u,w,c),v.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof v.getSnapshotBeforeUpdate=="function"||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(w=v.state,typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount(),w!==v.state&&Um.enqueueReplaceState(v,v.state,null),Nu(o,c,v,_),Ru(),v.state=o.memoizedState),typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!0}else if(s===null){v=o.stateNode;var x=o.memoizedProps,V=Bo(u,x);v.props=V;var Y=v.context,ee=u.contextType;w=Pa,typeof ee=="object"&&ee!==null&&(w=_n(ee));var re=u.getDerivedStateFromProps;ee=typeof re=="function"||typeof v.getSnapshotBeforeUpdate=="function",x=o.pendingProps!==x,ee||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(x||Y!==w)&&MT(o,v,c,w),yr=!1;var $=o.memoizedState;v.state=$,Nu(o,c,v,_),Ru(),Y=o.memoizedState,x||$!==Y||yr?(typeof re=="function"&&(Vm(o,u,re,c),Y=o.memoizedState),(V=yr||NT(o,u,V,c,$,Y,w))?(ee||typeof v.UNSAFE_componentWillMount!="function"&&typeof v.componentWillMount!="function"||(typeof v.componentWillMount=="function"&&v.componentWillMount(),typeof v.UNSAFE_componentWillMount=="function"&&v.UNSAFE_componentWillMount()),typeof v.componentDidMount=="function"&&(o.flags|=4194308)):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=c,o.memoizedState=Y),v.props=c,v.state=Y,v.context=w,c=V):(typeof v.componentDidMount=="function"&&(o.flags|=4194308),c=!1)}else{v=o.stateNode,hm(s,o),w=o.memoizedProps,ee=Bo(u,w),v.props=ee,re=o.pendingProps,$=v.context,Y=u.contextType,V=Pa,typeof Y=="object"&&Y!==null&&(V=_n(Y)),x=u.getDerivedStateFromProps,(Y=typeof x=="function"||typeof v.getSnapshotBeforeUpdate=="function")||typeof v.UNSAFE_componentWillReceiveProps!="function"&&typeof v.componentWillReceiveProps!="function"||(w!==re||$!==V)&&MT(o,v,c,V),yr=!1,$=o.memoizedState,v.state=$,Nu(o,c,v,_),Ru();var Q=o.memoizedState;w!==re||$!==Q||yr||s!==null&&s.dependencies!==null&&qd(s.dependencies)?(typeof x=="function"&&(Vm(o,u,x,c),Q=o.memoizedState),(ee=yr||NT(o,u,ee,c,$,Q,V)||s!==null&&s.dependencies!==null&&qd(s.dependencies))?(Y||typeof v.UNSAFE_componentWillUpdate!="function"&&typeof v.componentWillUpdate!="function"||(typeof v.componentWillUpdate=="function"&&v.componentWillUpdate(c,Q,V),typeof v.UNSAFE_componentWillUpdate=="function"&&v.UNSAFE_componentWillUpdate(c,Q,V)),typeof v.componentDidUpdate=="function"&&(o.flags|=4),typeof v.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof v.componentDidUpdate!="function"||w===s.memoizedProps&&$===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&$===s.memoizedState||(o.flags|=1024),o.memoizedProps=c,o.memoizedState=Q),v.props=c,v.state=Q,v.context=V,c=ee):(typeof v.componentDidUpdate!="function"||w===s.memoizedProps&&$===s.memoizedState||(o.flags|=4),typeof v.getSnapshotBeforeUpdate!="function"||w===s.memoizedProps&&$===s.memoizedState||(o.flags|=1024),c=!1)}return v=c,of(s,o),c=(o.flags&128)!==0,v||c?(v=o.stateNode,u=c&&typeof u.getDerivedStateFromError!="function"?null:v.render(),o.flags|=1,s!==null&&c?(o.child=Fo(o,s.child,null,_),o.child=Fo(o,null,u,_)):yn(s,o,u,_),o.memoizedState=v.state,s=o.child):s=Ps(s,o,_),s}function KT(s,o,u,c){return ko(),o.flags|=256,yn(s,o,u,c),o.child}var Bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gm(s){return{baseLanes:s,cachePool:L0()}}function Hm(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=ti),s}function $T(s,o,u){var c=o.pendingProps,_=!1,v=(o.flags&128)!==0,w;if((w=v)||(w=s!==null&&s.memoizedState===null?!1:(Gt.current&2)!==0),w&&(_=!0,o.flags&=-129),w=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ze){if(_?Er(o):Sr(),(s=bt)?(s=tS(s,mi),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:pr!==null?{id:cs,overflow:ds}:null,retryLane:536870912,hydrationErrors:null},u=I0(s),u.return=o,o.child=u,gn=o,bt=null)):s=null,s===null)throw gr(o);return Ag(s)?o.lanes=32:o.lanes=536870912,null}var x=c.children;return c=c.fallback,_?(Sr(),_=o.mode,x=af({mode:"hidden",children:x},_),c=Do(c,_,u,null),x.return=o,c.return=o,x.sibling=c,o.child=x,c=o.child,c.memoizedState=Gm(u),c.childLanes=Hm(s,w,u),o.memoizedState=Bm,Lu(null,c)):(Er(o),zm(o,x))}var V=s.memoizedState;if(V!==null&&(x=V.dehydrated,x!==null)){if(v)o.flags&256?(Er(o),o.flags&=-257,o=Ym(s,o,u)):o.memoizedState!==null?(Sr(),o.child=s.child,o.flags|=128,o=null):(Sr(),x=c.fallback,_=o.mode,c=af({mode:"visible",children:c.children},_),x=Do(x,_,u,null),x.flags|=2,c.return=o,x.return=o,c.sibling=x,o.child=c,Fo(o,s.child,null,u),c=o.child,c.memoizedState=Gm(u),c.childLanes=Hm(s,w,u),o.memoizedState=Bm,o=Lu(null,c));else if(Er(o),Ag(x)){if(w=x.nextSibling&&x.nextSibling.dataset,w)var Y=w.dgst;w=Y,c=Error(i(419)),c.stack="",c.digest=w,Cu({value:c,source:null,stack:null}),o=Ym(s,o,u)}else if(Qt||Oa(s,o,u,!1),w=(u&s.childLanes)!==0,Qt||w){if(w=St,w!==null&&(c=nu(w,u),c!==0&&c!==V.retryLane))throw V.retryLane=c,Mo(s,c),Gn(w,s,c),Fm;wg(x)||gf(),o=Ym(s,o,u)}else wg(x)?(o.flags|=192,o.child=s.child,o=null):(s=V.treeContext,bt=_i(x.nextSibling),gn=o,Ze=!0,mr=null,mi=!1,s!==null&&R0(o,s),o=zm(o,c.children),o.flags|=4096);return o}return _?(Sr(),x=c.fallback,_=o.mode,V=s.child,Y=V.sibling,c=bs(V,{mode:"hidden",children:c.children}),c.subtreeFlags=V.subtreeFlags&65011712,Y!==null?x=bs(Y,x):(x=Do(x,_,u,null),x.flags|=2),x.return=o,c.return=o,c.sibling=x,o.child=c,Lu(null,c),c=o.child,x=s.child.memoizedState,x===null?x=Gm(u):(_=x.cachePool,_!==null?(V=Jt._currentValue,_=_.parent!==V?{parent:V,pool:V}:_):_=L0(),x={baseLanes:x.baseLanes|u,cachePool:_}),c.memoizedState=x,c.childLanes=Hm(s,w,u),o.memoizedState=Bm,Lu(s.child,c)):(Er(o),u=s.child,s=u.sibling,u=bs(u,{mode:"visible",children:c.children}),u.return=o,u.sibling=null,s!==null&&(w=o.deletions,w===null?(o.deletions=[s],o.flags|=16):w.push(s)),o.child=u,o.memoizedState=null,u)}function zm(s,o){return o=af({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function af(s,o){return s=Qn(22,s,null,o),s.lanes=0,s}function Ym(s,o,u){return Fo(o,s.child,null,u),s=zm(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function jT(s,o,u){s.lanes|=o;var c=s.alternate;c!==null&&(c.lanes|=o),om(s.return,o,u)}function Km(s,o,u,c,_,v){var w=s.memoizedState;w===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:c,tail:u,tailMode:_,treeForkCount:v}:(w.isBackwards=o,w.rendering=null,w.renderingStartTime=0,w.last=c,w.tail=u,w.tailMode=_,w.treeForkCount=v)}function JT(s,o,u){var c=o.pendingProps,_=c.revealOrder,v=c.tail;c=c.children;var w=Gt.current,x=(w&2)!==0;if(x?(w=w&1|2,o.flags|=128):w&=1,fe(Gt,w),yn(s,o,c,u),c=Ze?Su:0,!x&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&jT(s,u,o);else if(s.tag===19)jT(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(_){case"forwards":for(u=o.child,_=null;u!==null;)s=u.alternate,s!==null&&jd(s)===null&&(_=u),u=u.sibling;u=_,u===null?(_=o.child,o.child=null):(_=u.sibling,u.sibling=null),Km(o,!1,_,u,v,c);break;case"backwards":case"unstable_legacy-backwards":for(u=null,_=o.child,o.child=null;_!==null;){if(s=_.alternate,s!==null&&jd(s)===null){o.child=_;break}s=_.sibling,_.sibling=u,u=_,_=s}Km(o,!0,u,null,v,c);break;case"together":Km(o,!1,null,null,void 0,c);break;default:o.memoizedState=null}return o.child}function Ps(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Ar|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(Oa(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,u=bs(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=bs(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function $m(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&qd(s)))}function oM(s,o,u){switch(o.tag){case 3:et(o,o.stateNode.containerInfo),_r(o,Jt,s.memoizedState.cache),ko();break;case 27:case 5:Pe(o);break;case 4:et(o,o.stateNode.containerInfo);break;case 10:_r(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,ym(o),null;break;case 13:var c=o.memoizedState;if(c!==null)return c.dehydrated!==null?(Er(o),o.flags|=128,null):(u&o.child.childLanes)!==0?$T(s,o,u):(Er(o),s=Ps(s,o,u),s!==null?s.sibling:null);Er(o);break;case 19:var _=(s.flags&128)!==0;if(c=(u&o.childLanes)!==0,c||(Oa(s,o,u,!1),c=(u&o.childLanes)!==0),_){if(c)return JT(s,o,u);o.flags|=128}if(_=o.memoizedState,_!==null&&(_.rendering=null,_.tail=null,_.lastEffect=null),fe(Gt,Gt.current),c)break;return null;case 22:return o.lanes=0,BT(s,o,u,o.pendingProps);case 24:_r(o,Jt,s.memoizedState.cache)}return Ps(s,o,u)}function WT(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)Qt=!0;else{if(!$m(s,u)&&(o.flags&128)===0)return Qt=!1,oM(s,o,u);Qt=(s.flags&131072)!==0}else Qt=!1,Ze&&(o.flags&1048576)!==0&&b0(o,Su,o.index);switch(o.lanes=0,o.tag){case 16:e:{var c=o.pendingProps;if(s=Uo(o.elementType),o.type=s,typeof s=="function")Xp(s)?(c=Bo(s,c),o.tag=1,o=YT(null,o,s,c,u)):(o.tag=0,o=qm(null,o,s,c,u));else{if(s!=null){var _=s.$$typeof;if(_===ae){o.tag=11,o=OT(null,o,s,c,u);break e}else if(_===R){o.tag=14,o=FT(null,o,s,c,u);break e}}throw o=Be(s)||s,Error(i(306,o,""))}}return o;case 0:return qm(s,o,o.type,o.pendingProps,u);case 1:return c=o.type,_=Bo(c,o.pendingProps),YT(s,o,c,_,u);case 3:e:{if(et(o,o.stateNode.containerInfo),s===null)throw Error(i(387));c=o.pendingProps;var v=o.memoizedState;_=v.element,hm(s,o),Nu(o,c,null,u);var w=o.memoizedState;if(c=w.cache,_r(o,Jt,c),c!==v.cache&&am(o,[Jt],u,!0),Ru(),c=w.element,v.isDehydrated)if(v={element:c,isDehydrated:!1,cache:w.cache},o.updateQueue.baseState=v,o.memoizedState=v,o.flags&256){o=KT(s,o,c,u);break e}else if(c!==_){_=fi(Error(i(424)),o),Cu(_),o=KT(s,o,c,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(bt=_i(s.firstChild),gn=o,Ze=!0,mr=null,mi=!0,u=B0(o,null,c,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(ko(),c===_){o=Ps(s,o,u);break e}yn(s,o,c,u)}o=o.child}return o;case 26:return of(s,o),s===null?(u=aS(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ze||(u=o.type,s=o.pendingProps,c=Cf(Me.current).createElement(u),c[Kt]=o,c[ln]=s,vn(c,u,s),$t(c),o.stateNode=c):o.memoizedState=aS(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return Pe(o),s===null&&Ze&&(c=o.stateNode=sS(o.type,o.pendingProps,Me.current),gn=o,mi=!0,_=bt,Nr(o.type)?(Ig=_,bt=_i(c.firstChild)):bt=_),yn(s,o,o.pendingProps.children,u),of(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ze&&((_=c=bt)&&(c=VM(c,o.type,o.pendingProps,mi),c!==null?(o.stateNode=c,gn=o,bt=_i(c.firstChild),mi=!1,_=!0):_=!1),_||gr(o)),Pe(o),_=o.type,v=o.pendingProps,w=s!==null?s.memoizedProps:null,c=v.children,Eg(_,v)?c=null:w!==null&&Eg(_,w)&&(o.flags|=32),o.memoizedState!==null&&(_=Tm(s,o,Q1,null,null,u),Wu._currentValue=_),of(s,o),yn(s,o,c,u),o.child;case 6:return s===null&&Ze&&((s=u=bt)&&(u=UM(u,o.pendingProps,mi),u!==null?(o.stateNode=u,gn=o,bt=null,s=!0):s=!1),s||gr(o)),null;case 13:return $T(s,o,u);case 4:return et(o,o.stateNode.containerInfo),c=o.pendingProps,s===null?o.child=Fo(o,null,c,u):yn(s,o,c,u),o.child;case 11:return OT(s,o,o.type,o.pendingProps,u);case 7:return yn(s,o,o.pendingProps,u),o.child;case 8:return yn(s,o,o.pendingProps.children,u),o.child;case 12:return yn(s,o,o.pendingProps.children,u),o.child;case 10:return c=o.pendingProps,_r(o,o.type,c.value),yn(s,o,c.children,u),o.child;case 9:return _=o.type._context,c=o.pendingProps.children,Lo(o),_=_n(_),c=c(_),o.flags|=1,yn(s,o,c,u),o.child;case 14:return FT(s,o,o.type,o.pendingProps,u);case 15:return qT(s,o,o.type,o.pendingProps,u);case 19:return JT(s,o,u);case 31:return rM(s,o,u);case 22:return BT(s,o,u,o.pendingProps);case 24:return Lo(o),c=_n(Jt),s===null?(_=cm(),_===null&&(_=St,v=lm(),_.pooledCache=v,v.refCount++,v!==null&&(_.pooledCacheLanes|=u),_=v),o.memoizedState={parent:c,cache:_},fm(o),_r(o,Jt,_)):((s.lanes&u)!==0&&(hm(s,o),Nu(o,null,null,u),Ru()),_=s.memoizedState,v=o.memoizedState,_.parent!==c?(_={parent:c,cache:c},o.memoizedState=_,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=_),_r(o,Jt,c)):(c=v.cache,_r(o,Jt,c),c!==_.cache&&am(o,[Jt],u,!0))),yn(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Ls(s){s.flags|=4}function jm(s,o,u,c,_){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(_&335544128)===_)if(s.stateNode.complete)s.flags|=8192;else if(CE())s.flags|=8192;else throw Oo=zd,dm}else s.flags&=-16777217}function QT(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!fS(o))if(CE())s.flags|=8192;else throw Oo=zd,dm}function lf(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?hd():536870912,s.lanes|=o,Wa|=o)}function Vu(s,o){if(!Ze)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var c=null;u!==null;)u.alternate!==null&&(c=u),u=u.sibling;c===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:c.sibling=null}}function Rt(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,c=0;if(o)for(var _=s.child;_!==null;)u|=_.lanes|_.childLanes,c|=_.subtreeFlags&65011712,c|=_.flags&65011712,_.return=s,_=_.sibling;else for(_=s.child;_!==null;)u|=_.lanes|_.childLanes,c|=_.subtreeFlags,c|=_.flags,_.return=s,_=_.sibling;return s.subtreeFlags|=c,s.childLanes=u,o}function aM(s,o,u){var c=o.pendingProps;switch(nm(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rt(o),null;case 1:return Rt(o),null;case 3:return u=o.stateNode,c=null,s!==null&&(c=s.memoizedState.cache),o.memoizedState.cache!==c&&(o.flags|=2048),Ms(Jt),je(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(Ua(o)?Ls(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,sm())),Rt(o),null;case 26:var _=o.type,v=o.memoizedState;return s===null?(Ls(o),v!==null?(Rt(o),QT(o,v)):(Rt(o),jm(o,_,null,c,u))):v?v!==s.memoizedState?(Ls(o),Rt(o),QT(o,v)):(Rt(o),o.flags&=-16777217):(s=s.memoizedProps,s!==c&&Ls(o),Rt(o),jm(o,_,s,c,u)),null;case 27:if(ot(o),u=Me.current,_=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ls(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return Rt(o),null}s=ge.current,Ua(o)?N0(o):(s=sS(_,c,u),o.stateNode=s,Ls(o))}return Rt(o),null;case 5:if(ot(o),_=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==c&&Ls(o);else{if(!c){if(o.stateNode===null)throw Error(i(166));return Rt(o),null}if(v=ge.current,Ua(o))N0(o);else{var w=Cf(Me.current);switch(v){case 1:v=w.createElementNS("http://www.w3.org/2000/svg",_);break;case 2:v=w.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;default:switch(_){case"svg":v=w.createElementNS("http://www.w3.org/2000/svg",_);break;case"math":v=w.createElementNS("http://www.w3.org/1998/Math/MathML",_);break;case"script":v=w.createElement("div"),v.innerHTML="<script><\/script>",v=v.removeChild(v.firstChild);break;case"select":v=typeof c.is=="string"?w.createElement("select",{is:c.is}):w.createElement("select"),c.multiple?v.multiple=!0:c.size&&(v.size=c.size);break;default:v=typeof c.is=="string"?w.createElement(_,{is:c.is}):w.createElement(_)}}v[Kt]=o,v[ln]=c;e:for(w=o.child;w!==null;){if(w.tag===5||w.tag===6)v.appendChild(w.stateNode);else if(w.tag!==4&&w.tag!==27&&w.child!==null){w.child.return=w,w=w.child;continue}if(w===o)break e;for(;w.sibling===null;){if(w.return===null||w.return===o)break e;w=w.return}w.sibling.return=w.return,w=w.sibling}o.stateNode=v;e:switch(vn(v,_,c),_){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Ls(o)}}return Rt(o),jm(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,u),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==c&&Ls(o);else{if(typeof c!="string"&&o.stateNode===null)throw Error(i(166));if(s=Me.current,Ua(o)){if(s=o.stateNode,u=o.memoizedProps,c=null,_=gn,_!==null)switch(_.tag){case 27:case 5:c=_.memoizedProps}s[Kt]=o,s=!!(s.nodeValue===u||c!==null&&c.suppressHydrationWarning===!0||$E(s.nodeValue,u)),s||gr(o,!0)}else s=Cf(s).createTextNode(c),s[Kt]=o,o.stateNode=s}return Rt(o),null;case 31:if(u=o.memoizedState,s===null||s.memoizedState!==null){if(c=Ua(o),u!==null){if(s===null){if(!c)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Kt]=o}else ko(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),s=!1}else u=sm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return o.flags&256?(Zn(o),o):(Zn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return Rt(o),null;case 13:if(c=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(_=Ua(o),c!==null&&c.dehydrated!==null){if(s===null){if(!_)throw Error(i(318));if(_=o.memoizedState,_=_!==null?_.dehydrated:null,!_)throw Error(i(317));_[Kt]=o}else ko(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Rt(o),_=!1}else _=sm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=_),_=!0;if(!_)return o.flags&256?(Zn(o),o):(Zn(o),null)}return Zn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=c!==null,s=s!==null&&s.memoizedState!==null,u&&(c=o.child,_=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(_=c.alternate.memoizedState.cachePool.pool),v=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(v=c.memoizedState.cachePool.pool),v!==_&&(c.flags|=2048)),u!==s&&u&&(o.child.flags|=8192),lf(o,o.updateQueue),Rt(o),null);case 4:return je(),s===null&&gg(o.stateNode.containerInfo),Rt(o),null;case 10:return Ms(o.type),Rt(o),null;case 19:if(te(Gt),c=o.memoizedState,c===null)return Rt(o),null;if(_=(o.flags&128)!==0,v=c.rendering,v===null)if(_)Vu(c,!1);else{if(Vt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(v=jd(s),v!==null){for(o.flags|=128,Vu(c,!1),s=v.updateQueue,o.updateQueue=s,lf(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)A0(u,s),u=u.sibling;return fe(Gt,Gt.current&1|2),Ze&&Rs(o,c.treeForkCount),o.child}s=s.sibling}c.tail!==null&&Nn()>hf&&(o.flags|=128,_=!0,Vu(c,!1),o.lanes=4194304)}else{if(!_)if(s=jd(v),s!==null){if(o.flags|=128,_=!0,s=s.updateQueue,o.updateQueue=s,lf(o,s),Vu(c,!0),c.tail===null&&c.tailMode==="hidden"&&!v.alternate&&!Ze)return Rt(o),null}else 2*Nn()-c.renderingStartTime>hf&&u!==536870912&&(o.flags|=128,_=!0,Vu(c,!1),o.lanes=4194304);c.isBackwards?(v.sibling=o.child,o.child=v):(s=c.last,s!==null?s.sibling=v:o.child=v,c.last=v)}return c.tail!==null?(s=c.tail,c.rendering=s,c.tail=s.sibling,c.renderingStartTime=Nn(),s.sibling=null,u=Gt.current,fe(Gt,_?u&1|2:u&1),Ze&&Rs(o,c.treeForkCount),s):(Rt(o),null);case 22:case 23:return Zn(o),_m(),c=o.memoizedState!==null,s!==null?s.memoizedState!==null!==c&&(o.flags|=8192):c&&(o.flags|=8192),c?(u&536870912)!==0&&(o.flags&128)===0&&(Rt(o),o.subtreeFlags&6&&(o.flags|=8192)):Rt(o),u=o.updateQueue,u!==null&&lf(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),c=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(c=o.memoizedState.cachePool.pool),c!==u&&(o.flags|=2048),s!==null&&te(Vo),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),Ms(Jt),Rt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function lM(s,o){switch(nm(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return Ms(Jt),je(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return ot(o),null;case 31:if(o.memoizedState!==null){if(Zn(o),o.alternate===null)throw Error(i(340));ko()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(Zn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));ko()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return te(Gt),null;case 4:return je(),null;case 10:return Ms(o.type),null;case 22:case 23:return Zn(o),_m(),s!==null&&te(Vo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return Ms(Jt),null;case 25:return null;default:return null}}function XT(s,o){switch(nm(o),o.tag){case 3:Ms(Jt),je();break;case 26:case 27:case 5:ot(o);break;case 4:je();break;case 31:o.memoizedState!==null&&Zn(o);break;case 13:Zn(o);break;case 19:te(Gt);break;case 10:Ms(o.type);break;case 22:case 23:Zn(o),_m(),s!==null&&te(Vo);break;case 24:Ms(Jt)}}function Uu(s,o){try{var u=o.updateQueue,c=u!==null?u.lastEffect:null;if(c!==null){var _=c.next;u=_;do{if((u.tag&s)===s){c=void 0;var v=u.create,w=u.inst;c=v(),w.destroy=c}u=u.next}while(u!==_)}}catch(x){ft(o,o.return,x)}}function Cr(s,o,u){try{var c=o.updateQueue,_=c!==null?c.lastEffect:null;if(_!==null){var v=_.next;c=v;do{if((c.tag&s)===s){var w=c.inst,x=w.destroy;if(x!==void 0){w.destroy=void 0,_=o;var V=u,Y=x;try{Y()}catch(ee){ft(_,V,ee)}}}c=c.next}while(c!==v)}}catch(ee){ft(o,o.return,ee)}}function ZT(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{H0(o,u)}catch(c){ft(s,s.return,c)}}}function eE(s,o,u){u.props=Bo(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(c){ft(s,o,c)}}function Ou(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var c=s.stateNode;break;case 30:c=s.stateNode;break;default:c=s.stateNode}typeof u=="function"?s.refCleanup=u(c):u.current=c}}catch(_){ft(s,o,_)}}function fs(s,o){var u=s.ref,c=s.refCleanup;if(u!==null)if(typeof c=="function")try{c()}catch(_){ft(s,o,_)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(_){ft(s,o,_)}else u.current=null}function tE(s){var o=s.type,u=s.memoizedProps,c=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&c.focus();break e;case"img":u.src?c.src=u.src:u.srcSet&&(c.srcset=u.srcSet)}}catch(_){ft(s,s.return,_)}}function Jm(s,o,u){try{var c=s.stateNode;NM(c,s.type,u,o),c[ln]=o}catch(_){ft(s,s.return,_)}}function nE(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Nr(s.type)||s.tag===4}function Wm(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||nE(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Nr(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function Qm(s,o,u){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=bi));else if(c!==4&&(c===27&&Nr(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(Qm(s,o,u),s=s.sibling;s!==null;)Qm(s,o,u),s=s.sibling}function uf(s,o,u){var c=s.tag;if(c===5||c===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(c!==4&&(c===27&&Nr(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(uf(s,o,u),s=s.sibling;s!==null;)uf(s,o,u),s=s.sibling}function iE(s){var o=s.stateNode,u=s.memoizedProps;try{for(var c=s.type,_=o.attributes;_.length;)o.removeAttributeNode(_[0]);vn(o,c,u),o[Kt]=s,o[ln]=u}catch(v){ft(s,s.return,v)}}var Vs=!1,Xt=!1,Xm=!1,sE=typeof WeakSet=="function"?WeakSet:Set,cn=null;function uM(s,o){if(s=s.containerInfo,vg=Nf,s=g0(s),Yp(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var c=u.getSelection&&u.getSelection();if(c&&c.rangeCount!==0){u=c.anchorNode;var _=c.anchorOffset,v=c.focusNode;c=c.focusOffset;try{u.nodeType,v.nodeType}catch{u=null;break e}var w=0,x=-1,V=-1,Y=0,ee=0,re=s,$=null;t:for(;;){for(var Q;re!==u||_!==0&&re.nodeType!==3||(x=w+_),re!==v||c!==0&&re.nodeType!==3||(V=w+c),re.nodeType===3&&(w+=re.nodeValue.length),(Q=re.firstChild)!==null;)$=re,re=Q;for(;;){if(re===s)break t;if($===u&&++Y===_&&(x=w),$===v&&++ee===c&&(V=w),(Q=re.nextSibling)!==null)break;re=$,$=re.parentNode}re=Q}u=x===-1||V===-1?null:{start:x,end:V}}else u=null}u=u||{start:0,end:0}}else u=null;for(Tg={focusedElem:s,selectionRange:u},Nf=!1,cn=o;cn!==null;)if(o=cn,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,cn=s;else for(;cn!==null;){switch(o=cn,v=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)_=s[u],_.ref.impl=_.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&v!==null){s=void 0,u=o,_=v.memoizedProps,v=v.memoizedState,c=u.stateNode;try{var Ee=Bo(u.type,_);s=c.getSnapshotBeforeUpdate(Ee,v),c.__reactInternalSnapshotBeforeUpdate=s}catch(be){ft(u,u.return,be)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)Cg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Cg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,cn=s;break}cn=o.return}}function rE(s,o,u){var c=u.flags;switch(u.tag){case 0:case 11:case 15:Os(s,u),c&4&&Uu(5,u);break;case 1:if(Os(s,u),c&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(w){ft(u,u.return,w)}else{var _=Bo(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(_,o,s.__reactInternalSnapshotBeforeUpdate)}catch(w){ft(u,u.return,w)}}c&64&&ZT(u),c&512&&Ou(u,u.return);break;case 3:if(Os(s,u),c&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{H0(s,o)}catch(w){ft(u,u.return,w)}}break;case 27:o===null&&c&4&&iE(u);case 26:case 5:Os(s,u),o===null&&c&4&&tE(u),c&512&&Ou(u,u.return);break;case 12:Os(s,u);break;case 31:Os(s,u),c&4&&lE(s,u);break;case 13:Os(s,u),c&4&&uE(s,u),c&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=yM.bind(null,u),OM(s,u))));break;case 22:if(c=u.memoizedState!==null||Vs,!c){o=o!==null&&o.memoizedState!==null||Xt,_=Vs;var v=Xt;Vs=c,(Xt=o)&&!v?Fs(s,u,(u.subtreeFlags&8772)!==0):Os(s,u),Vs=_,Xt=v}break;case 30:break;default:Os(s,u)}}function oE(s){var o=s.alternate;o!==null&&(s.alternate=null,oE(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Ta(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var kt=null,On=!1;function Us(s,o,u){for(u=u.child;u!==null;)aE(s,o,u),u=u.sibling}function aE(s,o,u){if(pn&&typeof pn.onCommitFiberUnmount=="function")try{pn.onCommitFiberUnmount(wi,u)}catch{}switch(u.tag){case 26:Xt||fs(u,o),Us(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Xt||fs(u,o);var c=kt,_=On;Nr(u.type)&&(kt=u.stateNode,On=!1),Us(s,o,u),$u(u.stateNode),kt=c,On=_;break;case 5:Xt||fs(u,o);case 6:if(c=kt,_=On,kt=null,Us(s,o,u),kt=c,On=_,kt!==null)if(On)try{(kt.nodeType===9?kt.body:kt.nodeName==="HTML"?kt.ownerDocument.body:kt).removeChild(u.stateNode)}catch(v){ft(u,o,v)}else try{kt.removeChild(u.stateNode)}catch(v){ft(u,o,v)}break;case 18:kt!==null&&(On?(s=kt,ZE(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),sl(s)):ZE(kt,u.stateNode));break;case 4:c=kt,_=On,kt=u.stateNode.containerInfo,On=!0,Us(s,o,u),kt=c,On=_;break;case 0:case 11:case 14:case 15:Cr(2,u,o),Xt||Cr(4,u,o),Us(s,o,u);break;case 1:Xt||(fs(u,o),c=u.stateNode,typeof c.componentWillUnmount=="function"&&eE(u,o,c)),Us(s,o,u);break;case 21:Us(s,o,u);break;case 22:Xt=(c=Xt)||u.memoizedState!==null,Us(s,o,u),Xt=c;break;default:Us(s,o,u)}}function lE(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{sl(s)}catch(u){ft(o,o.return,u)}}}function uE(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{sl(s)}catch(u){ft(o,o.return,u)}}function cM(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new sE),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new sE),o;default:throw Error(i(435,s.tag))}}function cf(s,o){var u=cM(s);o.forEach(function(c){if(!u.has(c)){u.add(c);var _=vM.bind(null,s,c);c.then(_,_)}})}function Fn(s,o){var u=o.deletions;if(u!==null)for(var c=0;c<u.length;c++){var _=u[c],v=s,w=o,x=w;e:for(;x!==null;){switch(x.tag){case 27:if(Nr(x.type)){kt=x.stateNode,On=!1;break e}break;case 5:kt=x.stateNode,On=!1;break e;case 3:case 4:kt=x.stateNode.containerInfo,On=!0;break e}x=x.return}if(kt===null)throw Error(i(160));aE(v,w,_),kt=null,On=!1,v=_.alternate,v!==null&&(v.return=null),_.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)cE(o,s),o=o.sibling}var Pi=null;function cE(s,o){var u=s.alternate,c=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Fn(o,s),qn(s),c&4&&(Cr(3,s,s.return),Uu(3,s),Cr(5,s,s.return));break;case 1:Fn(o,s),qn(s),c&512&&(Xt||u===null||fs(u,u.return)),c&64&&Vs&&(s=s.updateQueue,s!==null&&(c=s.callbacks,c!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?c:u.concat(c))));break;case 26:var _=Pi;if(Fn(o,s),qn(s),c&512&&(Xt||u===null||fs(u,u.return)),c&4){var v=u!==null?u.memoizedState:null;if(c=s.memoizedState,u===null)if(c===null)if(s.stateNode===null){e:{c=s.type,u=s.memoizedProps,_=_.ownerDocument||_;t:switch(c){case"title":v=_.getElementsByTagName("title")[0],(!v||v[Xi]||v[Kt]||v.namespaceURI==="http://www.w3.org/2000/svg"||v.hasAttribute("itemprop"))&&(v=_.createElement(c),_.head.insertBefore(v,_.querySelector("head > title"))),vn(v,c,u),v[Kt]=s,$t(v),c=v;break e;case"link":var w=cS("link","href",_).get(c+(u.href||""));if(w){for(var x=0;x<w.length;x++)if(v=w[x],v.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&v.getAttribute("rel")===(u.rel==null?null:u.rel)&&v.getAttribute("title")===(u.title==null?null:u.title)&&v.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){w.splice(x,1);break t}}v=_.createElement(c),vn(v,c,u),_.head.appendChild(v);break;case"meta":if(w=cS("meta","content",_).get(c+(u.content||""))){for(x=0;x<w.length;x++)if(v=w[x],v.getAttribute("content")===(u.content==null?null:""+u.content)&&v.getAttribute("name")===(u.name==null?null:u.name)&&v.getAttribute("property")===(u.property==null?null:u.property)&&v.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&v.getAttribute("charset")===(u.charSet==null?null:u.charSet)){w.splice(x,1);break t}}v=_.createElement(c),vn(v,c,u),_.head.appendChild(v);break;default:throw Error(i(468,c))}v[Kt]=s,$t(v),c=v}s.stateNode=c}else dS(_,s.type,s.stateNode);else s.stateNode=uS(_,c,s.memoizedProps);else v!==c?(v===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):v.count--,c===null?dS(_,s.type,s.stateNode):uS(_,c,s.memoizedProps)):c===null&&s.stateNode!==null&&Jm(s,s.memoizedProps,u.memoizedProps)}break;case 27:Fn(o,s),qn(s),c&512&&(Xt||u===null||fs(u,u.return)),u!==null&&c&4&&Jm(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Fn(o,s),qn(s),c&512&&(Xt||u===null||fs(u,u.return)),s.flags&32){_=s.stateNode;try{Un(_,"")}catch(Ee){ft(s,s.return,Ee)}}c&4&&s.stateNode!=null&&(_=s.memoizedProps,Jm(s,_,u!==null?u.memoizedProps:_)),c&1024&&(Xm=!0);break;case 6:if(Fn(o,s),qn(s),c&4){if(s.stateNode===null)throw Error(i(162));c=s.memoizedProps,u=s.stateNode;try{u.nodeValue=c}catch(Ee){ft(s,s.return,Ee)}}break;case 3:if(If=null,_=Pi,Pi=wf(o.containerInfo),Fn(o,s),Pi=_,qn(s),c&4&&u!==null&&u.memoizedState.isDehydrated)try{sl(o.containerInfo)}catch(Ee){ft(s,s.return,Ee)}Xm&&(Xm=!1,dE(s));break;case 4:c=Pi,Pi=wf(s.stateNode.containerInfo),Fn(o,s),qn(s),Pi=c;break;case 12:Fn(o,s),qn(s);break;case 31:Fn(o,s),qn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,cf(s,c)));break;case 13:Fn(o,s),qn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ff=Nn()),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,cf(s,c)));break;case 22:_=s.memoizedState!==null;var V=u!==null&&u.memoizedState!==null,Y=Vs,ee=Xt;if(Vs=Y||_,Xt=ee||V,Fn(o,s),Xt=ee,Vs=Y,qn(s),c&8192)e:for(o=s.stateNode,o._visibility=_?o._visibility&-2:o._visibility|1,_&&(u===null||V||Vs||Xt||Go(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){V=u=o;try{if(v=V.stateNode,_)w=v.style,typeof w.setProperty=="function"?w.setProperty("display","none","important"):w.display="none";else{x=V.stateNode;var re=V.memoizedProps.style,$=re!=null&&re.hasOwnProperty("display")?re.display:null;x.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(Ee){ft(V,V.return,Ee)}}}else if(o.tag===6){if(u===null){V=o;try{V.stateNode.nodeValue=_?"":V.memoizedProps}catch(Ee){ft(V,V.return,Ee)}}}else if(o.tag===18){if(u===null){V=o;try{var Q=V.stateNode;_?eS(Q,!0):eS(V.stateNode,!1)}catch(Ee){ft(V,V.return,Ee)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}c&4&&(c=s.updateQueue,c!==null&&(u=c.retryQueue,u!==null&&(c.retryQueue=null,cf(s,u))));break;case 19:Fn(o,s),qn(s),c&4&&(c=s.updateQueue,c!==null&&(s.updateQueue=null,cf(s,c)));break;case 30:break;case 21:break;default:Fn(o,s),qn(s)}}function qn(s){var o=s.flags;if(o&2){try{for(var u,c=s.return;c!==null;){if(nE(c)){u=c;break}c=c.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var _=u.stateNode,v=Wm(s);uf(s,v,_);break;case 5:var w=u.stateNode;u.flags&32&&(Un(w,""),u.flags&=-33);var x=Wm(s);uf(s,x,w);break;case 3:case 4:var V=u.stateNode.containerInfo,Y=Wm(s);Qm(s,Y,V);break;default:throw Error(i(161))}}catch(ee){ft(s,s.return,ee)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function dE(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;dE(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Os(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)rE(s,o.alternate,o),o=o.sibling}function Go(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:Cr(4,o,o.return),Go(o);break;case 1:fs(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&eE(o,o.return,u),Go(o);break;case 27:$u(o.stateNode);case 26:case 5:fs(o,o.return),Go(o);break;case 22:o.memoizedState===null&&Go(o);break;case 30:Go(o);break;default:Go(o)}s=s.sibling}}function Fs(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var c=o.alternate,_=s,v=o,w=v.flags;switch(v.tag){case 0:case 11:case 15:Fs(_,v,u),Uu(4,v);break;case 1:if(Fs(_,v,u),c=v,_=c.stateNode,typeof _.componentDidMount=="function")try{_.componentDidMount()}catch(Y){ft(c,c.return,Y)}if(c=v,_=c.updateQueue,_!==null){var x=c.stateNode;try{var V=_.shared.hiddenCallbacks;if(V!==null)for(_.shared.hiddenCallbacks=null,_=0;_<V.length;_++)G0(V[_],x)}catch(Y){ft(c,c.return,Y)}}u&&w&64&&ZT(v),Ou(v,v.return);break;case 27:iE(v);case 26:case 5:Fs(_,v,u),u&&c===null&&w&4&&tE(v),Ou(v,v.return);break;case 12:Fs(_,v,u);break;case 31:Fs(_,v,u),u&&w&4&&lE(_,v);break;case 13:Fs(_,v,u),u&&w&4&&uE(_,v);break;case 22:v.memoizedState===null&&Fs(_,v,u),Ou(v,v.return);break;case 30:break;default:Fs(_,v,u)}o=o.sibling}}function Zm(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&wu(u))}function eg(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&wu(s))}function Li(s,o,u,c){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)fE(s,o,u,c),o=o.sibling}function fE(s,o,u,c){var _=o.flags;switch(o.tag){case 0:case 11:case 15:Li(s,o,u,c),_&2048&&Uu(9,o);break;case 1:Li(s,o,u,c);break;case 3:Li(s,o,u,c),_&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&wu(s)));break;case 12:if(_&2048){Li(s,o,u,c),s=o.stateNode;try{var v=o.memoizedProps,w=v.id,x=v.onPostCommit;typeof x=="function"&&x(w,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){ft(o,o.return,V)}}else Li(s,o,u,c);break;case 31:Li(s,o,u,c);break;case 13:Li(s,o,u,c);break;case 23:break;case 22:v=o.stateNode,w=o.alternate,o.memoizedState!==null?v._visibility&2?Li(s,o,u,c):Fu(s,o):v._visibility&2?Li(s,o,u,c):(v._visibility|=2,$a(s,o,u,c,(o.subtreeFlags&10256)!==0||!1)),_&2048&&Zm(w,o);break;case 24:Li(s,o,u,c),_&2048&&eg(o.alternate,o);break;default:Li(s,o,u,c)}}function $a(s,o,u,c,_){for(_=_&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var v=s,w=o,x=u,V=c,Y=w.flags;switch(w.tag){case 0:case 11:case 15:$a(v,w,x,V,_),Uu(8,w);break;case 23:break;case 22:var ee=w.stateNode;w.memoizedState!==null?ee._visibility&2?$a(v,w,x,V,_):Fu(v,w):(ee._visibility|=2,$a(v,w,x,V,_)),_&&Y&2048&&Zm(w.alternate,w);break;case 24:$a(v,w,x,V,_),_&&Y&2048&&eg(w.alternate,w);break;default:$a(v,w,x,V,_)}o=o.sibling}}function Fu(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,c=o,_=c.flags;switch(c.tag){case 22:Fu(u,c),_&2048&&Zm(c.alternate,c);break;case 24:Fu(u,c),_&2048&&eg(c.alternate,c);break;default:Fu(u,c)}o=o.sibling}}var qu=8192;function ja(s,o,u){if(s.subtreeFlags&qu)for(s=s.child;s!==null;)hE(s,o,u),s=s.sibling}function hE(s,o,u){switch(s.tag){case 26:ja(s,o,u),s.flags&qu&&s.memoizedState!==null&&WM(u,Pi,s.memoizedState,s.memoizedProps);break;case 5:ja(s,o,u);break;case 3:case 4:var c=Pi;Pi=wf(s.stateNode.containerInfo),ja(s,o,u),Pi=c;break;case 22:s.memoizedState===null&&(c=s.alternate,c!==null&&c.memoizedState!==null?(c=qu,qu=16777216,ja(s,o,u),qu=c):ja(s,o,u));break;default:ja(s,o,u)}}function pE(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function Bu(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var c=o[u];cn=c,gE(c,s)}pE(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)mE(s),s=s.sibling}function mE(s){switch(s.tag){case 0:case 11:case 15:Bu(s),s.flags&2048&&Cr(9,s,s.return);break;case 3:Bu(s);break;case 12:Bu(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,df(s)):Bu(s);break;default:Bu(s)}}function df(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var c=o[u];cn=c,gE(c,s)}pE(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:Cr(8,o,o.return),df(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,df(o));break;default:df(o)}s=s.sibling}}function gE(s,o){for(;cn!==null;){var u=cn;switch(u.tag){case 0:case 11:case 15:Cr(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var c=u.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:wu(u.memoizedState.cache)}if(c=u.child,c!==null)c.return=u,cn=c;else e:for(u=s;cn!==null;){c=cn;var _=c.sibling,v=c.return;if(oE(c),c===u){cn=null;break e}if(_!==null){_.return=v,cn=_;break e}cn=v}}}var dM={getCacheForType:function(s){var o=_n(Jt),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u},cacheSignal:function(){return _n(Jt).controller.signal}},fM=typeof WeakMap=="function"?WeakMap:Map,lt=0,St=null,ze=null,Je=0,dt=0,ei=null,wr=!1,Ja=!1,tg=!1,qs=0,Vt=0,Ar=0,Ho=0,ng=0,ti=0,Wa=0,Gu=null,Bn=null,ig=!1,ff=0,_E=0,hf=1/0,pf=null,Ir=null,sn=0,xr=null,Qa=null,Bs=0,sg=0,rg=null,yE=null,Hu=0,og=null;function ni(){return(lt&2)!==0&&Je!==0?Je&-Je:W.T!==null?fg():pd()}function vE(){if(ti===0)if((Je&536870912)===0||Ze){var s=go;go<<=1,(go&3932160)===0&&(go=262144),ti=s}else ti=536870912;return s=Xn.current,s!==null&&(s.flags|=32),ti}function Gn(s,o,u){(s===St&&(dt===2||dt===9)||s.cancelPendingCommit!==null)&&(Xa(s,0),br(s,Je,ti,!1)),_o(s,u),((lt&2)===0||s!==St)&&(s===St&&((lt&2)===0&&(Ho|=u),Vt===4&&br(s,Je,ti,!1)),hs(s))}function TE(s,o,u){if((lt&6)!==0)throw Error(i(327));var c=!u&&(o&127)===0&&(o&s.expiredLanes)===0||Ai(s,o),_=c?mM(s,o):lg(s,o,!0),v=c;do{if(_===0){Ja&&!c&&br(s,o,0,!1);break}else{if(u=s.current.alternate,v&&!hM(u)){_=lg(s,o,!1),v=!1;continue}if(_===2){if(v=o,s.errorRecoveryDisabledLanes&v)var w=0;else w=s.pendingLanes&-536870913,w=w!==0?w:w&536870912?536870912:0;if(w!==0){o=w;e:{var x=s;_=Gu;var V=x.current.memoizedState.isDehydrated;if(V&&(Xa(x,w).flags|=256),w=lg(x,w,!1),w!==2){if(tg&&!V){x.errorRecoveryDisabledLanes|=v,Ho|=v,_=4;break e}v=Bn,Bn=_,v!==null&&(Bn===null?Bn=v:Bn.push.apply(Bn,v))}_=w}if(v=!1,_!==2)continue}}if(_===1){Xa(s,0),br(s,o,0,!0);break}e:{switch(c=s,v=_,v){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:br(c,o,ti,!wr);break e;case 2:Bn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(_=ff+300-Nn(),10<_)){if(br(c,o,ti,!wr),Ji(c,0,!0)!==0)break e;Bs=o,c.timeoutHandle=QE(EE.bind(null,c,u,Bn,pf,ig,o,ti,Ho,Wa,wr,v,"Throttled",-0,0),_);break e}EE(c,u,Bn,pf,ig,o,ti,Ho,Wa,wr,v,null,-0,0)}}break}while(!0);hs(s)}function EE(s,o,u,c,_,v,w,x,V,Y,ee,re,$,Q){if(s.timeoutHandle=-1,re=o.subtreeFlags,re&8192||(re&16785408)===16785408){re={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:bi},hE(o,v,re);var Ee=(v&62914560)===v?ff-Nn():(v&4194048)===v?_E-Nn():0;if(Ee=QM(re,Ee),Ee!==null){Bs=v,s.cancelPendingCommit=Ee(RE.bind(null,s,o,v,u,c,_,w,x,V,ee,re,null,$,Q)),br(s,v,w,!Y);return}}RE(s,o,v,u,c,_,w,x,V)}function hM(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var c=0;c<u.length;c++){var _=u[c],v=_.getSnapshot;_=_.value;try{if(!Wn(v(),_))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function br(s,o,u,c){o&=~ng,o&=~Ho,s.suspendedLanes|=o,s.pingedLanes&=~o,c&&(s.warmLanes|=o),c=s.expirationTimes;for(var _=o;0<_;){var v=31-qt(_),w=1<<v;c[v]=-1,_&=~w}u!==0&&yo(s,u,o)}function mf(){return(lt&6)===0?(zu(0),!1):!0}function ag(){if(ze!==null){if(dt===0)var s=ze.return;else s=ze,Ns=Po=null,Cm(s),Ga=null,Iu=0,s=ze;for(;s!==null;)XT(s.alternate,s),s=s.return;ze=null}}function Xa(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,kM(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Bs=0,ag(),St=s,ze=u=bs(s.current,null),Je=o,dt=0,ei=null,wr=!1,Ja=Ai(s,o),tg=!1,Wa=ti=ng=Ho=Ar=Vt=0,Bn=Gu=null,ig=!1,(o&8)!==0&&(o|=o&32);var c=s.entangledLanes;if(c!==0)for(s=s.entanglements,c&=o;0<c;){var _=31-qt(c),v=1<<_;o|=s[_],c&=~v}return qs=o,Ld(),u}function SE(s,o){Fe=null,W.H=Pu,o===Ba||o===Hd?(o=O0(),dt=3):o===dm?(o=O0(),dt=4):dt=o===Fm?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,ei=o,ze===null&&(Vt=1,sf(s,fi(o,s.current)))}function CE(){var s=Xn.current;return s===null?!0:(Je&4194048)===Je?gi===null:(Je&62914560)===Je||(Je&536870912)!==0?s===gi:!1}function wE(){var s=W.H;return W.H=Pu,s===null?Pu:s}function AE(){var s=W.A;return W.A=dM,s}function gf(){Vt=4,wr||(Je&4194048)!==Je&&Xn.current!==null||(Ja=!0),(Ar&134217727)===0&&(Ho&134217727)===0||St===null||br(St,Je,ti,!1)}function lg(s,o,u){var c=lt;lt|=2;var _=wE(),v=AE();(St!==s||Je!==o)&&(pf=null,Xa(s,o)),o=!1;var w=Vt;e:do try{if(dt!==0&&ze!==null){var x=ze,V=ei;switch(dt){case 8:ag(),w=6;break e;case 3:case 2:case 9:case 6:Xn.current===null&&(o=!0);var Y=dt;if(dt=0,ei=null,Za(s,x,V,Y),u&&Ja){w=0;break e}break;default:Y=dt,dt=0,ei=null,Za(s,x,V,Y)}}pM(),w=Vt;break}catch(ee){SE(s,ee)}while(!0);return o&&s.shellSuspendCounter++,Ns=Po=null,lt=c,W.H=_,W.A=v,ze===null&&(St=null,Je=0,Ld()),w}function pM(){for(;ze!==null;)IE(ze)}function mM(s,o){var u=lt;lt|=2;var c=wE(),_=AE();St!==s||Je!==o?(pf=null,hf=Nn()+500,Xa(s,o)):Ja=Ai(s,o);e:do try{if(dt!==0&&ze!==null){o=ze;var v=ei;t:switch(dt){case 1:dt=0,ei=null,Za(s,o,v,1);break;case 2:case 9:if(V0(v)){dt=0,ei=null,xE(o);break}o=function(){dt!==2&&dt!==9||St!==s||(dt=7),hs(s)},v.then(o,o);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:V0(v)?(dt=0,ei=null,xE(o)):(dt=0,ei=null,Za(s,o,v,7));break;case 5:var w=null;switch(ze.tag){case 26:w=ze.memoizedState;case 5:case 27:var x=ze;if(w?fS(w):x.stateNode.complete){dt=0,ei=null;var V=x.sibling;if(V!==null)ze=V;else{var Y=x.return;Y!==null?(ze=Y,_f(Y)):ze=null}break t}}dt=0,ei=null,Za(s,o,v,5);break;case 6:dt=0,ei=null,Za(s,o,v,6);break;case 8:ag(),Vt=6;break e;default:throw Error(i(462))}}gM();break}catch(ee){SE(s,ee)}while(!0);return Ns=Po=null,W.H=c,W.A=_,lt=u,ze!==null?0:(St=null,Je=0,Ld(),Vt)}function gM(){for(;ze!==null&&!po();)IE(ze)}function IE(s){var o=WT(s.alternate,s,qs);s.memoizedProps=s.pendingProps,o===null?_f(s):ze=o}function xE(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=zT(u,o,o.pendingProps,o.type,void 0,Je);break;case 11:o=zT(u,o,o.pendingProps,o.type.render,o.ref,Je);break;case 5:Cm(o);default:XT(u,o),o=ze=A0(o,qs),o=WT(u,o,qs)}s.memoizedProps=s.pendingProps,o===null?_f(s):ze=o}function Za(s,o,u,c){Ns=Po=null,Cm(o),Ga=null,Iu=0;var _=o.return;try{if(sM(s,_,o,u,Je)){Vt=1,sf(s,fi(u,s.current)),ze=null;return}}catch(v){if(_!==null)throw ze=_,v;Vt=1,sf(s,fi(u,s.current)),ze=null;return}o.flags&32768?(Ze||c===1?s=!0:Ja||(Je&536870912)!==0?s=!1:(wr=s=!0,(c===2||c===9||c===3||c===6)&&(c=Xn.current,c!==null&&c.tag===13&&(c.flags|=16384))),bE(o,s)):_f(o)}function _f(s){var o=s;do{if((o.flags&32768)!==0){bE(o,wr);return}s=o.return;var u=aM(o.alternate,o,qs);if(u!==null){ze=u;return}if(o=o.sibling,o!==null){ze=o;return}ze=o=s}while(o!==null);Vt===0&&(Vt=5)}function bE(s,o){do{var u=lM(s.alternate,s);if(u!==null){u.flags&=32767,ze=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){ze=s;return}ze=s=u}while(s!==null);Vt=6,ze=null}function RE(s,o,u,c,_,v,w,x,V){s.cancelPendingCommit=null;do yf();while(sn!==0);if((lt&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(v=o.lanes|o.childLanes,v|=Wp,Bp(s,u,v,w,x,V),s===St&&(ze=St=null,Je=0),Qa=o,xr=s,Bs=u,sg=v,rg=_,yE=c,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,TM(sr,function(){return PE(),null})):(s.callbackNode=null,s.callbackPriority=0),c=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||c){c=W.T,W.T=null,_=ue.p,ue.p=2,w=lt,lt|=4;try{uM(s,o,u)}finally{lt=w,ue.p=_,W.T=c}}sn=1,NE(),ME(),DE()}}function NE(){if(sn===1){sn=0;var s=xr,o=Qa,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=W.T,W.T=null;var c=ue.p;ue.p=2;var _=lt;lt|=4;try{cE(o,s);var v=Tg,w=g0(s.containerInfo),x=v.focusedElem,V=v.selectionRange;if(w!==x&&x&&x.ownerDocument&&m0(x.ownerDocument.documentElement,x)){if(V!==null&&Yp(x)){var Y=V.start,ee=V.end;if(ee===void 0&&(ee=Y),"selectionStart"in x)x.selectionStart=Y,x.selectionEnd=Math.min(ee,x.value.length);else{var re=x.ownerDocument||document,$=re&&re.defaultView||window;if($.getSelection){var Q=$.getSelection(),Ee=x.textContent.length,be=Math.min(V.start,Ee),yt=V.end===void 0?be:Math.min(V.end,Ee);!Q.extend&&be>yt&&(w=yt,yt=be,be=w);var G=p0(x,be),B=p0(x,yt);if(G&&B&&(Q.rangeCount!==1||Q.anchorNode!==G.node||Q.anchorOffset!==G.offset||Q.focusNode!==B.node||Q.focusOffset!==B.offset)){var z=re.createRange();z.setStart(G.node,G.offset),Q.removeAllRanges(),be>yt?(Q.addRange(z),Q.extend(B.node,B.offset)):(z.setEnd(B.node,B.offset),Q.addRange(z))}}}}for(re=[],Q=x;Q=Q.parentNode;)Q.nodeType===1&&re.push({element:Q,left:Q.scrollLeft,top:Q.scrollTop});for(typeof x.focus=="function"&&x.focus(),x=0;x<re.length;x++){var ne=re[x];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Nf=!!vg,Tg=vg=null}finally{lt=_,ue.p=c,W.T=u}}s.current=o,sn=2}}function ME(){if(sn===2){sn=0;var s=xr,o=Qa,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=W.T,W.T=null;var c=ue.p;ue.p=2;var _=lt;lt|=4;try{rE(s,o.alternate,o)}finally{lt=_,ue.p=c,W.T=u}}sn=3}}function DE(){if(sn===4||sn===3){sn=0,ad();var s=xr,o=Qa,u=Bs,c=yE;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?sn=5:(sn=0,Qa=xr=null,kE(s,s.pendingLanes));var _=s.pendingLanes;if(_===0&&(Ir=null),ws(u),o=o.stateNode,pn&&typeof pn.onCommitFiberRoot=="function")try{pn.onCommitFiberRoot(wi,o,void 0,(o.current.flags&128)===128)}catch{}if(c!==null){o=W.T,_=ue.p,ue.p=2,W.T=null;try{for(var v=s.onRecoverableError,w=0;w<c.length;w++){var x=c[w];v(x.value,{componentStack:x.stack})}}finally{W.T=o,ue.p=_}}(Bs&3)!==0&&yf(),hs(s),_=s.pendingLanes,(u&261930)!==0&&(_&42)!==0?s===og?Hu++:(Hu=0,og=s):Hu=0,zu(0)}}function kE(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,wu(o)))}function yf(){return NE(),ME(),DE(),PE()}function PE(){if(sn!==5)return!1;var s=xr,o=sg;sg=0;var u=ws(Bs),c=W.T,_=ue.p;try{ue.p=32>u?32:u,W.T=null,u=rg,rg=null;var v=xr,w=Bs;if(sn=0,Qa=xr=null,Bs=0,(lt&6)!==0)throw Error(i(331));var x=lt;if(lt|=4,mE(v.current),fE(v,v.current,w,u),lt=x,zu(0,!1),pn&&typeof pn.onPostCommitFiberRoot=="function")try{pn.onPostCommitFiberRoot(wi,v)}catch{}return!0}finally{ue.p=_,W.T=c,kE(s,o)}}function LE(s,o,u){o=fi(u,o),o=Om(s.stateNode,o,2),s=Tr(s,o,2),s!==null&&(_o(s,2),hs(s))}function ft(s,o,u){if(s.tag===3)LE(s,s,u);else for(;o!==null;){if(o.tag===3){LE(o,s,u);break}else if(o.tag===1){var c=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Ir===null||!Ir.has(c))){s=fi(u,s),u=VT(2),c=Tr(o,u,2),c!==null&&(UT(u,c,o,s),_o(c,2),hs(c));break}}o=o.return}}function ug(s,o,u){var c=s.pingCache;if(c===null){c=s.pingCache=new fM;var _=new Set;c.set(o,_)}else _=c.get(o),_===void 0&&(_=new Set,c.set(o,_));_.has(u)||(tg=!0,_.add(u),s=_M.bind(null,s,o,u),o.then(s,s))}function _M(s,o,u){var c=s.pingCache;c!==null&&c.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,St===s&&(Je&u)===u&&(Vt===4||Vt===3&&(Je&62914560)===Je&&300>Nn()-ff?(lt&2)===0&&Xa(s,0):ng|=u,Wa===Je&&(Wa=0)),hs(s)}function VE(s,o){o===0&&(o=hd()),s=Mo(s,o),s!==null&&(_o(s,o),hs(s))}function yM(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),VE(s,u)}function vM(s,o){var u=0;switch(s.tag){case 31:case 13:var c=s.stateNode,_=s.memoizedState;_!==null&&(u=_.retryLane);break;case 19:c=s.stateNode;break;case 22:c=s.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(o),VE(s,u)}function TM(s,o){return Et(s,o)}var vf=null,el=null,cg=!1,Tf=!1,dg=!1,Rr=0;function hs(s){s!==el&&s.next===null&&(el===null?vf=el=s:el=el.next=s),Tf=!0,cg||(cg=!0,SM())}function zu(s,o){if(!dg&&Tf){dg=!0;do for(var u=!1,c=vf;c!==null;){if(s!==0){var _=c.pendingLanes;if(_===0)var v=0;else{var w=c.suspendedLanes,x=c.pingedLanes;v=(1<<31-qt(42|s)+1)-1,v&=_&~(w&~x),v=v&201326741?v&201326741|1:v?v|2:0}v!==0&&(u=!0,qE(c,v))}else v=Je,v=Ji(c,c===St?v:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(v&3)===0||Ai(c,v)||(u=!0,qE(c,v));c=c.next}while(u);dg=!1}}function EM(){UE()}function UE(){Tf=cg=!1;var s=0;Rr!==0&&DM()&&(s=Rr);for(var o=Nn(),u=null,c=vf;c!==null;){var _=c.next,v=OE(c,o);v===0?(c.next=null,u===null?vf=_:u.next=_,_===null&&(el=u)):(u=c,(s!==0||(v&3)!==0)&&(Tf=!0)),c=_}sn!==0&&sn!==5||zu(s),Rr!==0&&(Rr=0)}function OE(s,o){for(var u=s.suspendedLanes,c=s.pingedLanes,_=s.expirationTimes,v=s.pendingLanes&-62914561;0<v;){var w=31-qt(v),x=1<<w,V=_[w];V===-1?((x&u)===0||(x&c)!==0)&&(_[w]=qp(x,o)):V<=o&&(s.expiredLanes|=x),v&=~x}if(o=St,u=Je,u=Ji(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c=s.callbackNode,u===0||s===o&&(dt===2||dt===9)||s.cancelPendingCommit!==null)return c!==null&&c!==null&&$n(c),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||Ai(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(c!==null&&$n(c),ws(u)){case 2:case 8:u=eu;break;case 32:u=sr;break;case 268435456:u=ld;break;default:u=sr}return c=FE.bind(null,s),u=Et(u,c),s.callbackPriority=o,s.callbackNode=u,o}return c!==null&&c!==null&&$n(c),s.callbackPriority=2,s.callbackNode=null,2}function FE(s,o){if(sn!==0&&sn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(yf()&&s.callbackNode!==u)return null;var c=Je;return c=Ji(s,s===St?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),c===0?null:(TE(s,c,o),OE(s,Nn()),s.callbackNode!=null&&s.callbackNode===u?FE.bind(null,s):null)}function qE(s,o){if(yf())return null;TE(s,o,!0)}function SM(){PM(function(){(lt&6)!==0?Et(Zl,EM):UE()})}function fg(){if(Rr===0){var s=Fa;s===0&&(s=$i,$i<<=1,($i&261888)===0&&($i=256)),Rr=s}return Rr}function BE(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:wa(""+s)}function GE(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function CM(s,o,u,c,_){if(o==="submit"&&u&&u.stateNode===_){var v=BE((_[ln]||null).action),w=c.submitter;w&&(o=(o=w[ln]||null)?BE(o.formAction):w.getAttribute("formAction"),o!==null&&(v=o,w=null));var x=new os("action","action",null,c,_);s.push({event:x,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Rr!==0){var V=w?GE(_,w):new FormData(_);Dm(u,{pending:!0,data:V,method:_.method,action:v},null,V)}}else typeof v=="function"&&(x.preventDefault(),V=w?GE(_,w):new FormData(_),Dm(u,{pending:!0,data:V,method:_.method,action:v},v,V))},currentTarget:_}]})}}for(var hg=0;hg<Jp.length;hg++){var pg=Jp[hg],wM=pg.toLowerCase(),AM=pg[0].toUpperCase()+pg.slice(1);ki(wM,"on"+AM)}ki(v0,"onAnimationEnd"),ki(T0,"onAnimationIteration"),ki(E0,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(B1,"onTransitionRun"),ki(G1,"onTransitionStart"),ki(H1,"onTransitionCancel"),ki(S0,"onTransitionEnd"),ns("onMouseEnter",["mouseout","mouseover"]),ns("onMouseLeave",["mouseout","mouseover"]),ns("onPointerEnter",["pointerout","pointerover"]),ns("onPointerLeave",["pointerout","pointerover"]),ts("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ts("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ts("onBeforeInput",["compositionend","keypress","textInput","paste"]),ts("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ts("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ts("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Yu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Yu));function HE(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var c=s[u],_=c.event;c=c.listeners;e:{var v=void 0;if(o)for(var w=c.length-1;0<=w;w--){var x=c[w],V=x.instance,Y=x.currentTarget;if(x=x.listener,V!==v&&_.isPropagationStopped())break e;v=x,_.currentTarget=Y;try{v(_)}catch(ee){Pd(ee)}_.currentTarget=null,v=V}else for(w=0;w<c.length;w++){if(x=c[w],V=x.instance,Y=x.currentTarget,x=x.listener,V!==v&&_.isPropagationStopped())break e;v=x,_.currentTarget=Y;try{v(_)}catch(ee){Pd(ee)}_.currentTarget=null,v=V}}}}function Ye(s,o){var u=o[va];u===void 0&&(u=o[va]=new Set);var c=s+"__bubble";u.has(c)||(zE(o,s,2,!1),u.add(c))}function mg(s,o,u){var c=0;o&&(c|=4),zE(u,s,c,o)}var Ef="_reactListening"+Math.random().toString(36).slice(2);function gg(s){if(!s[Ef]){s[Ef]=!0,iu.forEach(function(u){u!=="selectionchange"&&(IM.has(u)||mg(u,!1,s),mg(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Ef]||(o[Ef]=!0,mg("selectionchange",!1,o))}}function zE(s,o,u,c){switch(vS(o)){case 2:var _=e2;break;case 8:_=t2;break;default:_=Mg}u=_.bind(null,o,u,s),_=void 0,!Co||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(_=!0),c?_!==void 0?s.addEventListener(o,u,{capture:!0,passive:_}):s.addEventListener(o,u,!0):_!==void 0?s.addEventListener(o,u,{passive:_}):s.addEventListener(o,u,!1)}function _g(s,o,u,c,_){var v=c;if((o&1)===0&&(o&2)===0&&c!==null)e:for(;;){if(c===null)return;var w=c.tag;if(w===3||w===4){var x=c.stateNode.containerInfo;if(x===_)break;if(w===4)for(w=c.return;w!==null;){var V=w.tag;if((V===3||V===4)&&w.stateNode.containerInfo===_)return;w=w.return}for(;x!==null;){if(w=Zi(x),w===null)return;if(V=w.tag,V===5||V===6||V===26||V===27){c=v=w;continue e}x=x.parentNode}}c=c.return}cr(function(){var Y=v,ee=li(u),re=[];e:{var $=C0.get(s);if($!==void 0){var Q=os,Ee=s;switch(s){case"keypress":if(Ao(u)===0)break e;case"keydown":case"keyup":Q=Md;break;case"focusin":Ee="focus",Q=xo;break;case"focusout":Ee="blur",Q=xo;break;case"beforeblur":case"afterblur":Q=xo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Q=gu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Q=Sd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Q=C;break;case v0:case T0:case E0:Q=wd;break;case S0:Q=b;break;case"scroll":case"scrollend":Q=mu;break;case"wheel":Q=J;break;case"copy":case"cut":case"paste":Q=Ad;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Q=xs;break;case"toggle":case"beforetoggle":Q=Oe}var be=(o&4)!==0,yt=!be&&(s==="scroll"||s==="scrollend"),G=be?$!==null?$+"Capture":null:$;be=[];for(var B=Y,z;B!==null;){var ne=B;if(z=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||z===null||G===null||(ne=Ri(B,G),ne!=null&&be.push(Ku(B,ne,z))),yt)break;B=B.return}0<be.length&&($=new Q($,Ee,null,u,ee),re.push({event:$,listeners:be}))}}if((o&7)===0){e:{if($=s==="mouseover"||s==="pointerover",Q=s==="mouseout"||s==="pointerout",$&&u!==fu&&(Ee=u.relatedTarget||u.fromElement)&&(Zi(Ee)||Ee[Qi]))break e;if((Q||$)&&($=ee.window===ee?ee:($=ee.ownerDocument)?$.defaultView||$.parentWindow:window,Q?(Ee=u.relatedTarget||u.toElement,Q=Y,Ee=Ee?Zi(Ee):null,Ee!==null&&(yt=a(Ee),be=Ee.tag,Ee!==yt||be!==5&&be!==27&&be!==6)&&(Ee=null)):(Q=null,Ee=Y),Q!==Ee)){if(be=gu,ne="onMouseLeave",G="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(be=xs,ne="onPointerLeave",G="onPointerEnter",B="pointer"),yt=Q==null?$:jn(Q),z=Ee==null?$:jn(Ee),$=new be(ne,B+"leave",Q,u,ee),$.target=yt,$.relatedTarget=z,ne=null,Zi(ee)===Y&&(be=new be(G,B+"enter",Ee,u,ee),be.target=z,be.relatedTarget=yt,ne=be),yt=ne,Q&&Ee)t:{for(be=xM,G=Q,B=Ee,z=0,ne=G;ne;ne=be(ne))z++;ne=0;for(var we=B;we;we=be(we))ne++;for(;0<z-ne;)G=be(G),z--;for(;0<ne-z;)B=be(B),ne--;for(;z--;){if(G===B||B!==null&&G===B.alternate){be=G;break t}G=be(G),B=be(B)}be=null}else be=null;Q!==null&&YE(re,$,Q,be,!1),Ee!==null&&yt!==null&&YE(re,yt,Ee,be,!0)}}e:{if($=Y?jn(Y):window,Q=$.nodeName&&$.nodeName.toLowerCase(),Q==="select"||Q==="input"&&$.type==="file")var nt=l0;else if(o0($))if(u0)nt=O1;else{nt=V1;var Se=L1}else Q=$.nodeName,!Q||Q.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?Y&&Ca(Y.elementType)&&(nt=l0):nt=U1;if(nt&&(nt=nt(s,Y))){a0(re,nt,u,ee);break e}Se&&Se(s,$,Y),s==="focusout"&&Y&&$.type==="number"&&Y.memoizedProps.value!=null&&uu($,"number",$.value)}switch(Se=Y?jn(Y):window,s){case"focusin":(o0(Se)||Se.contentEditable==="true")&&(Ma=Se,Kp=Y,Eu=null);break;case"focusout":Eu=Kp=Ma=null;break;case"mousedown":$p=!0;break;case"contextmenu":case"mouseup":case"dragend":$p=!1,_0(re,u,ee);break;case"selectionchange":if(q1)break;case"keydown":case"keyup":_0(re,u,ee)}var qe;if(at)e:{switch(s){case"compositionstart":var We="onCompositionStart";break e;case"compositionend":We="onCompositionEnd";break e;case"compositionupdate":We="onCompositionUpdate";break e}We=void 0}else Na?bo(s,u)&&(We="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(We="onCompositionStart");We&&(us&&u.locale!=="ko"&&(Na||We!=="onCompositionStart"?We==="onCompositionEnd"&&Na&&(qe=pu()):(rs=ee,hu="value"in rs?rs.value:rs.textContent,Na=!0)),Se=Sf(Y,We),0<Se.length&&(We=new ls(We,s,null,u,ee),re.push({event:We,listeners:Se}),qe?We.data=qe:(qe=Ra(u),qe!==null&&(We.data=qe)))),(qe=ci?M1(s,u):D1(s,u))&&(We=Sf(Y,"onBeforeInput"),0<We.length&&(Se=new ls("onBeforeInput","beforeinput",null,u,ee),re.push({event:Se,listeners:We}),Se.data=qe)),CM(re,s,Y,u,ee)}HE(re,o)})}function Ku(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Sf(s,o){for(var u=o+"Capture",c=[];s!==null;){var _=s,v=_.stateNode;if(_=_.tag,_!==5&&_!==26&&_!==27||v===null||(_=Ri(s,u),_!=null&&c.unshift(Ku(s,_,v)),_=Ri(s,o),_!=null&&c.push(Ku(s,_,v))),s.tag===3)return c;s=s.return}return[]}function xM(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function YE(s,o,u,c,_){for(var v=o._reactName,w=[];u!==null&&u!==c;){var x=u,V=x.alternate,Y=x.stateNode;if(x=x.tag,V!==null&&V===c)break;x!==5&&x!==26&&x!==27||Y===null||(V=Y,_?(Y=Ri(u,v),Y!=null&&w.unshift(Ku(u,Y,V))):_||(Y=Ri(u,v),Y!=null&&w.push(Ku(u,Y,V)))),u=u.return}w.length!==0&&s.push({event:o,listeners:w})}var bM=/\r\n?/g,RM=/\u0000|\uFFFD/g;function KE(s){return(typeof s=="string"?s:""+s).replace(bM,`
`).replace(RM,"")}function $E(s,o){return o=KE(o),KE(s)===o}function _t(s,o,u,c,_,v){switch(u){case"children":typeof c=="string"?o==="body"||o==="textarea"&&c===""||Un(s,c):(typeof c=="number"||typeof c=="bigint")&&o!=="body"&&Un(s,""+c);break;case"className":Jn(s,"class",c);break;case"tabIndex":Jn(s,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":Jn(s,u,c);break;case"style":du(s,c,v);break;case"data":if(o!=="object"){Jn(s,"data",c);break}case"src":case"href":if(c===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(u);break}c=wa(""+c),s.setAttribute(u,c);break;case"action":case"formAction":if(typeof c=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof v=="function"&&(u==="formAction"?(o!=="input"&&_t(s,o,"name",_.name,_,null),_t(s,o,"formEncType",_.formEncType,_,null),_t(s,o,"formMethod",_.formMethod,_,null),_t(s,o,"formTarget",_.formTarget,_,null)):(_t(s,o,"encType",_.encType,_,null),_t(s,o,"method",_.method,_,null),_t(s,o,"target",_.target,_,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){s.removeAttribute(u);break}c=wa(""+c),s.setAttribute(u,c);break;case"onClick":c!=null&&(s.onclick=bi);break;case"onScroll":c!=null&&Ye("scroll",s);break;case"onScrollEnd":c!=null&&Ye("scrollend",s);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":s.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){s.removeAttribute("xlink:href");break}u=wa(""+c),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(u,""+c):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":c===!0?s.setAttribute(u,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?s.setAttribute(u,c):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?s.setAttribute(u,c):s.removeAttribute(u);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?s.removeAttribute(u):s.setAttribute(u,c);break;case"popover":Ye("beforetoggle",s),Ye("toggle",s),Ea(s,"popover",c);break;case"xlinkActuate":jt(s,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":jt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":jt(s,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":jt(s,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":jt(s,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":jt(s,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":jt(s,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":jt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":jt(s,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ea(s,"is",c);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Ed.get(u)||u,Ea(s,u,c))}}function yg(s,o,u,c,_,v){switch(u){case"style":du(s,c,v);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(u=c.__html,u!=null){if(_.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof c=="string"?Un(s,c):(typeof c=="number"||typeof c=="bigint")&&Un(s,""+c);break;case"onScroll":c!=null&&Ye("scroll",s);break;case"onScrollEnd":c!=null&&Ye("scrollend",s);break;case"onClick":c!=null&&(s.onclick=bi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!su.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(_=u.endsWith("Capture"),o=u.slice(2,_?u.length-7:void 0),v=s[ln]||null,v=v!=null?v[u]:null,typeof v=="function"&&s.removeEventListener(o,v,_),typeof c=="function")){typeof v!="function"&&v!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,c,_);break e}u in s?s[u]=c:c===!0?s.setAttribute(u,""):Ea(s,u,c)}}}function vn(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ye("error",s),Ye("load",s);var c=!1,_=!1,v;for(v in u)if(u.hasOwnProperty(v)){var w=u[v];if(w!=null)switch(v){case"src":c=!0;break;case"srcSet":_=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:_t(s,o,v,w,u,null)}}_&&_t(s,o,"srcSet",u.srcSet,u,null),c&&_t(s,o,"src",u.src,u,null);return;case"input":Ye("invalid",s);var x=v=w=_=null,V=null,Y=null;for(c in u)if(u.hasOwnProperty(c)){var ee=u[c];if(ee!=null)switch(c){case"name":_=ee;break;case"type":w=ee;break;case"checked":V=ee;break;case"defaultChecked":Y=ee;break;case"value":v=ee;break;case"defaultValue":x=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:_t(s,o,c,ee,u,null)}}yd(s,v,x,V,Y,w,_,!1);return;case"select":Ye("invalid",s),c=w=v=null;for(_ in u)if(u.hasOwnProperty(_)&&(x=u[_],x!=null))switch(_){case"value":v=x;break;case"defaultValue":w=x;break;case"multiple":c=x;default:_t(s,o,_,x,u,null)}o=v,u=w,s.multiple=!!c,o!=null?or(s,!!c,o,!1):u!=null&&or(s,!!c,u,!0);return;case"textarea":Ye("invalid",s),v=_=c=null;for(w in u)if(u.hasOwnProperty(w)&&(x=u[w],x!=null))switch(w){case"value":c=x;break;case"defaultValue":_=x;break;case"children":v=x;break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:_t(s,o,w,x,u,null)}ar(s,c,_,v);return;case"option":for(V in u)if(u.hasOwnProperty(V)&&(c=u[V],c!=null))switch(V){case"selected":s.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:_t(s,o,V,c,u,null)}return;case"dialog":Ye("beforetoggle",s),Ye("toggle",s),Ye("cancel",s),Ye("close",s);break;case"iframe":case"object":Ye("load",s);break;case"video":case"audio":for(c=0;c<Yu.length;c++)Ye(Yu[c],s);break;case"image":Ye("error",s),Ye("load",s);break;case"details":Ye("toggle",s);break;case"embed":case"source":case"link":Ye("error",s),Ye("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in u)if(u.hasOwnProperty(Y)&&(c=u[Y],c!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:_t(s,o,Y,c,u,null)}return;default:if(Ca(o)){for(ee in u)u.hasOwnProperty(ee)&&(c=u[ee],c!==void 0&&yg(s,o,ee,c,u,void 0));return}}for(x in u)u.hasOwnProperty(x)&&(c=u[x],c!=null&&_t(s,o,x,c,u,null))}function NM(s,o,u,c){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var _=null,v=null,w=null,x=null,V=null,Y=null,ee=null;for(Q in u){var re=u[Q];if(u.hasOwnProperty(Q)&&re!=null)switch(Q){case"checked":break;case"value":break;case"defaultValue":V=re;default:c.hasOwnProperty(Q)||_t(s,o,Q,null,c,re)}}for(var $ in c){var Q=c[$];if(re=u[$],c.hasOwnProperty($)&&(Q!=null||re!=null))switch($){case"type":v=Q;break;case"name":_=Q;break;case"checked":Y=Q;break;case"defaultChecked":ee=Q;break;case"value":w=Q;break;case"defaultValue":x=Q;break;case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,o));break;default:Q!==re&&_t(s,o,$,Q,c,re)}}Sa(s,w,x,V,Y,ee,v,_);return;case"select":Q=w=x=$=null;for(v in u)if(V=u[v],u.hasOwnProperty(v)&&V!=null)switch(v){case"value":break;case"multiple":Q=V;default:c.hasOwnProperty(v)||_t(s,o,v,null,c,V)}for(_ in c)if(v=c[_],V=u[_],c.hasOwnProperty(_)&&(v!=null||V!=null))switch(_){case"value":$=v;break;case"defaultValue":x=v;break;case"multiple":w=v;default:v!==V&&_t(s,o,_,v,c,V)}o=x,u=w,c=Q,$!=null?or(s,!!u,$,!1):!!c!=!!u&&(o!=null?or(s,!!u,o,!0):or(s,!!u,u?[]:"",!1));return;case"textarea":Q=$=null;for(x in u)if(_=u[x],u.hasOwnProperty(x)&&_!=null&&!c.hasOwnProperty(x))switch(x){case"value":break;case"children":break;default:_t(s,o,x,null,c,_)}for(w in c)if(_=c[w],v=u[w],c.hasOwnProperty(w)&&(_!=null||v!=null))switch(w){case"value":$=_;break;case"defaultValue":Q=_;break;case"children":break;case"dangerouslySetInnerHTML":if(_!=null)throw Error(i(91));break;default:_!==v&&_t(s,o,w,_,c,v)}vd(s,$,Q);return;case"option":for(var Ee in u)if($=u[Ee],u.hasOwnProperty(Ee)&&$!=null&&!c.hasOwnProperty(Ee))switch(Ee){case"selected":s.selected=!1;break;default:_t(s,o,Ee,null,c,$)}for(V in c)if($=c[V],Q=u[V],c.hasOwnProperty(V)&&$!==Q&&($!=null||Q!=null))switch(V){case"selected":s.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:_t(s,o,V,$,c,Q)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var be in u)$=u[be],u.hasOwnProperty(be)&&$!=null&&!c.hasOwnProperty(be)&&_t(s,o,be,null,c,$);for(Y in c)if($=c[Y],Q=u[Y],c.hasOwnProperty(Y)&&$!==Q&&($!=null||Q!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(i(137,o));break;default:_t(s,o,Y,$,c,Q)}return;default:if(Ca(o)){for(var yt in u)$=u[yt],u.hasOwnProperty(yt)&&$!==void 0&&!c.hasOwnProperty(yt)&&yg(s,o,yt,void 0,c,$);for(ee in c)$=c[ee],Q=u[ee],!c.hasOwnProperty(ee)||$===Q||$===void 0&&Q===void 0||yg(s,o,ee,$,c,Q);return}}for(var G in u)$=u[G],u.hasOwnProperty(G)&&$!=null&&!c.hasOwnProperty(G)&&_t(s,o,G,null,c,$);for(re in c)$=c[re],Q=u[re],!c.hasOwnProperty(re)||$===Q||$==null&&Q==null||_t(s,o,re,$,c,Q)}function jE(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function MM(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,u=performance.getEntriesByType("resource"),c=0;c<u.length;c++){var _=u[c],v=_.transferSize,w=_.initiatorType,x=_.duration;if(v&&x&&jE(w)){for(w=0,x=_.responseEnd,c+=1;c<u.length;c++){var V=u[c],Y=V.startTime;if(Y>x)break;var ee=V.transferSize,re=V.initiatorType;ee&&jE(re)&&(V=V.responseEnd,w+=ee*(V<x?1:(x-Y)/(V-Y)))}if(--c,o+=8*(v+w)/(_.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var vg=null,Tg=null;function Cf(s){return s.nodeType===9?s:s.ownerDocument}function JE(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function WE(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function Eg(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Sg=null;function DM(){var s=window.event;return s&&s.type==="popstate"?s===Sg?!1:(Sg=s,!0):(Sg=null,!1)}var QE=typeof setTimeout=="function"?setTimeout:void 0,kM=typeof clearTimeout=="function"?clearTimeout:void 0,XE=typeof Promise=="function"?Promise:void 0,PM=typeof queueMicrotask=="function"?queueMicrotask:typeof XE<"u"?function(s){return XE.resolve(null).then(s).catch(LM)}:QE;function LM(s){setTimeout(function(){throw s})}function Nr(s){return s==="head"}function ZE(s,o){var u=o,c=0;do{var _=u.nextSibling;if(s.removeChild(u),_&&_.nodeType===8)if(u=_.data,u==="/$"||u==="/&"){if(c===0){s.removeChild(_),sl(o);return}c--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")c++;else if(u==="html")$u(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,$u(u);for(var v=u.firstChild;v;){var w=v.nextSibling,x=v.nodeName;v[Xi]||x==="SCRIPT"||x==="STYLE"||x==="LINK"&&v.rel.toLowerCase()==="stylesheet"||u.removeChild(v),v=w}}else u==="body"&&$u(s.ownerDocument.body);u=_}while(u);sl(o)}function eS(s,o){var u=s;s=0;do{var c=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),c&&c.nodeType===8)if(u=c.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=c}while(u)}function Cg(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Cg(u),Ta(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function VM(s,o,u,c){for(;s.nodeType===1;){var _=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!c&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(c){if(!s[Xi])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(v=s.getAttribute("rel"),v==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(v!==_.rel||s.getAttribute("href")!==(_.href==null||_.href===""?null:_.href)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin)||s.getAttribute("title")!==(_.title==null?null:_.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(v=s.getAttribute("src"),(v!==(_.src==null?null:_.src)||s.getAttribute("type")!==(_.type==null?null:_.type)||s.getAttribute("crossorigin")!==(_.crossOrigin==null?null:_.crossOrigin))&&v&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var v=_.name==null?null:""+_.name;if(_.type==="hidden"&&s.getAttribute("name")===v)return s}else return s;if(s=_i(s.nextSibling),s===null)break}return null}function UM(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=_i(s.nextSibling),s===null))return null;return s}function tS(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=_i(s.nextSibling),s===null))return null;return s}function wg(s){return s.data==="$?"||s.data==="$~"}function Ag(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function OM(s,o){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||u.readyState!=="loading")o();else{var c=function(){o(),u.removeEventListener("DOMContentLoaded",c)};u.addEventListener("DOMContentLoaded",c),s._reactRetry=c}}function _i(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var Ig=null;function nS(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(o===0)return _i(s.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}s=s.nextSibling}return null}function iS(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return s;o--}else u!=="/$"&&u!=="/&"||o++}s=s.previousSibling}return null}function sS(s,o,u){switch(o=Cf(u),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function $u(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Ta(s)}var yi=new Map,rS=new Set;function wf(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Gs=ue.d;ue.d={f:FM,r:qM,D:BM,C:GM,L:HM,m:zM,X:KM,S:YM,M:$M};function FM(){var s=Gs.f(),o=mf();return s||o}function qM(s){var o=ai(s);o!==null&&o.tag===5&&o.type==="form"?ST(o):Gs.r(s)}var tl=typeof document>"u"?null:document;function oS(s,o,u){var c=tl;if(c&&typeof o=="string"&&o){var _=Vn(o);_='link[rel="'+s+'"][href="'+_+'"]',typeof u=="string"&&(_+='[crossorigin="'+u+'"]'),rS.has(_)||(rS.add(_),s={rel:s,crossOrigin:u,href:o},c.querySelector(_)===null&&(o=c.createElement("link"),vn(o,"link",s),$t(o),c.head.appendChild(o)))}}function BM(s){Gs.D(s),oS("dns-prefetch",s,null)}function GM(s,o){Gs.C(s,o),oS("preconnect",s,o)}function HM(s,o,u){Gs.L(s,o,u);var c=tl;if(c&&s&&o){var _='link[rel="preload"][as="'+Vn(o)+'"]';o==="image"&&u&&u.imageSrcSet?(_+='[imagesrcset="'+Vn(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(_+='[imagesizes="'+Vn(u.imageSizes)+'"]')):_+='[href="'+Vn(s)+'"]';var v=_;switch(o){case"style":v=nl(s);break;case"script":v=il(s)}yi.has(v)||(s=T({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),yi.set(v,s),c.querySelector(_)!==null||o==="style"&&c.querySelector(ju(v))||o==="script"&&c.querySelector(Ju(v))||(o=c.createElement("link"),vn(o,"link",s),$t(o),c.head.appendChild(o)))}}function zM(s,o){Gs.m(s,o);var u=tl;if(u&&s){var c=o&&typeof o.as=="string"?o.as:"script",_='link[rel="modulepreload"][as="'+Vn(c)+'"][href="'+Vn(s)+'"]',v=_;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":v=il(s)}if(!yi.has(v)&&(s=T({rel:"modulepreload",href:s},o),yi.set(v,s),u.querySelector(_)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Ju(v)))return}c=u.createElement("link"),vn(c,"link",s),$t(c),u.head.appendChild(c)}}}function YM(s,o,u){Gs.S(s,o,u);var c=tl;if(c&&s){var _=es(c).hoistableStyles,v=nl(s);o=o||"default";var w=_.get(v);if(!w){var x={loading:0,preload:null};if(w=c.querySelector(ju(v)))x.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":o},u),(u=yi.get(v))&&xg(s,u);var V=w=c.createElement("link");$t(V),vn(V,"link",s),V._p=new Promise(function(Y,ee){V.onload=Y,V.onerror=ee}),V.addEventListener("load",function(){x.loading|=1}),V.addEventListener("error",function(){x.loading|=2}),x.loading|=4,Af(w,o,c)}w={type:"stylesheet",instance:w,count:1,state:x},_.set(v,w)}}}function KM(s,o){Gs.X(s,o);var u=tl;if(u&&s){var c=es(u).hoistableScripts,_=il(s),v=c.get(_);v||(v=u.querySelector(Ju(_)),v||(s=T({src:s,async:!0},o),(o=yi.get(_))&&bg(s,o),v=u.createElement("script"),$t(v),vn(v,"link",s),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(_,v))}}function $M(s,o){Gs.M(s,o);var u=tl;if(u&&s){var c=es(u).hoistableScripts,_=il(s),v=c.get(_);v||(v=u.querySelector(Ju(_)),v||(s=T({src:s,async:!0,type:"module"},o),(o=yi.get(_))&&bg(s,o),v=u.createElement("script"),$t(v),vn(v,"link",s),u.head.appendChild(v)),v={type:"script",instance:v,count:1,state:null},c.set(_,v))}}function aS(s,o,u,c){var _=(_=Me.current)?wf(_):null;if(!_)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=nl(u.href),u=es(_).hoistableStyles,c=u.get(o),c||(c={type:"style",instance:null,count:0,state:null},u.set(o,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=nl(u.href);var v=es(_).hoistableStyles,w=v.get(s);if(w||(_=_.ownerDocument||_,w={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},v.set(s,w),(v=_.querySelector(ju(s)))&&!v._p&&(w.instance=v,w.state.loading=5),yi.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},yi.set(s,u),v||jM(_,s,u,w.state))),o&&c===null)throw Error(i(528,""));return w}if(o&&c!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=il(u),u=es(_).hoistableScripts,c=u.get(o),c||(c={type:"script",instance:null,count:0,state:null},u.set(o,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function nl(s){return'href="'+Vn(s)+'"'}function ju(s){return'link[rel="stylesheet"]['+s+"]"}function lS(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function jM(s,o,u,c){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?c.loading=1:(o=s.createElement("link"),c.preload=o,o.addEventListener("load",function(){return c.loading|=1}),o.addEventListener("error",function(){return c.loading|=2}),vn(o,"link",u),$t(o),s.head.appendChild(o))}function il(s){return'[src="'+Vn(s)+'"]'}function Ju(s){return"script[async]"+s}function uS(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var c=s.querySelector('style[data-href~="'+Vn(u.href)+'"]');if(c)return o.instance=c,$t(c),c;var _=T({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return c=(s.ownerDocument||s).createElement("style"),$t(c),vn(c,"style",_),Af(c,u.precedence,s),o.instance=c;case"stylesheet":_=nl(u.href);var v=s.querySelector(ju(_));if(v)return o.state.loading|=4,o.instance=v,$t(v),v;c=lS(u),(_=yi.get(_))&&xg(c,_),v=(s.ownerDocument||s).createElement("link"),$t(v);var w=v;return w._p=new Promise(function(x,V){w.onload=x,w.onerror=V}),vn(v,"link",c),o.state.loading|=4,Af(v,u.precedence,s),o.instance=v;case"script":return v=il(u.src),(_=s.querySelector(Ju(v)))?(o.instance=_,$t(_),_):(c=u,(_=yi.get(v))&&(c=T({},u),bg(c,_)),s=s.ownerDocument||s,_=s.createElement("script"),$t(_),vn(_,"link",c),s.head.appendChild(_),o.instance=_);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(c=o.instance,o.state.loading|=4,Af(c,u.precedence,s));return o.instance}function Af(s,o,u){for(var c=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),_=c.length?c[c.length-1]:null,v=_,w=0;w<c.length;w++){var x=c[w];if(x.dataset.precedence===o)v=x;else if(v!==_)break}v?v.parentNode.insertBefore(s,v.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function xg(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function bg(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var If=null;function cS(s,o,u){if(If===null){var c=new Map,_=If=new Map;_.set(u,c)}else _=If,c=_.get(u),c||(c=new Map,_.set(u,c));if(c.has(s))return c;for(c.set(s,null),u=u.getElementsByTagName(s),_=0;_<u.length;_++){var v=u[_];if(!(v[Xi]||v[Kt]||s==="link"&&v.getAttribute("rel")==="stylesheet")&&v.namespaceURI!=="http://www.w3.org/2000/svg"){var w=v.getAttribute(o)||"";w=s+w;var x=c.get(w);x?x.push(v):c.set(w,[v])}}return c}function dS(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function JM(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function fS(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function WM(s,o,u,c){if(u.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var _=nl(c.href),v=o.querySelector(ju(_));if(v){o=v._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=xf.bind(s),o.then(s,s)),u.state.loading|=4,u.instance=v,$t(v);return}v=o.ownerDocument||o,c=lS(c),(_=yi.get(_))&&xg(c,_),v=v.createElement("link"),$t(v);var w=v;w._p=new Promise(function(x,V){w.onload=x,w.onerror=V}),vn(v,"link",c),u.instance=v}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=xf.bind(s),o.addEventListener("load",u),o.addEventListener("error",u))}}var Rg=0;function QM(s,o){return s.stylesheets&&s.count===0&&Rf(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var c=setTimeout(function(){if(s.stylesheets&&Rf(s,s.stylesheets),s.unsuspend){var v=s.unsuspend;s.unsuspend=null,v()}},6e4+o);0<s.imgBytes&&Rg===0&&(Rg=62500*MM());var _=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Rf(s,s.stylesheets),s.unsuspend)){var v=s.unsuspend;s.unsuspend=null,v()}},(s.imgBytes>Rg?50:800)+o);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(c),clearTimeout(_)}}:null}function xf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Rf(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var bf=null;function Rf(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,bf=new Map,o.forEach(XM,s),bf=null,xf.call(s))}function XM(s,o){if(!(o.state.loading&4)){var u=bf.get(s);if(u)var c=u.get(null);else{u=new Map,bf.set(s,u);for(var _=s.querySelectorAll("link[data-precedence],style[data-precedence]"),v=0;v<_.length;v++){var w=_[v];(w.nodeName==="LINK"||w.getAttribute("media")!=="not all")&&(u.set(w.dataset.precedence,w),c=w)}c&&u.set(null,c)}_=o.instance,w=_.getAttribute("data-precedence"),v=u.get(w)||c,v===c&&u.set(null,_),u.set(w,_),this.count++,c=xf.bind(this),_.addEventListener("load",c),_.addEventListener("error",c),v?v.parentNode.insertBefore(_,v.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(_,s.firstChild)),o.state.loading|=4}}var Wu={$$typeof:j,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function ZM(s,o,u,c,_,v,w,x,V){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wi(0),this.hiddenUpdates=Wi(null),this.identifierPrefix=c,this.onUncaughtError=_,this.onCaughtError=v,this.onRecoverableError=w,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function hS(s,o,u,c,_,v,w,x,V,Y,ee,re){return s=new ZM(s,o,u,w,V,Y,ee,re,x),o=1,v===!0&&(o|=24),v=Qn(3,null,null,o),s.current=v,v.stateNode=s,o=lm(),o.refCount++,s.pooledCache=o,o.refCount++,v.memoizedState={element:c,isDehydrated:u,cache:o},fm(v),s}function pS(s){return s?(s=Pa,s):Pa}function mS(s,o,u,c,_,v){_=pS(_),c.context===null?c.context=_:c.pendingContext=_,c=vr(o),c.payload={element:u},v=v===void 0?null:v,v!==null&&(c.callback=v),u=Tr(s,c,o),u!==null&&(Gn(u,s,o),bu(u,s,o))}function gS(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function Ng(s,o){gS(s,o),(s=s.alternate)&&gS(s,o)}function _S(s){if(s.tag===13||s.tag===31){var o=Mo(s,67108864);o!==null&&Gn(o,s,67108864),Ng(s,67108864)}}function yS(s){if(s.tag===13||s.tag===31){var o=ni();o=vo(o);var u=Mo(s,o);u!==null&&Gn(u,s,o),Ng(s,o)}}var Nf=!0;function e2(s,o,u,c){var _=W.T;W.T=null;var v=ue.p;try{ue.p=2,Mg(s,o,u,c)}finally{ue.p=v,W.T=_}}function t2(s,o,u,c){var _=W.T;W.T=null;var v=ue.p;try{ue.p=8,Mg(s,o,u,c)}finally{ue.p=v,W.T=_}}function Mg(s,o,u,c){if(Nf){var _=Dg(c);if(_===null)_g(s,o,c,Mf,u),TS(s,c);else if(i2(_,s,o,u,c))c.stopPropagation();else if(TS(s,c),o&4&&-1<n2.indexOf(s)){for(;_!==null;){var v=ai(_);if(v!==null)switch(v.tag){case 3:if(v=v.stateNode,v.current.memoizedState.isDehydrated){var w=ji(v.pendingLanes);if(w!==0){var x=v;for(x.pendingLanes|=2,x.entangledLanes|=2;w;){var V=1<<31-qt(w);x.entanglements[1]|=V,w&=~V}hs(v),(lt&6)===0&&(hf=Nn()+500,zu(0))}}break;case 31:case 13:x=Mo(v,2),x!==null&&Gn(x,v,2),mf(),Ng(v,2)}if(v=Dg(c),v===null&&_g(s,o,c,Mf,u),v===_)break;_=v}_!==null&&c.stopPropagation()}else _g(s,o,c,null,u)}}function Dg(s){return s=li(s),kg(s)}var Mf=null;function kg(s){if(Mf=null,s=Zi(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=l(o),s!==null)return s;s=null}else if(u===31){if(s=d(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Mf=s,null}function vS(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mo()){case Zl:return 2;case eu:return 8;case sr:case Fp:return 32;case ld:return 268435456;default:return 32}default:return 32}}var Pg=!1,Mr=null,Dr=null,kr=null,Qu=new Map,Xu=new Map,Pr=[],n2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function TS(s,o){switch(s){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Qu.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xu.delete(o.pointerId)}}function Zu(s,o,u,c,_,v){return s===null||s.nativeEvent!==v?(s={blockedOn:o,domEventName:u,eventSystemFlags:c,nativeEvent:v,targetContainers:[_]},o!==null&&(o=ai(o),o!==null&&_S(o)),s):(s.eventSystemFlags|=c,o=s.targetContainers,_!==null&&o.indexOf(_)===-1&&o.push(_),s)}function i2(s,o,u,c,_){switch(o){case"focusin":return Mr=Zu(Mr,s,o,u,c,_),!0;case"dragenter":return Dr=Zu(Dr,s,o,u,c,_),!0;case"mouseover":return kr=Zu(kr,s,o,u,c,_),!0;case"pointerover":var v=_.pointerId;return Qu.set(v,Zu(Qu.get(v)||null,s,o,u,c,_)),!0;case"gotpointercapture":return v=_.pointerId,Xu.set(v,Zu(Xu.get(v)||null,s,o,u,c,_)),!0}return!1}function ES(s){var o=Zi(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){s.blockedOn=o,Ii(s.priority,function(){yS(u)});return}}else if(o===31){if(o=d(u),o!==null){s.blockedOn=o,Ii(s.priority,function(){yS(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Df(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=Dg(s.nativeEvent);if(u===null){u=s.nativeEvent;var c=new u.constructor(u.type,u);fu=c,u.target.dispatchEvent(c),fu=null}else return o=ai(u),o!==null&&_S(o),s.blockedOn=u,!1;o.shift()}return!0}function SS(s,o,u){Df(s)&&u.delete(o)}function s2(){Pg=!1,Mr!==null&&Df(Mr)&&(Mr=null),Dr!==null&&Df(Dr)&&(Dr=null),kr!==null&&Df(kr)&&(kr=null),Qu.forEach(SS),Xu.forEach(SS)}function kf(s,o){s.blockedOn===o&&(s.blockedOn=null,Pg||(Pg=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,s2)))}var Pf=null;function CS(s){Pf!==s&&(Pf=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Pf===s&&(Pf=null);for(var o=0;o<s.length;o+=3){var u=s[o],c=s[o+1],_=s[o+2];if(typeof c!="function"){if(kg(c||u)===null)continue;break}var v=ai(u);v!==null&&(s.splice(o,3),o-=3,Dm(v,{pending:!0,data:_,method:u.method,action:c},c,_))}}))}function sl(s){function o(V){return kf(V,s)}Mr!==null&&kf(Mr,s),Dr!==null&&kf(Dr,s),kr!==null&&kf(kr,s),Qu.forEach(o),Xu.forEach(o);for(var u=0;u<Pr.length;u++){var c=Pr[u];c.blockedOn===s&&(c.blockedOn=null)}for(;0<Pr.length&&(u=Pr[0],u.blockedOn===null);)ES(u),u.blockedOn===null&&Pr.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(c=0;c<u.length;c+=3){var _=u[c],v=u[c+1],w=_[ln]||null;if(typeof v=="function")w||CS(u);else if(w){var x=null;if(v&&v.hasAttribute("formAction")){if(_=v,w=v[ln]||null)x=w.formAction;else if(kg(_)!==null)continue}else x=w.action;typeof x=="function"?u[c+1]=x:(u.splice(c,3),c-=3),CS(u)}}}function wS(){function s(v){v.canIntercept&&v.info==="react-transition"&&v.intercept({handler:function(){return new Promise(function(w){return _=w})},focusReset:"manual",scroll:"manual"})}function o(){_!==null&&(_(),_=null),c||setTimeout(u,20)}function u(){if(!c&&!navigation.transition){var v=navigation.currentEntry;v&&v.url!=null&&navigation.navigate(v.url,{state:v.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,_=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){c=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),_!==null&&(_(),_=null)}}}function Lg(s){this._internalRoot=s}Lf.prototype.render=Lg.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,c=ni();mS(u,c,s,o,null,null)},Lf.prototype.unmount=Lg.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;mS(s.current,2,null,s,null,null),mf(),o[Qi]=null}};function Lf(s){this._internalRoot=s}Lf.prototype.unstable_scheduleHydration=function(s){if(s){var o=pd();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Pr.length&&o!==0&&o<Pr[u].priority;u++);Pr.splice(u,0,s),u===0&&ES(s)}};var AS=e.version;if(AS!=="19.2.0")throw Error(i(527,AS,"19.2.0"));ue.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=h(o),s=s!==null?y(s):null,s=s===null?null:s.stateNode,s};var r2={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vf.isDisabled&&Vf.supportsFiber)try{wi=Vf.inject(r2),pn=Vf}catch{}}return tc.createRoot=function(s,o){if(!r(s))throw Error(i(299));var u=!1,c="",_=DT,v=kT,w=PT;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(c=o.identifierPrefix),o.onUncaughtError!==void 0&&(_=o.onUncaughtError),o.onCaughtError!==void 0&&(v=o.onCaughtError),o.onRecoverableError!==void 0&&(w=o.onRecoverableError)),o=hS(s,1,!1,null,null,u,c,null,_,v,w,wS),s[Qi]=o.current,gg(s),new Lg(o)},tc.hydrateRoot=function(s,o,u){if(!r(s))throw Error(i(299));var c=!1,_="",v=DT,w=kT,x=PT,V=null;return u!=null&&(u.unstable_strictMode===!0&&(c=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(w=u.onCaughtError),u.onRecoverableError!==void 0&&(x=u.onRecoverableError),u.formState!==void 0&&(V=u.formState)),o=hS(s,1,!0,o,u??null,c,_,V,v,w,x,wS),o.context=pS(null),u=o.current,c=ni(),c=vo(c),_=vr(c),_.callback=null,Tr(u,_,c),u=c,o.current.lanes=u,_o(o,u),hs(o),s[Qi]=o.current,gg(s),new Lf(o)},tc.version="19.2.0",tc}var LS;function g2(){if(LS)return Og.exports;LS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Og.exports=m2(),Og.exports}var _2=g2();const y2=MI(_2),hy=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6a7.5 7.5 0 1 0 7.5 7.5h-7.5V6Z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 10.5H21A7.5 7.5 0 0 0 13.5 3v7.5Z"})]}),py=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",...n,children:[S.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),S.jsx("circle",{cx:"9",cy:"7",r:"4"}),S.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),S.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),v2=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),T2=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 24 24",...n,children:[S.jsx("circle",{cx:"6",cy:"6",r:"1.5"}),S.jsx("circle",{cx:"12",cy:"6",r:"1.5"}),S.jsx("circle",{cx:"18",cy:"6",r:"1.5"}),S.jsx("circle",{cx:"6",cy:"12",r:"1.5"}),S.jsx("circle",{cx:"12",cy:"12",r:"1.5"}),S.jsx("circle",{cx:"18",cy:"12",r:"1.5"}),S.jsx("circle",{cx:"6",cy:"18",r:"1.5"}),S.jsx("circle",{cx:"12",cy:"18",r:"1.5"}),S.jsx("circle",{cx:"18",cy:"18",r:"1.5"})]}),E2=n=>S.jsxs("svg",{viewBox:"0 0 24 24",...n,children:[S.jsx("path",{d:"M12 11.23l-7.37 5.26A2 2 0 014 17.76V6.24A2 2 0 014.63 5l7.37 5.23a2 2 0 001.99 0z",fill:"#EA4335"}),S.jsx("path",{d:"M20 6.24V17.76a2 2 0 01-.63.87L12 11.23l8-5.71a2 2 0 010 .72z",fill:"#34A853"}),S.jsx("path",{d:"M4.63 5L12 10.23 19.37 5A2 2 0 0017.76 4H6.24a2 2 0 00-1.61 1z",fill:"#4285F4"}),S.jsx("path",{d:"M20 17.76V6.24a2 2 0 00-.63-.87L12 11.23l7.37 5.26a2 2 0 00.63-1.01z",fill:"#FBBC05"})]}),S2=n=>S.jsxs("svg",{viewBox:"0 0 24 24",...n,children:[S.jsx("path",{d:"M15.55 3.52L8.45 3.52 1.92 14.25 5.19 19.91 11.73 19.91 15.55 13.38z",fill:"#34A853"}),S.jsx("path",{d:"M8.45 3.52L1.92 14.25 5.19 19.91 8.45 14.25z",fill:"#188038"}),S.jsx("path",{d:"M18.81 19.91L15.55 14.25 8.45 14.25 11.73 19.91z",fill:"#FFC107"}),S.jsx("path",{d:"M15.55 3.52L8.45 14.25 15.55 14.25 18.81 8.88z",fill:"#4285F4"}),S.jsx("path",{d:"M15.55 3.52L18.81 8.88 22.08 14.25 18.81 19.91 15.55 14.25z",fill:"#1967D2"})]}),C2=n=>S.jsxs("svg",{viewBox:"0 0 24 24",...n,children:[S.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z",fill:"#4285F4"}),S.jsx("path",{d:"M13 9h5.5L13 3.5V9z",fill:"#1967D2"}),S.jsx("path",{d:"M15 18H9v-2h6v2zm3-4H9v-2h9v2zm0-4H9V8h9v2z",fill:"#FFF"})]}),w2=n=>S.jsxs("svg",{viewBox:"0 0 24 24",...n,children:[S.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6z",fill:"#34A853"}),S.jsx("path",{d:"M13 9h5.5L13 3.5V9z",fill:"#188038"}),S.jsx("path",{d:"M12 18H9v-2h3v2zm3 0h-2v-2h2v2zm-3-2H9v-2h3v2zm3 0h-2v-2h2v2zm-3-2H9v-2h3v2zm3 0h-2v-2h2v2z",fill:"#FFF"})]}),A2=n=>S.jsxs("svg",{viewBox:"0 0 28 28",...n,children:[S.jsx("path",{d:"M24.9,7.5c-0.3-1.1-1.2-2-2.3-2.3C20.9,4.6,14,4.6,14,4.6s-6.9,0-8.6,0.6C4.3,5.5,3.4,6.4,3.1,7.5 C2.5,9.2,2.5,14,2.5,14s0,4.8,0.6,6.5c0.3,1.1,1.2,2,2.3,2.3c1.7,0.6,8.6,0.6,8.6,0.6s6.9,0,8.6-0.6c1.1-0.3,2-1.2,2.3-2.3 c0.6-1.7,0.6-6.5,0.6-6.5S25.5,9.2,24.9,7.5z",fill:"#FF0000"}),S.jsx("polygon",{points:"11.5,18.8 18.4,14 11.5,9.2",fill:"#FFFFFF"})]}),I2=n=>S.jsxs("svg",{viewBox:"0 0 24 24",...n,children:[S.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2",fill:"#4285F4"}),S.jsx("rect",{x:"3",y:"9",width:"18",height:"1",fill:"#FFFFFF"}),S.jsx("rect",{x:"7",y:"2",width:"2",height:"4",fill:"#1A73E8"}),S.jsx("rect",{x:"15",y:"2",width:"2",height:"4",fill:"#1A73E8"}),S.jsx("text",{x:"12",y:"17.5",textAnchor:"middle",fontSize:"10",fill:"white",fontWeight:"bold",children:"31"})]}),x2=n=>S.jsxs("svg",{viewBox:"0 0 24 24",...n,children:[S.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",fill:"#FFC107"}),S.jsx("path",{d:"M12 7c-1.93 0-3.5 1.57-3.5 3.5 0 1.48 0.91 2.75 2.18 3.25L10 16h4l-.68-2.25c1.27-.5 2.18-1.77 2.18-3.25C15.5 8.57 13.93 7 12 7zm0 5c-.83 0-1.5-.67-1.5-1.5S11.17 9 12 9s1.5.67 1.5 1.5S12.83 12 12 12z",fill:"#FFF"}),S.jsx("path",{d:"M11 17h2v2h-2z",fill:"#FFF"})]}),DI=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...n,children:[S.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),S.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),S.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),S.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),c_=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...n,children:[S.jsx("path",{d:"M22 10v6M2 10l10-5 10 5-10 5z"}),S.jsx("path",{d:"M6 12v5c3 3 9 3 12 0v-5"})]}),b2=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...n,children:[S.jsx("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),S.jsx("polyline",{points:"9 22 9 12 15 12 15 22"})]}),R2=n=>S.jsx("svg",{fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),N2=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),M2=n=>S.jsx("svg",{fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"})}),D2=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5.586a1 1 0 0 1 .707.293l5.414 5.414a1 1 0 0 1 .293.707V19a2 2 0 0 1-2 2z"})}),k2=n=>S.jsx("svg",{fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"})}),P2=n=>S.jsx("svg",{fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),L2=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})}),V2=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.72 9.72 0 0 1 18 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25c0 5.385 4.365 9.75 9.75 9.75 2.572 0 4.921-.994 6.752-2.648Z"})}),Cc=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})}),d_=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",...n,children:[S.jsx("circle",{cx:"8",cy:"21",r:"1"}),S.jsx("circle",{cx:"19",cy:"21",r:"1"}),S.jsx("path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12"})]}),U2=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.776 48.776 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})]}),VS=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639l4.43-7.532A1.012 1.012 0 0 1 7.23 3.5h9.54a1.012 1.012 0 0 1 .764.351l4.43 7.532a1.012 1.012 0 0 1 0 .639l-4.43 7.531a1.012 1.012 0 0 1-.764.352H7.23a1.012 1.012 0 0 1-.764-.352L2.036 12.322Z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),US=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.243 4.243-4.243-4.243"})}),f_=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",...n,children:[S.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"}),S.jsx("rect",{x:"9",y:"9",width:"6",height:"6"}),S.jsx("path",{d:"M9 1v3"}),S.jsx("path",{d:"M15 1v3"}),S.jsx("path",{d:"M9 20v3"}),S.jsx("path",{d:"M15 20v3"}),S.jsx("path",{d:"M20 9h3"}),S.jsx("path",{d:"M20 14h3"}),S.jsx("path",{d:"M1 9h3"}),S.jsx("path",{d:"M1 14h3"})]}),O2=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})]}),kI=n=>S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:[S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4"}),S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3l7.5 3v6c0 4.28-3.06 8.26-7.5 9.75C7.06 20.26 4 16.28 4 12V6l8-3z"})]}),rh=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.31 5.771 23.848 23.848 0 0 0 5.454 1.31M15 17.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"})}),PI=n=>S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),OS=[{label:"Home",icon:b2,view:"Home"},{label:"Tecnologia e Inovao",icon:f_,view:"Tecnologia e Inovao",requiresAuth:!0},{label:"RH",icon:py,view:"RH",requiresAuth:!0},{label:"Compras",icon:d_,view:"Compras",requiresAuth:!0},{label:"Pedaggico",icon:c_,view:"Pedaggico",requiresAuth:!0},{label:"Nativos",icon:DI,view:"Nativos",requiresAuth:!0}],F2=({activeItem:n,setActiveItem:e,isCollapsed:t,toggleSidebar:i,theme:r,toggleTheme:a,currentUser:l,onLoginClick:d,onLogoutClick:f,onEditProfileClick:h,onNotificationsClick:y})=>{const[T,E]=X.useState(!1),I=X.useRef(null),N=l?OS:OS.filter(K=>!K.requiresAuth);X.useEffect(()=>{const K=Z=>{I.current&&!I.current.contains(Z.target)&&E(!1)};return document.addEventListener("mousedown",K),()=>{document.removeEventListener("mousedown",K)}},[]);const U=()=>l&&(l.displayName||l.email)||"Usuario",O=()=>{f(),E(!1)};return S.jsxs("aside",{className:`relative ${t?"w-20":"w-64"} hidden md:flex flex-col flex-shrink-0 border-r border-gray-200 bg-white p-4 text-slate-600 transition-all duration-300 ease-in-out dark:border-slate-700 dark:bg-slate-800 dark:text-slate-300`,children:[S.jsx("button",{onClick:i,className:"absolute top-1/2 -right-3 z-10 flex h-7 w-7 -translate-y-1/2 items-center justify-center rounded-full border-2 border-white bg-gray-100 text-slate-500 shadow dark:border-slate-800 dark:bg-slate-700 dark:text-slate-300","aria-label":t?"Expandir menu":"Recolher menu",children:t?S.jsx(P2,{className:"h-5 w-5"}):S.jsx(k2,{className:"h-5 w-5"})}),S.jsxs("div",{className:"relative mb-8 flex h-10 items-center justify-center",children:[S.jsx("img",{src:"https://iconecolegioecurso.com.br/wp-content/uploads/2022/08/xlogo_icone_site.png.pagespeed.ic_.QgXP3GszLC.webp",alt:"cone Colgio e Curso",className:`object-contain transition-all duration-200 ${t?"h-8 w-8":"h-12 w-auto"}`}),l&&!t&&S.jsx("button",{onClick:y,className:"absolute right-0 top-1/2 -translate-y-1/2 rounded-full p-1 text-slate-500 transition hover:bg-gray-100 dark:text-slate-300 dark:hover:bg-slate-700","aria-label":"Notificaes",children:S.jsx(rh,{className:"h-6 w-6"})})]}),S.jsx("nav",{className:"flex-1",children:S.jsx("ul",{children:N.map(K=>S.jsx("li",{className:"mb-2",children:S.jsxs("a",{href:"#",onClick:Z=>{Z.preventDefault(),e(K.view)},className:`flex items-center rounded-lg p-3 text-sm font-medium transition ${n===K.view?"bg-orange-500 text-white shadow-lg":"hover:bg-gray-100 dark:hover:bg-slate-700"} ${t?"justify-center":""}`,title:t?K.label:void 0,children:[S.jsx(K.icon,{className:"h-6 w-6 flex-shrink-0"}),S.jsx("span",{className:`overflow-hidden whitespace-nowrap transition-all duration-200 ${t?"ml-0 w-0 opacity-0":"ml-4 opacity-100"}`,children:K.label})]})},K.view))})}),S.jsxs("div",{className:"mt-auto",children:[l?S.jsxs("button",{onClick:h,className:`mb-4 flex w-full items-center rounded-lg p-2 transition hover:bg-gray-100 dark:hover:bg-slate-700 ${t?"justify-center":""}`,children:[l.photoURL?S.jsx("img",{src:l.photoURL,alt:"Foto do perfil",className:"h-10 w-10 flex-shrink-0 rounded-full object-cover"}):S.jsx(Cc,{className:"h-10 w-10 flex-shrink-0 text-slate-400 dark:text-slate-500"}),S.jsxs("div",{className:`ml-3 overflow-hidden text-left transition-all duration-200 ${t?"w-0 opacity-0":"opacity-100"}`,children:[S.jsx("p",{className:"truncate text-sm font-medium text-slate-800 dark:text-slate-100",title:U(),children:U()}),S.jsx("div",{className:"flex items-center justify-between text-xs text-slate-500 dark:text-slate-400",children:S.jsx("span",{children:"Editar perfil"})})]})]}):S.jsxs("button",{onClick:d,className:`mb-4 flex w-full items-center rounded-lg p-2 transition hover:bg-gray-100 dark:hover:bg-slate-700 ${t?"justify-center":""}`,children:[S.jsx(Cc,{className:"h-10 w-10 flex-shrink-0 text-slate-400 dark:text-slate-500"}),S.jsx("span",{className:`ml-3 text-sm font-medium text-slate-800 dark:text-slate-100 ${t?"hidden":""}`,children:"Login"})]}),S.jsxs("ul",{className:"space-y-2",children:[S.jsx("li",{children:S.jsxs("button",{onClick:a,className:`flex w-full items-center rounded-lg p-3 transition hover:bg-gray-100 dark:hover:bg-slate-700 ${t?"justify-center":""}`,title:t?"Alterar tema":void 0,children:[r==="light"?S.jsx(V2,{className:"h-6 w-6 flex-shrink-0"}):S.jsx(L2,{className:"h-6 w-6 flex-shrink-0"}),S.jsx("span",{className:`ml-4 text-sm font-medium transition-all duration-200 ${t?"w-0 opacity-0":"opacity-100"}`,children:r==="light"?"Modo Escuro":"Modo Claro"})]})}),l&&S.jsxs("li",{ref:I,className:"relative",children:[S.jsxs("button",{onClick:()=>E(K=>!K),className:`flex w-full items-center rounded-lg p-3 transition hover:bg-gray-100 dark:hover:bg-slate-700 ${t?"justify-center":""}`,title:t?"Configuraes":void 0,"aria-haspopup":"true","aria-expanded":T,children:[S.jsx(O2,{className:"h-6 w-6 flex-shrink-0"}),S.jsx("span",{className:`ml-4 text-sm font-medium transition-all duration-200 ${t?"w-0 opacity-0":"opacity-100"}`,children:"Configuraes"})]}),T&&S.jsx("div",{className:`absolute bottom-full z-20 mb-3 w-[18rem] rounded-2xl border border-gray-200 bg-white p-3 text-sm shadow-2xl transition dark:border-slate-600 dark:bg-slate-800 ${t?"right-0":"left-0"}`,role:"menu",children:S.jsxs("ul",{className:"space-y-1",children:[l.role==="admin"&&S.jsx("li",{children:S.jsxs("button",{onClick:()=>{e("Admin"),E(!1)},className:"flex w-full items-center rounded-lg px-2 py-2 text-left text-slate-700 transition hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-700",role:"menuitem",children:[S.jsx(kI,{className:"h-5 w-5 flex-shrink-0"}),S.jsx("span",{className:"ml-3 text-sm font-medium",children:"Admin"})]})}),S.jsx("li",{children:S.jsxs("button",{onClick:()=>{y(),E(!1)},className:"flex w-full items-center rounded-lg px-2 py-2 text-left text-slate-700 transition hover:bg-gray-100 dark:text-slate-200 dark:hover:bg-slate-700",role:"menuitem",children:[S.jsx(rh,{className:"h-5 w-5 flex-shrink-0"}),S.jsx("span",{className:"ml-3 text-sm font-medium",children:"Notificaes"})]})}),S.jsx("li",{children:S.jsxs("button",{onClick:O,className:"flex w-full items-center rounded-lg px-2 py-2 text-left font-medium text-red-500 transition hover:bg-red-50 dark:hover:bg-red-500/10",role:"menuitem",children:[S.jsx(R2,{className:"h-5 w-5 flex-shrink-0"}),S.jsx("span",{className:"ml-3 text-sm",children:"Sair"})]})})]})})]})]})]})]})},LI=n=>{const e=n.getDate().toString().padStart(2,"0"),t=n.toLocaleString("pt-BR",{month:"short"}).replace(".","").trim(),i=t.charAt(0).toUpperCase()+t.slice(1).toLowerCase(),r=n.getFullYear();return`${e} de ${i}, ${r}`},q2=n=>{const e=new Date(n);return Number.isNaN(e.getTime())?"Data desconhecida":e.toLocaleString("pt-BR",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})},VI=n=>{const t=n+1728e5,i=Date.now(),r=t-i;if(r<=0)return null;const a=Math.floor(r/(1e3*60*60)),l=Math.floor(r%(1e3*60*60)/(1e3*60));return a>0?`${a}h restante${a!==1?"s":""}`:`${l}m restante${l!==1?"s":""}`},B2=({announcements:n,onViewersClick:e,canSeeViews:t})=>{const[,i]=X.useState(0);return X.useEffect(()=>{const r=setInterval(()=>{i(a=>a+1)},6e4);return()=>clearInterval(r)},[]),S.jsxs("div",{className:"rounded-lg bg-white p-6 shadow-md dark:bg-slate-800",children:[S.jsxs("h2",{className:"mb-4 flex items-center text-xl font-bold text-gray-900 dark:text-gray-100",children:[S.jsx(hy,{className:"mr-3 h-6 w-6 text-blue-600"}),"Comunicados"]}),n.length?S.jsx("div",{className:"space-y-4",children:n.map(r=>{var d;const a=((d=r.views)==null?void 0:d.length)??0,l=r.createdAt?VI(r.createdAt):null;return S.jsxs("div",{className:"relative space-y-3 border-l-4 border-blue-500 pl-4",children:[l&&S.jsxs("div",{className:"absolute right-0 top-0 flex items-center gap-1 rounded-full bg-orange-100 px-2 py-0.5 text-[10px] font-bold text-orange-600 dark:bg-orange-900/30 dark:text-orange-400",children:[S.jsx(PI,{className:"h-3 w-3"}),l]}),S.jsxs("div",{children:[S.jsx("h3",{className:"pr-20 font-semibold text-gray-800 dark:text-gray-200",children:r.title}),S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:r.content}),S.jsx("p",{className:"mt-2 text-xs font-semibold text-gray-500 dark:text-gray-400",children:`Comunicado feito por ${r.author||"Portal cone"} no dia ${r.date}`})]}),t&&S.jsx("button",{type:"button",onClick:()=>e(r.id),className:"text-xs font-semibold text-blue-600 transition hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-300",children:a?`${a} visualiza${a===1?"o":"es"}`:"Nenhuma visualizao ainda"})]},r.id)})}):S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Ainda no h comunicados publicados. Use o sino para criar o primeiro!"})]})},G2=()=>{};var FS={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UI={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const he=function(n,e){if(!n)throw Ol(e)},Ol=function(n){return new Error("Firebase Database ("+UI.SDK_VERSION+") INTERNAL ASSERT FAILED: "+n)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OI=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},H2=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],l=n[t++],d=n[t++],f=((r&7)<<18|(a&63)<<12|(l&63)<<6|d&63)-65536;e[i++]=String.fromCharCode(55296+(f>>10)),e[i++]=String.fromCharCode(56320+(f&1023))}else{const a=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return e.join("")},my={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],l=r+1<n.length,d=l?n[r+1]:0,f=r+2<n.length,h=f?n[r+2]:0,y=a>>2,T=(a&3)<<4|d>>4;let E=(d&15)<<2|h>>6,I=h&63;f||(I=64,l||(E=64)),i.push(t[y],t[T],t[E],t[I])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(OI(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):H2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],d=r<n.length?t[n.charAt(r)]:0;++r;const h=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||d==null||h==null||T==null)throw new z2;const E=a<<2|d>>4;if(i.push(E),h!==64){const I=d<<4&240|h>>2;if(i.push(I),T!==64){const N=h<<6&192|T;i.push(N)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class z2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const FI=function(n){const e=OI(n);return my.encodeByteArray(e,!0)},oh=function(n){return FI(n).replace(/\./g,"")},ah=function(n){try{return my.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y2(n){return qI(void 0,n)}function qI(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const t=e;return new Date(t.getTime());case Object:n===void 0&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!K2(t)||(n[t]=qI(n[t],e[t]));return n}function K2(n){return n!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j2=()=>$2().__FIREBASE_DEFAULTS__,J2=()=>{if(typeof process>"u"||typeof FS>"u")return;const n=FS.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},W2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&ah(n[1]);return e&&JSON.parse(e)},Kh=()=>{try{return G2()||j2()||J2()||W2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},BI=n=>{var e,t;return(t=(e=Kh())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},GI=n=>{const e=BI(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},HI=()=>{var n;return(n=Kh())==null?void 0:n.config},zI=n=>{var e;return(e=Kh())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gy(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YI(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,a=n.sub||n.user_id;if(!a)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const l={iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:a,user_id:a,firebase:{sign_in_provider:"custom",identities:{}},...n};return[oh(JSON.stringify(t)),oh(JSON.stringify(l)),""].join(".")}const dc={};function Q2(){const n={prod:[],emulator:[]};for(const e of Object.keys(dc))dc[e]?n.emulator.push(e):n.prod.push(e);return n}function X2(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let qS=!1;function _y(n,e){if(typeof window>"u"||typeof document>"u"||!lo(window.location.host)||dc[n]===e||dc[n]||qS)return;dc[n]=e;function t(E){return`__firebase__banner__${E}`}const i="__firebase__banner",a=Q2().prod.length>0;function l(){const E=document.getElementById(i);E&&E.remove()}function d(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function f(E,I){E.setAttribute("width","24"),E.setAttribute("id",I),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function h(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{qS=!0,l()},E}function y(E,I){E.setAttribute("id",I),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function T(){const E=X2(i),I=t("text"),N=document.getElementById(I)||document.createElement("span"),U=t("learnmore"),O=document.getElementById(U)||document.createElement("a"),K=t("preprendIcon"),Z=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const j=E.element;d(j),y(O,U);const ae=h();f(Z,K),j.append(Z,N,O,ae),document.body.appendChild(j)}a?(N.innerText="Preview backend disconnected.",Z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(Z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,N.innerText="Preview backend running in this workspace."),N.setAttribute("id",I)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yy(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Rn())}function Z2(){var e;const n=(e=Kh())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function $I(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tD(){const n=Rn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function nD(){return UI.NODE_ADMIN===!0}function iD(){return!Z2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jI(){try{return typeof indexedDB=="object"}catch{return!1}}function JI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}function sD(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rD="FirebaseError";class Yi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=rD,Object.setPrototypeOf(this,Yi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,aa.prototype.create)}}class aa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],l=a?oD(a,i):"Error",d=`${this.serviceName}: ${l} (${r}).`;return new Yi(r,d,i)}}function oD(n,e){return n.replace(aD,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const aD=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(n){return JSON.parse(n)}function on(n){return JSON.stringify(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=function(n){let e={},t={},i={},r="";try{const a=n.split(".");e=wc(ah(a[0])||""),t=wc(ah(a[1])||""),r=a[2],i=t.d||{},delete t.d}catch{}return{header:e,claims:t,data:i,signature:r}},lD=function(n){const e=WI(n),t=e.claims;return!!t&&typeof t=="object"&&t.hasOwnProperty("iat")},uD=function(n){const e=WI(n).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cs(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function wl(n,e){if(Object.prototype.hasOwnProperty.call(n,e))return n[e]}function h_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function lh(n,e,t){const i={};for(const r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=e.call(t,n[r],r,n));return i}function Es(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],l=e[r];if(BS(a)&&BS(l)){if(!Es(a,l))return!1}else if(a!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function BS(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fl(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const i=this.W_;if(typeof e=="string")for(let T=0;T<16;T++)i[T]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let T=0;T<16;T++)i[T]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let T=16;T<80;T++){const E=i[T-3]^i[T-8]^i[T-14]^i[T-16];i[T]=(E<<1|E>>>31)&4294967295}let r=this.chain_[0],a=this.chain_[1],l=this.chain_[2],d=this.chain_[3],f=this.chain_[4],h,y;for(let T=0;T<80;T++){T<40?T<20?(h=d^a&(l^d),y=1518500249):(h=a^l^d,y=1859775393):T<60?(h=a&l|d&(a|l),y=2400959708):(h=a^l^d,y=3395469782);const E=(r<<5|r>>>27)+h+f+y+i[T]&4294967295;f=d,d=l,l=(a<<30|a>>>2)&4294967295,a=r,r=E}this.chain_[0]=this.chain_[0]+r&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+l&4294967295,this.chain_[3]=this.chain_[3]+d&4294967295,this.chain_[4]=this.chain_[4]+f&4294967295}update(e,t){if(e==null)return;t===void 0&&(t=e.length);const i=t-this.blockSize;let r=0;const a=this.buf_;let l=this.inbuf_;for(;r<t;){if(l===0)for(;r<=i;)this.compress_(e,r),r+=this.blockSize;if(typeof e=="string"){for(;r<t;)if(a[l]=e.charCodeAt(r),++l,++r,l===this.blockSize){this.compress_(a),l=0;break}}else for(;r<t;)if(a[l]=e[r],++l,++r,l===this.blockSize){this.compress_(a),l=0;break}}this.inbuf_=l,this.total_+=t}digest(){const e=[];let t=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=t&255,t/=256;this.compress_(this.buf_);let i=0;for(let r=0;r<5;r++)for(let a=24;a>=0;a-=8)e[i]=this.chain_[r]>>a&255,++i;return e}}function dD(n,e){const t=new fD(n,e);return t.subscribe.bind(t)}class fD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");hD(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Gg),r.error===void 0&&(r.error=Gg),r.complete===void 0&&(r.complete=Gg);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function hD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Gg(){}function $h(n,e){return`${n} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);if(r>=55296&&r<=56319){const a=r-55296;i++,he(i<n.length,"Surrogate pair missing trail surrogate.");const l=n.charCodeAt(i)-56320;r=65536+(a<<10)+l}r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):r<65536?(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},jh=function(n){let e=0;for(let t=0;t<n.length;t++){const i=n.charCodeAt(t);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,t++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=1e3,gD=2,_D=14400*1e3,yD=.5;function GS(n,e=mD,t=gD){const i=e*Math.pow(t,n),r=Math.round(yD*i*(Math.random()-.5)*2);return Math.min(_D,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n){return n&&n._delegate?n._delegate:n}class Si{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Gc;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ED(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,l]of this.instancesDeferred.entries()){const d=this.normalizeInstanceIdentifier(a);i===d&&l.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:TD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TD(n){return n===zo?void 0:n}function ED(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new vD(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ke;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ke||(Ke={}));const CD={debug:Ke.DEBUG,verbose:Ke.VERBOSE,info:Ke.INFO,warn:Ke.WARN,error:Ke.ERROR,silent:Ke.SILENT},wD=Ke.INFO,AD={[Ke.DEBUG]:"log",[Ke.VERBOSE]:"log",[Ke.INFO]:"info",[Ke.WARN]:"warn",[Ke.ERROR]:"error"},ID=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=AD[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hc{constructor(e){this.name=e,this._logLevel=wD,this._logHandler=ID,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ke))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ke.DEBUG,...e),this._logHandler(this,Ke.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ke.VERBOSE,...e),this._logHandler(this,Ke.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ke.INFO,...e),this._logHandler(this,Ke.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ke.WARN,...e),this._logHandler(this,Ke.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ke.ERROR,...e),this._logHandler(this,Ke.ERROR,...e)}}const xD=(n,e)=>e.some(t=>n instanceof t);let HS,zS;function bD(){return HS||(HS=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RD(){return zS||(zS=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const QI=new WeakMap,p_=new WeakMap,XI=new WeakMap,Hg=new WeakMap,vy=new WeakMap;function ND(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(zr(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&QI.set(t,n)}).catch(()=>{}),vy.set(e,n),e}function MD(n){if(p_.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});p_.set(n,e)}let m_={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return p_.get(n);if(e==="objectStoreNames")return n.objectStoreNames||XI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zr(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function DD(n){m_=n(m_)}function kD(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(zg(this),e,...t);return XI.set(i,e.sort?e.sort():[e]),zr(i)}:RD().includes(n)?function(...e){return n.apply(zg(this),e),zr(QI.get(this))}:function(...e){return zr(n.apply(zg(this),e))}}function PD(n){return typeof n=="function"?kD(n):(n instanceof IDBTransaction&&MD(n),xD(n,bD())?new Proxy(n,m_):n)}function zr(n){if(n instanceof IDBRequest)return ND(n);if(Hg.has(n))return Hg.get(n);const e=PD(n);return e!==n&&(Hg.set(n,e),vy.set(e,n)),e}const zg=n=>vy.get(n);function ZI(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(n,e),d=zr(l);return i&&l.addEventListener("upgradeneeded",f=>{i(zr(l.result),f.oldVersion,f.newVersion,zr(l.transaction),f)}),t&&l.addEventListener("blocked",f=>t(f.oldVersion,f.newVersion,f)),d.then(f=>{a&&f.addEventListener("close",()=>a()),r&&f.addEventListener("versionchange",h=>r(h.oldVersion,h.newVersion,h))}).catch(()=>{}),d}const LD=["get","getKey","getAll","getAllKeys","count"],VD=["put","add","delete","clear"],Yg=new Map;function YS(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Yg.get(e))return Yg.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=VD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||LD.includes(t)))return;const a=async function(l,...d){const f=this.transaction(l,r?"readwrite":"readonly");let h=f.store;return i&&(h=h.index(d.shift())),(await Promise.all([h[t](...d),r&&f.done]))[0]};return Yg.set(e,a),a}DD(n=>({...n,get:(e,t,i)=>YS(e,t)||n.get(e,t,i),has:(e,t)=>!!YS(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function OD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const g_="@firebase/app",KS="0.14.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new Hc("@firebase/app"),FD="@firebase/app-compat",qD="@firebase/analytics-compat",BD="@firebase/analytics",GD="@firebase/app-check-compat",HD="@firebase/app-check",zD="@firebase/auth",YD="@firebase/auth-compat",KD="@firebase/database",$D="@firebase/data-connect",jD="@firebase/database-compat",JD="@firebase/functions",WD="@firebase/functions-compat",QD="@firebase/installations",XD="@firebase/installations-compat",ZD="@firebase/messaging",ek="@firebase/messaging-compat",tk="@firebase/performance",nk="@firebase/performance-compat",ik="@firebase/remote-config",sk="@firebase/remote-config-compat",rk="@firebase/storage",ok="@firebase/storage-compat",ak="@firebase/firestore",lk="@firebase/ai",uk="@firebase/firestore-compat",ck="firebase",dk="12.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const __="[DEFAULT]",fk={[g_]:"fire-core",[FD]:"fire-core-compat",[BD]:"fire-analytics",[qD]:"fire-analytics-compat",[HD]:"fire-app-check",[GD]:"fire-app-check-compat",[zD]:"fire-auth",[YD]:"fire-auth-compat",[KD]:"fire-rtdb",[$D]:"fire-data-connect",[jD]:"fire-rtdb-compat",[JD]:"fire-fn",[WD]:"fire-fn-compat",[QD]:"fire-iid",[XD]:"fire-iid-compat",[ZD]:"fire-fcm",[ek]:"fire-fcm-compat",[tk]:"fire-perf",[nk]:"fire-perf-compat",[ik]:"fire-rc",[sk]:"fire-rc-compat",[rk]:"fire-gcs",[ok]:"fire-gcs-compat",[ak]:"fire-fst",[uk]:"fire-fst-compat",[lk]:"fire-vertex","fire-js":"fire-js",[ck]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh=new Map,hk=new Map,y_=new Map;function $S(n,e){try{n.container.addComponent(e)}catch(t){js.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Hi(n){const e=n.name;if(y_.has(e))return js.debug(`There were multiple attempts to register component ${e}.`),!1;y_.set(e,n);for(const t of uh.values())$S(t,n);for(const t of hk.values())$S(t,n);return!0}function uo(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Vi(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Yr=new aa("app","Firebase",pk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Yr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=dk;function ex(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:__,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw Yr.create("bad-app-name",{appName:String(r)});if(t||(t=HI()),!t)throw Yr.create("no-options");const a=uh.get(r);if(a){if(Es(t,a.options)&&Es(i,a.config))return a;throw Yr.create("duplicate-app",{appName:r})}const l=new SD(r);for(const f of y_.values())l.addComponent(f);const d=new mk(t,i,l);return uh.set(r,d),d}function Jh(n=__){const e=uh.get(n);if(!e&&n===__&&HI())return ex();if(!e)throw Yr.create("no-app",{appName:n});return e}function Kn(n,e,t){let i=fk[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),js.warn(l.join(" "));return}Hi(new Si(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="firebase-heartbeat-database",_k=1,Ac="firebase-heartbeat-store";let Kg=null;function tx(){return Kg||(Kg=ZI(gk,_k,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ac)}catch(t){console.warn(t)}}}}).catch(n=>{throw Yr.create("idb-open",{originalErrorMessage:n.message})})),Kg}async function yk(n){try{const t=(await tx()).transaction(Ac),i=await t.objectStore(Ac).get(nx(n));return await t.done,i}catch(e){if(e instanceof Yi)js.warn(e.message);else{const t=Yr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});js.warn(t.message)}}}async function jS(n,e){try{const i=(await tx()).transaction(Ac,"readwrite");await i.objectStore(Ac).put(e,nx(n)),await i.done}catch(t){if(t instanceof Yi)js.warn(t.message);else{const i=Yr.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});js.warn(i.message)}}}function nx(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vk=1024,Tk=30;class Ek{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ck(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=JS();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Tk){const l=wk(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){js.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=JS(),{heartbeatsToSend:i,unsentEntries:r}=Sk(this._heartbeatsCache.heartbeats),a=oh(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return js.warn(t),""}}}function JS(){return new Date().toISOString().substring(0,10)}function Sk(n,e=vk){const t=[];let i=n.slice();for(const r of n){const a=t.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),WS(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),WS(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Ck{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return jI()?JI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await yk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return jS(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function WS(n){return oh(JSON.stringify({version:2,heartbeats:n})).length}function wk(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(n){Hi(new Si("platform-logger",e=>new UD(e),"PRIVATE")),Hi(new Si("heartbeat",e=>new Ek(e),"PRIVATE")),Kn(g_,KS,n),Kn(g_,KS,"esm2020"),Kn("fire-js","")}Ak("");var QS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Kr,ix;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,M){function D(){}D.prototype=M.prototype,R.F=M.prototype,R.prototype=new D,R.prototype.constructor=R,R.D=function(L,P,q){for(var k=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)k[Be-2]=arguments[Be];return M.prototype[P].apply(L,k)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,M,D){D||(D=0);const L=Array(16);if(typeof M=="string")for(var P=0;P<16;++P)L[P]=M.charCodeAt(D++)|M.charCodeAt(D++)<<8|M.charCodeAt(D++)<<16|M.charCodeAt(D++)<<24;else for(P=0;P<16;++P)L[P]=M[D++]|M[D++]<<8|M[D++]<<16|M[D++]<<24;M=R.g[0],D=R.g[1],P=R.g[2];let q=R.g[3],k;k=M+(q^D&(P^q))+L[0]+3614090360&4294967295,M=D+(k<<7&4294967295|k>>>25),k=q+(P^M&(D^P))+L[1]+3905402710&4294967295,q=M+(k<<12&4294967295|k>>>20),k=P+(D^q&(M^D))+L[2]+606105819&4294967295,P=q+(k<<17&4294967295|k>>>15),k=D+(M^P&(q^M))+L[3]+3250441966&4294967295,D=P+(k<<22&4294967295|k>>>10),k=M+(q^D&(P^q))+L[4]+4118548399&4294967295,M=D+(k<<7&4294967295|k>>>25),k=q+(P^M&(D^P))+L[5]+1200080426&4294967295,q=M+(k<<12&4294967295|k>>>20),k=P+(D^q&(M^D))+L[6]+2821735955&4294967295,P=q+(k<<17&4294967295|k>>>15),k=D+(M^P&(q^M))+L[7]+4249261313&4294967295,D=P+(k<<22&4294967295|k>>>10),k=M+(q^D&(P^q))+L[8]+1770035416&4294967295,M=D+(k<<7&4294967295|k>>>25),k=q+(P^M&(D^P))+L[9]+2336552879&4294967295,q=M+(k<<12&4294967295|k>>>20),k=P+(D^q&(M^D))+L[10]+4294925233&4294967295,P=q+(k<<17&4294967295|k>>>15),k=D+(M^P&(q^M))+L[11]+2304563134&4294967295,D=P+(k<<22&4294967295|k>>>10),k=M+(q^D&(P^q))+L[12]+1804603682&4294967295,M=D+(k<<7&4294967295|k>>>25),k=q+(P^M&(D^P))+L[13]+4254626195&4294967295,q=M+(k<<12&4294967295|k>>>20),k=P+(D^q&(M^D))+L[14]+2792965006&4294967295,P=q+(k<<17&4294967295|k>>>15),k=D+(M^P&(q^M))+L[15]+1236535329&4294967295,D=P+(k<<22&4294967295|k>>>10),k=M+(P^q&(D^P))+L[1]+4129170786&4294967295,M=D+(k<<5&4294967295|k>>>27),k=q+(D^P&(M^D))+L[6]+3225465664&4294967295,q=M+(k<<9&4294967295|k>>>23),k=P+(M^D&(q^M))+L[11]+643717713&4294967295,P=q+(k<<14&4294967295|k>>>18),k=D+(q^M&(P^q))+L[0]+3921069994&4294967295,D=P+(k<<20&4294967295|k>>>12),k=M+(P^q&(D^P))+L[5]+3593408605&4294967295,M=D+(k<<5&4294967295|k>>>27),k=q+(D^P&(M^D))+L[10]+38016083&4294967295,q=M+(k<<9&4294967295|k>>>23),k=P+(M^D&(q^M))+L[15]+3634488961&4294967295,P=q+(k<<14&4294967295|k>>>18),k=D+(q^M&(P^q))+L[4]+3889429448&4294967295,D=P+(k<<20&4294967295|k>>>12),k=M+(P^q&(D^P))+L[9]+568446438&4294967295,M=D+(k<<5&4294967295|k>>>27),k=q+(D^P&(M^D))+L[14]+3275163606&4294967295,q=M+(k<<9&4294967295|k>>>23),k=P+(M^D&(q^M))+L[3]+4107603335&4294967295,P=q+(k<<14&4294967295|k>>>18),k=D+(q^M&(P^q))+L[8]+1163531501&4294967295,D=P+(k<<20&4294967295|k>>>12),k=M+(P^q&(D^P))+L[13]+2850285829&4294967295,M=D+(k<<5&4294967295|k>>>27),k=q+(D^P&(M^D))+L[2]+4243563512&4294967295,q=M+(k<<9&4294967295|k>>>23),k=P+(M^D&(q^M))+L[7]+1735328473&4294967295,P=q+(k<<14&4294967295|k>>>18),k=D+(q^M&(P^q))+L[12]+2368359562&4294967295,D=P+(k<<20&4294967295|k>>>12),k=M+(D^P^q)+L[5]+4294588738&4294967295,M=D+(k<<4&4294967295|k>>>28),k=q+(M^D^P)+L[8]+2272392833&4294967295,q=M+(k<<11&4294967295|k>>>21),k=P+(q^M^D)+L[11]+1839030562&4294967295,P=q+(k<<16&4294967295|k>>>16),k=D+(P^q^M)+L[14]+4259657740&4294967295,D=P+(k<<23&4294967295|k>>>9),k=M+(D^P^q)+L[1]+2763975236&4294967295,M=D+(k<<4&4294967295|k>>>28),k=q+(M^D^P)+L[4]+1272893353&4294967295,q=M+(k<<11&4294967295|k>>>21),k=P+(q^M^D)+L[7]+4139469664&4294967295,P=q+(k<<16&4294967295|k>>>16),k=D+(P^q^M)+L[10]+3200236656&4294967295,D=P+(k<<23&4294967295|k>>>9),k=M+(D^P^q)+L[13]+681279174&4294967295,M=D+(k<<4&4294967295|k>>>28),k=q+(M^D^P)+L[0]+3936430074&4294967295,q=M+(k<<11&4294967295|k>>>21),k=P+(q^M^D)+L[3]+3572445317&4294967295,P=q+(k<<16&4294967295|k>>>16),k=D+(P^q^M)+L[6]+76029189&4294967295,D=P+(k<<23&4294967295|k>>>9),k=M+(D^P^q)+L[9]+3654602809&4294967295,M=D+(k<<4&4294967295|k>>>28),k=q+(M^D^P)+L[12]+3873151461&4294967295,q=M+(k<<11&4294967295|k>>>21),k=P+(q^M^D)+L[15]+530742520&4294967295,P=q+(k<<16&4294967295|k>>>16),k=D+(P^q^M)+L[2]+3299628645&4294967295,D=P+(k<<23&4294967295|k>>>9),k=M+(P^(D|~q))+L[0]+4096336452&4294967295,M=D+(k<<6&4294967295|k>>>26),k=q+(D^(M|~P))+L[7]+1126891415&4294967295,q=M+(k<<10&4294967295|k>>>22),k=P+(M^(q|~D))+L[14]+2878612391&4294967295,P=q+(k<<15&4294967295|k>>>17),k=D+(q^(P|~M))+L[5]+4237533241&4294967295,D=P+(k<<21&4294967295|k>>>11),k=M+(P^(D|~q))+L[12]+1700485571&4294967295,M=D+(k<<6&4294967295|k>>>26),k=q+(D^(M|~P))+L[3]+2399980690&4294967295,q=M+(k<<10&4294967295|k>>>22),k=P+(M^(q|~D))+L[10]+4293915773&4294967295,P=q+(k<<15&4294967295|k>>>17),k=D+(q^(P|~M))+L[1]+2240044497&4294967295,D=P+(k<<21&4294967295|k>>>11),k=M+(P^(D|~q))+L[8]+1873313359&4294967295,M=D+(k<<6&4294967295|k>>>26),k=q+(D^(M|~P))+L[15]+4264355552&4294967295,q=M+(k<<10&4294967295|k>>>22),k=P+(M^(q|~D))+L[6]+2734768916&4294967295,P=q+(k<<15&4294967295|k>>>17),k=D+(q^(P|~M))+L[13]+1309151649&4294967295,D=P+(k<<21&4294967295|k>>>11),k=M+(P^(D|~q))+L[4]+4149444226&4294967295,M=D+(k<<6&4294967295|k>>>26),k=q+(D^(M|~P))+L[11]+3174756917&4294967295,q=M+(k<<10&4294967295|k>>>22),k=P+(M^(q|~D))+L[2]+718787259&4294967295,P=q+(k<<15&4294967295|k>>>17),k=D+(q^(P|~M))+L[9]+3951481745&4294967295,R.g[0]=R.g[0]+M&4294967295,R.g[1]=R.g[1]+(P+(k<<21&4294967295|k>>>11))&4294967295,R.g[2]=R.g[2]+P&4294967295,R.g[3]=R.g[3]+q&4294967295}i.prototype.v=function(R,M){M===void 0&&(M=R.length);const D=M-this.blockSize,L=this.C;let P=this.h,q=0;for(;q<M;){if(P==0)for(;q<=D;)r(this,R,q),q+=this.blockSize;if(typeof R=="string"){for(;q<M;)if(L[P++]=R.charCodeAt(q++),P==this.blockSize){r(this,L),P=0;break}}else for(;q<M;)if(L[P++]=R[q++],P==this.blockSize){r(this,L),P=0;break}}this.h=P,this.o+=M},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var M=1;M<R.length-8;++M)R[M]=0;M=this.o*8;for(var D=R.length-8;D<R.length;++D)R[D]=M&255,M/=256;for(this.v(R),R=Array(16),M=0,D=0;D<4;++D)for(let L=0;L<32;L+=8)R[M++]=this.g[D]>>>L&255;return R};function a(R,M){var D=d;return Object.prototype.hasOwnProperty.call(D,R)?D[R]:D[R]=M(R)}function l(R,M){this.h=M;const D=[];let L=!0;for(let P=R.length-1;P>=0;P--){const q=R[P]|0;L&&q==M||(D[P]=q,L=!1)}this.g=D}var d={};function f(R){return-128<=R&&R<128?a(R,function(M){return new l([M|0],M<0?-1:0)}):new l([R|0],R<0?-1:0)}function h(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return O(h(-R));const M=[];let D=1;for(let L=0;R>=D;L++)M[L]=R/D|0,D*=4294967296;return new l(M,0)}function y(R,M){if(R.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(R.charAt(0)=="-")return O(y(R.substring(1),M));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const D=h(Math.pow(M,8));let L=T;for(let q=0;q<R.length;q+=8){var P=Math.min(8,R.length-q);const k=parseInt(R.substring(q,q+P),M);P<8?(P=h(Math.pow(M,P)),L=L.j(P).add(h(k))):(L=L.j(D),L=L.add(h(k)))}return L}var T=f(0),E=f(1),I=f(16777216);n=l.prototype,n.m=function(){if(U(this))return-O(this).m();let R=0,M=1;for(let D=0;D<this.g.length;D++){const L=this.i(D);R+=(L>=0?L:4294967296+L)*M,M*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(N(this))return"0";if(U(this))return"-"+O(this).toString(R);const M=h(Math.pow(R,6));var D=this;let L="";for(;;){const P=ae(D,M).g;D=K(D,P.j(M));let q=((D.g.length>0?D.g[0]:D.h)>>>0).toString(R);if(D=P,N(D))return q+L;for(;q.length<6;)q="0"+q;L=q+L}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function N(R){if(R.h!=0)return!1;for(let M=0;M<R.g.length;M++)if(R.g[M]!=0)return!1;return!0}function U(R){return R.h==-1}n.l=function(R){return R=K(this,R),U(R)?-1:N(R)?0:1};function O(R){const M=R.g.length,D=[];for(let L=0;L<M;L++)D[L]=~R.g[L];return new l(D,~R.h).add(E)}n.abs=function(){return U(this)?O(this):this},n.add=function(R){const M=Math.max(this.g.length,R.g.length),D=[];let L=0;for(let P=0;P<=M;P++){let q=L+(this.i(P)&65535)+(R.i(P)&65535),k=(q>>>16)+(this.i(P)>>>16)+(R.i(P)>>>16);L=k>>>16,q&=65535,k&=65535,D[P]=k<<16|q}return new l(D,D[D.length-1]&-2147483648?-1:0)};function K(R,M){return R.add(O(M))}n.j=function(R){if(N(this)||N(R))return T;if(U(this))return U(R)?O(this).j(O(R)):O(O(this).j(R));if(U(R))return O(this.j(O(R)));if(this.l(I)<0&&R.l(I)<0)return h(this.m()*R.m());const M=this.g.length+R.g.length,D=[];for(var L=0;L<2*M;L++)D[L]=0;for(L=0;L<this.g.length;L++)for(let P=0;P<R.g.length;P++){const q=this.i(L)>>>16,k=this.i(L)&65535,Be=R.i(P)>>>16,ht=R.i(P)&65535;D[2*L+2*P]+=k*ht,Z(D,2*L+2*P),D[2*L+2*P+1]+=q*ht,Z(D,2*L+2*P+1),D[2*L+2*P+1]+=k*Be,Z(D,2*L+2*P+1),D[2*L+2*P+2]+=q*Be,Z(D,2*L+2*P+2)}for(R=0;R<M;R++)D[R]=D[2*R+1]<<16|D[2*R];for(R=M;R<2*M;R++)D[R]=0;return new l(D,0)};function Z(R,M){for(;(R[M]&65535)!=R[M];)R[M+1]+=R[M]>>>16,R[M]&=65535,M++}function j(R,M){this.g=R,this.h=M}function ae(R,M){if(N(M))throw Error("division by zero");if(N(R))return new j(T,T);if(U(R))return M=ae(O(R),M),new j(O(M.g),O(M.h));if(U(M))return M=ae(R,O(M)),new j(O(M.g),M.h);if(R.g.length>30){if(U(R)||U(M))throw Error("slowDivide_ only works with positive integers.");for(var D=E,L=M;L.l(R)<=0;)D=me(D),L=me(L);var P=ce(D,1),q=ce(L,1);for(L=ce(L,2),D=ce(D,2);!N(L);){var k=q.add(L);k.l(R)<=0&&(P=P.add(D),q=k),L=ce(L,1),D=ce(D,1)}return M=K(R,P.j(M)),new j(P,M)}for(P=T;R.l(M)>=0;){for(D=Math.max(1,Math.floor(R.m()/M.m())),L=Math.ceil(Math.log(D)/Math.LN2),L=L<=48?1:Math.pow(2,L-48),q=h(D),k=q.j(M);U(k)||k.l(R)>0;)D-=L,q=h(D),k=q.j(M);N(q)&&(q=E),P=P.add(q),R=K(R,k)}return new j(P,R)}n.B=function(R){return ae(this,R).h},n.and=function(R){const M=Math.max(this.g.length,R.g.length),D=[];for(let L=0;L<M;L++)D[L]=this.i(L)&R.i(L);return new l(D,this.h&R.h)},n.or=function(R){const M=Math.max(this.g.length,R.g.length),D=[];for(let L=0;L<M;L++)D[L]=this.i(L)|R.i(L);return new l(D,this.h|R.h)},n.xor=function(R){const M=Math.max(this.g.length,R.g.length),D=[];for(let L=0;L<M;L++)D[L]=this.i(L)^R.i(L);return new l(D,this.h^R.h)};function me(R){const M=R.g.length+1,D=[];for(let L=0;L<M;L++)D[L]=R.i(L)<<1|R.i(L-1)>>>31;return new l(D,R.h)}function ce(R,M){const D=M>>5;M%=32;const L=R.g.length-D,P=[];for(let q=0;q<L;q++)P[q]=M>0?R.i(q+D)>>>M|R.i(q+D+1)<<32-M:R.i(q+D);return new l(P,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,ix=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=h,l.fromString=y,Kr=l}).apply(typeof QS<"u"?QS:typeof self<"u"?self:typeof window<"u"?window:{});var Uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sx,ac,rx,Kf,v_,ox,ax,lx;(function(){var n,e=Object.defineProperty;function t(m){m=[typeof globalThis=="object"&&globalThis,m,typeof window=="object"&&window,typeof self=="object"&&self,typeof Uf=="object"&&Uf];for(var C=0;C<m.length;++C){var A=m[C];if(A&&A.Math==Math)return A}throw Error("Cannot find global object")}var i=t(this);function r(m,C){if(C)e:{var A=i;m=m.split(".");for(var b=0;b<m.length-1;b++){var H=m[b];if(!(H in A))break e;A=A[H]}m=m[m.length-1],b=A[m],C=C(b),C!=b&&C!=null&&e(A,m,{configurable:!0,writable:!0,value:C})}}r("Symbol.dispose",function(m){return m||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(m){return m||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(m){return m||function(C){var A=[],b;for(b in C)Object.prototype.hasOwnProperty.call(C,b)&&A.push([b,C[b]]);return A}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function d(m){var C=typeof m;return C=="object"&&m!=null||C=="function"}function f(m,C,A){return m.call.apply(m.bind,arguments)}function h(m,C,A){return h=f,h.apply(null,arguments)}function y(m,C){var A=Array.prototype.slice.call(arguments,1);return function(){var b=A.slice();return b.push.apply(b,arguments),m.apply(this,b)}}function T(m,C){function A(){}A.prototype=C.prototype,m.Z=C.prototype,m.prototype=new A,m.prototype.constructor=m,m.Ob=function(b,H,J){for(var pe=Array(arguments.length-2),Oe=2;Oe<arguments.length;Oe++)pe[Oe-2]=arguments[Oe];return C.prototype[H].apply(b,pe)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?m=>m&&AsyncContext.Snapshot.wrap(m):m=>m;function I(m){const C=m.length;if(C>0){const A=Array(C);for(let b=0;b<C;b++)A[b]=m[b];return A}return[]}function N(m,C){for(let b=1;b<arguments.length;b++){const H=arguments[b];var A=typeof H;if(A=A!="object"?A:H?Array.isArray(H)?"array":A:"null",A=="array"||A=="object"&&typeof H.length=="number"){A=m.length||0;const J=H.length||0;m.length=A+J;for(let pe=0;pe<J;pe++)m[A+pe]=H[pe]}else m.push(H)}}class U{constructor(C,A){this.i=C,this.j=A,this.h=0,this.g=null}get(){let C;return this.h>0?(this.h--,C=this.g,this.g=C.next,C.next=null):C=this.i(),C}}function O(m){l.setTimeout(()=>{throw m},0)}function K(){var m=R;let C=null;return m.g&&(C=m.g,m.g=m.g.next,m.g||(m.h=null),C.next=null),C}class Z{constructor(){this.h=this.g=null}add(C,A){const b=j.get();b.set(C,A),this.h?this.h.next=b:this.g=b,this.h=b}}var j=new U(()=>new ae,m=>m.reset());class ae{constructor(){this.next=this.g=this.h=null}set(C,A){this.h=C,this.g=A,this.next=null}reset(){this.next=this.g=this.h=null}}let me,ce=!1,R=new Z,M=()=>{const m=Promise.resolve(void 0);me=()=>{m.then(D)}};function D(){for(var m;m=K();){try{m.h.call(m.g)}catch(A){O(A)}var C=j;C.j(m),C.h<100&&(C.h++,m.next=C.g,C.g=m)}ce=!1}function L(){this.u=this.u,this.C=this.C}L.prototype.u=!1,L.prototype.dispose=function(){this.u||(this.u=!0,this.N())},L.prototype[Symbol.dispose]=function(){this.dispose()},L.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function P(m,C){this.type=m,this.g=this.target=C,this.defaultPrevented=!1}P.prototype.h=function(){this.defaultPrevented=!0};var q=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var m=!1,C=Object.defineProperty({},"passive",{get:function(){m=!0}});try{const A=()=>{};l.addEventListener("test",A,C),l.removeEventListener("test",A,C)}catch{}return m})();function k(m){return/^[\s\xa0]*$/.test(m)}function Be(m,C){P.call(this,m?m.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,m&&this.init(m,C)}T(Be,P),Be.prototype.init=function(m,C){const A=this.type=m.type,b=m.changedTouches&&m.changedTouches.length?m.changedTouches[0]:null;this.target=m.target||m.srcElement,this.g=C,C=m.relatedTarget,C||(A=="mouseover"?C=m.fromElement:A=="mouseout"&&(C=m.toElement)),this.relatedTarget=C,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0),this.button=m.button,this.key=m.key||"",this.ctrlKey=m.ctrlKey,this.altKey=m.altKey,this.shiftKey=m.shiftKey,this.metaKey=m.metaKey,this.pointerId=m.pointerId||0,this.pointerType=m.pointerType,this.state=m.state,this.i=m,m.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const m=this.i;m.preventDefault?m.preventDefault():m.returnValue=!1};var ht="closure_listenable_"+(Math.random()*1e6|0),W=0;function ue(m,C,A,b,H){this.listener=m,this.proxy=null,this.src=C,this.type=A,this.capture=!!b,this.ha=H,this.key=++W,this.da=this.fa=!1}function le(m){m.da=!0,m.listener=null,m.proxy=null,m.src=null,m.ha=null}function Te(m,C,A){for(const b in m)C.call(A,m[b],b,m)}function Ce(m,C){for(const A in m)C.call(void 0,m[A],A,m)}function F(m){const C={};for(const A in m)C[A]=m[A];return C}const te="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fe(m,C){let A,b;for(let H=1;H<arguments.length;H++){b=arguments[H];for(A in b)m[A]=b[A];for(let J=0;J<te.length;J++)A=te[J],Object.prototype.hasOwnProperty.call(b,A)&&(m[A]=b[A])}}function ge(m){this.src=m,this.g={},this.h=0}ge.prototype.add=function(m,C,A,b,H){const J=m.toString();m=this.g[J],m||(m=this.g[J]=[],this.h++);const pe=Me(m,C,b,H);return pe>-1?(C=m[pe],A||(C.fa=!1)):(C=new ue(C,this.src,J,!!b,H),C.fa=A,m.push(C)),C};function Ie(m,C){const A=C.type;if(A in m.g){var b=m.g[A],H=Array.prototype.indexOf.call(b,C,void 0),J;(J=H>=0)&&Array.prototype.splice.call(b,H,1),J&&(le(C),m.g[A].length==0&&(delete m.g[A],m.h--))}}function Me(m,C,A,b){for(let H=0;H<m.length;++H){const J=m[H];if(!J.da&&J.listener==C&&J.capture==!!A&&J.ha==b)return H}return-1}var De="closure_lm_"+(Math.random()*1e6|0),et={};function je(m,C,A,b,H){if(Array.isArray(C)){for(let J=0;J<C.length;J++)je(m,C[J],A,b,H);return null}return A=ri(A),m&&m[ht]?m.J(C,A,d(b)?!!b.capture:!1,H):Pe(m,C,A,!1,b,H)}function Pe(m,C,A,b,H,J){if(!C)throw Error("Invalid event type");const pe=d(H)?!!H.capture:!!H;let Oe=Ct(m);if(Oe||(m[De]=Oe=new ge(m)),A=Oe.add(C,A,b,pe,J),A.proxy)return A;if(b=ot(),A.proxy=b,b.src=m,b.listener=A,m.addEventListener)q||(H=pe),H===void 0&&(H=!1),m.addEventListener(C.toString(),b,H);else if(m.attachEvent)m.attachEvent(xe(C.toString()),b);else if(m.addListener&&m.removeListener)m.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return A}function ot(){function m(A){return C.call(m.src,m.listener,A)}const C=Tt;return m}function se(m,C,A,b,H){if(Array.isArray(C))for(var J=0;J<C.length;J++)se(m,C[J],A,b,H);else b=d(b)?!!b.capture:!!b,A=ri(A),m&&m[ht]?(m=m.i,J=String(C).toString(),J in m.g&&(C=m.g[J],A=Me(C,A,b,H),A>-1&&(le(C[A]),Array.prototype.splice.call(C,A,1),C.length==0&&(delete m.g[J],m.h--)))):m&&(m=Ct(m))&&(C=m.g[C.toString()],m=-1,C&&(m=Me(C,A,b,H)),(A=m>-1?C[m]:null)&&de(A))}function de(m){if(typeof m!="number"&&m&&!m.da){var C=m.src;if(C&&C[ht])Ie(C.i,m);else{var A=m.type,b=m.proxy;C.removeEventListener?C.removeEventListener(A,b,m.capture):C.detachEvent?C.detachEvent(xe(A),b):C.addListener&&C.removeListener&&C.removeListener(b),(A=Ct(C))?(Ie(A,m),A.h==0&&(A.src=null,C[De]=null)):le(m)}}}function xe(m){return m in et?et[m]:et[m]="on"+m}function Tt(m,C){if(m.da)m=!0;else{C=new Be(C,this);const A=m.listener,b=m.ha||m.src;m.fa&&de(m),m=A.call(b,C)}return m}function Ct(m){return m=m[De],m instanceof ge?m:null}var Pt="__closure_events_fn_"+(Math.random()*1e9>>>0);function ri(m){return typeof m=="function"?m:(m[Pt]||(m[Pt]=function(C){return m.handleEvent(C)}),m[Pt])}function pt(){L.call(this),this.i=new ge(this),this.M=this,this.G=null}T(pt,L),pt.prototype[ht]=!0,pt.prototype.removeEventListener=function(m,C,A,b){se(this,m,C,A,b)};function Et(m,C){var A,b=m.G;if(b)for(A=[];b;b=b.G)A.push(b);if(m=m.M,b=C.type||C,typeof C=="string")C=new P(C,m);else if(C instanceof P)C.target=C.target||m;else{var H=C;C=new P(b,m),fe(C,H)}H=!0;let J,pe;if(A)for(pe=A.length-1;pe>=0;pe--)J=C.g=A[pe],H=$n(J,b,!0,C)&&H;if(J=C.g=m,H=$n(J,b,!0,C)&&H,H=$n(J,b,!1,C)&&H,A)for(pe=0;pe<A.length;pe++)J=C.g=A[pe],H=$n(J,b,!1,C)&&H}pt.prototype.N=function(){if(pt.Z.N.call(this),this.i){var m=this.i;for(const C in m.g){const A=m.g[C];for(let b=0;b<A.length;b++)le(A[b]);delete m.g[C],m.h--}}this.G=null},pt.prototype.J=function(m,C,A,b){return this.i.add(String(m),C,!1,A,b)},pt.prototype.K=function(m,C,A,b){return this.i.add(String(m),C,!0,A,b)};function $n(m,C,A,b){if(C=m.i.g[String(C)],!C)return!0;C=C.concat();let H=!0;for(let J=0;J<C.length;++J){const pe=C[J];if(pe&&!pe.da&&pe.capture==A){const Oe=pe.listener,Bt=pe.ha||pe.src;pe.fa&&Ie(m.i,pe),H=Oe.call(Bt,b)!==!1&&H}}return H&&!b.defaultPrevented}function po(m,C){if(typeof m!="function")if(m&&typeof m.handleEvent=="function")m=h(m.handleEvent,m);else throw Error("Invalid listener argument");return Number(C)>2147483647?-1:l.setTimeout(m,C||0)}function ad(m){m.g=po(()=>{m.g=null,m.i&&(m.i=!1,ad(m))},m.l);const C=m.h;m.h=null,m.m.apply(null,C)}class Nn extends L{constructor(C,A){super(),this.m=C,this.l=A,this.h=null,this.i=!1,this.g=null}j(C){this.h=arguments,this.g?this.i=!0:ad(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function mo(m){L.call(this),this.h=m,this.g={}}T(mo,L);var Zl=[];function eu(m){Te(m.g,function(C,A){this.g.hasOwnProperty(A)&&de(C)},m),m.g={}}mo.prototype.N=function(){mo.Z.N.call(this),eu(this)},mo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var sr=l.JSON.stringify,Fp=l.JSON.parse,ld=class{stringify(m){return l.JSON.stringify(m,void 0)}parse(m){return l.JSON.parse(m,void 0)}};function ud(){}function cd(){}var wi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pn(){P.call(this,"d")}T(pn,P);function oi(){P.call(this,"c")}T(oi,P);var qt={},dd=null;function ya(){return dd=dd||new pt}qt.Ia="serverreachability";function fd(m){P.call(this,qt.Ia,m)}T(fd,P);function $i(m){const C=ya();Et(C,new fd(C))}qt.STAT_EVENT="statevent";function go(m,C){P.call(this,qt.STAT_EVENT,m),this.stat=C}T(go,P);function Yt(m){const C=ya();Et(C,new go(C,m))}qt.Ja="timingevent";function ji(m,C){P.call(this,qt.Ja,m),this.size=C}T(ji,P);function Ji(m,C){if(typeof m!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){m()},C)}function Ai(){this.g=!0}Ai.prototype.ua=function(){this.g=!1};function qp(m,C,A,b,H,J){m.info(function(){if(m.g)if(J){var pe="",Oe=J.split("&");for(let at=0;at<Oe.length;at++){var Bt=Oe[at].split("=");if(Bt.length>1){const Dt=Bt[0];Bt=Bt[1];const ci=Dt.split("_");pe=ci.length>=2&&ci[1]=="type"?pe+(Dt+"="+Bt+"&"):pe+(Dt+"=redacted&")}}}else pe=null;else pe=J;return"XMLHTTP REQ ("+b+") [attempt "+H+"]: "+C+`
`+A+`
`+pe})}function hd(m,C,A,b,H,J,pe){m.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+H+"]: "+C+`
`+A+`
`+J+" "+pe})}function Wi(m,C,A,b){m.info(function(){return"XMLHTTP TEXT ("+C+"): "+Bp(m,A)+(b?" "+b:"")})}function _o(m,C){m.info(function(){return"TIMEOUT: "+C})}Ai.prototype.info=function(){};function Bp(m,C){if(!m.g)return C;if(!C)return null;try{const J=JSON.parse(C);if(J){for(m=0;m<J.length;m++)if(Array.isArray(J[m])){var A=J[m];if(!(A.length<2)){var b=A[1];if(Array.isArray(b)&&!(b.length<1)){var H=b[0];if(H!="noop"&&H!="stop"&&H!="close")for(let pe=1;pe<b.length;pe++)b[pe]=""}}}}return sr(J)}catch{return C}}var yo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},tu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nu;function vo(){}T(vo,ud),vo.prototype.g=function(){return new XMLHttpRequest},nu=new vo;function ws(m){return encodeURIComponent(String(m))}function pd(m){var C=1;m=m.split(":");const A=[];for(;C>0&&m.length;)A.push(m.shift()),C--;return m.length&&A.push(m.join(":")),A}function Ii(m,C,A,b){this.j=m,this.i=C,this.l=A,this.S=b||1,this.V=new mo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new xi}function xi(){this.i=null,this.g="",this.h=!1}var Kt={},ln={};function Qi(m,C,A){m.M=1,m.A=To(jt(C)),m.u=A,m.R=!0,va(m,null)}function va(m,C){m.F=Date.now(),Xi(m),m.B=jt(m.A);var A=m.B,b=m.S;Array.isArray(b)||(b=[String(b)]),Ca(A.i,"t",b),m.C=0,A=m.j.L,m.h=new xi,m.g=Rd(m.j,A?C:null,!m.u),m.P>0&&(m.O=new Nn(h(m.Y,m,m.g),m.P)),C=m.V,A=m.g,b=m.ba;var H="readystatechange";Array.isArray(H)||(H&&(Zl[0]=H.toString()),H=Zl);for(let J=0;J<H.length;J++){const pe=je(A,H[J],b||C.handleEvent,!1,C.h||C);if(!pe)break;C.g[pe.key]=pe}C=m.J?F(m.J):{},m.u?(m.v||(m.v="POST"),C["Content-Type"]="application/x-www-form-urlencoded",m.g.ea(m.B,m.v,m.u,C)):(m.v="GET",m.g.ea(m.B,m.v,null,C)),$i(),qp(m.i,m.v,m.B,m.l,m.S,m.u)}Ii.prototype.ba=function(m){m=m.target;const C=this.O;C&&Ni(m)==3?C.j():this.Y(m)},Ii.prototype.Y=function(m){try{if(m==this.g)e:{const Oe=Ni(this.g),Bt=this.g.ya(),at=this.g.ca();if(!(Oe<3)&&(Oe!=3||this.g&&(this.h.h||this.g.la()||mn(this.g)))){this.K||Oe!=4||Bt==7||(Bt==8||at<=0?$i(3):$i(2)),Zi(this);var C=this.g.ca();this.X=C;var A=Gp(this);if(this.o=C==200,hd(this.i,this.v,this.B,this.l,this.S,Oe,C),this.o){if(this.U&&!this.L){t:{if(this.g){var b,H=this.g;if((b=H.g?H.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(b)){var J=b;break t}}J=null}if(m=J)Wi(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,es(this,m);else{this.o=!1,this.m=3,Yt(12),jn(this),ai(this);break e}}if(this.R){m=!0;let Dt;for(;!this.K&&this.C<A.length;)if(Dt=gd(this,A),Dt==ln){Oe==4&&(this.m=4,Yt(14),m=!1),Wi(this.i,this.l,null,"[Incomplete Response]");break}else if(Dt==Kt){this.m=4,Yt(15),Wi(this.i,this.l,A,"[Invalid Chunk]"),m=!1;break}else Wi(this.i,this.l,Dt,null),es(this,Dt);if(md(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||A.length!=0||this.h.h||(this.m=1,Yt(16),m=!1),this.o=this.o&&m,!m)Wi(this.i,this.l,A,"[Invalid Chunked Response]"),jn(this),ai(this);else if(A.length>0&&!this.W){this.W=!0;var pe=this.j;pe.g==this&&pe.aa&&!pe.P&&(pe.j.info("Great, no buffering proxy detected. Bytes received: "+A.length),_u(pe),pe.P=!0,Yt(11))}}else Wi(this.i,this.l,A,null),es(this,A);Oe==4&&jn(this),this.o&&!this.K&&(Oe==4?Ad(this.j,this):(this.o=!1,Xi(this)))}else Is(this.g),C==400&&A.indexOf("Unknown SID")>0?(this.m=3,Yt(12)):(this.m=0,Yt(13)),jn(this),ai(this)}}}catch{}finally{}};function Gp(m){if(!md(m))return m.g.la();const C=mn(m.g);if(C==="")return"";let A="";const b=C.length,H=Ni(m.g)==4;if(!m.h.i){if(typeof TextDecoder>"u")return jn(m),ai(m),"";m.h.i=new l.TextDecoder}for(let J=0;J<b;J++)m.h.h=!0,A+=m.h.i.decode(C[J],{stream:!(H&&J==b-1)});return C.length=0,m.h.g+=A,m.C=0,m.h.g}function md(m){return m.g?m.v=="GET"&&m.M!=2&&m.j.Aa:!1}function gd(m,C){var A=m.C,b=C.indexOf(`
`,A);return b==-1?ln:(A=Number(C.substring(A,b)),isNaN(A)?Kt:(b+=1,b+A>C.length?ln:(C=C.slice(b,b+A),m.C=b+A,C)))}Ii.prototype.cancel=function(){this.K=!0,jn(this)};function Xi(m){m.T=Date.now()+m.H,Ta(m,m.H)}function Ta(m,C){if(m.D!=null)throw Error("WatchDog timer not null");m.D=Ji(h(m.aa,m),C)}function Zi(m){m.D&&(l.clearTimeout(m.D),m.D=null)}Ii.prototype.aa=function(){this.D=null;const m=Date.now();m-this.T>=0?(_o(this.i,this.B),this.M!=2&&($i(),Yt(17)),jn(this),this.m=2,ai(this)):Ta(this,this.T-m)};function ai(m){m.j.I==0||m.K||Ad(m.j,m)}function jn(m){Zi(m);var C=m.O;C&&typeof C.dispose=="function"&&C.dispose(),m.O=null,eu(m.V),m.g&&(C=m.g,m.g=null,C.abort(),C.dispose())}function es(m,C){try{var A=m.j;if(A.I!=0&&(A.g==m||ns(A.h,m))){if(!m.L&&ns(A.h,m)&&A.I==3){try{var b=A.Ba.g.parse(C)}catch{b=null}if(Array.isArray(b)&&b.length==3){var H=b;if(H[0]==0){e:if(!A.v){if(A.g)if(A.g.F+3e3<m.F)ba(A),fr(A);else break e;xo(A),Yt(18)}}else A.xa=H[1],0<A.xa-A.K&&H[2]<37500&&A.F&&A.A==0&&!A.C&&(A.C=Ji(h(A.Va,A),6e3));ts(A.h)<=1&&A.ta&&(A.ta=void 0)}else ls(A,11)}else if((m.L||A.g==m)&&ba(A),!k(C))for(H=A.Ba.g.parse(C),C=0;C<H.length;C++){let at=H[C];const Dt=at[0];if(!(Dt<=A.K))if(A.K=Dt,at=at[1],A.I==2)if(at[0]=="c"){A.M=at[1],A.ba=at[2];const ci=at[3];ci!=null&&(A.ka=ci,A.j.info("VER="+A.ka));const us=at[4];us!=null&&(A.za=us,A.j.info("SVER="+A.za));const Mi=at[5];Mi!=null&&typeof Mi=="number"&&Mi>0&&(b=1.5*Mi,A.O=b,A.j.info("backChannelRequestTimeoutMs_="+b)),b=A;const Di=m.g;if(Di){const bo=Di.g?Di.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bo){var J=b.h;J.g||bo.indexOf("spdy")==-1&&bo.indexOf("quic")==-1&&bo.indexOf("h2")==-1||(J.j=J.l,J.g=new Set,J.h&&(ru(J,J.h),J.h=null))}if(b.G){const Ra=Di.g?Di.g.getResponseHeader("X-HTTP-Session-Id"):null;Ra&&(b.wa=Ra,ct(b.J,b.G,Ra))}}A.I=3,A.l&&A.l.ra(),A.aa&&(A.T=Date.now()-m.F,A.j.info("Handshake RTT: "+A.T+"ms")),b=A;var pe=m;if(b.na=bd(b,b.L?b.ba:null,b.W),pe.L){ou(b.h,pe);var Oe=pe,Bt=b.O;Bt&&(Oe.H=Bt),Oe.D&&(Zi(Oe),Xi(Oe)),b.g=pe}else Cd(b);A.i.length>0&&as(A)}else at[0]!="stop"&&at[0]!="close"||ls(A,7);else A.I==3&&(at[0]=="stop"||at[0]=="close"?at[0]=="stop"?ls(A,7):mu(A):at[0]!="noop"&&A.l&&A.l.qa(at),A.A=0)}}$i(4)}catch{}}var $t=class{constructor(m,C){this.g=m,this.map=C}};function iu(m){this.l=m||10,l.PerformanceNavigationTiming?(m=l.performance.getEntriesByType("navigation"),m=m.length>0&&(m[0].nextHopProtocol=="hq"||m[0].nextHopProtocol=="h2")):m=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=m?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function su(m){return m.h?!0:m.g?m.g.size>=m.j:!1}function ts(m){return m.h?1:m.g?m.g.size:0}function ns(m,C){return m.h?m.h==C:m.g?m.g.has(C):!1}function ru(m,C){m.g?m.g.add(C):m.h=C}function ou(m,C){m.h&&m.h==C?m.h=null:m.g&&m.g.has(C)&&m.g.delete(C)}iu.prototype.cancel=function(){if(this.i=au(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const m of this.g.values())m.cancel();this.g.clear()}};function au(m){if(m.h!=null)return m.i.concat(m.h.G);if(m.g!=null&&m.g.size!==0){let C=m.i;for(const A of m.g.values())C=C.concat(A.G);return C}return I(m.i)}var _d=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ea(m,C){if(m){m=m.split("&");for(let A=0;A<m.length;A++){const b=m[A].indexOf("=");let H,J=null;b>=0?(H=m[A].substring(0,b),J=m[A].substring(b+1)):H=m[A],C(H,J?decodeURIComponent(J.replace(/\+/g," ")):"")}}}function Jn(m){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let C;m instanceof Jn?(this.l=m.l,un(this,m.j),this.o=m.o,this.g=m.g,rr(this,m.u),this.h=m.h,lu(this,Ed(m.i)),this.m=m.m):m&&(C=String(m).match(_d))?(this.l=!1,un(this,C[1]||"",!0),this.o=is(C[2]||""),this.g=is(C[3]||"",!0),rr(this,C[4]),this.h=is(C[5]||"",!0),lu(this,C[6]||"",!0),this.m=is(C[7]||"")):(this.l=!1,this.i=new ar(null,this.l))}Jn.prototype.toString=function(){const m=[];var C=this.j;C&&m.push(Eo(C,Sa,!0),":");var A=this.g;return(A||C=="file")&&(m.push("//"),(C=this.o)&&m.push(Eo(C,Sa,!0),"@"),m.push(ws(A).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),A=this.u,A!=null&&m.push(":",String(A))),(A=this.h)&&(this.g&&A.charAt(0)!="/"&&m.push("/"),m.push(Eo(A,A.charAt(0)=="/"?uu:yd,!0))),(A=this.i.toString())&&m.push("?",A),(A=this.m)&&m.push("#",Eo(A,vd)),m.join("")},Jn.prototype.resolve=function(m){const C=jt(this);let A=!!m.j;A?un(C,m.j):A=!!m.o,A?C.o=m.o:A=!!m.g,A?C.g=m.g:A=m.u!=null;var b=m.h;if(A)rr(C,m.u);else if(A=!!m.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var H=C.h.lastIndexOf("/");H!=-1&&(b=C.h.slice(0,H+1)+b)}if(H=b,H==".."||H==".")b="";else if(H.indexOf("./")!=-1||H.indexOf("/.")!=-1){b=H.lastIndexOf("/",0)==0,H=H.split("/");const J=[];for(let pe=0;pe<H.length;){const Oe=H[pe++];Oe=="."?b&&pe==H.length&&J.push(""):Oe==".."?((J.length>1||J.length==1&&J[0]!="")&&J.pop(),b&&pe==H.length&&J.push("")):(J.push(Oe),b=!0)}b=J.join("/")}else b=H}return A?C.h=b:A=m.i.toString()!=="",A?lu(C,Ed(m.i)):A=!!m.m,A&&(C.m=m.m),C};function jt(m){return new Jn(m)}function un(m,C,A){m.j=A?is(C,!0):C,m.j&&(m.j=m.j.replace(/:$/,""))}function rr(m,C){if(C){if(C=Number(C),isNaN(C)||C<0)throw Error("Bad port number "+C);m.u=C}else m.u=null}function lu(m,C,A){C instanceof ar?(m.i=C,wa(m.i,m.l)):(A||(C=Eo(C,or)),m.i=new ar(C,m.l))}function ct(m,C,A){m.i.set(C,A)}function To(m){return ct(m,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),m}function is(m,C){return m?C?decodeURI(m.replace(/%25/g,"%2525")):decodeURIComponent(m):""}function Eo(m,C,A){return typeof m=="string"?(m=encodeURI(m).replace(C,Vn),A&&(m=m.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m):null}function Vn(m){return m=m.charCodeAt(0),"%"+(m>>4&15).toString(16)+(m&15).toString(16)}var Sa=/[#\/\?@]/g,yd=/[#\?:]/g,uu=/[#\?]/g,or=/[#\?@]/g,vd=/#/g;function ar(m,C){this.h=this.g=null,this.i=m||null,this.j=!!C}function Un(m){m.g||(m.g=new Map,m.h=0,m.i&&Ea(m.i,function(C,A){m.add(decodeURIComponent(C.replace(/\+/g," ")),A)}))}n=ar.prototype,n.add=function(m,C){Un(this),this.i=null,m=lr(this,m);let A=this.g.get(m);return A||this.g.set(m,A=[]),A.push(C),this.h+=1,this};function Td(m,C){Un(m),C=lr(m,C),m.g.has(C)&&(m.i=null,m.h-=m.g.get(C).length,m.g.delete(C))}function cu(m,C){return Un(m),C=lr(m,C),m.g.has(C)}n.forEach=function(m,C){Un(this),this.g.forEach(function(A,b){A.forEach(function(H){m.call(C,H,b,this)},this)},this)};function du(m,C){Un(m);let A=[];if(typeof C=="string")cu(m,C)&&(A=A.concat(m.g.get(lr(m,C))));else for(m=Array.from(m.g.values()),C=0;C<m.length;C++)A=A.concat(m[C]);return A}n.set=function(m,C){return Un(this),this.i=null,m=lr(this,m),cu(this,m)&&(this.h-=this.g.get(m).length),this.g.set(m,[C]),this.h+=1,this},n.get=function(m,C){return m?(m=du(this,m),m.length>0?String(m[0]):C):C};function Ca(m,C,A){Td(m,C),A.length>0&&(m.i=null,m.g.set(lr(m,C),I(A)),m.h+=A.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const m=[],C=Array.from(this.g.keys());for(let b=0;b<C.length;b++){var A=C[b];const H=ws(A);A=du(this,A);for(let J=0;J<A.length;J++){let pe=H;A[J]!==""&&(pe+="="+ws(A[J])),m.push(pe)}}return this.i=m.join("&")};function Ed(m){const C=new ar;return C.i=m.i,m.g&&(C.g=new Map(m.g),C.h=m.h),C}function lr(m,C){return C=String(C),m.j&&(C=C.toLowerCase()),C}function wa(m,C){C&&!m.j&&(Un(m),m.i=null,m.g.forEach(function(A,b){const H=b.toLowerCase();b!=H&&(Td(this,b),Ca(this,H,A))},m)),m.j=C}function bi(m,C){const A=new Ai;if(l.Image){const b=new Image;b.onload=y(li,A,"TestLoadImage: loaded",!0,C,b),b.onerror=y(li,A,"TestLoadImage: error",!1,C,b),b.onabort=y(li,A,"TestLoadImage: abort",!1,C,b),b.ontimeout=y(li,A,"TestLoadImage: timeout",!1,C,b),l.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=m}else C(!1)}function fu(m,C){const A=new Ai,b=new AbortController,H=setTimeout(()=>{b.abort(),li(A,"TestPingServer: timeout",!1,C)},1e4);fetch(m,{signal:b.signal}).then(J=>{clearTimeout(H),J.ok?li(A,"TestPingServer: ok",!0,C):li(A,"TestPingServer: server error",!1,C)}).catch(()=>{clearTimeout(H),li(A,"TestPingServer: error",!1,C)})}function li(m,C,A,b,H){try{H&&(H.onload=null,H.onerror=null,H.onabort=null,H.ontimeout=null),b(A)}catch{}}function ur(){this.g=new ld}function ss(m){this.i=m.Sb||null,this.h=m.ab||!1}T(ss,ud),ss.prototype.g=function(){return new So(this.i,this.h)};function So(m,C){pt.call(this),this.H=m,this.o=C,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(So,pt),n=So.prototype,n.open=function(m,C){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=m,this.D=C,this.readyState=1,Ri(this)},n.send=function(m){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const C={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};m&&(C.body=m),(this.H||l).fetch(new Request(this.D,C)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,cr(this)),this.readyState=0},n.Pa=function(m){if(this.g&&(this.l=m,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=m.headers,this.readyState=2,Ri(this)),this.g&&(this.readyState=3,Ri(this),this.g)))if(this.responseType==="arraybuffer")m.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in m){if(this.j=m.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Aa(this)}else m.text().then(this.Oa.bind(this),this.ga.bind(this))};function Aa(m){m.j.read().then(m.Ma.bind(m)).catch(m.ga.bind(m))}n.Ma=function(m){if(this.g){if(this.o&&m.value)this.response.push(m.value);else if(!this.o){var C=m.value?m.value:new Uint8Array(0);(C=this.B.decode(C,{stream:!m.done}))&&(this.response=this.responseText+=C)}m.done?cr(this):Ri(this),this.readyState==3&&Aa(this)}},n.Oa=function(m){this.g&&(this.response=this.responseText=m,cr(this))},n.Na=function(m){this.g&&(this.response=m,cr(this))},n.ga=function(){this.g&&cr(this)};function cr(m){m.readyState=4,m.l=null,m.j=null,m.B=null,Ri(m)}n.setRequestHeader=function(m,C){this.A.append(m,C)},n.getResponseHeader=function(m){return this.h&&this.h.get(m.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const m=[],C=this.h.entries();for(var A=C.next();!A.done;)A=A.value,m.push(A[0]+": "+A[1]),A=C.next();return m.join(`\r
`)};function Ri(m){m.onreadystatechange&&m.onreadystatechange.call(m)}Object.defineProperty(So.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(m){this.m=m?"include":"same-origin"}});function ui(m){let C="";return Te(m,function(A,b){C+=b,C+=":",C+=A,C+=`\r
`}),C}function Co(m,C,A){e:{for(b in A){var b=!1;break e}b=!0}b||(A=ui(A),typeof m=="string"?A!=null&&ws(A):ct(m,C,A))}function mt(m){pt.call(this),this.headers=new Map,this.L=m||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(mt,pt);var rs=/^https?$/i,hu=["POST","PUT"];n=mt.prototype,n.Fa=function(m){this.H=m},n.ea=function(m,C,A,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+m);C=C?C.toUpperCase():"GET",this.D=m,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nu.g(),this.g.onreadystatechange=E(h(this.Ca,this));try{this.B=!0,this.g.open(C,String(m),!0),this.B=!1}catch(J){wo(this,J);return}if(m=A||"",A=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var H in b)A.set(H,b[H]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const J of b.keys())A.set(J,b.get(J));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(A.keys()).find(J=>J.toLowerCase()=="content-type"),H=l.FormData&&m instanceof l.FormData,!(Array.prototype.indexOf.call(hu,C,void 0)>=0)||b||H||A.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[J,pe]of A)this.g.setRequestHeader(J,pe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(m),this.v=!1}catch(J){wo(this,J)}};function wo(m,C){m.h=!1,m.g&&(m.j=!0,m.g.abort(),m.j=!1),m.l=C,m.o=5,pu(m),As(m)}function pu(m){m.A||(m.A=!0,Et(m,"complete"),Et(m,"error"))}n.abort=function(m){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=m||7,Et(this,"complete"),Et(this,"abort"),As(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),As(this,!0)),mt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Ao(this):this.Xa())},n.Xa=function(){Ao(this)};function Ao(m){if(m.h&&typeof a<"u"){if(m.v&&Ni(m)==4)setTimeout(m.Ca.bind(m),0);else if(Et(m,"readystatechange"),Ni(m)==4){m.h=!1;try{const J=m.ca();e:switch(J){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var C=!0;break e;default:C=!1}var A;if(!(A=C)){var b;if(b=J===0){let pe=String(m.D).match(_d)[1]||null;!pe&&l.self&&l.self.location&&(pe=l.self.location.protocol.slice(0,-1)),b=!rs.test(pe?pe.toLowerCase():"")}A=b}if(A)Et(m,"complete"),Et(m,"success");else{m.o=6;try{var H=Ni(m)>2?m.g.statusText:""}catch{H=""}m.l=H+" ["+m.ca()+"]",pu(m)}}finally{As(m)}}}}function As(m,C){if(m.g){m.m&&(clearTimeout(m.m),m.m=null);const A=m.g;m.g=null,C||Et(m,"ready");try{A.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Ni(m){return m.g?m.g.readyState:0}n.ca=function(){try{return Ni(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(m){if(this.g){var C=this.g.responseText;return m&&C.indexOf(m)==0&&(C=C.substring(m.length)),Fp(C)}};function mn(m){try{if(!m.g)return null;if("response"in m.g)return m.g.response;switch(m.F){case"":case"text":return m.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in m.g)return m.g.mozResponseArrayBuffer}return null}catch{return null}}function Is(m){const C={};m=(m.g&&Ni(m)>=2&&m.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<m.length;b++){if(k(m[b]))continue;var A=pd(m[b]);const H=A[0];if(A=A[1],typeof A!="string")continue;A=A.trim();const J=C[H]||[];C[H]=J,J.push(A)}Ce(C,function(b){return b.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function os(m,C,A){return A&&A.internalChannelParams&&A.internalChannelParams[m]||C}function dr(m){this.za=0,this.i=[],this.j=new Ai,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=os("failFast",!1,m),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=os("baseRetryDelayMs",5e3,m),this.Za=os("retryDelaySeedMs",1e4,m),this.Ta=os("forwardChannelMaxRetries",2,m),this.va=os("forwardChannelRequestTimeoutMs",2e4,m),this.ma=m&&m.xmlHttpFactory||void 0,this.Ua=m&&m.Rb||void 0,this.Aa=m&&m.useFetchStreams||!1,this.O=void 0,this.L=m&&m.supportsCrossDomainXhr||!1,this.M="",this.h=new iu(m&&m.concurrentRequestLimit),this.Ba=new ur,this.S=m&&m.fastHandshake||!1,this.R=m&&m.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=m&&m.Pb||!1,m&&m.ua&&this.j.ua(),m&&m.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&m&&m.detectBufferingProxy||!1,this.ia=void 0,m&&m.longPollingTimeout&&m.longPollingTimeout>0&&(this.ia=m.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=dr.prototype,n.ka=8,n.I=1,n.connect=function(m,C,A,b){Yt(0),this.W=m,this.H=C||{},A&&b!==void 0&&(this.H.OSID=A,this.H.OAID=b),this.F=this.X,this.J=bd(this,null,this.W),as(this)};function mu(m){if(Ia(m),m.I==3){var C=m.V++,A=jt(m.J);if(ct(A,"SID",m.M),ct(A,"RID",C),ct(A,"TYPE","terminate"),Io(m,A),C=new Ii(m,m.j,C),C.M=2,C.A=To(jt(A)),A=!1,l.navigator&&l.navigator.sendBeacon)try{A=l.navigator.sendBeacon(C.A.toString(),"")}catch{}!A&&l.Image&&(new Image().src=C.A,A=!0),A||(C.g=Rd(C.j,null),C.g.ea(C.A)),C.F=Date.now(),Xi(C)}xd(m)}function fr(m){m.g&&(_u(m),m.g.cancel(),m.g=null)}function Ia(m){fr(m),m.v&&(l.clearTimeout(m.v),m.v=null),ba(m),m.h.cancel(),m.m&&(typeof m.m=="number"&&l.clearTimeout(m.m),m.m=null)}function as(m){if(!su(m.h)&&!m.m){m.m=!0;var C=m.Ea;me||M(),ce||(me(),ce=!0),R.add(C,m),m.D=0}}function xa(m,C){return ts(m.h)>=m.h.j-(m.m?1:0)?!1:m.m?(m.i=C.G.concat(m.i),!0):m.I==1||m.I==2||m.D>=(m.Sa?0:m.Ta)?!1:(m.m=Ji(h(m.Ea,m,C),Id(m,m.D)),m.D++,!0)}n.Ea=function(m){if(this.m)if(this.m=null,this.I==1){if(!m){this.V=Math.floor(Math.random()*1e5),m=this.V++;const H=new Ii(this,this.j,m);let J=this.o;if(this.U&&(J?(J=F(J),fe(J,this.U)):J=this.U),this.u!==null||this.R||(H.J=J,J=null),this.S)e:{for(var C=0,A=0;A<this.i.length;A++){t:{var b=this.i[A];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break t}b=void 0}if(b===void 0)break;if(C+=b,C>4096){C=A;break e}if(C===4096||A===this.i.length-1){C=A+1;break e}}C=1e3}else C=1e3;C=Sd(this,H,C),A=jt(this.J),ct(A,"RID",m),ct(A,"CVER",22),this.G&&ct(A,"X-HTTP-Session-Id",this.G),Io(this,A),J&&(this.R?C="headers="+ws(ui(J))+"&"+C:this.u&&Co(A,this.u,J)),ru(this.h,H),this.Ra&&ct(A,"TYPE","init"),this.S?(ct(A,"$req",C),ct(A,"SID","null"),H.U=!0,Qi(H,A,null)):Qi(H,A,C),this.I=2}}else this.I==3&&(m?gu(this,m):this.i.length==0||su(this.h)||gu(this))};function gu(m,C){var A;C?A=C.l:A=m.V++;const b=jt(m.J);ct(b,"SID",m.M),ct(b,"RID",A),ct(b,"AID",m.K),Io(m,b),m.u&&m.o&&Co(b,m.u,m.o),A=new Ii(m,m.j,A,m.D+1),m.u===null&&(A.J=m.o),C&&(m.i=C.G.concat(m.i)),C=Sd(m,A,1e3),A.H=Math.round(m.va*.5)+Math.round(m.va*.5*Math.random()),ru(m.h,A),Qi(A,b,C)}function Io(m,C){m.H&&Te(m.H,function(A,b){ct(C,b,A)}),m.l&&Te({},function(A,b){ct(C,b,A)})}function Sd(m,C,A){A=Math.min(m.i.length,A);const b=m.l?h(m.l.Ka,m.l,m):null;e:{var H=m.i;let Oe=-1;for(;;){const Bt=["count="+A];Oe==-1?A>0?(Oe=H[0].g,Bt.push("ofs="+Oe)):Oe=0:Bt.push("ofs="+Oe);let at=!0;for(let Dt=0;Dt<A;Dt++){var J=H[Dt].g;const ci=H[Dt].map;if(J-=Oe,J<0)Oe=Math.max(0,H[Dt].g-100),at=!1;else try{J="req"+J+"_"||"";try{var pe=ci instanceof Map?ci:Object.entries(ci);for(const[us,Mi]of pe){let Di=Mi;d(Mi)&&(Di=sr(Mi)),Bt.push(J+us+"="+encodeURIComponent(Di))}}catch(us){throw Bt.push(J+"type="+encodeURIComponent("_badmap")),us}}catch{b&&b(ci)}}if(at){pe=Bt.join("&");break e}}pe=void 0}return m=m.i.splice(0,A),C.G=m,pe}function Cd(m){if(!m.g&&!m.v){m.Y=1;var C=m.Da;me||M(),ce||(me(),ce=!0),R.add(C,m),m.A=0}}function xo(m){return m.g||m.v||m.A>=3?!1:(m.Y++,m.v=Ji(h(m.Da,m),Id(m,m.A)),m.A++,!0)}n.Da=function(){if(this.v=null,wd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var m=4*this.T;this.j.info("BP detection timer enabled: "+m),this.B=Ji(h(this.Wa,this),m)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Yt(10),fr(this),wd(this))};function _u(m){m.B!=null&&(l.clearTimeout(m.B),m.B=null)}function wd(m){m.g=new Ii(m,m.j,"rpc",m.Y),m.u===null&&(m.g.J=m.o),m.g.P=0;var C=jt(m.na);ct(C,"RID","rpc"),ct(C,"SID",m.M),ct(C,"AID",m.K),ct(C,"CI",m.F?"0":"1"),!m.F&&m.ia&&ct(C,"TO",m.ia),ct(C,"TYPE","xmlhttp"),Io(m,C),m.u&&m.o&&Co(C,m.u,m.o),m.O&&(m.g.H=m.O);var A=m.g;m=m.ba,A.M=1,A.A=To(jt(C)),A.u=null,A.R=!0,va(A,m)}n.Va=function(){this.C!=null&&(this.C=null,fr(this),xo(this),Yt(19))};function ba(m){m.C!=null&&(l.clearTimeout(m.C),m.C=null)}function Ad(m,C){var A=null;if(m.g==C){ba(m),_u(m),m.g=null;var b=2}else if(ns(m.h,C))A=C.G,ou(m.h,C),b=1;else return;if(m.I!=0){if(C.o)if(b==1){A=C.u?C.u.length:0,C=Date.now()-C.F;var H=m.D;b=ya(),Et(b,new ji(b,A)),as(m)}else Cd(m);else if(H=C.m,H==3||H==0&&C.X>0||!(b==1&&xa(m,C)||b==2&&xo(m)))switch(A&&A.length>0&&(C=m.h,C.i=C.i.concat(A)),H){case 1:ls(m,5);break;case 4:ls(m,10);break;case 3:ls(m,6);break;default:ls(m,2)}}}function Id(m,C){let A=m.Qa+Math.floor(Math.random()*m.Za);return m.isActive()||(A*=2),A*C}function ls(m,C){if(m.j.info("Error code "+C),C==2){var A=h(m.bb,m),b=m.Ua;const H=!b;b=new Jn(b||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||un(b,"https"),To(b),H?bi(b.toString(),A):fu(b.toString(),A)}else Yt(2);m.I=0,m.l&&m.l.pa(C),xd(m),Ia(m)}n.bb=function(m){m?(this.j.info("Successfully pinged google.com"),Yt(2)):(this.j.info("Failed to ping google.com"),Yt(1))};function xd(m){if(m.I=0,m.ja=[],m.l){const C=au(m.h);(C.length!=0||m.i.length!=0)&&(N(m.ja,C),N(m.ja,m.i),m.h.i.length=0,I(m.i),m.i.length=0),m.l.oa()}}function bd(m,C,A){var b=A instanceof Jn?jt(A):new Jn(A);if(b.g!="")C&&(b.g=C+"."+b.g),rr(b,b.u);else{var H=l.location;b=H.protocol,C=C?C+"."+H.hostname:H.hostname,H=+H.port;const J=new Jn(null);b&&un(J,b),C&&(J.g=C),H&&rr(J,H),A&&(J.h=A),b=J}return A=m.G,C=m.wa,A&&C&&ct(b,A,C),ct(b,"VER",m.ka),Io(m,b),b}function Rd(m,C,A){if(C&&!m.L)throw Error("Can't create secondary domain capable XhrIo object.");return C=m.Aa&&!m.ma?new mt(new ss({ab:A})):new mt(m.ma),C.Fa(m.L),C}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Nd(){}n=Nd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function hr(){}hr.prototype.g=function(m,C){return new Mn(m,C)};function Mn(m,C){pt.call(this),this.g=new dr(C),this.l=m,this.h=C&&C.messageUrlParams||null,m=C&&C.messageHeaders||null,C&&C.clientProtocolHeaderRequired&&(m?m["X-Client-Protocol"]="webchannel":m={"X-Client-Protocol":"webchannel"}),this.g.o=m,m=C&&C.initMessageHeaders||null,C&&C.messageContentType&&(m?m["X-WebChannel-Content-Type"]=C.messageContentType:m={"X-WebChannel-Content-Type":C.messageContentType}),C&&C.sa&&(m?m["X-WebChannel-Client-Profile"]=C.sa:m={"X-WebChannel-Client-Profile":C.sa}),this.g.U=m,(m=C&&C.Qb)&&!k(m)&&(this.g.u=m),this.A=C&&C.supportsCrossDomainXhr||!1,this.v=C&&C.sendRawJson||!1,(C=C&&C.httpSessionIdParam)&&!k(C)&&(this.g.G=C,m=this.h,m!==null&&C in m&&(m=this.h,C in m&&delete m[C])),this.j=new xs(this)}T(Mn,pt),Mn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Mn.prototype.close=function(){mu(this.g)},Mn.prototype.o=function(m){var C=this.g;if(typeof m=="string"){var A={};A.__data__=m,m=A}else this.v&&(A={},A.__data__=sr(m),m=A);C.i.push(new $t(C.Ya++,m)),C.I==3&&as(C)},Mn.prototype.N=function(){this.g.l=null,delete this.j,mu(this.g),delete this.g,Mn.Z.N.call(this)};function Md(m){pn.call(this),m.__headers__&&(this.headers=m.__headers__,this.statusCode=m.__status__,delete m.__headers__,delete m.__status__);var C=m.__sm__;if(C){e:{for(const A in C){m=A;break e}m=void 0}(this.i=m)&&(m=this.i,C=C!==null&&m in C?C[m]:void 0),this.data=C}else this.data=m}T(Md,pn);function Dd(){oi.call(this),this.status=1}T(Dd,oi);function xs(m){this.g=m}T(xs,Nd),xs.prototype.ra=function(){Et(this.g,"a")},xs.prototype.qa=function(m){Et(this.g,new Md(m))},xs.prototype.pa=function(m){Et(this.g,new Dd)},xs.prototype.oa=function(){Et(this.g,"b")},hr.prototype.createWebChannel=hr.prototype.g,Mn.prototype.send=Mn.prototype.o,Mn.prototype.open=Mn.prototype.m,Mn.prototype.close=Mn.prototype.close,lx=function(){return new hr},ax=function(){return ya()},ox=qt,v_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},yo.NO_ERROR=0,yo.TIMEOUT=8,yo.HTTP_ERROR=6,Kf=yo,tu.COMPLETE="complete",rx=tu,cd.EventType=wi,wi.OPEN="a",wi.CLOSE="b",wi.ERROR="c",wi.MESSAGE="d",pt.prototype.listen=pt.prototype.J,ac=cd,mt.prototype.listenOnce=mt.prototype.K,mt.prototype.getLastError=mt.prototype.Ha,mt.prototype.getLastErrorCode=mt.prototype.ya,mt.prototype.getStatus=mt.prototype.ca,mt.prototype.getResponseJson=mt.prototype.La,mt.prototype.getResponseText=mt.prototype.la,mt.prototype.send=mt.prototype.ea,mt.prototype.setWithCredentials=mt.prototype.Fa,sx=mt}).apply(typeof Uf<"u"?Uf:typeof self<"u"?self:typeof window<"u"?window:{});const XS="@firebase/firestore",ZS="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}In.UNAUTHENTICATED=new In(null),In.GOOGLE_CREDENTIALS=new In("google-credentials-uid"),In.FIRST_PARTY=new In("first-party-uid"),In.MOCK_USER=new In("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ql="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xo=new Hc("@firebase/firestore");function ol(){return Xo.logLevel}function ve(n,...e){if(Xo.logLevel<=Ke.DEBUG){const t=e.map(Ty);Xo.debug(`Firestore (${ql}): ${n}`,...t)}}function Js(n,...e){if(Xo.logLevel<=Ke.ERROR){const t=e.map(Ty);Xo.error(`Firestore (${ql}): ${n}`,...t)}}function Al(n,...e){if(Xo.logLevel<=Ke.WARN){const t=e.map(Ty);Xo.warn(`Firestore (${ql}): ${n}`,...t)}}function Ty(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,ux(n,i,t)}function ux(n,e,t){let i=`FIRESTORE (${ql}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Js(i),new Error(i)}function ut(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||ux(e,r,i)}function Ue(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ye extends Yi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ik{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(In.UNAUTHENTICATED)))}shutdown(){}}class xk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class bk{constructor(e){this.t=e,this.currentUser=In.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ut(this.o===void 0,42304);let i=this.i;const r=f=>this.i!==i?(i=this.i,t(f)):Promise.resolve();let a=new $r;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new $r,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const f=a;e.enqueueRetryable((async()=>{await f.promise,await r(this.currentUser)}))},d=f=>{ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((f=>d(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?d(f):(ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new $r)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(ut(typeof i.accessToken=="string",31837,{l:i}),new cx(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ut(e===null||typeof e=="string",2055,{h:e}),new In(e)}}class Rk{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=In.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Nk{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Rk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(In.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class eC{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Vi(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){ut(this.o===void 0,3512);const i=a=>{a.error!=null&&ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new eC(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(ut(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new eC(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Dk(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Qe(n,e){return n<e?-1:n>e?1:0}function T_(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return $g(r)===$g(a)?Qe(r,a):$g(r)?1:-1}return Qe(n.length,e.length)}const kk=55296,Pk=57343;function $g(n){const e=n.charCodeAt(0);return e>=kk&&e<=Pk}function Il(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tC="__name__";class ps{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ne(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&Ne(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ps.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ps?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=ps.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Qe(e.length,t.length)}static compareSegments(e,t){const i=ps.isNumericId(e),r=ps.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?ps.extractNumericId(e).compare(ps.extractNumericId(t)):T_(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Kr.fromString(e.substring(4,e.length-2))}}class It extends ps{construct(e,t,i){return new It(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ye(ie.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new It(t)}static emptyPath(){return new It([])}}const Lk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class En extends ps{construct(e,t,i){return new En(e,t,i)}static isValidIdentifier(e){return Lk.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),En.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===tC}static keyField(){return new En([tC])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new ye(ie.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const d=e[r];if(d==="\\"){if(r+1===e.length)throw new ye(ie.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[r+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new ye(ie.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=f,r+=2}else d==="`"?(l=!l,r++):d!=="."||l?(i+=d,r++):(a(),r++)}if(a(),l)throw new ye(ie.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new En(t)}static emptyPath(){return new En([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.path=e}static fromPath(e){return new Ae(It.fromString(e))}static fromName(e){return new Ae(It.fromString(e).popFirst(5))}static empty(){return new Ae(It.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&It.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return It.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ae(new It(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(n,e,t){if(!t)throw new ye(ie.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Vk(n,e,t,i){if(e===!0&&i===!0)throw new ye(ie.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nC(n){if(!Ae.isDocumentKey(n))throw new ye(ie.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function iC(n){if(Ae.isDocumentKey(n))throw new ye(ie.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function fx(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Wh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ne(12329,{type:typeof n})}function qi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ye(ie.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Wh(n);throw new ye(ie.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tn(n,e){const t={typeString:n};return e&&(t.value=e),t}function zc(n,e){if(!fx(n))throw new ye(ie.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ye(ie.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sC=-62135596800,rC=1e6;class Mt{static now(){return Mt.fromMillis(Date.now())}static fromDate(e){return Mt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*rC);return new Mt(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ye(ie.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<sC)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ye(ie.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/rC}_compareTo(e){return this.seconds===e.seconds?Qe(this.nanoseconds,e.nanoseconds):Qe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Mt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(zc(e,Mt._jsonSchema))return new Mt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-sC;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Mt._jsonSchemaVersion="firestore/timestamp/1.0",Mt._jsonSchema={type:tn("string",Mt._jsonSchemaVersion),seconds:tn("number"),nanoseconds:tn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{static fromTimestamp(e){return new Le(e)}static min(){return new Le(new Mt(0,0))}static max(){return new Le(new Mt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=-1;function Uk(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Le.fromTimestamp(i===1e9?new Mt(t+1,0):new Mt(t,i));return new Xr(r,Ae.empty(),e)}function Ok(n){return new Xr(n.readTime,n.key,Ic)}class Xr{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Xr(Le.min(),Ae.empty(),Ic)}static max(){return new Xr(Le.max(),Ae.empty(),Ic)}}function Fk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ae.comparator(n.documentKey,e.documentKey),t!==0?t:Qe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Bk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(n){if(n.code!==ie.FAILED_PRECONDITION||n.message!==qk)throw n;ve("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):oe.reject(t)}static resolve(e){return new oe(((t,i)=>{t(e)}))}static reject(e){return new oe(((t,i)=>{i(e)}))}static waitFor(e){return new oe(((t,i)=>{let r=0,a=0,l=!1;e.forEach((d=>{++r,d.next((()=>{++a,l&&a===r&&t()}),(f=>i(f)))})),l=!0,a===r&&t()}))}static or(e){let t=oe.resolve(!1);for(const i of e)t=t.next((r=>r?oe.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new oe(((i,r)=>{const a=e.length,l=new Array(a);let d=0;for(let f=0;f<a;f++){const h=f;t(e[h]).next((y=>{l[h]=y,++d,d===a&&i(l)}),(y=>r(y)))}}))}static doWhile(e,t){return new oe(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}function Gk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Gl(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Qh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sy=-1;function Xh(n){return n==null}function ch(n){return n===0&&1/n==-1/0}function Hk(n){return typeof n=="number"&&Number.isInteger(n)&&!ch(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hx="";function zk(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=oC(e)),e=Yk(n.get(t),e);return oC(e)}function Yk(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case hx:t+="";break;default:t+=a}}return t}function oC(n){return n+hx+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function co(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function px(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nn=class E_{constructor(e,t){this.comparator=e,this.root=t||jr.EMPTY}insert(e,t){return new E_(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,jr.BLACK,null,null))}remove(e){return new E_(this.comparator,this.root.remove(e,this.comparator).copy(null,null,jr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Of(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Of(this.root,e,this.comparator,!1)}getReverseIterator(){return new Of(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Of(this.root,e,this.comparator,!0)}},Of=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},jr=class Hs{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??Hs.RED,this.left=r??Hs.EMPTY,this.right=a??Hs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new Hs(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Hs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return Hs.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Hs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Hs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ne(27949);return e+(this.isRed()?0:1)}};jr.EMPTY=null,jr.RED=!0,jr.BLACK=!1;jr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ne(57766)}get value(){throw Ne(16141)}get color(){throw Ne(16727)}get left(){throw Ne(29726)}get right(){throw Ne(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new jr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.comparator=e,this.data=new nn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new lC(this.data.getIterator())}getIteratorFrom(e){return new lC(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new an(this.comparator);return t.data=e,t}}class lC{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.fields=e,e.sort(En.comparator)}static empty(){return new ii([])}unionWith(e){let t=new an(En.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ii(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Il(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new mx("Invalid base64 string: "+a):a}})(e);return new Sn(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a})(e);return new Sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Qe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Sn.EMPTY_BYTE_STRING=new Sn("");const Kk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zr(n){if(ut(!!n,39018),typeof n=="string"){let e=0;const t=Kk.exec(n);if(ut(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:zt(n.seconds),nanos:zt(n.nanos)}}function zt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function eo(n){return typeof n=="string"?Sn.fromBase64String(n):Sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gx="server_timestamp",_x="__type__",yx="__previous_value__",vx="__local_write_time__";function Cy(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[_x])==null?void 0:i.stringValue)===gx}function Zh(n){const e=n.mapValue.fields[yx];return Cy(e)?Zh(e):e}function xc(n){const e=Zr(n.mapValue.fields[vx].timestampValue);return new Mt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t,i,r,a,l,d,f,h,y){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=f,this.useFetchStreams=h,this.isUsingEmulator=y}}const dh="(default)";class bc{constructor(e,t){this.projectId=e,this.database=t||dh}static empty(){return new bc("","")}get isDefaultDatabase(){return this.database===dh}isEqual(e){return e instanceof bc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tx="__type__",jk="__max__",Ff={mapValue:{}},Ex="__vector__",fh="value";function to(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Cy(n)?4:Wk(n)?9007199254740991:Jk(n)?10:11:Ne(28295,{value:n})}function Ss(n,e){if(n===e)return!0;const t=to(n);if(t!==to(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xc(n).isEqual(xc(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=Zr(r.timestampValue),d=Zr(a.timestampValue);return l.seconds===d.seconds&&l.nanos===d.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return eo(r.bytesValue).isEqual(eo(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return zt(r.geoPointValue.latitude)===zt(a.geoPointValue.latitude)&&zt(r.geoPointValue.longitude)===zt(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return zt(r.integerValue)===zt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=zt(r.doubleValue),d=zt(a.doubleValue);return l===d?ch(l)===ch(d):isNaN(l)&&isNaN(d)}return!1})(n,e);case 9:return Il(n.arrayValue.values||[],e.arrayValue.values||[],Ss);case 10:case 11:return(function(r,a){const l=r.mapValue.fields||{},d=a.mapValue.fields||{};if(aC(l)!==aC(d))return!1;for(const f in l)if(l.hasOwnProperty(f)&&(d[f]===void 0||!Ss(l[f],d[f])))return!1;return!0})(n,e);default:return Ne(52216,{left:n})}}function Rc(n,e){return(n.values||[]).find((t=>Ss(t,e)))!==void 0}function xl(n,e){if(n===e)return 0;const t=to(n),i=to(e);if(t!==i)return Qe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Qe(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const d=zt(a.integerValue||a.doubleValue),f=zt(l.integerValue||l.doubleValue);return d<f?-1:d>f?1:d===f?0:isNaN(d)?isNaN(f)?0:-1:1})(n,e);case 3:return uC(n.timestampValue,e.timestampValue);case 4:return uC(xc(n),xc(e));case 5:return T_(n.stringValue,e.stringValue);case 6:return(function(a,l){const d=eo(a),f=eo(l);return d.compareTo(f)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const d=a.split("/"),f=l.split("/");for(let h=0;h<d.length&&h<f.length;h++){const y=Qe(d[h],f[h]);if(y!==0)return y}return Qe(d.length,f.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const d=Qe(zt(a.latitude),zt(l.latitude));return d!==0?d:Qe(zt(a.longitude),zt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return cC(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var E,I,N,U;const d=a.fields||{},f=l.fields||{},h=(E=d[fh])==null?void 0:E.arrayValue,y=(I=f[fh])==null?void 0:I.arrayValue,T=Qe(((N=h==null?void 0:h.values)==null?void 0:N.length)||0,((U=y==null?void 0:y.values)==null?void 0:U.length)||0);return T!==0?T:cC(h,y)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===Ff.mapValue&&l===Ff.mapValue)return 0;if(a===Ff.mapValue)return 1;if(l===Ff.mapValue)return-1;const d=a.fields||{},f=Object.keys(d),h=l.fields||{},y=Object.keys(h);f.sort(),y.sort();for(let T=0;T<f.length&&T<y.length;++T){const E=T_(f[T],y[T]);if(E!==0)return E;const I=xl(d[f[T]],h[y[T]]);if(I!==0)return I}return Qe(f.length,y.length)})(n.mapValue,e.mapValue);default:throw Ne(23264,{he:t})}}function uC(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Qe(n,e);const t=Zr(n),i=Zr(e),r=Qe(t.seconds,i.seconds);return r!==0?r:Qe(t.nanos,i.nanos)}function cC(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=xl(t[r],i[r]);if(a)return a}return Qe(t.length,i.length)}function bl(n){return S_(n)}function S_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=Zr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return eo(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ae.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=S_(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const l of i)a?a=!1:r+=",",r+=`${l}:${S_(t.fields[l])}`;return r+"}"})(n.mapValue):Ne(61005,{value:n})}function $f(n){switch(to(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Zh(n);return e?16+$f(e):16;case 5:return 2*n.stringValue.length;case 6:return eo(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+$f(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return co(i.fields,((a,l)=>{r+=a.length+$f(l)})),r})(n.mapValue);default:throw Ne(13486,{value:n})}}function dC(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function C_(n){return!!n&&"integerValue"in n}function wy(n){return!!n&&"arrayValue"in n}function fC(n){return!!n&&"nullValue"in n}function hC(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jf(n){return!!n&&"mapValue"in n}function Jk(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Tx])==null?void 0:i.stringValue)===Ex}function fc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return co(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=fc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fc(n.arrayValue.values[t]);return e}return{...n}}function Wk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===jk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn{constructor(e){this.value=e}static empty(){return new zn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!jf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fc(t)}setAll(e){let t=En.emptyPath(),i={},r=[];e.forEach(((l,d)=>{if(!t.isImmediateParentOf(d)){const f=this.getFieldsMap(t);this.applyChanges(f,i,r),i={},r=[],t=d.popLast()}l?i[d.lastSegment()]=fc(l):r.push(d.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());jf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ss(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];jf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){co(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new zn(fc(this.value))}}function Sx(n){const e=[];return co(n.fields,((t,i)=>{const r=new En([t]);if(jf(i)){const a=Sx(i.mapValue).fields;if(a.length===0)e.push(r);else for(const l of a)e.push(r.child(l))}else e.push(r)})),new ii(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(e,t,i,r,a,l,d){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new xn(e,0,Le.min(),Le.min(),Le.min(),zn.empty(),0)}static newFoundDocument(e,t,i,r){return new xn(e,1,t,Le.min(),i,r,0)}static newNoDocument(e,t){return new xn(e,2,t,Le.min(),Le.min(),zn.empty(),0)}static newUnknownDocument(e,t){return new xn(e,3,t,Le.min(),Le.min(),zn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Le.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(e,t){this.position=e,this.inclusive=t}}function pC(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],l=n.position[r];if(a.field.isKeyField()?i=Ae.comparator(Ae.fromName(l.referenceValue),t.key):i=xl(l,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function mC(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ss(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Qk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cx{}class en extends Cx{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Zk(e,t,i):t==="array-contains"?new nP(e,i):t==="in"?new iP(e,i):t==="not-in"?new sP(e,i):t==="array-contains-any"?new rP(e,i):new en(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new eP(e,i):new tP(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(xl(t,this.value)):t!==null&&to(this.value)===to(t)&&this.matchesComparison(xl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zi extends Cx{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new zi(e,t)}matches(e){return wx(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wx(n){return n.op==="and"}function Ax(n){return Xk(n)&&wx(n)}function Xk(n){for(const e of n.filters)if(e instanceof zi)return!1;return!0}function w_(n){if(n instanceof en)return n.field.canonicalString()+n.op.toString()+bl(n.value);if(Ax(n))return n.filters.map((e=>w_(e))).join(",");{const e=n.filters.map((t=>w_(t))).join(",");return`${n.op}(${e})`}}function Ix(n,e){return n instanceof en?(function(i,r){return r instanceof en&&i.op===r.op&&i.field.isEqual(r.field)&&Ss(i.value,r.value)})(n,e):n instanceof zi?(function(i,r){return r instanceof zi&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,l,d)=>a&&Ix(l,r.filters[d])),!0):!1})(n,e):void Ne(19439)}function xx(n){return n instanceof en?(function(t){return`${t.field.canonicalString()} ${t.op} ${bl(t.value)}`})(n):n instanceof zi?(function(t){return t.op.toString()+" {"+t.getFilters().map(xx).join(" ,")+"}"})(n):"Filter"}class Zk extends en{constructor(e,t,i){super(e,t,i),this.key=Ae.fromName(i.referenceValue)}matches(e){const t=Ae.comparator(e.key,this.key);return this.matchesComparison(t)}}class eP extends en{constructor(e,t){super(e,"in",t),this.keys=bx("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class tP extends en{constructor(e,t){super(e,"not-in",t),this.keys=bx("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function bx(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>Ae.fromName(i.referenceValue)))}class nP extends en{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wy(t)&&Rc(t.arrayValue,this.value)}}class iP extends en{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rc(this.value.arrayValue,t)}}class sP extends en{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Rc(this.value.arrayValue,t)}}class rP extends en{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wy(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Rc(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oP{constructor(e,t=null,i=[],r=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=d,this.Te=null}}function gC(n,e=null,t=[],i=[],r=null,a=null,l=null){return new oP(n,e,t,i,r,a,l)}function Ay(n){const e=Ue(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>w_(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Xh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>bl(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>bl(i))).join(",")),e.Te=t}return e.Te}function Iy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Qk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Ix(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!mC(n.startAt,e.startAt)&&mC(n.endAt,e.endAt)}function A_(n){return Ae.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t=null,i=[],r=[],a=null,l="F",d=null,f=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=f,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function aP(n,e,t,i,r,a,l,d){return new Hl(n,e,t,i,r,a,l,d)}function ep(n){return new Hl(n)}function _C(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Rx(n){return n.collectionGroup!==null}function hc(n){const e=Ue(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let d=new an(En.comparator);return l.filters.forEach((f=>{f.getFlattenedFilters().forEach((h=>{h.isInequality()&&(d=d.add(h.field))}))})),d})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new Nc(a,i))})),t.has(En.keyField().canonicalString())||e.Ie.push(new Nc(En.keyField(),i))}return e.Ie}function ms(n){const e=Ue(n);return e.Ee||(e.Ee=lP(e,hc(n))),e.Ee}function lP(n,e){if(n.limitType==="F")return gC(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new Nc(r.field,a)}));const t=n.endAt?new hh(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new hh(n.startAt.position,n.startAt.inclusive):null;return gC(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function I_(n,e){const t=n.filters.concat([e]);return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function x_(n,e,t){return new Hl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function tp(n,e){return Iy(ms(n),ms(e))&&n.limitType===e.limitType}function Nx(n){return`${Ay(ms(n))}|lt:${n.limitType}`}function al(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>xx(r))).join(", ")}]`),Xh(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>bl(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>bl(r))).join(",")),`Target(${i})`})(ms(n))}; limitType=${n.limitType})`}function np(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):Ae.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of hc(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(l,d,f){const h=pC(l,d,f);return l.inclusive?h<=0:h<0})(i.startAt,hc(i),r)||i.endAt&&!(function(l,d,f){const h=pC(l,d,f);return l.inclusive?h>=0:h>0})(i.endAt,hc(i),r))})(n,e)}function uP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Mx(n){return(e,t)=>{let i=!1;for(const r of hc(n)){const a=cP(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function cP(n,e,t){const i=n.field.isKeyField()?Ae.comparator(e.key,t.key):(function(a,l,d){const f=l.data.field(a),h=d.data.field(a);return f!==null&&h!==null?xl(f,h):Ne(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ne(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){co(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return px(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dP=new nn(Ae.comparator);function Ws(){return dP}const Dx=new nn(Ae.comparator);function lc(...n){let e=Dx;for(const t of n)e=e.insert(t.key,t);return e}function kx(n){let e=Dx;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ko(){return pc()}function Px(){return pc()}function pc(){return new ua((n=>n.toString()),((n,e)=>n.isEqual(e)))}const fP=new nn(Ae.comparator),hP=new an(Ae.comparator);function Xe(...n){let e=hP;for(const t of n)e=e.add(t);return e}const pP=new an(Qe);function mP(){return pP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xy(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ch(e)?"-0":e}}function Lx(n){return{integerValue:""+n}}function gP(n,e){return Hk(e)?Lx(e):xy(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(){this._=void 0}}function _P(n,e,t){return n instanceof Mc?(function(r,a){const l={fields:{[_x]:{stringValue:gx},[vx]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&Cy(a)&&(a=Zh(a)),a&&(l.fields[yx]=a),{mapValue:l}})(t,e):n instanceof Rl?Ux(n,e):n instanceof Dc?Ox(n,e):(function(r,a){const l=Vx(r,a),d=yC(l)+yC(r.Ae);return C_(l)&&C_(r.Ae)?Lx(d):xy(r.serializer,d)})(n,e)}function yP(n,e,t){return n instanceof Rl?Ux(n,e):n instanceof Dc?Ox(n,e):t}function Vx(n,e){return n instanceof ph?(function(i){return C_(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class Mc extends ip{}class Rl extends ip{constructor(e){super(),this.elements=e}}function Ux(n,e){const t=Fx(e);for(const i of n.elements)t.some((r=>Ss(r,i)))||t.push(i);return{arrayValue:{values:t}}}class Dc extends ip{constructor(e){super(),this.elements=e}}function Ox(n,e){let t=Fx(e);for(const i of n.elements)t=t.filter((r=>!Ss(r,i)));return{arrayValue:{values:t}}}class ph extends ip{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function yC(n){return zt(n.integerValue||n.doubleValue)}function Fx(n){return wy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qx{constructor(e,t){this.field=e,this.transform=t}}function vP(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof Rl&&r instanceof Rl||i instanceof Dc&&r instanceof Dc?Il(i.elements,r.elements,Ss):i instanceof ph&&r instanceof ph?Ss(i.Ae,r.Ae):i instanceof Mc&&r instanceof Mc})(n.transform,e.transform)}class TP{constructor(e,t){this.version=e,this.transformResults=t}}class Bi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Bi}static exists(e){return new Bi(void 0,e)}static updateTime(e){return new Bi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class sp{}function Bx(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Hx(n.key,Bi.none()):new Yc(n.key,n.data,Bi.none());{const t=n.data,i=zn.empty();let r=new an(En.comparator);for(let a of e.fields)if(!r.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new fo(n.key,i,new ii(r.toArray()),Bi.none())}}function EP(n,e,t){n instanceof Yc?(function(r,a,l){const d=r.value.clone(),f=TC(r.fieldTransforms,a,l.transformResults);d.setAll(f),a.convertToFoundDocument(l.version,d).setHasCommittedMutations()})(n,e,t):n instanceof fo?(function(r,a,l){if(!Jf(r.precondition,a))return void a.convertToUnknownDocument(l.version);const d=TC(r.fieldTransforms,a,l.transformResults),f=a.data;f.setAll(Gx(r)),f.setAll(d),a.convertToFoundDocument(l.version,f).setHasCommittedMutations()})(n,e,t):(function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function mc(n,e,t,i){return n instanceof Yc?(function(a,l,d,f){if(!Jf(a.precondition,l))return d;const h=a.value.clone(),y=EC(a.fieldTransforms,f,l);return h.setAll(y),l.convertToFoundDocument(l.version,h).setHasLocalMutations(),null})(n,e,t,i):n instanceof fo?(function(a,l,d,f){if(!Jf(a.precondition,l))return d;const h=EC(a.fieldTransforms,f,l),y=l.data;return y.setAll(Gx(a)),y.setAll(h),l.convertToFoundDocument(l.version,y).setHasLocalMutations(),d===null?null:d.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,l,d){return Jf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):d})(n,e,t)}function SP(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=Vx(i.transform,r||null);a!=null&&(t===null&&(t=zn.empty()),t.set(i.field,a))}return t||null}function vC(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Il(i,r,((a,l)=>vP(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Yc extends sp{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fo extends sp{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Gx(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function TC(n,e,t){const i=new Map;ut(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let r=0;r<t.length;r++){const a=n[r],l=a.transform,d=e.data.field(a.field);i.set(a.field,yP(l,d,t[r]))}return i}function EC(n,e,t){const i=new Map;for(const r of n){const a=r.transform,l=t.data.field(r.field);i.set(r.field,_P(a,l,e))}return i}class Hx extends sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CP extends sp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&EP(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=mc(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=mc(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=Px();return this.mutations.forEach((r=>{const a=e.get(r.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(r.key)?null:d;const f=Bx(l,d);f!==null&&i.set(r.key,f),l.isValidDocument()||l.convertToNoDocument(Le.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),Xe())}isEqual(e){return this.batchId===e.batchId&&Il(this.mutations,e.mutations,((t,i)=>vC(t,i)))&&Il(this.baseMutations,e.baseMutations,((t,i)=>vC(t,i)))}}class by{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){ut(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return fP})();const a=e.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,i[l].version);return new by(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Zt,tt;function xP(n){switch(n){case ie.OK:return Ne(64938);case ie.CANCELLED:case ie.UNKNOWN:case ie.DEADLINE_EXCEEDED:case ie.RESOURCE_EXHAUSTED:case ie.INTERNAL:case ie.UNAVAILABLE:case ie.UNAUTHENTICATED:return!1;case ie.INVALID_ARGUMENT:case ie.NOT_FOUND:case ie.ALREADY_EXISTS:case ie.PERMISSION_DENIED:case ie.FAILED_PRECONDITION:case ie.ABORTED:case ie.OUT_OF_RANGE:case ie.UNIMPLEMENTED:case ie.DATA_LOSS:return!0;default:return Ne(15467,{code:n})}}function zx(n){if(n===void 0)return Js("GRPC error has no .code"),ie.UNKNOWN;switch(n){case Zt.OK:return ie.OK;case Zt.CANCELLED:return ie.CANCELLED;case Zt.UNKNOWN:return ie.UNKNOWN;case Zt.DEADLINE_EXCEEDED:return ie.DEADLINE_EXCEEDED;case Zt.RESOURCE_EXHAUSTED:return ie.RESOURCE_EXHAUSTED;case Zt.INTERNAL:return ie.INTERNAL;case Zt.UNAVAILABLE:return ie.UNAVAILABLE;case Zt.UNAUTHENTICATED:return ie.UNAUTHENTICATED;case Zt.INVALID_ARGUMENT:return ie.INVALID_ARGUMENT;case Zt.NOT_FOUND:return ie.NOT_FOUND;case Zt.ALREADY_EXISTS:return ie.ALREADY_EXISTS;case Zt.PERMISSION_DENIED:return ie.PERMISSION_DENIED;case Zt.FAILED_PRECONDITION:return ie.FAILED_PRECONDITION;case Zt.ABORTED:return ie.ABORTED;case Zt.OUT_OF_RANGE:return ie.OUT_OF_RANGE;case Zt.UNIMPLEMENTED:return ie.UNIMPLEMENTED;case Zt.DATA_LOSS:return ie.DATA_LOSS;default:return Ne(39323,{code:n})}}(tt=Zt||(Zt={}))[tt.OK=0]="OK",tt[tt.CANCELLED=1]="CANCELLED",tt[tt.UNKNOWN=2]="UNKNOWN",tt[tt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tt[tt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tt[tt.NOT_FOUND=5]="NOT_FOUND",tt[tt.ALREADY_EXISTS=6]="ALREADY_EXISTS",tt[tt.PERMISSION_DENIED=7]="PERMISSION_DENIED",tt[tt.UNAUTHENTICATED=16]="UNAUTHENTICATED",tt[tt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tt[tt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tt[tt.ABORTED=10]="ABORTED",tt[tt.OUT_OF_RANGE=11]="OUT_OF_RANGE",tt[tt.UNIMPLEMENTED=12]="UNIMPLEMENTED",tt[tt.INTERNAL=13]="INTERNAL",tt[tt.UNAVAILABLE=14]="UNAVAILABLE",tt[tt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bP(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RP=new Kr([4294967295,4294967295],0);function SC(n){const e=bP().encode(n),t=new ix;return t.update(e),new Uint8Array(t.digest())}function CC(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new Kr([t,i],0),new Kr([r,a],0)]}class Ry{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new uc(`Invalid padding: ${t}`);if(i<0)throw new uc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new uc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new uc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Kr.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply(Kr.fromNumber(i)));return r.compare(RP)===1&&(r=new Kr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=SC(e),[i,r]=CC(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);if(!this.we(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Ry(a,r,t);return i.forEach((d=>l.insert(d))),l}insert(e){if(this.ge===0)return;const t=SC(e),[i,r]=CC(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);this.Se(l)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class uc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Kc.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new rp(Le.min(),r,new nn(Qe),Ws(),Xe())}}class Kc{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Kc(i,t,Xe(),Xe(),Xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wf{constructor(e,t,i,r){this.be=e,this.removedTargetIds=t,this.key=i,this.De=r}}class Yx{constructor(e,t){this.targetId=e,this.Ce=t}}class Kx{constructor(e,t,i=Sn.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class wC{constructor(){this.ve=0,this.Fe=AC(),this.Me=Sn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Xe(),t=Xe(),i=Xe();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ne(38017,{changeType:a})}})),new Kc(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=AC()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,ut(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class NP{constructor(e){this.Ge=e,this.ze=new Map,this.je=Ws(),this.Je=qf(),this.He=qf(),this.Ye=new nn(Qe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:Ne(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(A_(a))if(i===0){const l=new Ae(a.path);this.et(t,l,xn.newNoDocument(l,Le.min()))}else ut(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const d=this.ut(e),f=d?this.ct(d,e,l):1;if(f!==0){this.it(t);const h=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,h)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let l,d;try{l=eo(i).toUint8Array()}catch(f){if(f instanceof mx)return Al("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{d=new Ry(l,r,a)}catch(f){return Al(f instanceof uc?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return d.ge===0?null:d}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const l=this.Ge.ht(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(d)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const d=this.ot(l);if(d){if(a.current&&A_(d.target)){const f=new Ae(d.target.path);this.It(f).has(l)||this.Et(l,f)||this.et(l,f,xn.newNoDocument(f,e))}a.Be&&(t.set(l,a.ke()),a.qe())}}));let i=Xe();this.He.forEach(((a,l)=>{let d=!0;l.forEachWhile((f=>{const h=this.ot(f);return!h||h.purpose==="TargetPurposeLimboResolution"||(d=!1,!1)})),d&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const r=new rp(e,t,this.Ye,this.je,i);return this.je=Ws(),this.Je=qf(),this.He=qf(),this.Ye=new nn(Qe),r}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new wC,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new an(Qe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new an(Qe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ve("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new wC),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function qf(){return new nn(Ae.comparator)}function AC(){return new nn(Ae.comparator)}const MP={asc:"ASCENDING",desc:"DESCENDING"},DP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kP={and:"AND",or:"OR"};class PP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function b_(n,e){return n.useProto3Json||Xh(e)?e:{value:e}}function mh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $x(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LP(n,e){return mh(n,e.toTimestamp())}function gs(n){return ut(!!n,49232),Le.fromTimestamp((function(t){const i=Zr(t);return new Mt(i.seconds,i.nanos)})(n))}function Ny(n,e){return R_(n,e).canonicalString()}function R_(n,e){const t=(function(r){return new It(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function jx(n){const e=It.fromString(n);return ut(Zx(e),10190,{key:e.toString()}),e}function N_(n,e){return Ny(n.databaseId,e.path)}function jg(n,e){const t=jx(e);if(t.get(1)!==n.databaseId.projectId)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ye(ie.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ae(Wx(t))}function Jx(n,e){return Ny(n.databaseId,e)}function VP(n){const e=jx(n);return e.length===4?It.emptyPath():Wx(e)}function M_(n){return new It(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Wx(n){return ut(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function IC(n,e,t){return{name:N_(n,e),fields:t.value.mapValue.fields}}function UP(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:Ne(39313,{state:h})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(h,y){return h.useProto3Json?(ut(y===void 0||typeof y=="string",58123),Sn.fromBase64String(y||"")):(ut(y===void 0||y instanceof Buffer||y instanceof Uint8Array,16193),Sn.fromUint8Array(y||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&(function(h){const y=h.code===void 0?ie.UNKNOWN:zx(h.code);return new ye(y,h.message||"")})(l);t=new Kx(i,r,a,d||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=jg(n,i.document.name),a=gs(i.document.updateTime),l=i.document.createTime?gs(i.document.createTime):Le.min(),d=new zn({mapValue:{fields:i.document.fields}}),f=xn.newFoundDocument(r,a,l,d),h=i.targetIds||[],y=i.removedTargetIds||[];t=new Wf(h,y,f.key,f)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=jg(n,i.document),a=i.readTime?gs(i.readTime):Le.min(),l=xn.newNoDocument(r,a),d=i.removedTargetIds||[];t=new Wf([],d,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=jg(n,i.document),a=i.removedTargetIds||[];t=new Wf([],a,r,null)}else{if(!("filter"in e))return Ne(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,l=new IP(r,a),d=i.targetId;t=new Yx(d,l)}}return t}function OP(n,e){let t;if(e instanceof Yc)t={update:IC(n,e.key,e.value)};else if(e instanceof Hx)t={delete:N_(n,e.key)};else if(e instanceof fo)t={update:IC(n,e.key,e.data),updateMask:$P(e.fieldMask)};else{if(!(e instanceof CP))return Ne(16599,{Vt:e.type});t={verify:N_(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const d=l.transform;if(d instanceof Mc)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof Rl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof Dc)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof ph)return{fieldPath:l.field.canonicalString(),increment:d.Ae};throw Ne(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:LP(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:Ne(27497)})(n,e.precondition)),t}function FP(n,e){return n&&n.length>0?(ut(e!==void 0,14353),n.map((t=>(function(r,a){let l=r.updateTime?gs(r.updateTime):gs(a);return l.isEqual(Le.min())&&(l=gs(a)),new TP(l,r.transformResults||[])})(t,e)))):[]}function qP(n,e){return{documents:[Jx(n,e.path)]}}function BP(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=Jx(n,r);const a=(function(h){if(h.length!==0)return Xx(zi.create(h,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(h){if(h.length!==0)return h.map((y=>(function(E){return{field:ll(E.field),direction:zP(E.dir)}})(y)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const d=b_(n,e.limit);return d!==null&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt=(function(h){return{before:h.inclusive,values:h.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(h){return{before:!h.inclusive,values:h.position}})(e.endAt)),{ft:t,parent:r}}function GP(n){let e=VP(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){ut(i===1,65062);const y=t.from[0];y.allDescendants?r=y.collectionId:e=e.child(y.collectionId)}let a=[];t.where&&(a=(function(T){const E=Qx(T);return E instanceof zi&&Ax(E)?E.getFilters():[E]})(t.where));let l=[];t.orderBy&&(l=(function(T){return T.map((E=>(function(N){return new Nc(ul(N.field),(function(O){switch(O){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(N.direction))})(E)))})(t.orderBy));let d=null;t.limit&&(d=(function(T){let E;return E=typeof T=="object"?T.value:T,Xh(E)?null:E})(t.limit));let f=null;t.startAt&&(f=(function(T){const E=!!T.before,I=T.values||[];return new hh(I,E)})(t.startAt));let h=null;return t.endAt&&(h=(function(T){const E=!T.before,I=T.values||[];return new hh(I,E)})(t.endAt)),aP(e,r,l,a,d,"F",f,h)}function HP(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ne(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function Qx(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ul(t.unaryFilter.field);return en.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ul(t.unaryFilter.field);return en.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=ul(t.unaryFilter.field);return en.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=ul(t.unaryFilter.field);return en.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ne(61313);default:return Ne(60726)}})(n):n.fieldFilter!==void 0?(function(t){return en.create(ul(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ne(58110);default:return Ne(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return zi.create(t.compositeFilter.filters.map((i=>Qx(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ne(1026)}})(t.compositeFilter.op))})(n):Ne(30097,{filter:n})}function zP(n){return MP[n]}function YP(n){return DP[n]}function KP(n){return kP[n]}function ll(n){return{fieldPath:n.canonicalString()}}function ul(n){return En.fromServerFormat(n.fieldPath)}function Xx(n){return n instanceof en?(function(t){if(t.op==="=="){if(hC(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NAN"}};if(fC(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(hC(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NOT_NAN"}};if(fC(t.value))return{unaryFilter:{field:ll(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ll(t.field),op:YP(t.op),value:t.value}}})(n):n instanceof zi?(function(t){const i=t.getFilters().map((r=>Xx(r)));return i.length===1?i[0]:{compositeFilter:{op:KP(t.op),filters:i}}})(n):Ne(54877,{filter:n})}function $P(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Zx(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(e,t,i,r,a=Le.min(),l=Le.min(),d=Sn.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=f}withSequenceNumber(e){return new Br(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Br(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e){this.yt=e}}function JP(n){const e=GP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?x_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.Cn=new QP}addToCollectionParentIndex(e,t){return this.Cn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}deleteAllFieldIndexes(e){return oe.resolve()}createTargetIndexes(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(Xr.min())}updateCollectionGroup(e,t,i){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class QP{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new an(It.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new an(It.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xC={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},eb=41943040;class Hn{static withCacheSize(e){return new Hn(e,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Hn.DEFAULT_COLLECTION_PERCENTILE=10,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Hn.DEFAULT=new Hn(eb,Hn.DEFAULT_COLLECTION_PERCENTILE,Hn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Hn.DISABLED=new Hn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Nl(0)}static cr(){return new Nl(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC="LruGarbageCollector",XP=1048576;function RC([n,e],[t,i]){const r=Qe(n,t);return r===0?Qe(e,i):r}class ZP{constructor(e){this.Ir=e,this.buffer=new an(RC),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();RC(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class eL{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ve(bC,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Gl(t)?ve(bC,"Ignoring IndexedDB error during garbage collection: ",t):await Bl(t)}await this.Vr(3e5)}))}}class tL{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return oe.resolve(Qh.ce);const i=new ZP(t);return this.mr.forEachTarget(e,(r=>i.Ar(r.sequenceNumber))).next((()=>this.mr.pr(e,(r=>i.Ar(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ve("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(xC)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xC):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,r,a,l,d,f,h;const y=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,l=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,d=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,f=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(h=Date.now(),ol()<=Ke.DEBUG&&ve("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-y}ms
	Determined least recently used ${r} in `+(d-l)+`ms
	Removed ${a} targets in `+(f-d)+`ms
	Removed ${T} documents in `+(h-f)+`ms
Total Duration: ${h-y}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T}))))}}function nL(n,e){return new tL(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iL{constructor(){this.changes=new ua((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,xn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?oe.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sL{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rL{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&mc(i.mutation,r,ii.empty(),Mt.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,Xe()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=Xe()){const r=Ko();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let l=lc();return a.forEach(((d,f)=>{l=l.insert(d,f.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=Ko();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,Xe())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((l,d)=>{t.set(l,d)}))}))}computeViews(e,t,i,r){let a=Ws();const l=pc(),d=(function(){return pc()})();return t.forEach(((f,h)=>{const y=i.get(h.key);r.has(h.key)&&(y===void 0||y.mutation instanceof fo)?a=a.insert(h.key,h):y!==void 0?(l.set(h.key,y.mutation.getFieldMask()),mc(y.mutation,h,y.mutation.getFieldMask(),Mt.now())):l.set(h.key,ii.empty())})),this.recalculateAndSaveOverlays(e,a).next((f=>(f.forEach(((h,y)=>l.set(h,y))),t.forEach(((h,y)=>d.set(h,new sL(y,l.get(h)??null)))),d)))}recalculateAndSaveOverlays(e,t){const i=pc();let r=new nn(((l,d)=>l-d)),a=Xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const d of l)d.keys().forEach((f=>{const h=t.get(f);if(h===null)return;let y=i.get(f)||ii.empty();y=d.applyToLocalView(h,y),i.set(f,y);const T=(r.get(d.batchId)||Xe()).add(f);r=r.insert(d.batchId,T)}))})).next((()=>{const l=[],d=r.getReverseIterator();for(;d.hasNext();){const f=d.getNext(),h=f.key,y=f.value,T=Px();y.forEach((E=>{if(!a.has(E)){const I=Bx(t.get(E),i.get(E));I!==null&&T.set(E,I),a=a.add(E)}})),l.push(this.documentOverlayCache.saveOverlays(e,h,T))}return oe.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return(function(l){return Ae.isDocumentKey(l.path)&&l.collectionGroup===null&&l.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Rx(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):oe.resolve(Ko());let d=Ic,f=a;return l.next((h=>oe.forEach(h,((y,T)=>(d<T.largestBatchId&&(d=T.largestBatchId),a.get(y)?oe.resolve():this.remoteDocumentCache.getEntry(e,y).next((E=>{f=f.insert(y,E)}))))).next((()=>this.populateOverlays(e,h,a))).next((()=>this.computeViews(e,f,h,Xe()))).next((y=>({batchId:d,changes:kx(y)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ae(t)).next((i=>{let r=lc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let l=lc();return this.indexManager.getCollectionParents(e,a).next((d=>oe.forEach(d,(f=>{const h=(function(T,E){return new Hl(E,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,f.child(a));return this.getDocumentsMatchingCollectionQuery(e,h,i,r).next((y=>{y.forEach(((T,E)=>{l=l.insert(T,E)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((l=>{a.forEach(((f,h)=>{const y=h.getKey();l.get(y)===null&&(l=l.insert(y,xn.newInvalidDocument(y)))}));let d=lc();return l.forEach(((f,h)=>{const y=a.get(f);y!==void 0&&mc(y.mutation,h,ii.empty(),Mt.now()),np(t,h)&&(d=d.insert(f,h))})),d}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return oe.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:gs(r.createTime)}})(t)),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(r){return{name:r.name,query:JP(r.bundledQuery),readTime:gs(r.readTime)}})(t)),oe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(){this.overlays=new nn(Ae.comparator),this.qr=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ko();return oe.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.St(e,t,a)})),oe.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.qr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.qr.delete(i)),oe.resolve()}getOverlaysForCollection(e,t,i){const r=Ko(),a=t.length+1,l=new Ae(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const f=d.getNext().value,h=f.getKey();if(!t.isPrefixOf(h.path))break;h.path.length===a&&f.largestBatchId>i&&r.set(f.getKey(),f)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new nn(((h,y)=>h-y));const l=this.overlays.getIterator();for(;l.hasNext();){const h=l.getNext().value;if(h.getKey().getCollectionGroup()===t&&h.largestBatchId>i){let y=a.get(h.largestBatchId);y===null&&(y=Ko(),a=a.insert(h.largestBatchId,y)),y.set(h.getKey(),h)}}const d=Ko(),f=a.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((h,y)=>d.set(h,y))),!(d.size()>=r)););return oe.resolve(d)}St(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.qr.get(r.largestBatchId).delete(i.key);this.qr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new AP(t,i));let a=this.qr.get(t);a===void 0&&(a=Xe(),this.qr.set(t,a)),this.qr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lL{constructor(){this.sessionToken=Sn.EMPTY_BYTE_STRING}getSessionToken(e){return oe.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,oe.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class My{constructor(){this.Qr=new an(fn.$r),this.Ur=new an(fn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new fn(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new fn(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new Ae(new It([])),i=new fn(t,e),r=new fn(t,e+1),a=[];return this.Ur.forEachInRange([i,r],(l=>{this.Gr(l),a.push(l.key)})),a}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ae(new It([])),i=new fn(t,e),r=new fn(t,e+1);let a=Xe();return this.Ur.forEachInRange([i,r],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new fn(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class fn{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ae.comparator(e.key,t.key)||Qe(e.Yr,t.Yr)}static Kr(e,t){return Qe(e.Yr,t.Yr)||Ae.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uL{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new an(fn.$r)}checkEmpty(e){return oe.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new wP(a,t,i,r);this.mutationQueue.push(l);for(const d of r)this.Zr=this.Zr.add(new fn(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return oe.resolve(l)}lookupMutationBatch(e,t){return oe.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.ei(i),a=r<0?0:r;return oe.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(this.mutationQueue.length===0?Sy:this.tr-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new fn(t,0),r=new fn(t,Number.POSITIVE_INFINITY),a=[];return this.Zr.forEachInRange([i,r],(l=>{const d=this.Xr(l.Yr);a.push(d)})),oe.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new an(Qe);return t.forEach((r=>{const a=new fn(r,0),l=new fn(r,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([a,l],(d=>{i=i.add(d.Yr)}))})),oe.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;Ae.isDocumentKey(a)||(a=a.child(""));const l=new fn(new Ae(a),0);let d=new an(Qe);return this.Zr.forEachWhile((f=>{const h=f.key.path;return!!i.isPrefixOf(h)&&(h.length===r&&(d=d.add(f.Yr)),!0)}),l),oe.resolve(this.ti(d))}ti(e){const t=[];return e.forEach((i=>{const r=this.Xr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){ut(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return oe.forEach(t.mutations,(r=>{const a=new fn(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new fn(t,0),r=this.Zr.firstAfterOrEqual(i);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cL{constructor(e){this.ri=e,this.docs=(function(){return new nn(Ae.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,l=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return oe.resolve(i?i.document.mutableCopy():xn.newInvalidDocument(t))}getEntries(e,t){let i=Ws();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():xn.newInvalidDocument(r))})),oe.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=Ws();const l=t.path,d=new Ae(l.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(d);for(;f.hasNext();){const{key:h,value:{document:y}}=f.getNext();if(!l.isPrefixOf(h.path))break;h.path.length>l.length+1||Fk(Ok(y),i)<=0||(r.has(y.key)||np(t,y))&&(a=a.insert(y.key,y.mutableCopy()))}return oe.resolve(a)}getAllFromCollectionGroup(e,t,i,r){Ne(9500)}ii(e,t){return oe.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new dL(this)}getSize(e){return oe.resolve(this.size)}}class dL extends iL{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(i)})),oe.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e){this.persistence=e,this.si=new ua((t=>Ay(t)),Iy),this.lastRemoteSnapshotVersion=Le.min(),this.highestTargetId=0,this.oi=0,this._i=new My,this.targetCount=0,this.ai=Nl.ur()}forEachTarget(e,t){return this.si.forEach(((i,r)=>t(r))),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),oe.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Nl(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Pr(t),oe.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.si.forEach(((l,d)=>{d.sequenceNumber<=t&&i.get(d.targetId)===null&&(this.si.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),r++)})),oe.waitFor(a).next((()=>r))}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return oe.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),oe.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((l=>{a.push(r.markPotentiallyOrphaned(e,l))})),oe.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return oe.resolve(i)}containsKey(e,t){return oe.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e,t){this.ui={},this.overlays={},this.ci=new Qh(0),this.li=!1,this.li=!0,this.hi=new lL,this.referenceDelegate=e(this),this.Pi=new fL(this),this.indexManager=new WP,this.remoteDocumentCache=(function(r){return new cL(r)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new jP(t),this.Ii=new oL(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new aL,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new uL(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){ve("MemoryPersistence","Starting transaction:",e);const r=new hL(this.ci.next());return this.referenceDelegate.Ei(),i(r).next((a=>this.referenceDelegate.di(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ai(e,t){return oe.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class hL extends Bk{constructor(e){super(),this.currentSequenceNumber=e}}class Dy{constructor(e){this.persistence=e,this.Ri=new My,this.Vi=null}static mi(e){return new Dy(e)}get fi(){if(this.Vi)return this.Vi;throw Ne(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),oe.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((r=>this.fi.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.fi.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.fi,(i=>{const r=Ae.fromPath(i);return this.gi(e,r).next((a=>{a||t.removeEntry(r,Le.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return oe.or([()=>oe.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class gh{constructor(e,t){this.persistence=e,this.pi=new ua((i=>zk(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=nL(this,t)}static mi(e,t){return new gh(e,t)}Ei(){}di(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return oe.forEach(this.pi,((i,r)=>this.br(e,i,r).next((a=>a?oe.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ii(e,(l=>this.br(e,l,t).next((d=>{d||(i++,a.removeEntry(l,Le.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),oe.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=$f(e.data.value)),t}br(e,t,i){return oe.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.pi.get(t);return oe.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ky{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=r}static As(e,t){let i=Xe(),r=Xe();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new ky(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pL{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mL{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return iD()?8:Gk(Rn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.ys(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ws(e,t,r,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new pL;return this.Ss(e,t,l).next((d=>{if(a.result=d,this.Vs)return this.bs(e,t,l,d.size)}))})).next((()=>a.result))}bs(e,t,i,r){return i.documentReadCount<this.fs?(ol()<=Ke.DEBUG&&ve("QueryEngine","SDK will not create cache indexes for query:",al(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),oe.resolve()):(ol()<=Ke.DEBUG&&ve("QueryEngine","Query:",al(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.gs*r?(ol()<=Ke.DEBUG&&ve("QueryEngine","The SDK decides to create cache indexes for query:",al(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ms(t))):oe.resolve())}ys(e,t){if(_C(t))return oe.resolve(null);let i=ms(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=x_(t,null,"F"),i=ms(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=Xe(...a);return this.ps.getDocuments(e,l).next((d=>this.indexManager.getMinOffset(e,i).next((f=>{const h=this.Ds(t,d);return this.Cs(t,h,l,f.readTime)?this.ys(e,x_(t,null,"F")):this.vs(e,h,t,f)}))))})))))}ws(e,t,i,r){return _C(t)||r.isEqual(Le.min())?oe.resolve(null):this.ps.getDocuments(e,i).next((a=>{const l=this.Ds(t,a);return this.Cs(t,l,i,r)?oe.resolve(null):(ol()<=Ke.DEBUG&&ve("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),al(t)),this.vs(e,l,t,Uk(r,Ic)).next((d=>d)))}))}Ds(e,t){let i=new an(Mx(e));return t.forEach(((r,a)=>{np(e,a)&&(i=i.add(a))})),i}Cs(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}Ss(e,t,i){return ol()<=Ke.DEBUG&&ve("QueryEngine","Using full collection scan to execute query:",al(t)),this.ps.getDocumentsMatchingQuery(e,t,Xr.min(),i)}vs(e,t,i,r){return this.ps.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Py="LocalStore",gL=3e8;class _L{constructor(e,t,i,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new nn(Qe),this.xs=new ua((a=>Ay(a)),Iy),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rL(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function yL(n,e,t,i){return new _L(n,e,t,i)}async function nb(n,e){const t=Ue(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],d=[];let f=Xe();for(const h of r){l.push(h.batchId);for(const y of h.mutations)f=f.add(y.key)}for(const h of a){d.push(h.batchId);for(const y of h.mutations)f=f.add(y.key)}return t.localDocuments.getDocuments(i,f).next((h=>({Ls:h,removedBatchIds:l,addedBatchIds:d})))}))}))}function vL(n,e){const t=Ue(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(d,f,h,y){const T=h.batch,E=T.keys();let I=oe.resolve();return E.forEach((N=>{I=I.next((()=>y.getEntry(f,N))).next((U=>{const O=h.docVersions.get(N);ut(O!==null,48541),U.version.compareTo(O)<0&&(T.applyToRemoteDocument(U,h),U.isValidDocument()&&(U.setReadTime(h.commitVersion),y.addEntry(U)))}))})),I.next((()=>d.mutationQueue.removeMutationBatch(f,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(d){let f=Xe();for(let h=0;h<d.mutationResults.length;++h)d.mutationResults[h].transformResults.length>0&&(f=f.add(d.batch.mutations[h].key));return f})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function ib(n){const e=Ue(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function TL(n,e){const t=Ue(n),i=e.snapshotVersion;let r=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.Ns.newChangeBuffer({trackRemovals:!0});r=t.Ms;const d=[];e.targetChanges.forEach(((y,T)=>{const E=r.get(T);if(!E)return;d.push(t.Pi.removeMatchingKeys(a,y.removedDocuments,T).next((()=>t.Pi.addMatchingKeys(a,y.addedDocuments,T))));let I=E.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?I=I.withResumeToken(Sn.EMPTY_BYTE_STRING,Le.min()).withLastLimboFreeSnapshotVersion(Le.min()):y.resumeToken.approximateByteSize()>0&&(I=I.withResumeToken(y.resumeToken,i)),r=r.insert(T,I),(function(U,O,K){return U.resumeToken.approximateByteSize()===0||O.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=gL?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(E,I,y)&&d.push(t.Pi.updateTargetData(a,I))}));let f=Ws(),h=Xe();if(e.documentUpdates.forEach((y=>{e.resolvedLimboDocuments.has(y)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,y))})),d.push(EL(a,l,e.documentUpdates).next((y=>{f=y.ks,h=y.qs}))),!i.isEqual(Le.min())){const y=t.Pi.getLastRemoteSnapshotVersion(a).next((T=>t.Pi.setTargetsMetadata(a,a.currentSequenceNumber,i)));d.push(y)}return oe.waitFor(d).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,f,h))).next((()=>f))})).then((a=>(t.Ms=r,a)))}function EL(n,e,t){let i=Xe(),r=Xe();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let l=Ws();return t.forEach(((d,f)=>{const h=a.get(d);f.isFoundDocument()!==h.isFoundDocument()&&(r=r.add(d)),f.isNoDocument()&&f.version.isEqual(Le.min())?(e.removeEntry(d,f.readTime),l=l.insert(d,f)):!h.isValidDocument()||f.version.compareTo(h.version)>0||f.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(f),l=l.insert(d,f)):ve(Py,"Ignoring outdated watch update for ",d,". Current version:",h.version," Watch version:",f.version)})),{ks:l,qs:r}}))}function SL(n,e){const t=Ue(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Sy),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function CL(n,e){const t=Ue(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.Pi.getTargetData(i,e).next((a=>a?(r=a,oe.resolve(r)):t.Pi.allocateTargetId(i).next((l=>(r=new Br(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.Ms.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function D_(n,e,t){const i=Ue(n),r=i.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!Gl(l))throw l;ve(Py,`Failed to update sequence numbers for target ${e}: ${l}`)}i.Ms=i.Ms.remove(e),i.xs.delete(r.target)}function NC(n,e,t){const i=Ue(n);let r=Le.min(),a=Xe();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(f,h,y){const T=Ue(f),E=T.xs.get(y);return E!==void 0?oe.resolve(T.Ms.get(E)):T.Pi.getTargetData(h,y)})(i,l,ms(e)).next((d=>{if(d)return r=d.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(l,d.targetId).next((f=>{a=f}))})).next((()=>i.Fs.getDocumentsMatchingQuery(l,e,t?r:Le.min(),t?a:Xe()))).next((d=>(wL(i,uP(e),d),{documents:d,Qs:a})))))}function wL(n,e,t){let i=n.Os.get(e)||Le.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Os.set(e,i)}class MC{constructor(){this.activeTargetIds=mP()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class AL{constructor(){this.Mo=new MC,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new MC,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="ConnectivityMonitor";class kC{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ve(DC,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ve(DC,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bf=null;function k_(){return Bf===null?Bf=(function(){return 268435456+Math.round(2147483648*Math.random())})():Bf++,"0x"+Bf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="RestConnection",xL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class bL{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${r}`,this.Wo=this.databaseId.database===dh?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Go(e,t,i,r,a){const l=k_(),d=this.zo(e,t.toUriEncodedString());ve(Jg,`Sending RPC '${e}' ${l}:`,d,i);const f={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(f,r,a);const{host:h}=new URL(d),y=lo(h);return this.Jo(e,d,f,i,y).then((T=>(ve(Jg,`Received RPC '${e}' ${l}: `,T),T)),(T=>{throw Al(Jg,`RPC '${e}' ${l} failed with error: `,T,"url: ",d,"request:",i),T}))}Ho(e,t,i,r,a,l){return this.Go(e,t,i,r,a)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ql})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}zo(e,t){const i=xL[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RL{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const An="WebChannelConnection";class NL extends bL{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,r,a){const l=k_();return new Promise(((d,f)=>{const h=new sx;h.setWithCredentials(!0),h.listenOnce(rx.COMPLETE,(()=>{try{switch(h.getLastErrorCode()){case Kf.NO_ERROR:const T=h.getResponseJson();ve(An,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(T)),d(T);break;case Kf.TIMEOUT:ve(An,`RPC '${e}' ${l} timed out`),f(new ye(ie.DEADLINE_EXCEEDED,"Request time out"));break;case Kf.HTTP_ERROR:const E=h.getStatus();if(ve(An,`RPC '${e}' ${l} failed with status:`,E,"response text:",h.getResponseText()),E>0){let I=h.getResponseJson();Array.isArray(I)&&(I=I[0]);const N=I==null?void 0:I.error;if(N&&N.status&&N.message){const U=(function(K){const Z=K.toLowerCase().replace(/_/g,"-");return Object.values(ie).indexOf(Z)>=0?Z:ie.UNKNOWN})(N.status);f(new ye(U,N.message))}else f(new ye(ie.UNKNOWN,"Server responded with status "+h.getStatus()))}else f(new ye(ie.UNAVAILABLE,"Connection failed."));break;default:Ne(9055,{l_:e,streamId:l,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{ve(An,`RPC '${e}' ${l} completed.`)}}));const y=JSON.stringify(r);ve(An,`RPC '${e}' ${l} sending request:`,r),h.send(t,"POST",y,i,15)}))}T_(e,t,i){const r=k_(),a=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=lx(),d=ax(),f={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(f.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(f.useFetchStreams=!0),this.jo(f.initMessageHeaders,t,i),f.encodeInitMessageHeaders=!0;const y=a.join("");ve(An,`Creating RPC '${e}' stream ${r}: ${y}`,f);const T=l.createWebChannel(y,f);this.I_(T);let E=!1,I=!1;const N=new RL({Yo:O=>{I?ve(An,`Not sending because RPC '${e}' stream ${r} is closed:`,O):(E||(ve(An,`Opening RPC '${e}' stream ${r} transport.`),T.open(),E=!0),ve(An,`RPC '${e}' stream ${r} sending:`,O),T.send(O))},Zo:()=>T.close()}),U=(O,K,Z)=>{O.listen(K,(j=>{try{Z(j)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return U(T,ac.EventType.OPEN,(()=>{I||(ve(An,`RPC '${e}' stream ${r} transport opened.`),N.o_())})),U(T,ac.EventType.CLOSE,(()=>{I||(I=!0,ve(An,`RPC '${e}' stream ${r} transport closed`),N.a_(),this.E_(T))})),U(T,ac.EventType.ERROR,(O=>{I||(I=!0,Al(An,`RPC '${e}' stream ${r} transport errored. Name:`,O.name,"Message:",O.message),N.a_(new ye(ie.UNAVAILABLE,"The operation could not be completed")))})),U(T,ac.EventType.MESSAGE,(O=>{var K;if(!I){const Z=O.data[0];ut(!!Z,16349);const j=Z,ae=(j==null?void 0:j.error)||((K=j[0])==null?void 0:K.error);if(ae){ve(An,`RPC '${e}' stream ${r} received error:`,ae);const me=ae.status;let ce=(function(D){const L=Zt[D];if(L!==void 0)return zx(L)})(me),R=ae.message;ce===void 0&&(ce=ie.INTERNAL,R="Unknown error status: "+me+" with message "+ae.message),I=!0,N.a_(new ye(ce,R)),T.close()}else ve(An,`RPC '${e}' stream ${r} received:`,Z),N.u_(Z)}})),U(d,ox.STAT_EVENT,(O=>{O.stat===v_.PROXY?ve(An,`RPC '${e}' stream ${r} detected buffering proxy`):O.stat===v_.NOPROXY&&ve(An,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{N.__()}),0),N}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Wg(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(n){return new PP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sb{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=r,this.R_=a,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&ve("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC="PersistentStream";class rb{constructor(e,t,i,r,a,l,d,f){this.Mi=e,this.S_=i,this.b_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new sb(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ie.RESOURCE_EXHAUSTED?(Js(t.toString()),Js("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ie.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new ye(ie.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.J_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ve(PC,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ve(PC,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class ML extends rb{constructor(e,t,i,r,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=UP(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Le.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Le.min():l.readTime?gs(l.readTime):Le.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=M_(this.serializer),t.addTarget=(function(a,l){let d;const f=l.target;if(d=A_(f)?{documents:qP(a,f)}:{query:BP(a,f).ft},d.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){d.resumeToken=$x(a,l.resumeToken);const h=b_(a,l.expectedCount);h!==null&&(d.expectedCount=h)}else if(l.snapshotVersion.compareTo(Le.min())>0){d.readTime=mh(a,l.snapshotVersion.toTimestamp());const h=b_(a,l.expectedCount);h!==null&&(d.expectedCount=h)}return d})(this.serializer,e);const i=HP(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=M_(this.serializer),t.removeTarget=e,this.q_(t)}}class DL extends rb{constructor(e,t,i,r,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return ut(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ut(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ut(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=FP(e.writeResults,e.commitTime),i=gs(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=M_(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>OP(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kL{}class PL extends kL{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Go(e,R_(t,i),r,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ye(ie.UNKNOWN,a.toString())}))}Ho(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,d])=>this.connection.Ho(e,R_(t,i),r,l,d,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ie.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ye(ie.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class LL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Js(t),this.aa=!1):ve("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="RemoteStore";class VL{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=a,this.Aa.Oo((l=>{i.enqueueAndForget((async()=>{ca(this)&&(ve(Zo,"Restarting streams for network reachability change."),await(async function(f){const h=Ue(f);h.Ea.add(4),await $c(h),h.Ra.set("Unknown"),h.Ea.delete(4),await ap(h)})(this))}))})),this.Ra=new LL(i,r)}}async function ap(n){if(ca(n))for(const e of n.da)await e(!0)}async function $c(n){for(const e of n.da)await e(!1)}function ob(n,e){const t=Ue(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Oy(t)?Uy(t):zl(t).O_()&&Vy(t,e))}function Ly(n,e){const t=Ue(n),i=zl(t);t.Ia.delete(e),i.O_()&&ab(t,e),t.Ia.size===0&&(i.O_()?i.L_():ca(t)&&t.Ra.set("Unknown"))}function Vy(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Le.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zl(n).Y_(e)}function ab(n,e){n.Va.Ue(e),zl(n).Z_(e)}function Uy(n){n.Va=new NP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),zl(n).start(),n.Ra.ua()}function Oy(n){return ca(n)&&!zl(n).x_()&&n.Ia.size>0}function ca(n){return Ue(n).Ea.size===0}function lb(n){n.Va=void 0}async function UL(n){n.Ra.set("Online")}async function OL(n){n.Ia.forEach(((e,t)=>{Vy(n,e)}))}async function FL(n,e){lb(n),Oy(n)?(n.Ra.ha(e),Uy(n)):n.Ra.set("Unknown")}async function qL(n,e,t){if(n.Ra.set("Online"),e instanceof Kx&&e.state===2&&e.cause)try{await(async function(r,a){const l=a.cause;for(const d of a.targetIds)r.Ia.has(d)&&(await r.remoteSyncer.rejectListen(d,l),r.Ia.delete(d),r.Va.removeTarget(d))})(n,e)}catch(i){ve(Zo,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await _h(n,i)}else if(e instanceof Wf?n.Va.Ze(e):e instanceof Yx?n.Va.st(e):n.Va.tt(e),!t.isEqual(Le.min()))try{const i=await ib(n.localStore);t.compareTo(i)>=0&&await(function(a,l){const d=a.Va.Tt(l);return d.targetChanges.forEach(((f,h)=>{if(f.resumeToken.approximateByteSize()>0){const y=a.Ia.get(h);y&&a.Ia.set(h,y.withResumeToken(f.resumeToken,l))}})),d.targetMismatches.forEach(((f,h)=>{const y=a.Ia.get(f);if(!y)return;a.Ia.set(f,y.withResumeToken(Sn.EMPTY_BYTE_STRING,y.snapshotVersion)),ab(a,f);const T=new Br(y.target,f,h,y.sequenceNumber);Vy(a,T)})),a.remoteSyncer.applyRemoteEvent(d)})(n,t)}catch(i){ve(Zo,"Failed to raise snapshot:",i),await _h(n,i)}}async function _h(n,e,t){if(!Gl(e))throw e;n.Ea.add(1),await $c(n),n.Ra.set("Offline"),t||(t=()=>ib(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ve(Zo,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await ap(n)}))}function ub(n,e){return e().catch((t=>_h(n,t,e)))}async function lp(n){const e=Ue(n),t=no(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sy;for(;BL(e);)try{const r=await SL(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,GL(e,r)}catch(r){await _h(e,r)}cb(e)&&db(e)}function BL(n){return ca(n)&&n.Ta.length<10}function GL(n,e){n.Ta.push(e);const t=no(n);t.O_()&&t.X_&&t.ea(e.mutations)}function cb(n){return ca(n)&&!no(n).x_()&&n.Ta.length>0}function db(n){no(n).start()}async function HL(n){no(n).ra()}async function zL(n){const e=no(n);for(const t of n.Ta)e.ea(t.mutations)}async function YL(n,e,t){const i=n.Ta.shift(),r=by.from(i,e,t);await ub(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await lp(n)}async function KL(n,e){e&&no(n).X_&&await(async function(i,r){if((function(l){return xP(l)&&l!==ie.ABORTED})(r.code)){const a=i.Ta.shift();no(i).B_(),await ub(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await lp(i)}})(n,e),cb(n)&&db(n)}async function LC(n,e){const t=Ue(n);t.asyncQueue.verifyOperationInProgress(),ve(Zo,"RemoteStore received new credentials");const i=ca(t);t.Ea.add(3),await $c(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await ap(t)}async function $L(n,e){const t=Ue(n);e?(t.Ea.delete(2),await ap(t)):e||(t.Ea.add(2),await $c(t),t.Ra.set("Unknown"))}function zl(n){return n.ma||(n.ma=(function(t,i,r){const a=Ue(t);return a.sa(),new ML(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Xo:UL.bind(null,n),t_:OL.bind(null,n),r_:FL.bind(null,n),H_:qL.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Oy(n)?Uy(n):n.Ra.set("Unknown")):(await n.ma.stop(),lb(n))}))),n.ma}function no(n){return n.fa||(n.fa=(function(t,i,r){const a=Ue(t);return a.sa(),new DL(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:HL.bind(null,n),r_:KL.bind(null,n),ta:zL.bind(null,n),na:YL.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await lp(n)):(await n.fa.stop(),n.Ta.length>0&&(ve(Zo,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fy{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new $r,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const l=Date.now()+i,d=new Fy(e,t,l,r,a);return d.start(i),d}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ye(ie.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function qy(n,e){if(Js("AsyncQueue",`${e}: ${n}`),Gl(n))return new ye(ie.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{static emptySet(e){return new hl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Ae.comparator(t.key,i.key):(t,i)=>Ae.comparator(t.key,i.key),this.keyedMap=lc(),this.sortedSet=new nn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof hl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new hl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(){this.ga=new nn(Ae.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ne(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ml{constructor(e,t,i,r,a,l,d,f,h){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=f,this.hasCachedResults=h}static fromInitialDocuments(e,t,i,r,a){const l=[];return t.forEach((d=>{l.push({type:0,doc:d})})),new Ml(e,t,hl.emptySet(t),l,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jL{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class JL{constructor(){this.queries=UC(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Ue(t),a=r.queries;r.queries=UC(),a.forEach(((l,d)=>{for(const f of d.Sa)f.onError(i)}))})(this,new ye(ie.ABORTED,"Firestore shutting down"))}}function UC(){return new ua((n=>Nx(n)),tp)}async function fb(n,e){const t=Ue(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.ba()&&e.Da()&&(i=2):(a=new jL,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const d=qy(l,`Initialization of query '${al(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.Sa.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&By(t)}async function hb(n,e){const t=Ue(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const l=a.Sa.indexOf(e);l>=0&&(a.Sa.splice(l,1),a.Sa.length===0?r=e.Da()?0:1:!a.ba()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function WL(n,e){const t=Ue(n);let i=!1;for(const r of e){const a=r.query,l=t.queries.get(a);if(l){for(const d of l.Sa)d.Fa(r)&&(i=!0);l.wa=r}}i&&By(t)}function QL(n,e,t){const i=Ue(n),r=i.queries.get(e);if(r)for(const a of r.Sa)a.onError(t);i.queries.delete(e)}function By(n){n.Ca.forEach((e=>{e.next()}))}var P_,OC;(OC=P_||(P_={})).Ma="default",OC.Cache="cache";class pb{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ml(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ml.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==P_.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mb{constructor(e){this.key=e}}class gb{constructor(e){this.key=e}}class XL{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Xe(),this.mutatedKeys=Xe(),this.eu=Mx(e),this.tu=new hl(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new VC,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=r,d=!1;const f=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,h=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((y,T)=>{const E=r.get(y),I=np(this.query,T)?T:null,N=!!E&&this.mutatedKeys.has(E.key),U=!!I&&(I.hasLocalMutations||this.mutatedKeys.has(I.key)&&I.hasCommittedMutations);let O=!1;E&&I?E.data.isEqual(I.data)?N!==U&&(i.track({type:3,doc:I}),O=!0):this.su(E,I)||(i.track({type:2,doc:I}),O=!0,(f&&this.eu(I,f)>0||h&&this.eu(I,h)<0)&&(d=!0)):!E&&I?(i.track({type:0,doc:I}),O=!0):E&&!I&&(i.track({type:1,doc:E}),O=!0,(f||h)&&(d=!0)),O&&(I?(l=l.add(I),a=U?a.add(y):a.delete(y)):(l=l.delete(y),a=a.delete(y)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const y=this.query.limitType==="F"?l.last():l.first();l=l.delete(y.key),a=a.delete(y.key),i.track({type:1,doc:y})}return{tu:l,iu:i,Cs:d,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((y,T)=>(function(I,N){const U=O=>{switch(O){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ne(20277,{Rt:O})}};return U(I)-U(N)})(y.type,T.type)||this.eu(y.doc,T.doc))),this.ou(i),r=r??!1;const d=t&&!r?this._u():[],f=this.Xa.size===0&&this.current&&!r?1:0,h=f!==this.Za;return this.Za=f,l.length!==0||h?{snapshot:new Ml(this.query,e.tu,a,l,e.mutatedKeys,f===0,h,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:d}:{au:d}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new VC,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Xe(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new gb(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new mb(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=Xe();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ml.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Gy="SyncEngine";class ZL{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class eV{constructor(e){this.key=e,this.hu=!1}}class tV{constructor(e,t,i,r,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new ua((d=>Nx(d)),tp),this.Iu=new Map,this.Eu=new Set,this.du=new nn(Ae.comparator),this.Au=new Map,this.Ru=new My,this.Vu={},this.mu=new Map,this.fu=Nl.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function nV(n,e,t=!0){const i=Sb(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await _b(i,e,t,!0),r}async function iV(n,e){const t=Sb(n);await _b(t,e,!0,!1)}async function _b(n,e,t,i){const r=await CL(n.localStore,ms(e)),a=r.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let d;return i&&(d=await sV(n,e,a,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&ob(n.remoteStore,r),d}async function sV(n,e,t,i,r){n.pu=(T,E,I)=>(async function(U,O,K,Z){let j=O.view.ru(K);j.Cs&&(j=await NC(U.localStore,O.query,!1).then((({documents:R})=>O.view.ru(R,j))));const ae=Z&&Z.targetChanges.get(O.targetId),me=Z&&Z.targetMismatches.get(O.targetId)!=null,ce=O.view.applyChanges(j,U.isPrimaryClient,ae,me);return qC(U,O.targetId,ce.au),ce.snapshot})(n,T,E,I);const a=await NC(n.localStore,e,!0),l=new XL(e,a.Qs),d=l.ru(a.documents),f=Kc.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),h=l.applyChanges(d,n.isPrimaryClient,f);qC(n,t,h.au);const y=new ZL(e,t,l);return n.Tu.set(e,y),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),h.snapshot}async function rV(n,e,t){const i=Ue(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((l=>!tp(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await D_(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Ly(i.remoteStore,r.targetId),L_(i,r.targetId)})).catch(Bl)):(L_(i,r.targetId),await D_(i.localStore,r.targetId,!0))}async function oV(n,e){const t=Ue(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Ly(t.remoteStore,i.targetId))}async function aV(n,e,t){const i=pV(n);try{const r=await(function(l,d){const f=Ue(l),h=Mt.now(),y=d.reduce(((I,N)=>I.add(N.key)),Xe());let T,E;return f.persistence.runTransaction("Locally write mutations","readwrite",(I=>{let N=Ws(),U=Xe();return f.Ns.getEntries(I,y).next((O=>{N=O,N.forEach(((K,Z)=>{Z.isValidDocument()||(U=U.add(K))}))})).next((()=>f.localDocuments.getOverlayedDocuments(I,N))).next((O=>{T=O;const K=[];for(const Z of d){const j=SP(Z,T.get(Z.key).overlayedDocument);j!=null&&K.push(new fo(Z.key,j,Sx(j.value.mapValue),Bi.exists(!0)))}return f.mutationQueue.addMutationBatch(I,h,K,d)})).next((O=>{E=O;const K=O.applyToLocalDocumentSet(T,U);return f.documentOverlayCache.saveOverlays(I,O.batchId,K)}))})).then((()=>({batchId:E.batchId,changes:kx(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,d,f){let h=l.Vu[l.currentUser.toKey()];h||(h=new nn(Qe)),h=h.insert(d,f),l.Vu[l.currentUser.toKey()]=h})(i,r.batchId,t),await jc(i,r.changes),await lp(i.remoteStore)}catch(r){const a=qy(r,"Failed to persist write");t.reject(a)}}async function yb(n,e){const t=Ue(n);try{const i=await TL(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const l=t.Au.get(a);l&&(ut(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?ut(l.hu,14607):r.removedDocuments.size>0&&(ut(l.hu,42227),l.hu=!1))})),await jc(t,i,e)}catch(i){await Bl(i)}}function FC(n,e,t){const i=Ue(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,l)=>{const d=l.view.va(e);d.snapshot&&r.push(d.snapshot)})),(function(l,d){const f=Ue(l);f.onlineState=d;let h=!1;f.queries.forEach(((y,T)=>{for(const E of T.Sa)E.va(d)&&(h=!0)})),h&&By(f)})(i.eventManager,e),r.length&&i.Pu.H_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function lV(n,e,t){const i=Ue(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let l=new nn(Ae.comparator);l=l.insert(a,xn.newNoDocument(a,Le.min()));const d=Xe().add(a),f=new rp(Le.min(),new Map,new nn(Qe),l,d);await yb(i,f),i.du=i.du.remove(a),i.Au.delete(e),Hy(i)}else await D_(i.localStore,e,!1).then((()=>L_(i,e,t))).catch(Bl)}async function uV(n,e){const t=Ue(n),i=e.batch.batchId;try{const r=await vL(t.localStore,e);Tb(t,i,null),vb(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await jc(t,r)}catch(r){await Bl(r)}}async function cV(n,e,t){const i=Ue(n);try{const r=await(function(l,d){const f=Ue(l);return f.persistence.runTransaction("Reject batch","readwrite-primary",(h=>{let y;return f.mutationQueue.lookupMutationBatch(h,d).next((T=>(ut(T!==null,37113),y=T.keys(),f.mutationQueue.removeMutationBatch(h,T)))).next((()=>f.mutationQueue.performConsistencyCheck(h))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(h,y,d))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,y))).next((()=>f.localDocuments.getDocuments(h,y)))}))})(i.localStore,e);Tb(i,e,t),vb(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await jc(i,r)}catch(r){await Bl(r)}}function vb(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Tb(n,e,t){const i=Ue(n);let r=i.Vu[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.Vu[i.currentUser.toKey()]=r}}function L_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||Eb(n,i)}))}function Eb(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Ly(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Hy(n))}function qC(n,e,t){for(const i of t)i instanceof mb?(n.Ru.addReference(i.key,e),dV(n,i)):i instanceof gb?(ve(Gy,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||Eb(n,i.key)):Ne(19791,{wu:i})}function dV(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(ve(Gy,"New document in limbo: "+t),n.Eu.add(i),Hy(n))}function Hy(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ae(It.fromString(e)),i=n.fu.next();n.Au.set(i,new eV(t)),n.du=n.du.insert(t,i),ob(n.remoteStore,new Br(ms(ep(t.path)),i,"TargetPurposeLimboResolution",Qh.ce))}}async function jc(n,e,t){const i=Ue(n),r=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((d,f)=>{l.push(i.pu(f,e,t).then((h=>{var y;if((h||t)&&i.isPrimaryClient){const T=h?!h.fromCache:(y=t==null?void 0:t.targetChanges.get(f.targetId))==null?void 0:y.current;i.sharedClientState.updateQueryState(f.targetId,T?"current":"not-current")}if(h){r.push(h);const T=ky.As(f.targetId,h);a.push(T)}})))})),await Promise.all(l),i.Pu.H_(r),await(async function(f,h){const y=Ue(f);try{await y.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>oe.forEach(h,(E=>oe.forEach(E.Es,(I=>y.persistence.referenceDelegate.addReference(T,E.targetId,I))).next((()=>oe.forEach(E.ds,(I=>y.persistence.referenceDelegate.removeReference(T,E.targetId,I)))))))))}catch(T){if(!Gl(T))throw T;ve(Py,"Failed to update sequence numbers: "+T)}for(const T of h){const E=T.targetId;if(!T.fromCache){const I=y.Ms.get(E),N=I.snapshotVersion,U=I.withLastLimboFreeSnapshotVersion(N);y.Ms=y.Ms.insert(E,U)}}})(i.localStore,a))}async function fV(n,e){const t=Ue(n);if(!t.currentUser.isEqual(e)){ve(Gy,"User change. New user:",e.toKey());const i=await nb(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((d=>{d.forEach((f=>{f.reject(new ye(ie.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await jc(t,i.Ls)}}function hV(n,e){const t=Ue(n),i=t.Au.get(e);if(i&&i.hu)return Xe().add(i.key);{let r=Xe();const a=t.Iu.get(e);if(!a)return r;for(const l of a){const d=t.Tu.get(l);r=r.unionWith(d.view.nu)}return r}}function Sb(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=yb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lV.bind(null,e),e.Pu.H_=WL.bind(null,e.eventManager),e.Pu.yu=QL.bind(null,e.eventManager),e}function pV(n){const e=Ue(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cV.bind(null,e),e}class yh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=op(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return yL(this.persistence,new mL,e.initialUser,this.serializer)}Cu(e){return new tb(Dy.mi,this.serializer)}Du(e){return new AL}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}yh.provider={build:()=>new yh};class mV extends yh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){ut(this.persistence.referenceDelegate instanceof gh,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new eL(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?Hn.withCacheSize(this.cacheSizeBytes):Hn.DEFAULT;return new tb((i=>gh.mi(i,t)),this.serializer)}}class V_{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>FC(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fV.bind(null,this.syncEngine),await $L(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new JL})()}createDatastore(e){const t=op(e.databaseInfo.databaseId),i=(function(a){return new NL(a)})(e.databaseInfo);return(function(a,l,d,f){return new PL(a,l,d,f)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,l,d){return new VL(i,r,a,l,d)})(this.localStore,this.datastore,e.asyncQueue,(t=>FC(this.syncEngine,t,0)),(function(){return kC.v()?new kC:new IL})())}createSyncEngine(e,t){return(function(r,a,l,d,f,h,y){const T=new tV(r,a,l,d,f,h);return y&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=Ue(r);ve(Zo,"RemoteStore shutting down."),a.Ea.add(5),await $c(a),a.Aa.shutdown(),a.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}V_.provider={build:()=>new V_};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Js("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="FirestoreClient";class gV{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=In.UNAUTHENTICATED,this.clientId=Ey.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{ve(io,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(ve(io,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new $r;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=qy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Qg(n,e){n.asyncQueue.verifyOperationInProgress(),ve(io,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await nb(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function BC(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _V(n);ve(io,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>LC(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>LC(e.remoteStore,r))),n._onlineComponents=e}async function _V(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ve(io,"Using user provided OfflineComponentProvider");try{await Qg(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ie.FAILED_PRECONDITION||r.code===ie.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;Al("Error using user provided cache. Falling back to memory cache: "+t),await Qg(n,new yh)}}else ve(io,"Using default OfflineComponentProvider"),await Qg(n,new mV(void 0));return n._offlineComponents}async function wb(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ve(io,"Using user provided OnlineComponentProvider"),await BC(n,n._uninitializedComponentsProvider._online)):(ve(io,"Using default OnlineComponentProvider"),await BC(n,new V_))),n._onlineComponents}function yV(n){return wb(n).then((e=>e.syncEngine))}async function U_(n){const e=await wb(n),t=e.eventManager;return t.onListen=nV.bind(null,e.syncEngine),t.onUnlisten=rV.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=iV.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=oV.bind(null,e.syncEngine),t}function vV(n,e,t={}){const i=new $r;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,d,f,h){const y=new Cb({next:E=>{y.Nu(),l.enqueueAndForget((()=>hb(a,T)));const I=E.docs.has(d);!I&&E.fromCache?h.reject(new ye(ie.UNAVAILABLE,"Failed to get document because the client is offline.")):I&&E.fromCache&&f&&f.source==="server"?h.reject(new ye(ie.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(E)},error:E=>h.reject(E)}),T=new pb(ep(d.path),y,{includeMetadataChanges:!0,qa:!0});return fb(a,T)})(await U_(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ab(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ib="firestore.googleapis.com",HC=!0;class zC{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ye(ie.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Ib,this.ssl=HC}else this.host=e.host,this.ssl=e.ssl??HC;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=eb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<XP)throw new ye(ie.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Vk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ab(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ye(ie.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class up{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zC({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ye(ie.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ye(ie.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zC(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new Ik;switch(i.type){case"firstParty":return new Nk(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ye(ie.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=GC.get(t);i&&(ve("ComponentProvider","Removing Datastore"),GC.delete(t),i.terminate())})(this),Promise.resolve()}}function TV(n,e,t,i={}){var h;n=qi(n,up);const r=lo(e),a=n._getSettings(),l={...a,emulatorOptions:n._getEmulatorOptions()},d=`${e}:${t}`;r&&(gy(`https://${d}`),_y("Firestore",!0)),a.host!==Ib&&a.host!==d&&Al("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...a,host:d,ssl:r,emulatorOptions:i};if(!Es(f,l)&&(n._setSettings(f),i.mockUserToken)){let y,T;if(typeof i.mockUserToken=="string")y=i.mockUserToken,T=In.MOCK_USER;else{y=YI(i.mockUserToken,(h=n._app)==null?void 0:h.options.projectId);const E=i.mockUserToken.sub||i.mockUserToken.user_id;if(!E)throw new ye(ie.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");T=new In(E)}n._authCredentials=new xk(new cx(y,T))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new da(this.firestore,e,this._query)}}class Ot{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Jr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ot(this.firestore,e,this._key)}toJSON(){return{type:Ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(zc(t,Ot._jsonSchema))return new Ot(e,i||null,new Ae(It.fromString(t.referencePath)))}}Ot._jsonSchemaVersion="firestore/documentReference/1.0",Ot._jsonSchema={type:tn("string",Ot._jsonSchemaVersion),referencePath:tn("string")};class Jr extends da{constructor(e,t,i){super(e,t,ep(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new Ae(e))}withConverter(e){return new Jr(this.firestore,e,this._path)}}function xb(n,e,...t){if(n=xt(n),dx("collection","path",e),n instanceof up){const i=It.fromString(e,...t);return iC(i),new Jr(n,null,i)}{if(!(n instanceof Ot||n instanceof Jr))throw new ye(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(It.fromString(e,...t));return iC(i),new Jr(n.firestore,null,i)}}function cp(n,e,...t){if(n=xt(n),arguments.length===1&&(e=Ey.newId()),dx("doc","path",e),n instanceof up){const i=It.fromString(e,...t);return nC(i),new Ot(n,null,new Ae(i))}{if(!(n instanceof Ot||n instanceof Jr))throw new ye(ie.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(It.fromString(e,...t));return nC(i),new Ot(n.firestore,n instanceof Jr?n.converter:null,new Ae(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="AsyncQueue";class KC{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new sb(this,"async_queue_retry"),this._c=()=>{const i=Wg();i&&ve(YC,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Wg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Wg();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new $r;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Gl(e))throw e;ve(YC,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Js("INTERNAL UNHANDLED ERROR: ",$C(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Fy.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&Ne(47125,{Pc:$C(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function $C(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jC(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1})(n,["next","error","complete"])}class ea extends up{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new KC,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new KC(e),this._firestoreClient=void 0,await e}}}function EV(n,e){const t=typeof n=="object"?n:Jh(),i=typeof n=="string"?n:dh,r=uo(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const a=GI("firestore");a&&TV(r,...a)}return r}function zy(n){if(n._terminated)throw new ye(ie.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||SV(n),n._firestoreClient}function SV(n){var i,r,a;const e=n._freezeSettings(),t=(function(d,f,h,y){return new $k(d,f,h,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,Ab(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(r=e.localCache)!=null&&r._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new gV(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(d){const f=d==null?void 0:d._online.build();return{_offline:d==null?void 0:d._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new vi(Sn.fromBase64String(e))}catch(t){throw new ye(ie.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new vi(Sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:vi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(zc(e,vi._jsonSchema))return vi.fromBase64String(e.bytes)}}vi._jsonSchemaVersion="firestore/bytes/1.0",vi._jsonSchema={type:tn("string",vi._jsonSchemaVersion),bytes:tn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ye(ie.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new En(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _s{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ye(ie.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ye(ie.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Qe(this._lat,e._lat)||Qe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:_s._jsonSchemaVersion}}static fromJSON(e){if(zc(e,_s._jsonSchema))return new _s(e.latitude,e.longitude)}}_s._jsonSchemaVersion="firestore/geoPoint/1.0",_s._jsonSchema={type:tn("string",_s._jsonSchemaVersion),latitude:tn("number"),longitude:tn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ys._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(zc(e,ys._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ys(e.vectorValues);throw new ye(ie.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ys._jsonSchemaVersion="firestore/vectorValue/1.0",ys._jsonSchema={type:tn("string",ys._jsonSchemaVersion),vectorValues:tn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CV=/^__.*__$/;class wV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new fo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Yc(e,this.data,t,this.fieldTransforms)}}class bb{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new fo(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Rb(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ne(40011,{Ac:n})}}class fp{constructor(e,t,i,r,a,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.Rc(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new fp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return vh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(Rb(this.Ac)&&CV.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class AV{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||op(e)}Cc(e,t,i,r=!1){return new fp({Ac:e,methodName:t,Dc:i,path:En.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hp(n){const e=n._freezeSettings(),t=op(n._databaseId);return new AV(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Nb(n,e,t,i,r,a={}){const l=n.Cc(a.merge||a.mergeFields?2:0,e,t,r);$y("Data must be an object, but it was:",l,i);const d=Mb(i,l);let f,h;if(a.merge)f=new ii(l.fieldMask),h=l.fieldTransforms;else if(a.mergeFields){const y=[];for(const T of a.mergeFields){const E=O_(e,T,t);if(!l.contains(E))throw new ye(ie.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);kb(y,E)||y.push(E)}f=new ii(y),h=l.fieldTransforms.filter((T=>f.covers(T.field)))}else f=null,h=l.fieldTransforms;return new wV(new zn(d),f,h)}class pp extends Jc{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof pp}}function IV(n,e,t){return new fp({Ac:3,Dc:e.settings.Dc,methodName:n._methodName,fc:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Yy extends Jc{_toFieldTransform(e){return new qx(e.path,new Mc)}isEqual(e){return e instanceof Yy}}class Ky extends Jc{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=IV(this,e,!0),i=this.vc.map((a=>Yl(a,t))),r=new Rl(i);return new qx(e.path,r)}isEqual(e){return e instanceof Ky&&Es(this.vc,e.vc)}}function xV(n,e,t,i){const r=n.Cc(1,e,t);$y("Data must be an object, but it was:",r,i);const a=[],l=zn.empty();co(i,((f,h)=>{const y=jy(e,f,t);h=xt(h);const T=r.yc(y);if(h instanceof pp)a.push(y);else{const E=Yl(h,T);E!=null&&(a.push(y),l.set(y,E))}}));const d=new ii(a);return new bb(l,d,r.fieldTransforms)}function bV(n,e,t,i,r,a){const l=n.Cc(1,e,t),d=[O_(e,i,t)],f=[r];if(a.length%2!=0)throw new ye(ie.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let E=0;E<a.length;E+=2)d.push(O_(e,a[E])),f.push(a[E+1]);const h=[],y=zn.empty();for(let E=d.length-1;E>=0;--E)if(!kb(h,d[E])){const I=d[E];let N=f[E];N=xt(N);const U=l.yc(I);if(N instanceof pp)h.push(I);else{const O=Yl(N,U);O!=null&&(h.push(I),y.set(I,O))}}const T=new ii(h);return new bb(y,T,l.fieldTransforms)}function RV(n,e,t,i=!1){return Yl(t,n.Cc(i?4:3,e))}function Yl(n,e){if(Db(n=xt(n)))return $y("Unsupported field value:",e,n),Mb(n,e);if(n instanceof Jc)return(function(i,r){if(!Rb(r.Ac))throw r.Sc(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Sc(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,r){const a=[];let l=0;for(const d of i){let f=Yl(d,r.wc(l));f==null&&(f={nullValue:"NULL_VALUE"}),a.push(f),l++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return gP(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=Mt.fromDate(i);return{timestampValue:mh(r.serializer,a)}}if(i instanceof Mt){const a=new Mt(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:mh(r.serializer,a)}}if(i instanceof _s)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof vi)return{bytesValue:$x(r.serializer,i._byteString)};if(i instanceof Ot){const a=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw r.Sc(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:Ny(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof ys)return(function(l,d){return{mapValue:{fields:{[Tx]:{stringValue:Ex},[fh]:{arrayValue:{values:l.toArray().map((h=>{if(typeof h!="number")throw d.Sc("VectorValues must only contain numeric values.");return xy(d.serializer,h)}))}}}}}})(i,r);throw r.Sc(`Unsupported field value: ${Wh(i)}`)})(n,e)}function Mb(n,e){const t={};return px(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):co(n,((i,r)=>{const a=Yl(r,e.mc(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function Db(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Mt||n instanceof _s||n instanceof vi||n instanceof Ot||n instanceof Jc||n instanceof ys)}function $y(n,e,t){if(!Db(t)||!fx(t)){const i=Wh(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function O_(n,e,t){if((e=xt(e))instanceof dp)return e._internalPath;if(typeof e=="string")return jy(n,e);throw vh("Field path arguments must be of type string or ",n,!1,void 0,t)}const NV=new RegExp("[~\\*/\\[\\]]");function jy(n,e,t){if(e.search(NV)>=0)throw vh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dp(...e.split("."))._internalPath}catch{throw vh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function vh(n,e,t,i,r){const a=i&&!i.isEmpty(),l=r!==void 0;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let f="";return(a||l)&&(f+=" (found",a&&(f+=` in field ${i}`),l&&(f+=` in document ${r}`),f+=")"),new ye(ie.INVALID_ARGUMENT,d+n+f)}function kb(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(mp("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class MV extends Pb{data(){return super.data()}}function mp(n,e){return typeof e=="string"?jy(n,e):e instanceof dp?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ye(ie.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Jy{}class Lb extends Jy{}function kV(n,e,...t){let i=[];e instanceof Jy&&i.push(e),i=i.concat(t),(function(a){const l=a.filter((f=>f instanceof Wy)).length,d=a.filter((f=>f instanceof gp)).length;if(l>1||l>0&&d>0)throw new ye(ie.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const r of i)n=r._apply(n);return n}class gp extends Lb{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new gp(e,t,i)}_apply(e){const t=this._parse(e);return Vb(e._query,t),new da(e.firestore,e.converter,I_(e._query,t))}_parse(e){const t=hp(e.firestore);return(function(a,l,d,f,h,y,T){let E;if(h.isKeyField()){if(y==="array-contains"||y==="array-contains-any")throw new ye(ie.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if(y==="in"||y==="not-in"){WC(T,y);const N=[];for(const U of T)N.push(JC(f,a,U));E={arrayValue:{values:N}}}else E=JC(f,a,T)}else y!=="in"&&y!=="not-in"&&y!=="array-contains-any"||WC(T,y),E=RV(d,l,T,y==="in"||y==="not-in");return en.create(h,y,E)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function PV(n,e,t){const i=e,r=mp("where",n);return gp._create(r,i,t)}class Wy extends Jy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wy(e,t)}_parse(e){const t=this._queryConstraints.map((i=>i._parse(e))).filter((i=>i.getFilters().length>0));return t.length===1?t[0]:zi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(r,a){let l=r;const d=a.getFlattenedFilters();for(const f of d)Vb(l,f),l=I_(l,f)})(e._query,t),new da(e.firestore,e.converter,I_(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Qy extends Lb{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Qy(e,t)}_apply(e){const t=(function(r,a,l){if(r.startAt!==null)throw new ye(ie.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new ye(ie.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Nc(a,l)})(e._query,this._field,this._direction);return new da(e.firestore,e.converter,(function(r,a){const l=r.explicitOrderBy.concat([a]);return new Hl(r.path,r.collectionGroup,l,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)})(e._query,t))}}function LV(n,e="asc"){const t=e,i=mp("orderBy",n);return Qy._create(i,t)}function JC(n,e,t){if(typeof(t=xt(t))=="string"){if(t==="")throw new ye(ie.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Rx(e)&&t.indexOf("/")!==-1)throw new ye(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(It.fromString(t));if(!Ae.isDocumentKey(i))throw new ye(ie.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return dC(n,new Ae(i))}if(t instanceof Ot)return dC(n,t._key);throw new ye(ie.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(t)}.`)}function WC(n,e){if(!Array.isArray(n)||n.length===0)throw new ye(ie.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Vb(n,e){const t=(function(r,a){for(const l of r)for(const d of l.getFlattenedFilters())if(a.indexOf(d.op)>=0)return d.op;return null})(n.filters,(function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new ye(ie.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ye(ie.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class VV{convertValue(e,t="none"){switch(to(e)){case 0:return null;case 1:return e.booleanValue;case 2:return zt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(eo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ne(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return co(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[fh].arrayValue)==null?void 0:r.values)==null?void 0:a.map((l=>zt(l.doubleValue)));return new ys(t)}convertGeoPoint(e){return new _s(zt(e.latitude),zt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Zh(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xc(e));default:return null}}convertTimestamp(e){const t=Zr(e);return new Mt(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=It.fromString(e);ut(Zx(i),9688,{name:e});const r=new bc(i.get(1),i.get(3)),a=new Ae(i.popFirst(5));return r.isEqual(t)||Js(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class cc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wo extends Pb{constructor(e,t,i,r,a,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(mp("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Wo._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Wo._jsonSchemaVersion="firestore/documentSnapshot/1.0",Wo._jsonSchema={type:tn("string",Wo._jsonSchemaVersion),bundleSource:tn("string","DocumentSnapshot"),bundleName:tn("string"),bundle:tn("string")};class Qf extends Wo{data(e={}){return super.data(e)}}class pl{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new cc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Qf(this._firestore,this._userDataWriter,i.key,i,new cc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ye(ie.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((d=>{const f=new Qf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new cc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);return d.doc,{type:"added",doc:f,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((d=>a||d.type!==3)).map((d=>{const f=new Qf(r._firestore,r._userDataWriter,d.doc.key,d.doc,new cc(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let h=-1,y=-1;return d.type!==0&&(h=l.indexOf(d.doc.key),l=l.delete(d.doc.key)),d.type!==1&&(l=l.add(d.doc),y=l.indexOf(d.doc.key)),{type:UV(d.type),doc:f,oldIndex:h,newIndex:y}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ye(ie.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pl._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ey.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function UV(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ne(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(n){n=qi(n,Ot);const e=qi(n.firestore,ea);return vV(zy(e),n._key).then((t=>qb(e,n,t)))}pl._jsonSchemaVersion="firestore/querySnapshot/1.0",pl._jsonSchema={type:tn("string",pl._jsonSchemaVersion),bundleSource:tn("string","QuerySnapshot"),bundleName:tn("string"),bundle:tn("string")};class Fb extends VV{constructor(e){super(),this.firestore=e}convertBytes(e){return new vi(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}}function OV(n,e,t){n=qi(n,Ot);const i=qi(n.firestore,ea),r=Ub(n.converter,e,t);return Xy(i,[Nb(hp(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Bi.none())])}function FV(n,e,t,...i){n=qi(n,Ot);const r=qi(n.firestore,ea),a=hp(r);let l;return l=typeof(e=xt(e))=="string"||e instanceof dp?bV(a,"updateDoc",n._key,e,t,i):xV(a,"updateDoc",n._key,e),Xy(r,[l.toMutation(n._key,Bi.exists(!0))])}function qV(n,e){const t=qi(n.firestore,ea),i=cp(n),r=Ub(n.converter,e);return Xy(t,[Nb(hp(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Bi.exists(!1))]).then((()=>i))}function BV(n,...e){var f,h,y;n=xt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||jC(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(jC(e[i])){const T=e[i];e[i]=(f=T.next)==null?void 0:f.bind(T),e[i+1]=(h=T.error)==null?void 0:h.bind(T),e[i+2]=(y=T.complete)==null?void 0:y.bind(T)}let a,l,d;if(n instanceof Ot)l=qi(n.firestore,ea),d=ep(n._key.path),a={next:T=>{e[i]&&e[i](qb(l,n,T))},error:e[i+1],complete:e[i+2]};else{const T=qi(n,da);l=qi(T.firestore,ea),d=T._query;const E=new Fb(l);a={next:I=>{e[i]&&e[i](new pl(l,E,T,I))},error:e[i+1],complete:e[i+2]},DV(n._query)}return(function(E,I,N,U){const O=new Cb(U),K=new pb(I,O,N);return E.asyncQueue.enqueueAndForget((async()=>fb(await U_(E),K))),()=>{O.Nu(),E.asyncQueue.enqueueAndForget((async()=>hb(await U_(E),K)))}})(zy(l),d,r,a)}function Xy(n,e){return(function(i,r){const a=new $r;return i.asyncQueue.enqueueAndForget((async()=>aV(await yV(i),r,a))),a.promise})(zy(n),e)}function qb(n,e,t){const i=t.docs.get(e._key),r=new Fb(n);return new Wo(n,r,e._key,i,new cc(t.hasPendingWrites,t.fromCache),e.converter)}function GV(){return new Yy("serverTimestamp")}function HV(...n){return new Ky("arrayUnion",n)}(function(e,t=!0){(function(r){ql=r})(la),Hi(new Si("firestore",((i,{instanceIdentifier:r,options:a})=>{const l=i.getProvider("app").getImmediate(),d=new ea(new bk(i.getProvider("auth-internal")),new Mk(l,i.getProvider("app-check-internal")),(function(h,y){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new ye(ie.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bc(h.options.projectId,y)})(l,r),l);return a={useFetchStreams:t,...a},d._setSettings(a),d}),"PUBLIC").setMultipleInstances(!0)),Kn(XS,ZS,e),Kn(XS,ZS,"esm2020")})();var QC={};const XC="@firebase/database",ZC="1.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bb="";function zV(n){Bb=n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YV{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){t==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),on(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return t==null?null:wc(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KV{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){t==null?delete this.cache_[e]:this.cache_[e]=t}get(e){return Cs(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new YV(e)}}catch{}return new KV},$o=Gb("localStorage"),$V=Gb("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml=new Hc("@firebase/database"),jV=(function(){let n=1;return function(){return n++}})(),Hb=function(n){const e=pD(n),t=new cD;t.update(e);const i=t.digest();return my.encodeByteArray(i)},Wc=function(...n){let e="";for(let t=0;t<n.length;t++){const i=n[t];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Wc.apply(null,i):typeof i=="object"?e+=on(i):e+=i,e+=" "}return e};let gc=null,ew=!0;const JV=function(n,e){he(!0,"Can't turn on custom loggers persistently."),ml.logLevel=Ke.VERBOSE,gc=ml.log.bind(ml)},Tn=function(...n){if(ew===!0&&(ew=!1,gc===null&&$V.get("logging_enabled")===!0&&JV()),gc){const e=Wc.apply(null,n);gc(e)}},Qc=function(n){return function(...e){Tn(n,...e)}},F_=function(...n){const e="FIREBASE INTERNAL ERROR: "+Wc(...n);ml.error(e)},Qs=function(...n){const e=`FIREBASE FATAL ERROR: ${Wc(...n)}`;throw ml.error(e),new Error(e)},Pn=function(...n){const e="FIREBASE WARNING: "+Wc(...n);ml.warn(e)},WV=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Zy=function(n){return typeof n=="number"&&(n!==n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},QV=function(n){if(document.readyState==="complete")n();else{let e=!1;const t=function(){if(!document.body){setTimeout(t,Math.floor(10));return}e||(e=!0,n())};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&t()}),window.attachEvent("onload",t))}},Dl="[MIN_NAME]",ta="[MAX_NAME]",fa=function(n,e){if(n===e)return 0;if(n===Dl||e===ta)return-1;if(e===Dl||n===ta)return 1;{const t=tw(n),i=tw(e);return t!==null?i!==null?t-i===0?n.length-e.length:t-i:-1:i!==null?1:n<e?-1:1}},XV=function(n,e){return n===e?0:n<e?-1:1},nc=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+on(e))},ev=function(n){if(typeof n!="object"||n===null)return on(n);const e=[];for(const i in n)e.push(i);e.sort();let t="{";for(let i=0;i<e.length;i++)i!==0&&(t+=","),t+=on(e[i]),t+=":",t+=ev(n[e[i]]);return t+="}",t},zb=function(n,e){const t=n.length;if(t<=e)return[n];const i=[];for(let r=0;r<t;r+=e)r+e>t?i.push(n.substring(r,t)):i.push(n.substring(r,r+e));return i};function Cn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Yb=function(n){he(!Zy(n),"Invalid JSON number");const e=11,t=52,i=(1<<e-1)-1;let r,a,l,d,f;n===0?(a=0,l=0,r=1/n===-1/0?1:0):(r=n<0,n=Math.abs(n),n>=Math.pow(2,1-i)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),i),a=d+i,l=Math.round(n*Math.pow(2,t-d)-Math.pow(2,t))):(a=0,l=Math.round(n/Math.pow(2,1-i-t))));const h=[];for(f=t;f;f-=1)h.push(l%2?1:0),l=Math.floor(l/2);for(f=e;f;f-=1)h.push(a%2?1:0),a=Math.floor(a/2);h.push(r?1:0),h.reverse();const y=h.join("");let T="";for(f=0;f<64;f+=8){let E=parseInt(y.substr(f,8),2).toString(16);E.length===1&&(E="0"+E),T=T+E}return T.toLowerCase()},ZV=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},e4=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function t4(n,e){let t="Unknown Error";n==="too_big"?t="The data requested exceeds the maximum size that can be accessed with a single request.":n==="permission_denied"?t="Client doesn't have permission to access the desired data.":n==="unavailable"&&(t="The service is unavailable");const i=new Error(n+" at "+e._path.toString()+": "+t);return i.code=n.toUpperCase(),i}const n4=new RegExp("^-?(0*)\\d{1,10}$"),i4=-2147483648,s4=2147483647,tw=function(n){if(n4.test(n)){const e=Number(n);if(e>=i4&&e<=s4)return e}return null},Kl=function(n){try{n()}catch(e){setTimeout(()=>{const t=e.stack||"";throw Pn("Exception was thrown by user callback.",t),e},Math.floor(0))}},r4=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},_c=function(n,e){const t=setTimeout(n,e);return typeof t=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):typeof t=="object"&&t.unref&&t.unref(),t};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{constructor(e,t){this.appCheckProvider=t,this.appName=e.name,Vi(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=t==null?void 0:t.getImmediate({optional:!0}),this.appCheck||t==null||t.get().then(i=>this.appCheck=i)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((t,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){var t;(t=this.appCheckProvider)==null||t.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){Pn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a4{constructor(e,t,i){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(r=>this.auth_=r)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&t.code==="auth/token-not-initialized"?(Tn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,i):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pn(e)}}class Xf{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Xf.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tv="5",Kb="v",$b="s",jb="r",Jb="f",Wb=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Qb="ls",Xb="p",q_="ac",Zb="websocket",eR="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,t,i,r,a=!1,l="",d=!1,f=!1,h=null){this.secure=t,this.namespace=i,this.webSocketOnly=r,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=f,this.emulatorOptions=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=$o.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&$o.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${t}`}}function l4(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams}function nR(n,e,t){he(typeof e=="string","typeof type must == string"),he(typeof t=="object","typeof params must == object");let i;if(e===Zb)i=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else if(e===eR)i=(n.secure?"https://":"http://")+n.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);l4(n)&&(t.ns=n.namespace);const r=[];return Cn(t,(a,l)=>{r.push(a+"="+l)}),i+r.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(){this.counters_={}}incrementCounter(e,t=1){Cs(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return Y2(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xg={},Zg={};function nv(n){const e=n.toString();return Xg[e]||(Xg[e]=new u4),Xg[e]}function c4(n,e){const t=n.toString();return Zg[t]||(Zg[t]=e()),Zg[t]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<i.length;++r)i[r]&&Kl(()=>{this.onMessage_(i[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nw="start",f4="close",h4="pLPCommand",p4="pRTLPCB",iR="id",sR="pw",rR="ser",m4="cb",g4="seg",_4="ts",y4="d",v4="dframe",oR=1870,aR=30,T4=oR-aR,E4=25e3,S4=3e4;class cl{constructor(e,t,i,r,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Qc(e),this.stats_=nv(t),this.urlFn=f=>(this.appCheckToken&&(f[q_]=this.appCheckToken),nR(t,eR,f))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new d4(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(S4)),QV(()=>{if(this.isClosed_)return;this.scriptTagHolder=new iv((...a)=>{const[l,d,f,h,y]=a;if(this.incrementIncomingBytes_(a),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,l===nw)this.id=d,this.password=f;else if(l===f4)d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+l)},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const i={};i[nw]="t",i[rR]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[m4]=this.scriptTagHolder.uniqueCallbackIdentifier),i[Kb]=tv,this.transportSessionId&&(i[$b]=this.transportSessionId),this.lastSessionId&&(i[Qb]=this.lastSessionId),this.applicationId&&(i[Xb]=this.applicationId),this.appCheckToken&&(i[q_]=this.appCheckToken),typeof location<"u"&&location.hostname&&Wb.test(location.hostname)&&(i[jb]=Jb);const r=this.urlFn(i);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cl.forceAllow_=!0}static forceDisallow(){cl.forceDisallow_=!0}static isAvailable(){return cl.forceAllow_?!0:!cl.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!ZV()&&!e4()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=on(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=FI(t),r=zb(i,T4);for(let a=0;a<r.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){this.myDisconnFrame=document.createElement("iframe");const i={};i[v4]="t",i[iR]=e,i[sR]=t,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=on(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class iv{constructor(e,t,i,r){this.onDisconnect=i,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=jV(),window[h4+this.uniqueCallbackIdentifier]=e,window[p4+this.uniqueCallbackIdentifier]=t,this.myIFrame=iv.createIFrame_();let a="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){Tn("frame writing exception"),d.stack&&Tn(d.stack),Tn(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Tn("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[iR]=this.myID,e[sR]=this.myPW,e[rR]=this.currentSerial;let t=this.urlFn(e),i="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+aR+i.length<=oR;){const l=this.pendingSegs.shift();i=i+"&"+g4+r+"="+l.seg+"&"+_4+r+"="+l.ts+"&"+y4+r+"="+l.d,r++}return t=t+i,this.addLongPollTag_(t,this.currentSerial),!0}else return!1}enqueueSegment(e,t,i){this.pendingSegs.push({seg:e,ts:t,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const i=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(i,Math.floor(E4)),a=()=>{clearTimeout(r),i()};this.addTag(e,a)}addTag(e,t){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const r=i.readyState;(!r||r==="loaded"||r==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),t())},i.onerror=()=>{Tn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=16384,w4=45e3;let Th=null;typeof MozWebSocket<"u"?Th=MozWebSocket:typeof WebSocket<"u"&&(Th=WebSocket);class Ui{constructor(e,t,i,r,a,l,d){this.connId=e,this.applicationId=i,this.appCheckToken=r,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Qc(this.connId),this.stats_=nv(t),this.connURL=Ui.connectionURL_(t,l,d,r,i),this.nodeAdmin=t.nodeAdmin}static connectionURL_(e,t,i,r,a){const l={};return l[Kb]=tv,typeof location<"u"&&location.hostname&&Wb.test(location.hostname)&&(l[jb]=Jb),t&&(l[$b]=t),i&&(l[Qb]=i),r&&(l[q_]=r),a&&(l[Xb]=a),nR(e,Zb,l)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,$o.set("previous_websocket_failure",!0);try{let i;nD(),this.mySock=new Th(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const r=i.message||i.data;r&&this.log_(r),this.onClosed_()}}start(){}static forceDisallow(){Ui.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const t=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(t);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&Th!==null&&!Ui.forceDisallow_}static previouslyFailed(){return $o.isInMemoryStorage||$o.get("previous_websocket_failure")===!0}markConnectionHealthy(){$o.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const t=this.frames.join("");this.frames=null;const i=wc(t);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(he(this.frames===null,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(t);else{const i=this.extractFrameCount_(t);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const t=on(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const i=zb(t,C4);i.length>1&&this.sendString_(String(i.length));for(let r=0;r<i.length;r++)this.sendString_(i[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(w4))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}Ui.responsesRequiredToBeHealthy=2;Ui.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{static get ALL_TRANSPORTS(){return[cl,Ui]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const t=Ui&&Ui.isAvailable();let i=t&&!Ui.previouslyFailed();if(e.webSocketOnly&&(t||Pn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[Ui];else{const r=this.transports_=[];for(const a of kc.ALL_TRANSPORTS)a&&a.isAvailable()&&r.push(a);kc.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}kc.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A4=6e4,I4=5e3,x4=10*1024,b4=100*1024,e_="t",iw="d",R4="s",sw="r",N4="e",rw="o",ow="a",aw="n",lw="p",M4="h";class D4{constructor(e,t,i,r,a,l,d,f,h,y){this.id=e,this.repoInfo_=t,this.applicationId_=i,this.appCheckToken_=r,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=f,this.onKill_=h,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Qc("c:"+this.id+":"),this.transportManager_=new kc(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,i)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=_c(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>b4?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>x4?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){const t={t:"d",d:e};this.sendData_(t)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(e_ in e){const t=e[e_];t===ow?this.upgradeIfSecondaryHealthy_():t===sw?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):t===rw&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=nc("t",e),i=nc("d",e);if(t==="c")this.onSecondaryControl_(i);else if(t==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+t)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:lw,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:ow,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:aw,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=nc("t",e),i=nc("d",e);t==="c"?this.onControl_(i):t==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=nc(e_,e);if(iw in e){const i=e[iw];if(t===M4){const r={...i};this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(t===aw){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===R4?this.onConnectionShutdown_(i):t===sw?this.onReset_(i):t===N4?F_("Server Error: "+i):t===rw?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):F_("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,i=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),tv!==i&&Pn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,i),_c(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(A4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):_c(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(I4))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:lw,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&($o.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{put(e,t,i,r){}merge(e,t,i,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,i){}onDisconnectMerge(e,t,i){}onDisconnectCancel(e,t){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.allowedEvents_=e,this.listeners_={},he(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let r=0;r<i.length;r++)i[r].callback.apply(i[r].context,t)}}on(e,t,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:i});const r=this.getInitialEvent(e);r&&t.apply(i,r)}off(e,t,i){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let a=0;a<r.length;a++)if(r[a].callback===t&&(!i||i===r[a].context)){r.splice(a,1);return}}validateEventType_(e){he(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eh extends uR{static getInstance(){return new Eh}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!yy()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return he(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uw=32,cw=768;class vt{constructor(e,t){if(t===void 0){this.pieces_=e.split("/");let i=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[i]=this.pieces_[r],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)this.pieces_[t]!==""&&(e+="/"+this.pieces_[t]);return e||"/"}}function st(){return new vt("")}function Ge(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function so(n){return n.pieces_.length-n.pieceNum_}function At(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new vt(n.pieces_,e)}function sv(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function k4(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)n.pieces_[t]!==""&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}function Pc(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function cR(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new vt(e,0)}function Ut(n,e){const t=[];for(let i=n.pieceNum_;i<n.pieces_.length;i++)t.push(n.pieces_[i]);if(e instanceof vt)for(let i=e.pieceNum_;i<e.pieces_.length;i++)t.push(e.pieces_[i]);else{const i=e.split("/");for(let r=0;r<i.length;r++)i[r].length>0&&t.push(i[r])}return new vt(t,0)}function $e(n){return n.pieceNum_>=n.pieces_.length}function kn(n,e){const t=Ge(n),i=Ge(e);if(t===null)return e;if(t===i)return kn(At(n),At(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function P4(n,e){const t=Pc(n,0),i=Pc(e,0);for(let r=0;r<t.length&&r<i.length;r++){const a=fa(t[r],i[r]);if(a!==0)return a}return t.length===i.length?0:t.length<i.length?-1:1}function rv(n,e){if(so(n)!==so(e))return!1;for(let t=n.pieceNum_,i=e.pieceNum_;t<=n.pieces_.length;t++,i++)if(n.pieces_[t]!==e.pieces_[i])return!1;return!0}function Ti(n,e){let t=n.pieceNum_,i=e.pieceNum_;if(so(n)>so(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[i])return!1;++t,++i}return!0}class L4{constructor(e,t){this.errorPrefix_=t,this.parts_=Pc(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=jh(this.parts_[i]);dR(this)}}function V4(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=jh(e),dR(n)}function U4(n){const e=n.parts_.pop();n.byteLength_-=jh(e),n.parts_.length>0&&(n.byteLength_-=1)}function dR(n){if(n.byteLength_>cw)throw new Error(n.errorPrefix_+"has a key path longer than "+cw+" bytes ("+n.byteLength_+").");if(n.parts_.length>uw)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+uw+") or object contains a cycle "+Yo(n))}function Yo(n){return n.parts_.length===0?"":"in property '"+n.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov extends uR{static getInstance(){return new ov}constructor(){super(["visible"]);let e,t;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}getInitialEvent(e){return he(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ic=1e3,O4=300*1e3,dw=30*1e3,F4=1.3,q4=3e4,B4="server_kill",fw=3;class $s extends lR{constructor(e,t,i,r,a,l,d,f){if(super(),this.repoInfo_=e,this.applicationId_=t,this.onDataUpdate_=i,this.onConnectStatus_=r,this.onServerInfoUpdate_=a,this.authTokenProvider_=l,this.appCheckTokenProvider_=d,this.authOverride_=f,this.id=$s.nextPersistentConnectionId_++,this.log_=Qc("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ic,this.maxReconnectDelay_=O4,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,f)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ov.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Eh.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,i){const r=++this.requestNumber_,a={r,a:e,b:t};this.log_(on(a)),he(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(a),i&&(this.requestCBHash_[r]=i)}get(e){this.initConnection_();const t=new Gc,r={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:l=>{const d=l.d;l.s==="ok"?t.resolve(d):t.reject(d)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const a=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(a),t.promise}listen(e,t,i,r){this.initConnection_();const a=e._queryIdentifier,l=e._path.toString();this.log_("Listen called for "+l+" "+a),this.listens.has(l)||this.listens.set(l,new Map),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),he(!this.listens.get(l).has(a),"listen() called twice for same path/queryId.");const d={onComplete:r,hashFn:t,query:e,tag:i};this.listens.get(l).set(a,d),this.connected_&&this.sendListen_(d)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(i)})}sendListen_(e){const t=e.query,i=t._path.toString(),r=t._queryIdentifier;this.log_("Listen on "+i+" for "+r);const a={p:i},l="q";e.tag&&(a.q=t._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest(l,a,d=>{const f=d.d,h=d.s;$s.warnOnListenWarnings_(f,t),(this.listens.get(i)&&this.listens.get(i).get(r))===e&&(this.log_("listen response",d),h!=="ok"&&this.removeListen_(i,r),e.onComplete&&e.onComplete(h,f))})}static warnOnListenWarnings_(e,t){if(e&&typeof e=="object"&&Cs(e,"w")){const i=wl(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',a=t._path.toString();Pn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${r} at ${a} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||uD(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=dw)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=lD(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(t,i,r=>{const a=r.s,l=r.d||"error";this.authToken_===e&&(a==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(a,l))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,i=e.d||"error";t==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,i)})}unlisten(e,t){const i=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+r),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,r)&&this.connected_&&this.sendUnlisten_(i,r,e._queryObject,t)}sendUnlisten_(e,t,i,r){this.log_("Unlisten on "+e+" for "+t);const a={p:e},l="n";r&&(a.q=i,a.t=r),this.sendRequest(l,a)}onDisconnectPut(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:i})}onDisconnectMerge(e,t,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:i})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,i,r){const a={p:t,d:i};this.log_("onDisconnect "+e,a),this.sendRequest(e,a,l=>{r&&setTimeout(()=>{r(l.s,l.d)},Math.floor(0))})}put(e,t,i,r){this.putInternal("p",e,t,i,r)}merge(e,t,i,r){this.putInternal("m",e,t,i,r)}putInternal(e,t,i,r,a){this.initConnection_();const l={p:t,d:i};a!==void 0&&(l.h=a),this.outstandingPuts_.push({action:e,request:l,onComplete:r}),this.outstandingPutCount_++;const d=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(d):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,i,a=>{this.log_(t+" response",a),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),r&&r(a.s,a.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,i=>{if(i.s!=="ok"){const a=i.d;this.log_("reportStats","Error sending stats: "+a)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+on(e));const t=e.r,i=this.requestCBHash_[t];i&&(delete this.requestCBHash_[t],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),e==="d"?this.onDataUpdate_(t.p,t.d,!1,t.t):e==="m"?this.onDataUpdate_(t.p,t.d,!0,t.t):e==="c"?this.onListenRevoked_(t.p,t.q):e==="ac"?this.onAuthRevoked_(t.s,t.d):e==="apc"?this.onAppCheckRevoked_(t.s,t.d):e==="sd"?this.onSecurityDebugPacket_(t):F_("Unrecognized action received from server: "+on(e)+`
Are you using the latest client?`)}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){he(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ic,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ic,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>q4&&(this.reconnectDelay_=ic),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*F4)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),t=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),r=this.id+":"+$s.nextConnectionId_++,a=this.lastSessionId;let l=!1,d=null;const f=function(){d?d.close():(l=!0,i())},h=function(T){he(d,"sendRequest call when we're not connected not allowed."),d.sendRequest(T)};this.realtime_={close:f,sendRequest:h};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[T,E]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);l?Tn("getToken() completed but was canceled"):(Tn("getToken() completed. Creating connection."),this.authToken_=T&&T.accessToken,this.appCheckToken_=E&&E.token,d=new D4(r,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,t,i,I=>{Pn(I+" ("+this.repoInfo_.toString()+")"),this.interrupt(B4)},a))}catch(T){this.log_("Failed to get token: "+T),l||(this.repoInfo_.nodeAdmin&&Pn(T),f())}}}interrupt(e){Tn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Tn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],h_(this.interruptReasons_)&&(this.reconnectDelay_=ic,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let i;t?i=t.map(a=>ev(a)).join("$"):i="default";const r=this.removeListen_(e,i);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const i=new vt(e).toString();let r;if(this.listens.has(i)){const a=this.listens.get(i);r=a.get(t),a.delete(t),a.size===0&&this.listens.delete(i)}else r=void 0;return r}onAuthRevoked_(e,t){Tn("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=fw&&(this.reconnectDelay_=dw,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){Tn("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=fw&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";e["sdk."+t+"."+Bb.replace(/\./g,"-")]=1,yy()?e["framework.cordova"]=1:$I()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Eh.getInstance().currentlyOnline();return h_(this.interruptReasons_)&&e}}$s.nextPersistentConnectionId_=0;$s.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new He(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const i=new He(Dl,e),r=new He(Dl,t);return this.compare(i,r)!==0}minPost(){return He.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gf;class fR extends _p{static get __EMPTY_NODE(){return Gf}static set __EMPTY_NODE(e){Gf=e}compare(e,t){return fa(e.name,t.name)}isDefinedOn(e){throw Ol("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return He.MIN}maxPost(){return new He(ta,Gf)}makePost(e,t){return he(typeof e=="string","KeyIndex indexValue must always be a string."),new He(e,Gf)}toString(){return".key"}}const gl=new fR;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,t,i,r,a=null){this.isReverse_=r,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?i(e.key,t):1,r&&(l*=-1),l<0)this.isReverse_?e=e.left:e=e.right;else if(l===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),t;if(this.resultGenerator_?t=this.resultGenerator_(e.key,e.value):t={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class hn{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??hn.RED,this.left=r??Yn.EMPTY_NODE,this.right=a??Yn.EMPTY_NODE}copy(e,t,i,r,a){return new hn(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return a<0?r=r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r=r.copy(null,t,null,null,null):r=r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return Yn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let i,r;if(i=this,t(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),t(e,i.key)===0){if(i.right.isEmpty())return Yn.EMPTY_NODE;r=i.right.min_(),i=i.copy(r.key,r.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,hn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,hn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}hn.RED=!0;hn.BLACK=!1;class G4{copy(e,t,i,r,a){return this}insert(e,t,i){return new hn(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Yn{constructor(e,t=Yn.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Yn(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,hn.BLACK,null,null))}remove(e){return new Yn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,hn.BLACK,null,null))}get(e){let t,i=this.root_;for(;!i.isEmpty();){if(t=this.comparator_(e,i.key),t===0)return i.value;t<0?i=i.left:t>0&&(i=i.right)}return null}getPredecessorKey(e){let t,i=this.root_,r=null;for(;!i.isEmpty();)if(t=this.comparator_(e,i.key),t===0){if(i.left.isEmpty())return r?r.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else t<0?i=i.left:t>0&&(r=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Hf(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Hf(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Hf(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Hf(this.root_,null,this.comparator_,!0,e)}}Yn.EMPTY_NODE=new G4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H4(n,e){return fa(n.name,e.name)}function av(n,e){return fa(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let B_;function z4(n){B_=n}const hR=function(n){return typeof n=="number"?"number:"+Yb(n):"string:"+n},pR=function(n){if(n.isLeafNode()){const e=n.val();he(typeof e=="string"||typeof e=="number"||typeof e=="object"&&Cs(e,".sv"),"Priority must be a string or number.")}else he(n===B_||n.isEmpty(),"priority of unexpected type.");he(n===B_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hw;class dn{static set __childrenNodeConstructor(e){hw=e}static get __childrenNodeConstructor(){return hw}constructor(e,t=dn.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=t,this.lazyHash_=null,he(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),pR(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new dn(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return $e(e)?this:Ge(e)===".priority"?this.priorityNode_:dn.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(e,t){return e===".priority"?this.updatePriority(t):t.isEmpty()&&e!==".priority"?this:dn.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,t).updatePriority(this.priorityNode_)}updateChild(e,t){const i=Ge(e);return i===null?t:t.isEmpty()&&i!==".priority"?this:(he(i!==".priority"||so(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,dn.__childrenNodeConstructor.EMPTY_NODE.updateChild(At(e),t)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+hR(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",t==="number"?e+=Yb(this.value_):e+=this.value_,this.lazyHash_=Hb(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===dn.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof dn.__childrenNodeConstructor?-1:(he(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const t=typeof e.value_,i=typeof this.value_,r=dn.VALUE_TYPE_ORDER.indexOf(t),a=dn.VALUE_TYPE_ORDER.indexOf(i);return he(r>=0,"Unknown leaf type: "+t),he(a>=0,"Unknown leaf type: "+i),r===a?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:a-r}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}else return!1}}dn.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mR,gR;function Y4(n){mR=n}function K4(n){gR=n}class $4 extends _p{compare(e,t){const i=e.node.getPriority(),r=t.node.getPriority(),a=i.compareTo(r);return a===0?fa(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return He.MIN}maxPost(){return new He(ta,new dn("[PRIORITY-POST]",gR))}makePost(e,t){const i=mR(e);return new He(t,new dn("[PRIORITY-POST]",i))}toString(){return".priority"}}const Ft=new $4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j4=Math.log(2);class J4{constructor(e){const t=a=>parseInt(Math.log(a)/j4,10),i=a=>parseInt(Array(a+1).join("1"),2);this.count=t(e+1),this.current_=this.count-1;const r=i(this.count);this.bits_=e+1&r}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Sh=function(n,e,t,i){n.sort(e);const r=function(f,h){const y=h-f;let T,E;if(y===0)return null;if(y===1)return T=n[f],E=t?t(T):T,new hn(E,T.node,hn.BLACK,null,null);{const I=parseInt(y/2,10)+f,N=r(f,I),U=r(I+1,h);return T=n[I],E=t?t(T):T,new hn(E,T.node,hn.BLACK,N,U)}},a=function(f){let h=null,y=null,T=n.length;const E=function(N,U){const O=T-N,K=T;T-=N;const Z=r(O+1,K),j=n[O],ae=t?t(j):j;I(new hn(ae,j.node,U,null,Z))},I=function(N){h?(h.left=N,h=N):(y=N,h=N)};for(let N=0;N<f.count;++N){const U=f.nextBitIsOne(),O=Math.pow(2,f.count-(N+1));U?E(O,hn.BLACK):(E(O,hn.BLACK),E(O,hn.RED))}return y},l=new J4(n.length),d=a(l);return new Yn(i||e,d)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t_;const rl={};class zs{static get Default(){return he(rl&&Ft,"ChildrenNode.ts has not been loaded"),t_=t_||new zs({".priority":rl},{".priority":Ft}),t_}constructor(e,t){this.indexes_=e,this.indexSet_=t}get(e){const t=wl(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Yn?t:null}hasIndex(e){return Cs(this.indexSet_,e.toString())}addIndex(e,t){he(e!==gl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let r=!1;const a=t.getIterator(He.Wrap);let l=a.getNext();for(;l;)r=r||e.isDefinedOn(l.node),i.push(l),l=a.getNext();let d;r?d=Sh(i,e.getCompare()):d=rl;const f=e.toString(),h={...this.indexSet_};h[f]=e;const y={...this.indexes_};return y[f]=d,new zs(y,h)}addToIndexes(e,t){const i=lh(this.indexes_,(r,a)=>{const l=wl(this.indexSet_,a);if(he(l,"Missing index implementation for "+a),r===rl)if(l.isDefinedOn(e.node)){const d=[],f=t.getIterator(He.Wrap);let h=f.getNext();for(;h;)h.name!==e.name&&d.push(h),h=f.getNext();return d.push(e),Sh(d,l.getCompare())}else return rl;else{const d=t.get(e.name);let f=r;return d&&(f=f.remove(new He(e.name,d))),f.insert(e,e.node)}});return new zs(i,this.indexSet_)}removeFromIndexes(e,t){const i=lh(this.indexes_,r=>{if(r===rl)return r;{const a=t.get(e.name);return a?r.remove(new He(e.name,a)):r}});return new zs(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let sc;class Re{static get EMPTY_NODE(){return sc||(sc=new Re(new Yn(av),null,zs.Default))}constructor(e,t,i){this.children_=e,this.priorityNode_=t,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&pR(this.priorityNode_),this.children_.isEmpty()&&he(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||sc}updatePriority(e){return this.children_.isEmpty()?this:new Re(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const t=this.children_.get(e);return t===null?sc:t}}getChild(e){const t=Ge(e);return t===null?this:this.getImmediateChild(t).getChild(At(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,t){if(he(t,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(t);{const i=new He(e,t);let r,a;t.isEmpty()?(r=this.children_.remove(e),a=this.indexMap_.removeFromIndexes(i,this.children_)):(r=this.children_.insert(e,t),a=this.indexMap_.addToIndexes(i,this.children_));const l=r.isEmpty()?sc:this.priorityNode_;return new Re(r,l,a)}}updateChild(e,t){const i=Ge(e);if(i===null)return t;{he(Ge(e)!==".priority"||so(e)===1,".priority must be the last token in a path");const r=this.getImmediateChild(i).updateChild(At(e),t);return this.updateImmediateChild(i,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const t={};let i=0,r=0,a=!0;if(this.forEachChild(Ft,(l,d)=>{t[l]=d.val(e),i++,a&&Re.INTEGER_REGEXP_.test(l)?r=Math.max(r,Number(l)):a=!1}),!e&&a&&r<2*i){const l=[];for(const d in t)l[d]=t[d];return l}else return e&&!this.getPriority().isEmpty()&&(t[".priority"]=this.getPriority().val()),t}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+hR(this.getPriority().val())+":"),this.forEachChild(Ft,(t,i)=>{const r=i.hash();r!==""&&(e+=":"+t+":"+r)}),this.lazyHash_=e===""?"":Hb(e)}return this.lazyHash_}getPredecessorChildName(e,t,i){const r=this.resolveIndex_(i);if(r){const a=r.getPredecessorKey(new He(e,t));return a?a.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new He(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const i=t.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new He(t,this.children_.get(t)):null}forEachChild(e,t){const i=this.resolveIndex_(e);return i?i.inorderTraversal(r=>t(r.name,r.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getIteratorFrom(e,r=>r);{const r=this.children_.getIteratorFrom(e.name,He.Wrap);let a=r.peek();for(;a!=null&&t.compare(a,e)<0;)r.getNext(),a=r.peek();return r}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const i=this.resolveIndex_(t);if(i)return i.getReverseIteratorFrom(e,r=>r);{const r=this.children_.getReverseIteratorFrom(e.name,He.Wrap);let a=r.peek();for(;a!=null&&t.compare(a,e)>0;)r.getNext(),a=r.peek();return r}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===Xc?-1:0}withIndex(e){if(e===gl||this.indexMap_.hasIndex(e))return this;{const t=this.indexMap_.addIndex(e,this.children_);return new Re(this.children_,this.priorityNode_,t)}}isIndexed(e){return e===gl||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority()))if(this.children_.count()===t.children_.count()){const i=this.getIterator(Ft),r=t.getIterator(Ft);let a=i.getNext(),l=r.getNext();for(;a&&l;){if(a.name!==l.name||!a.node.equals(l.node))return!1;a=i.getNext(),l=r.getNext()}return a===null&&l===null}else return!1;else return!1}}resolveIndex_(e){return e===gl?null:this.indexMap_.get(e.toString())}}Re.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class W4 extends Re{constructor(){super(new Yn(av),Re.EMPTY_NODE,zs.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Re.EMPTY_NODE}isEmpty(){return!1}}const Xc=new W4;Object.defineProperties(He,{MIN:{value:new He(Dl,Re.EMPTY_NODE)},MAX:{value:new He(ta,Xc)}});fR.__EMPTY_NODE=Re.EMPTY_NODE;dn.__childrenNodeConstructor=Re;z4(Xc);K4(Xc);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=!0;function rn(n,e=null){if(n===null)return Re.EMPTY_NODE;if(typeof n=="object"&&".priority"in n&&(e=n[".priority"]),he(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof n=="object"&&".value"in n&&n[".value"]!==null&&(n=n[".value"]),typeof n!="object"||".sv"in n){const t=n;return new dn(t,rn(e))}if(!(n instanceof Array)&&Q4){const t=[];let i=!1;if(Cn(n,(l,d)=>{if(l.substring(0,1)!=="."){const f=rn(d);f.isEmpty()||(i=i||!f.getPriority().isEmpty(),t.push(new He(l,f)))}}),t.length===0)return Re.EMPTY_NODE;const a=Sh(t,H4,l=>l.name,av);if(i){const l=Sh(t,Ft.getCompare());return new Re(a,rn(e),new zs({".priority":l},{".priority":Ft}))}else return new Re(a,rn(e),zs.Default)}else{let t=Re.EMPTY_NODE;return Cn(n,(i,r)=>{if(Cs(n,i)&&i.substring(0,1)!=="."){const a=rn(r);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(i,a))}}),t.updatePriority(rn(e))}}Y4(rn);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X4 extends _p{constructor(e){super(),this.indexPath_=e,he(!$e(e)&&Ge(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const i=this.extractChild(e.node),r=this.extractChild(t.node),a=i.compareTo(r);return a===0?fa(e.name,t.name):a}makePost(e,t){const i=rn(e),r=Re.EMPTY_NODE.updateChild(this.indexPath_,i);return new He(t,r)}maxPost(){const e=Re.EMPTY_NODE.updateChild(this.indexPath_,Xc);return new He(ta,e)}toString(){return Pc(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z4 extends _p{compare(e,t){const i=e.node.compareTo(t.node);return i===0?fa(e.name,t.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return He.MIN}maxPost(){return He.MAX}makePost(e,t){const i=rn(e);return new He(t,i)}toString(){return".value"}}const eU=new Z4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(n){return{type:"value",snapshotNode:n}}function kl(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Lc(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Vc(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}function tU(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e){this.index_=e}updateChild(e,t,i,r,a,l){he(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(r).equals(i.getChild(r))&&d.isEmpty()===i.isEmpty()||(l!=null&&(i.isEmpty()?e.hasChild(t)?l.trackChildChange(Lc(t,d)):he(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(kl(t,i)):l.trackChildChange(Vc(t,i,d))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(t,i).withIndex(this.index_)}updateFullNode(e,t,i){return i!=null&&(e.isLeafNode()||e.forEachChild(Ft,(r,a)=>{t.hasChild(r)||i.trackChildChange(Lc(r,a))}),t.isLeafNode()||t.forEachChild(Ft,(r,a)=>{if(e.hasChild(r)){const l=e.getImmediateChild(r);l.equals(a)||i.trackChildChange(Vc(r,a,l))}else i.trackChildChange(kl(r,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Re.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.indexedFilter_=new lv(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Uc.getStartPost_(e),this.endPost_=Uc.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&i}updateChild(e,t,i,r,a,l){return this.matches(new He(t,i))||(i=Re.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,i,r,a,l)}updateFullNode(e,t,i){t.isLeafNode()&&(t=Re.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(Re.EMPTY_NODE);const a=this;return t.forEachChild(Ft,(l,d)=>{a.matches(new He(l,d))||(r=r.updateImmediateChild(l,Re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nU{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=t=>{const i=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Uc(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,i,r,a,l){return this.rangedFilter_.matches(new He(t,i))||(i=Re.EMPTY_NODE),e.getImmediateChild(t).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,i,r,a,l):this.fullLimitUpdateChild_(e,t,i,a,l)}updateFullNode(e,t,i){let r;if(t.isLeafNode()||t.isEmpty())r=Re.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<t.numChildren()&&t.isIndexed(this.index_)){r=Re.EMPTY_NODE.withIndex(this.index_);let a;this.reverse_?a=t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a=t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const d=a.getNext();if(this.withinDirectionalStart(d))if(this.withinDirectionalEnd(d))r=r.updateImmediateChild(d.name,d.node),l++;else break;else continue}}else{r=t.withIndex(this.index_),r=r.updatePriority(Re.EMPTY_NODE);let a;this.reverse_?a=r.getReverseIterator(this.index_):a=r.getIterator(this.index_);let l=0;for(;a.hasNext();){const d=a.getNext();l<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?l++:r=r.updateImmediateChild(d.name,Re.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,i)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,i,r,a){let l;if(this.reverse_){const T=this.index_.getCompare();l=(E,I)=>T(I,E)}else l=this.index_.getCompare();const d=e;he(d.numChildren()===this.limit_,"");const f=new He(t,i),h=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),y=this.rangedFilter_.matches(f);if(d.hasChild(t)){const T=d.getImmediateChild(t);let E=r.getChildAfterChild(this.index_,h,this.reverse_);for(;E!=null&&(E.name===t||d.hasChild(E.name));)E=r.getChildAfterChild(this.index_,E,this.reverse_);const I=E==null?1:l(E,f);if(y&&!i.isEmpty()&&I>=0)return a!=null&&a.trackChildChange(Vc(t,i,T)),d.updateImmediateChild(t,i);{a!=null&&a.trackChildChange(Lc(t,T));const U=d.updateImmediateChild(t,Re.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(a!=null&&a.trackChildChange(kl(E.name,E.node)),U.updateImmediateChild(E.name,E.node)):U}}else return i.isEmpty()?e:y&&l(h,f)>=0?(a!=null&&(a.trackChildChange(Lc(h.name,h.node)),a.trackChildChange(kl(t,i))),d.updateImmediateChild(t,i).updateImmediateChild(h.name,Re.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uv{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ft}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return he(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return he(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Dl}hasEnd(){return this.endSet_}getIndexEndValue(){return he(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return he(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ta}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return he(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ft}copy(){const e=new uv;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function iU(n){return n.loadsAllData()?new lv(n.getIndex()):n.hasLimit()?new nU(n):new Uc(n)}function pw(n){const e={};if(n.isDefault())return e;let t;if(n.index_===Ft?t="$priority":n.index_===eU?t="$value":n.index_===gl?t="$key":(he(n.index_ instanceof X4,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=on(t),n.startSet_){const i=n.startAfterSet_?"startAfter":"startAt";e[i]=on(n.indexStartValue_),n.startNameSet_&&(e[i]+=","+on(n.indexStartName_))}if(n.endSet_){const i=n.endBeforeSet_?"endBefore":"endAt";e[i]=on(n.indexEndValue_),n.endNameSet_&&(e[i]+=","+on(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function mw(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;t===""&&(n.isViewFromLeft()?t="l":t="r"),e.vf=t}return n.index_!==Ft&&(e.i=n.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ch extends lR{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return t!==void 0?"tag$"+t:(he(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,t,i,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=i,this.appCheckTokenProvider_=r,this.log_=Qc("p:rest:"),this.listens_={}}listen(e,t,i,r){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=Ch.getListenId_(e,i),d={};this.listens_[l]=d;const f=pw(e._queryParams);this.restRequest_(a+".json",f,(h,y)=>{let T=y;if(h===404&&(T=null,h=null),h===null&&this.onDataUpdate_(a,T,!1,i),wl(this.listens_,l)===d){let E;h?h===401?E="permission_denied":E="rest_error:"+h:E="ok",r(E,null)}})}unlisten(e,t){const i=Ch.getListenId_(e,t);delete this.listens_[i]}get(e){const t=pw(e._queryParams),i=e._path.toString(),r=new Gc;return this.restRequest_(i+".json",t,(a,l)=>{let d=l;a===404&&(d=null,a=null),a===null?(this.onDataUpdate_(i,d,!1,null),r.resolve(d)):r.reject(new Error(d))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},i){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,a])=>{r&&r.accessToken&&(t.auth=r.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Fl(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(i&&d.readyState===4){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let f=null;if(d.status>=200&&d.status<300){try{f=wc(d.responseText)}catch{Pn("Failed to parse JSON response for "+l+": "+d.responseText)}i(null,f)}else d.status!==401&&d.status!==404&&Pn("Got unsuccessful REST response for "+l+" Status: "+d.status),i(d.status);i=null}},d.open("GET",l,!0),d.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sU{constructor(){this.rootNode_=Re.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(){return{value:null,children:new Map}}function yR(n,e,t){if($e(e))n.value=t,n.children.clear();else if(n.value!==null)n.value=n.value.updateChild(e,t);else{const i=Ge(e);n.children.has(i)||n.children.set(i,wh());const r=n.children.get(i);e=At(e),yR(r,e,t)}}function G_(n,e,t){n.value!==null?t(e,n.value):rU(n,(i,r)=>{const a=new vt(e.toString()+"/"+i);G_(r,a,t)})}function rU(n,e){n.children.forEach((t,i)=>{e(i,t)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oU{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t={...e};return this.last_&&Cn(this.last_,(i,r)=>{t[i]=t[i]-r}),this.last_=e,t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gw=10*1e3,aU=30*1e3,lU=300*1e3;class uU{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new oU(e);const i=gw+(aU-gw)*Math.random();_c(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),t={};let i=!1;Cn(e,(r,a)=>{a>0&&Cs(this.statsToReport_,r)&&(t[r]=a,i=!0)}),i&&this.server_.reportStats(t),_c(this.reportStats_.bind(this),Math.floor(Math.random()*2*lU))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oi;(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(Oi||(Oi={}));function cv(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function dv(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function fv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,t,i){this.path=e,this.affectedTree=t,this.revert=i,this.type=Oi.ACK_USER_WRITE,this.source=cv()}operationForChild(e){if($e(this.path)){if(this.affectedTree.value!=null)return he(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new vt(e));return new Ah(st(),t,this.revert)}}else return he(Ge(this.path)===e,"operationForChild called for unrelated child."),new Ah(At(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(e,t){this.source=e,this.path=t,this.type=Oi.LISTEN_COMPLETE}operationForChild(e){return $e(this.path)?new Oc(this.source,st()):new Oc(this.source,At(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(e,t,i){this.source=e,this.path=t,this.snap=i,this.type=Oi.OVERWRITE}operationForChild(e){return $e(this.path)?new na(this.source,st(),this.snap.getImmediateChild(e)):new na(this.source,At(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t,i){this.source=e,this.path=t,this.children=i,this.type=Oi.MERGE}operationForChild(e){if($e(this.path)){const t=this.children.subtree(new vt(e));return t.isEmpty()?null:t.value?new na(this.source,st(),t.value):new Pl(this.source,st(),t)}else return he(Ge(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Pl(this.source,At(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e,t,i){this.node_=e,this.fullyInitialized_=t,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if($e(e))return this.isFullyInitialized()&&!this.filtered_;const t=Ge(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cU{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function dU(n,e,t,i){const r=[],a=[];return e.forEach(l=>{l.type==="child_changed"&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(tU(l.childName,l.snapshotNode))}),rc(n,r,"child_removed",e,i,t),rc(n,r,"child_added",e,i,t),rc(n,r,"child_moved",a,i,t),rc(n,r,"child_changed",e,i,t),rc(n,r,"value",e,i,t),r}function rc(n,e,t,i,r,a){const l=i.filter(d=>d.type===t);l.sort((d,f)=>hU(n,d,f)),l.forEach(d=>{const f=fU(n,d,a);r.forEach(h=>{h.respondsTo(d.type)&&e.push(h.createEvent(f,n.query_))})})}function fU(n,e,t){return e.type==="value"||e.type==="child_removed"||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}function hU(n,e,t){if(e.childName==null||t.childName==null)throw Ol("Should only compare child_ events.");const i=new He(e.childName,e.snapshotNode),r=new He(t.childName,t.snapshotNode);return n.index_.compare(i,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yp(n,e){return{eventCache:n,serverCache:e}}function yc(n,e,t,i){return yp(new ro(e,t,i),n.serverCache)}function vR(n,e,t,i){return yp(n.eventCache,new ro(e,t,i))}function Ih(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function ia(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let n_;const pU=()=>(n_||(n_=new Yn(XV)),n_);class wt{static fromObject(e){let t=new wt(null);return Cn(e,(i,r)=>{t=t.set(new vt(i),r)}),t}constructor(e,t=pU()){this.value=e,this.children=t}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(this.value!=null&&t(this.value))return{path:st(),value:this.value};if($e(e))return null;{const i=Ge(e),r=this.children.get(i);if(r!==null){const a=r.findRootMostMatchingPathAndValue(At(e),t);return a!=null?{path:Ut(new vt(i),a.path),value:a.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if($e(e))return this;{const t=Ge(e),i=this.children.get(t);return i!==null?i.subtree(At(e)):new wt(null)}}set(e,t){if($e(e))return new wt(t,this.children);{const i=Ge(e),a=(this.children.get(i)||new wt(null)).set(At(e),t),l=this.children.insert(i,a);return new wt(this.value,l)}}remove(e){if($e(e))return this.children.isEmpty()?new wt(null):new wt(null,this.children);{const t=Ge(e),i=this.children.get(t);if(i){const r=i.remove(At(e));let a;return r.isEmpty()?a=this.children.remove(t):a=this.children.insert(t,r),this.value===null&&a.isEmpty()?new wt(null):new wt(this.value,a)}else return this}}get(e){if($e(e))return this.value;{const t=Ge(e),i=this.children.get(t);return i?i.get(At(e)):null}}setTree(e,t){if($e(e))return t;{const i=Ge(e),a=(this.children.get(i)||new wt(null)).setTree(At(e),t);let l;return a.isEmpty()?l=this.children.remove(i):l=this.children.insert(i,a),new wt(this.value,l)}}fold(e){return this.fold_(st(),e)}fold_(e,t){const i={};return this.children.inorderTraversal((r,a)=>{i[r]=a.fold_(Ut(e,r),t)}),t(e,this.value,i)}findOnPath(e,t){return this.findOnPath_(e,st(),t)}findOnPath_(e,t,i){const r=this.value?i(t,this.value):!1;if(r)return r;if($e(e))return null;{const a=Ge(e),l=this.children.get(a);return l?l.findOnPath_(At(e),Ut(t,a),i):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,st(),t)}foreachOnPath_(e,t,i){if($e(e))return this;{this.value&&i(t,this.value);const r=Ge(e),a=this.children.get(r);return a?a.foreachOnPath_(At(e),Ut(t,r),i):new wt(null)}}foreach(e){this.foreach_(st(),e)}foreach_(e,t){this.children.inorderTraversal((i,r)=>{r.foreach_(Ut(e,i),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,i)=>{i.value&&e(t,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this.writeTree_=e}static empty(){return new Gi(new wt(null))}}function vc(n,e,t){if($e(e))return new Gi(new wt(t));{const i=n.writeTree_.findRootMostValueAndPath(e);if(i!=null){const r=i.path;let a=i.value;const l=kn(r,e);return a=a.updateChild(l,t),new Gi(n.writeTree_.set(r,a))}else{const r=new wt(t),a=n.writeTree_.setTree(e,r);return new Gi(a)}}}function H_(n,e,t){let i=n;return Cn(t,(r,a)=>{i=vc(i,Ut(e,r),a)}),i}function _w(n,e){if($e(e))return Gi.empty();{const t=n.writeTree_.setTree(e,new wt(null));return new Gi(t)}}function z_(n,e){return ha(n,e)!=null}function ha(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return t!=null?n.writeTree_.get(t.path).getChild(kn(t.path,e)):null}function yw(n){const e=[],t=n.writeTree_.value;return t!=null?t.isLeafNode()||t.forEachChild(Ft,(i,r)=>{e.push(new He(i,r))}):n.writeTree_.children.inorderTraversal((i,r)=>{r.value!=null&&e.push(new He(i,r.value))}),e}function Wr(n,e){if($e(e))return n;{const t=ha(n,e);return t!=null?new Gi(new wt(t)):new Gi(n.writeTree_.subtree(e))}}function Y_(n){return n.writeTree_.isEmpty()}function Ll(n,e){return TR(st(),n.writeTree_,e)}function TR(n,e,t){if(e.value!=null)return t.updateChild(n,e.value);{let i=null;return e.children.inorderTraversal((r,a)=>{r===".priority"?(he(a.value!==null,"Priority writes must always be leaf nodes"),i=a.value):t=TR(Ut(n,r),a,t)}),!t.getChild(n).isEmpty()&&i!==null&&(t=t.updateChild(Ut(n,".priority"),i)),t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vp(n,e){return wR(e,n)}function mU(n,e,t,i,r){he(i>n.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),n.allWrites.push({path:e,snap:t,writeId:i,visible:r}),r&&(n.visibleWrites=vc(n.visibleWrites,e,t)),n.lastWriteId=i}function gU(n,e,t,i){he(i>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:i,visible:!0}),n.visibleWrites=H_(n.visibleWrites,e,t),n.lastWriteId=i}function _U(n,e){for(let t=0;t<n.allWrites.length;t++){const i=n.allWrites[t];if(i.writeId===e)return i}return null}function yU(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);he(t>=0,"removeWrite called with nonexistent writeId.");const i=n.allWrites[t];n.allWrites.splice(t,1);let r=i.visible,a=!1,l=n.allWrites.length-1;for(;r&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&vU(d,i.path)?r=!1:Ti(i.path,d.path)&&(a=!0)),l--}if(r){if(a)return TU(n),!0;if(i.snap)n.visibleWrites=_w(n.visibleWrites,i.path);else{const d=i.children;Cn(d,f=>{n.visibleWrites=_w(n.visibleWrites,Ut(i.path,f))})}return!0}else return!1}function vU(n,e){if(n.snap)return Ti(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ti(Ut(n.path,t),e))return!0;return!1}function TU(n){n.visibleWrites=ER(n.allWrites,EU,st()),n.allWrites.length>0?n.lastWriteId=n.allWrites[n.allWrites.length-1].writeId:n.lastWriteId=-1}function EU(n){return n.visible}function ER(n,e,t){let i=Gi.empty();for(let r=0;r<n.length;++r){const a=n[r];if(e(a)){const l=a.path;let d;if(a.snap)Ti(t,l)?(d=kn(t,l),i=vc(i,d,a.snap)):Ti(l,t)&&(d=kn(l,t),i=vc(i,st(),a.snap.getChild(d)));else if(a.children){if(Ti(t,l))d=kn(t,l),i=H_(i,d,a.children);else if(Ti(l,t))if(d=kn(l,t),$e(d))i=H_(i,st(),a.children);else{const f=wl(a.children,Ge(d));if(f){const h=f.getChild(At(d));i=vc(i,st(),h)}}}else throw Ol("WriteRecord should have .snap or .children")}}return i}function SR(n,e,t,i,r){if(!i&&!r){const a=ha(n.visibleWrites,e);if(a!=null)return a;{const l=Wr(n.visibleWrites,e);if(Y_(l))return t;if(t==null&&!z_(l,st()))return null;{const d=t||Re.EMPTY_NODE;return Ll(l,d)}}}else{const a=Wr(n.visibleWrites,e);if(!r&&Y_(a))return t;if(!r&&t==null&&!z_(a,st()))return null;{const l=function(h){return(h.visible||r)&&(!i||!~i.indexOf(h.writeId))&&(Ti(h.path,e)||Ti(e,h.path))},d=ER(n.allWrites,l,e),f=t||Re.EMPTY_NODE;return Ll(d,f)}}}function SU(n,e,t){let i=Re.EMPTY_NODE;const r=ha(n.visibleWrites,e);if(r)return r.isLeafNode()||r.forEachChild(Ft,(a,l)=>{i=i.updateImmediateChild(a,l)}),i;if(t){const a=Wr(n.visibleWrites,e);return t.forEachChild(Ft,(l,d)=>{const f=Ll(Wr(a,new vt(l)),d);i=i.updateImmediateChild(l,f)}),yw(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}else{const a=Wr(n.visibleWrites,e);return yw(a).forEach(l=>{i=i.updateImmediateChild(l.name,l.node)}),i}}function CU(n,e,t,i,r){he(i||r,"Either existingEventSnap or existingServerSnap must exist");const a=Ut(e,t);if(z_(n.visibleWrites,a))return null;{const l=Wr(n.visibleWrites,a);return Y_(l)?r.getChild(t):Ll(l,r.getChild(t))}}function wU(n,e,t,i){const r=Ut(e,t),a=ha(n.visibleWrites,r);if(a!=null)return a;if(i.isCompleteForChild(t)){const l=Wr(n.visibleWrites,r);return Ll(l,i.getNode().getImmediateChild(t))}else return null}function AU(n,e){return ha(n.visibleWrites,e)}function IU(n,e,t,i,r,a,l){let d;const f=Wr(n.visibleWrites,e),h=ha(f,st());if(h!=null)d=h;else if(t!=null)d=Ll(f,t);else return[];if(d=d.withIndex(l),!d.isEmpty()&&!d.isLeafNode()){const y=[],T=l.getCompare(),E=a?d.getReverseIteratorFrom(i,l):d.getIteratorFrom(i,l);let I=E.getNext();for(;I&&y.length<r;)T(I,i)!==0&&y.push(I),I=E.getNext();return y}else return[]}function xU(){return{visibleWrites:Gi.empty(),allWrites:[],lastWriteId:-1}}function xh(n,e,t,i){return SR(n.writeTree,n.treePath,e,t,i)}function hv(n,e){return SU(n.writeTree,n.treePath,e)}function vw(n,e,t,i){return CU(n.writeTree,n.treePath,e,t,i)}function bh(n,e){return AU(n.writeTree,Ut(n.treePath,e))}function bU(n,e,t,i,r,a){return IU(n.writeTree,n.treePath,e,t,i,r,a)}function pv(n,e,t){return wU(n.writeTree,n.treePath,e,t)}function CR(n,e){return wR(Ut(n.treePath,e),n.writeTree)}function wR(n,e){return{treePath:n,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,i=e.childName;he(t==="child_added"||t==="child_changed"||t==="child_removed","Only child changes supported for tracking"),he(i!==".priority","Only non-priority child changes can be tracked.");const r=this.changeMap.get(i);if(r){const a=r.type;if(t==="child_added"&&a==="child_removed")this.changeMap.set(i,Vc(i,e.snapshotNode,r.snapshotNode));else if(t==="child_removed"&&a==="child_added")this.changeMap.delete(i);else if(t==="child_removed"&&a==="child_changed")this.changeMap.set(i,Lc(i,r.oldSnap));else if(t==="child_changed"&&a==="child_added")this.changeMap.set(i,kl(i,e.snapshotNode));else if(t==="child_changed"&&a==="child_changed")this.changeMap.set(i,Vc(i,e.snapshotNode,r.oldSnap));else throw Ol("Illegal combination of changes: "+e+" occurred after "+r)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NU{getCompleteChild(e){return null}getChildAfterChild(e,t,i){return null}}const AR=new NU;class mv{constructor(e,t,i=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=i}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new ro(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return pv(this.writes_,e,i)}}getChildAfterChild(e,t,i){const r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:ia(this.viewCache_),a=bU(this.writes_,r,t,1,i,e);return a.length===0?null:a[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MU(n){return{filter:n}}function DU(n,e){he(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),he(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}function kU(n,e,t,i,r){const a=new RU;let l,d;if(t.type===Oi.OVERWRITE){const h=t;h.source.fromUser?l=K_(n,e,h.path,h.snap,i,r,a):(he(h.source.fromServer,"Unknown source."),d=h.source.tagged||e.serverCache.isFiltered()&&!$e(h.path),l=Rh(n,e,h.path,h.snap,i,r,d,a))}else if(t.type===Oi.MERGE){const h=t;h.source.fromUser?l=LU(n,e,h.path,h.children,i,r,a):(he(h.source.fromServer,"Unknown source."),d=h.source.tagged||e.serverCache.isFiltered(),l=$_(n,e,h.path,h.children,i,r,d,a))}else if(t.type===Oi.ACK_USER_WRITE){const h=t;h.revert?l=OU(n,e,h.path,i,r,a):l=VU(n,e,h.path,h.affectedTree,i,r,a)}else if(t.type===Oi.LISTEN_COMPLETE)l=UU(n,e,t.path,i,a);else throw Ol("Unknown operation type: "+t.type);const f=a.getChanges();return PU(e,l,f),{viewCache:l,changes:f}}function PU(n,e,t){const i=e.eventCache;if(i.isFullyInitialized()){const r=i.getNode().isLeafNode()||i.getNode().isEmpty(),a=Ih(n);(t.length>0||!n.eventCache.isFullyInitialized()||r&&!i.getNode().equals(a)||!i.getNode().getPriority().equals(a.getPriority()))&&t.push(_R(Ih(e)))}}function IR(n,e,t,i,r,a){const l=e.eventCache;if(bh(i,t)!=null)return e;{let d,f;if($e(t))if(he(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const h=ia(e),y=h instanceof Re?h:Re.EMPTY_NODE,T=hv(i,y);d=n.filter.updateFullNode(e.eventCache.getNode(),T,a)}else{const h=xh(i,ia(e));d=n.filter.updateFullNode(e.eventCache.getNode(),h,a)}else{const h=Ge(t);if(h===".priority"){he(so(t)===1,"Can't have a priority with additional path components");const y=l.getNode();f=e.serverCache.getNode();const T=vw(i,t,y,f);T!=null?d=n.filter.updatePriority(y,T):d=l.getNode()}else{const y=At(t);let T;if(l.isCompleteForChild(h)){f=e.serverCache.getNode();const E=vw(i,t,l.getNode(),f);E!=null?T=l.getNode().getImmediateChild(h).updateChild(y,E):T=l.getNode().getImmediateChild(h)}else T=pv(i,h,e.serverCache);T!=null?d=n.filter.updateChild(l.getNode(),h,T,y,r,a):d=l.getNode()}}return yc(e,d,l.isFullyInitialized()||$e(t),n.filter.filtersNodes())}}function Rh(n,e,t,i,r,a,l,d){const f=e.serverCache;let h;const y=l?n.filter:n.filter.getIndexedFilter();if($e(t))h=y.updateFullNode(f.getNode(),i,null);else if(y.filtersNodes()&&!f.isFiltered()){const I=f.getNode().updateChild(t,i);h=y.updateFullNode(f.getNode(),I,null)}else{const I=Ge(t);if(!f.isCompleteForPath(t)&&so(t)>1)return e;const N=At(t),O=f.getNode().getImmediateChild(I).updateChild(N,i);I===".priority"?h=y.updatePriority(f.getNode(),O):h=y.updateChild(f.getNode(),I,O,N,AR,null)}const T=vR(e,h,f.isFullyInitialized()||$e(t),y.filtersNodes()),E=new mv(r,T,a);return IR(n,T,t,r,E,d)}function K_(n,e,t,i,r,a,l){const d=e.eventCache;let f,h;const y=new mv(r,e,a);if($e(t))h=n.filter.updateFullNode(e.eventCache.getNode(),i,l),f=yc(e,h,!0,n.filter.filtersNodes());else{const T=Ge(t);if(T===".priority")h=n.filter.updatePriority(e.eventCache.getNode(),i),f=yc(e,h,d.isFullyInitialized(),d.isFiltered());else{const E=At(t),I=d.getNode().getImmediateChild(T);let N;if($e(E))N=i;else{const U=y.getCompleteChild(T);U!=null?sv(E)===".priority"&&U.getChild(cR(E)).isEmpty()?N=U:N=U.updateChild(E,i):N=Re.EMPTY_NODE}if(I.equals(N))f=e;else{const U=n.filter.updateChild(d.getNode(),T,N,E,y,l);f=yc(e,U,d.isFullyInitialized(),n.filter.filtersNodes())}}}return f}function Tw(n,e){return n.eventCache.isCompleteForChild(e)}function LU(n,e,t,i,r,a,l){let d=e;return i.foreach((f,h)=>{const y=Ut(t,f);Tw(e,Ge(y))&&(d=K_(n,d,y,h,r,a,l))}),i.foreach((f,h)=>{const y=Ut(t,f);Tw(e,Ge(y))||(d=K_(n,d,y,h,r,a,l))}),d}function Ew(n,e,t){return t.foreach((i,r)=>{e=e.updateChild(i,r)}),e}function $_(n,e,t,i,r,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let f=e,h;$e(t)?h=i:h=new wt(null).setTree(t,i);const y=e.serverCache.getNode();return h.children.inorderTraversal((T,E)=>{if(y.hasChild(T)){const I=e.serverCache.getNode().getImmediateChild(T),N=Ew(n,I,E);f=Rh(n,f,new vt(T),N,r,a,l,d)}}),h.children.inorderTraversal((T,E)=>{const I=!e.serverCache.isCompleteForChild(T)&&E.value===null;if(!y.hasChild(T)&&!I){const N=e.serverCache.getNode().getImmediateChild(T),U=Ew(n,N,E);f=Rh(n,f,new vt(T),U,r,a,l,d)}}),f}function VU(n,e,t,i,r,a,l){if(bh(r,t)!=null)return e;const d=e.serverCache.isFiltered(),f=e.serverCache;if(i.value!=null){if($e(t)&&f.isFullyInitialized()||f.isCompleteForPath(t))return Rh(n,e,t,f.getNode().getChild(t),r,a,d,l);if($e(t)){let h=new wt(null);return f.getNode().forEachChild(gl,(y,T)=>{h=h.set(new vt(y),T)}),$_(n,e,t,h,r,a,d,l)}else return e}else{let h=new wt(null);return i.foreach((y,T)=>{const E=Ut(t,y);f.isCompleteForPath(E)&&(h=h.set(y,f.getNode().getChild(E)))}),$_(n,e,t,h,r,a,d,l)}}function UU(n,e,t,i,r){const a=e.serverCache,l=vR(e,a.getNode(),a.isFullyInitialized()||$e(t),a.isFiltered());return IR(n,l,t,i,AR,r)}function OU(n,e,t,i,r,a){let l;if(bh(i,t)!=null)return e;{const d=new mv(i,e,r),f=e.eventCache.getNode();let h;if($e(t)||Ge(t)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=xh(i,ia(e));else{const T=e.serverCache.getNode();he(T instanceof Re,"serverChildren would be complete if leaf node"),y=hv(i,T)}y=y,h=n.filter.updateFullNode(f,y,a)}else{const y=Ge(t);let T=pv(i,y,e.serverCache);T==null&&e.serverCache.isCompleteForChild(y)&&(T=f.getImmediateChild(y)),T!=null?h=n.filter.updateChild(f,y,T,At(t),d,a):e.eventCache.getNode().hasChild(y)?h=n.filter.updateChild(f,y,Re.EMPTY_NODE,At(t),d,a):h=f,h.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=xh(i,ia(e)),l.isLeafNode()&&(h=n.filter.updateFullNode(h,l,a)))}return l=e.serverCache.isFullyInitialized()||bh(i,st())!=null,yc(e,h,l,n.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,r=new lv(i.getIndex()),a=iU(i);this.processor_=MU(a);const l=t.serverCache,d=t.eventCache,f=r.updateFullNode(Re.EMPTY_NODE,l.getNode(),null),h=a.updateFullNode(Re.EMPTY_NODE,d.getNode(),null),y=new ro(f,l.isFullyInitialized(),r.filtersNodes()),T=new ro(h,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=yp(T,y),this.eventGenerator_=new cU(this.query_)}get query(){return this.query_}}function qU(n){return n.viewCache_.serverCache.getNode()}function BU(n){return Ih(n.viewCache_)}function GU(n,e){const t=ia(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!$e(e)&&!t.getImmediateChild(Ge(e)).isEmpty())?t.getChild(e):null}function Sw(n){return n.eventRegistrations_.length===0}function HU(n,e){n.eventRegistrations_.push(e)}function Cw(n,e,t){const i=[];if(t){he(e==null,"A cancel should cancel all event registrations.");const r=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,r);l&&i.push(l)})}if(e){let r=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(!l.matches(e))r.push(l);else if(e.hasAnyCallback()){r=r.concat(n.eventRegistrations_.slice(a+1));break}}n.eventRegistrations_=r}else n.eventRegistrations_=[];return i}function ww(n,e,t,i){e.type===Oi.MERGE&&e.source.queryId!==null&&(he(ia(n.viewCache_),"We should always have a full cache before handling merges"),he(Ih(n.viewCache_),"Missing event cache, even though we have a server cache"));const r=n.viewCache_,a=kU(n.processor_,r,e,t,i);return DU(n.processor_,a.viewCache),he(a.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,xR(n,a.changes,a.viewCache.eventCache.getNode(),null)}function zU(n,e){const t=n.viewCache_.eventCache,i=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Ft,(a,l)=>{i.push(kl(a,l))}),t.isFullyInitialized()&&i.push(_R(t.getNode())),xR(n,i,t.getNode(),e)}function xR(n,e,t,i){const r=i?[i]:n.eventRegistrations_;return dU(n.eventGenerator_,e,t,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nh;class bR{constructor(){this.views=new Map}}function YU(n){he(!Nh,"__referenceConstructor has already been defined"),Nh=n}function KU(){return he(Nh,"Reference.ts has not been loaded"),Nh}function $U(n){return n.views.size===0}function gv(n,e,t,i){const r=e.source.queryId;if(r!==null){const a=n.views.get(r);return he(a!=null,"SyncTree gave us an op for an invalid query."),ww(a,e,t,i)}else{let a=[];for(const l of n.views.values())a=a.concat(ww(l,e,t,i));return a}}function RR(n,e,t,i,r){const a=e._queryIdentifier,l=n.views.get(a);if(!l){let d=xh(t,r?i:null),f=!1;d?f=!0:i instanceof Re?(d=hv(t,i),f=!1):(d=Re.EMPTY_NODE,f=!1);const h=yp(new ro(d,f,!1),new ro(i,r,!1));return new FU(e,h)}return l}function jU(n,e,t,i,r,a){const l=RR(n,e,i,r,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),HU(l,t),zU(l,t)}function JU(n,e,t,i){const r=e._queryIdentifier,a=[];let l=[];const d=oo(n);if(r==="default")for(const[f,h]of n.views.entries())l=l.concat(Cw(h,t,i)),Sw(h)&&(n.views.delete(f),h.query._queryParams.loadsAllData()||a.push(h.query));else{const f=n.views.get(r);f&&(l=l.concat(Cw(f,t,i)),Sw(f)&&(n.views.delete(r),f.query._queryParams.loadsAllData()||a.push(f.query)))}return d&&!oo(n)&&a.push(new(KU())(e._repo,e._path)),{removed:a,events:l}}function NR(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function Qr(n,e){let t=null;for(const i of n.views.values())t=t||GU(i,e);return t}function MR(n,e){if(e._queryParams.loadsAllData())return Tp(n);{const i=e._queryIdentifier;return n.views.get(i)}}function DR(n,e){return MR(n,e)!=null}function oo(n){return Tp(n)!=null}function Tp(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh;function WU(n){he(!Mh,"__referenceConstructor has already been defined"),Mh=n}function QU(){return he(Mh,"Reference.ts has not been loaded"),Mh}let XU=1;class Aw{constructor(e){this.listenProvider_=e,this.syncPointTree_=new wt(null),this.pendingWriteTree_=xU(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function kR(n,e,t,i,r){return mU(n.pendingWriteTree_,e,t,i,r),r?$l(n,new na(cv(),e,t)):[]}function ZU(n,e,t,i){gU(n.pendingWriteTree_,e,t,i);const r=wt.fromObject(t);return $l(n,new Pl(cv(),e,r))}function Gr(n,e,t=!1){const i=_U(n.pendingWriteTree_,e);if(yU(n.pendingWriteTree_,e)){let a=new wt(null);return i.snap!=null?a=a.set(st(),!0):Cn(i.children,l=>{a=a.set(new vt(l),!0)}),$l(n,new Ah(i.path,a,t))}else return[]}function Zc(n,e,t){return $l(n,new na(dv(),e,t))}function eO(n,e,t){const i=wt.fromObject(t);return $l(n,new Pl(dv(),e,i))}function tO(n,e){return $l(n,new Oc(dv(),e))}function nO(n,e,t){const i=yv(n,t);if(i){const r=vv(i),a=r.path,l=r.queryId,d=kn(a,e),f=new Oc(fv(l),d);return Tv(n,a,f)}else return[]}function Dh(n,e,t,i,r=!1){const a=e._path,l=n.syncPointTree_.get(a);let d=[];if(l&&(e._queryIdentifier==="default"||DR(l,e))){const f=JU(l,e,t,i);$U(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const h=f.removed;if(d=f.events,!r){const y=h.findIndex(E=>E._queryParams.loadsAllData())!==-1,T=n.syncPointTree_.findOnPath(a,(E,I)=>oo(I));if(y&&!T){const E=n.syncPointTree_.subtree(a);if(!E.isEmpty()){const I=rO(E);for(let N=0;N<I.length;++N){const U=I[N],O=U.query,K=UR(n,U);n.listenProvider_.startListening(Tc(O),Fc(n,O),K.hashFn,K.onComplete)}}}!T&&h.length>0&&!i&&(y?n.listenProvider_.stopListening(Tc(e),null):h.forEach(E=>{const I=n.queryToTagMap.get(Ep(E));n.listenProvider_.stopListening(Tc(E),I)}))}oO(n,h)}return d}function PR(n,e,t,i){const r=yv(n,i);if(r!=null){const a=vv(r),l=a.path,d=a.queryId,f=kn(l,e),h=new na(fv(d),f,t);return Tv(n,l,h)}else return[]}function iO(n,e,t,i){const r=yv(n,i);if(r){const a=vv(r),l=a.path,d=a.queryId,f=kn(l,e),h=wt.fromObject(t),y=new Pl(fv(d),f,h);return Tv(n,l,y)}else return[]}function j_(n,e,t,i=!1){const r=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(r,(E,I)=>{const N=kn(E,r);a=a||Qr(I,N),l=l||oo(I)});let d=n.syncPointTree_.get(r);d?(l=l||oo(d),a=a||Qr(d,st())):(d=new bR,n.syncPointTree_=n.syncPointTree_.set(r,d));let f;a!=null?f=!0:(f=!1,a=Re.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((I,N)=>{const U=Qr(N,st());U&&(a=a.updateImmediateChild(I,U))}));const h=DR(d,e);if(!h&&!e._queryParams.loadsAllData()){const E=Ep(e);he(!n.queryToTagMap.has(E),"View does not exist, but we have a tag");const I=aO();n.queryToTagMap.set(E,I),n.tagToQueryMap.set(I,E)}const y=vp(n.pendingWriteTree_,r);let T=jU(d,e,t,y,a,f);if(!h&&!l&&!i){const E=MR(d,e);T=T.concat(lO(n,e,E))}return T}function _v(n,e,t){const r=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const f=kn(l,e),h=Qr(d,f);if(h)return h});return SR(r,e,a,t,!0)}function sO(n,e){const t=e._path;let i=null;n.syncPointTree_.foreachOnPath(t,(h,y)=>{const T=kn(h,t);i=i||Qr(y,T)});let r=n.syncPointTree_.get(t);r?i=i||Qr(r,st()):(r=new bR,n.syncPointTree_=n.syncPointTree_.set(t,r));const a=i!=null,l=a?new ro(i,!0,!1):null,d=vp(n.pendingWriteTree_,e._path),f=RR(r,e,d,a?l.getNode():Re.EMPTY_NODE,a);return BU(f)}function $l(n,e){return LR(e,n.syncPointTree_,null,vp(n.pendingWriteTree_,st()))}function LR(n,e,t,i){if($e(n.path))return VR(n,e,t,i);{const r=e.get(st());t==null&&r!=null&&(t=Qr(r,st()));let a=[];const l=Ge(n.path),d=n.operationForChild(l),f=e.children.get(l);if(f&&d){const h=t?t.getImmediateChild(l):null,y=CR(i,l);a=a.concat(LR(d,f,h,y))}return r&&(a=a.concat(gv(r,n,i,t))),a}}function VR(n,e,t,i){const r=e.get(st());t==null&&r!=null&&(t=Qr(r,st()));let a=[];return e.children.inorderTraversal((l,d)=>{const f=t?t.getImmediateChild(l):null,h=CR(i,l),y=n.operationForChild(l);y&&(a=a.concat(VR(y,d,f,h)))}),r&&(a=a.concat(gv(r,n,i,t))),a}function UR(n,e){const t=e.query,i=Fc(n,t);return{hashFn:()=>(qU(e)||Re.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return i?nO(n,t._path,i):tO(n,t._path);{const a=t4(r,t);return Dh(n,t,null,a)}}}}function Fc(n,e){const t=Ep(e);return n.queryToTagMap.get(t)}function Ep(n){return n._path.toString()+"$"+n._queryIdentifier}function yv(n,e){return n.tagToQueryMap.get(e)}function vv(n){const e=n.indexOf("$");return he(e!==-1&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new vt(n.substr(0,e))}}function Tv(n,e,t){const i=n.syncPointTree_.get(e);he(i,"Missing sync point for query tag that we're tracking");const r=vp(n.pendingWriteTree_,e);return gv(i,t,r,null)}function rO(n){return n.fold((e,t,i)=>{if(t&&oo(t))return[Tp(t)];{let r=[];return t&&(r=NR(t)),Cn(i,(a,l)=>{r=r.concat(l)}),r}})}function Tc(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(QU())(n._repo,n._path):n}function oO(n,e){for(let t=0;t<e.length;++t){const i=e[t];if(!i._queryParams.loadsAllData()){const r=Ep(i),a=n.queryToTagMap.get(r);n.queryToTagMap.delete(r),n.tagToQueryMap.delete(a)}}}function aO(){return XU++}function lO(n,e,t){const i=e._path,r=Fc(n,e),a=UR(n,t),l=n.listenProvider_.startListening(Tc(e),r,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(i);if(r)he(!oo(d.value),"If we're adding a query, it shouldn't be shadowed");else{const f=d.fold((h,y,T)=>{if(!$e(h)&&y&&oo(y))return[Tp(y).query];{let E=[];return y&&(E=E.concat(NR(y).map(I=>I.query))),Cn(T,(I,N)=>{E=E.concat(N)}),E}});for(let h=0;h<f.length;++h){const y=f[h];n.listenProvider_.stopListening(Tc(y),Fc(n,y))}}return l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new Ev(t)}node(){return this.node_}}class Sv{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ut(this.path_,e);return new Sv(this.syncTree_,t)}node(){return _v(this.syncTree_,this.path_)}}const uO=function(n){return n=n||{},n.timestamp=n.timestamp||new Date().getTime(),n},Iw=function(n,e,t){if(!n||typeof n!="object")return n;if(he(".sv"in n,"Unexpected leaf node or priority contents"),typeof n[".sv"]=="string")return cO(n[".sv"],e,t);if(typeof n[".sv"]=="object")return dO(n[".sv"],e);he(!1,"Unexpected server value: "+JSON.stringify(n,null,2))},cO=function(n,e,t){switch(n){case"timestamp":return t.timestamp;default:he(!1,"Unexpected server value: "+n)}},dO=function(n,e,t){n.hasOwnProperty("increment")||he(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const i=n.increment;typeof i!="number"&&he(!1,"Unexpected increment value: "+i);const r=e.node();if(he(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return i;const l=r.getValue();return typeof l!="number"?i:l+i},OR=function(n,e,t,i){return Cv(e,new Sv(t,n),i)},FR=function(n,e,t){return Cv(n,new Ev(e),t)};function Cv(n,e,t){const i=n.getPriority().val(),r=Iw(i,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=Iw(l.getValue(),e,t);return d!==l.getValue()||r!==l.getPriority().val()?new dn(d,rn(r)):n}else{const l=n;return a=l,r!==l.getPriority().val()&&(a=a.updatePriority(new dn(r))),l.forEachChild(Ft,(d,f)=>{const h=Cv(f,e.getImmediateChild(d),t);h!==f&&(a=a.updateImmediateChild(d,h))}),a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(e="",t=null,i={children:{},childCount:0}){this.name=e,this.parent=t,this.node=i}}function Av(n,e){let t=e instanceof vt?e:new vt(e),i=n,r=Ge(t);for(;r!==null;){const a=wl(i.node.children,r)||{children:{},childCount:0};i=new wv(r,i,a),t=At(t),r=Ge(t)}return i}function jl(n){return n.node.value}function qR(n,e){n.node.value=e,J_(n)}function BR(n){return n.node.childCount>0}function fO(n){return jl(n)===void 0&&!BR(n)}function Sp(n,e){Cn(n.node.children,(t,i)=>{e(new wv(t,n,i))})}function GR(n,e,t,i){t&&e(n),Sp(n,r=>{GR(r,e,!0)})}function hO(n,e,t){let i=n.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function ed(n){return new vt(n.parent===null?n.name:ed(n.parent)+"/"+n.name)}function J_(n){n.parent!==null&&pO(n.parent,n.name,n)}function pO(n,e,t){const i=fO(t),r=Cs(n.node.children,e);i&&r?(delete n.node.children[e],n.node.childCount--,J_(n)):!i&&!r&&(n.node.children[e]=t.node,n.node.childCount++,J_(n))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mO=/[\[\].#$\/\u0000-\u001F\u007F]/,gO=/[\[\].#$\u0000-\u001F\u007F]/,i_=10*1024*1024,Iv=function(n){return typeof n=="string"&&n.length!==0&&!mO.test(n)},HR=function(n){return typeof n=="string"&&n.length!==0&&!gO.test(n)},_O=function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),HR(n)},yO=function(n){return n===null||typeof n=="string"||typeof n=="number"&&!Zy(n)||n&&typeof n=="object"&&Cs(n,".sv")},vO=function(n,e,t,i){Cp($h(n,"value"),e,t)},Cp=function(n,e,t){const i=t instanceof vt?new L4(t,n):t;if(e===void 0)throw new Error(n+"contains undefined "+Yo(i));if(typeof e=="function")throw new Error(n+"contains a function "+Yo(i)+" with contents = "+e.toString());if(Zy(e))throw new Error(n+"contains "+e.toString()+" "+Yo(i));if(typeof e=="string"&&e.length>i_/3&&jh(e)>i_)throw new Error(n+"contains a string greater than "+i_+" utf8 bytes "+Yo(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let r=!1,a=!1;if(Cn(e,(l,d)=>{if(l===".value")r=!0;else if(l!==".priority"&&l!==".sv"&&(a=!0,!Iv(l)))throw new Error(n+" contains an invalid key ("+l+") "+Yo(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);V4(i,l),Cp(n,d,i),U4(i)}),r&&a)throw new Error(n+' contains ".value" child '+Yo(i)+" in addition to actual children.")}},TO=function(n,e){let t,i;for(t=0;t<e.length;t++){i=e[t];const a=Pc(i);for(let l=0;l<a.length;l++)if(!(a[l]===".priority"&&l===a.length-1)){if(!Iv(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+i.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(P4);let r=null;for(t=0;t<e.length;t++){if(i=e[t],r!==null&&Ti(r,i))throw new Error(n+"contains a path "+r.toString()+" that is ancestor of another path "+i.toString());r=i}},EO=function(n,e,t,i){const r=$h(n,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(r+" must be an object containing the children to replace.");const a=[];Cn(e,(l,d)=>{const f=new vt(l);if(Cp(r,d,Ut(t,f)),sv(f)===".priority"&&!yO(d))throw new Error(r+"contains an invalid value for '"+f.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(f)}),TO(r,a)},zR=function(n,e,t,i){if(!HR(t))throw new Error($h(n,e)+'was an invalid path = "'+t+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},SO=function(n,e,t,i){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),zR(n,e,t)},YR=function(n,e){if(Ge(e)===".info")throw new Error(n+" failed = Can't modify data under /.info/")},CO=function(n,e){const t=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Iv(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||t.length!==0&&!_O(t))throw new Error($h(n,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function wp(n,e){let t=null;for(let i=0;i<e.length;i++){const r=e[i],a=r.getPath();t!==null&&!rv(a,t.path)&&(n.eventLists_.push(t),t=null),t===null&&(t={events:[],path:a}),t.events.push(r)}t&&n.eventLists_.push(t)}function KR(n,e,t){wp(n,t),$R(n,i=>rv(i,e))}function Ci(n,e,t){wp(n,t),$R(n,i=>Ti(i,e)||Ti(e,i))}function $R(n,e){n.recursionDepth_++;let t=!0;for(let i=0;i<n.eventLists_.length;i++){const r=n.eventLists_[i];if(r){const a=r.path;e(a)?(AO(n.eventLists_[i]),n.eventLists_[i]=null):t=!1}}t&&(n.eventLists_=[]),n.recursionDepth_--}function AO(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(t!==null){n.events[e]=null;const i=t.getEventRunner();gc&&Tn("event: "+t.toString()),Kl(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IO="repo_interrupt",xO=25;class bO{constructor(e,t,i,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=i,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new wO,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=wh(),this.transactionQueueTree_=new wv,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function RO(n,e,t){if(n.stats_=nv(n.repoInfo_),n.forceRestClient_||r4())n.server_=new Ch(n.repoInfo_,(i,r,a,l)=>{xw(n,i,r,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>bw(n,!0),0);else{if(typeof t<"u"&&t!==null){if(typeof t!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{on(t)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}n.persistentConnection_=new $s(n.repoInfo_,e,(i,r,a,l)=>{xw(n,i,r,a,l)},i=>{bw(n,i)},i=>{MO(n,i)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(i=>{n.server_.refreshAuthToken(i)}),n.appCheckProvider_.addTokenChangeListener(i=>{n.server_.refreshAppCheckToken(i.token)}),n.statsReporter_=c4(n.repoInfo_,()=>new uU(n.stats_,n.server_)),n.infoData_=new sU,n.infoSyncTree_=new Aw({startListening:(i,r,a,l)=>{let d=[];const f=n.infoData_.getNode(i._path);return f.isEmpty()||(d=Zc(n.infoSyncTree_,i._path,f),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),xv(n,"connected",!1),n.serverSyncTree_=new Aw({startListening:(i,r,a,l)=>(n.server_.listen(i,a,r,(d,f)=>{const h=l(d,f);Ci(n.eventQueue_,i._path,h)}),[]),stopListening:(i,r)=>{n.server_.unlisten(i,r)}})}function NO(n){const t=n.infoData_.getNode(new vt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+t}function Ap(n){return uO({timestamp:NO(n)})}function xw(n,e,t,i,r){n.dataUpdateCount++;const a=new vt(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(r)if(i){const f=lh(t,h=>rn(h));l=iO(n.serverSyncTree_,a,f,r)}else{const f=rn(t);l=PR(n.serverSyncTree_,a,f,r)}else if(i){const f=lh(t,h=>rn(h));l=eO(n.serverSyncTree_,a,f)}else{const f=rn(t);l=Zc(n.serverSyncTree_,a,f)}let d=a;l.length>0&&(d=Vl(n,a)),Ci(n.eventQueue_,d,l)}function bw(n,e){xv(n,"connected",e),e===!1&&LO(n)}function MO(n,e){Cn(e,(t,i)=>{xv(n,t,i)})}function xv(n,e,t){const i=new vt("/.info/"+e),r=rn(t);n.infoData_.updateSnapshot(i,r);const a=Zc(n.infoSyncTree_,i,r);Ci(n.eventQueue_,i,a)}function bv(n){return n.nextWriteId_++}function DO(n,e,t){const i=sO(n.serverSyncTree_,e);return i!=null?Promise.resolve(i):n.server_.get(e).then(r=>{const a=rn(r).withIndex(e._queryParams.getIndex());j_(n.serverSyncTree_,e,t,!0);let l;if(e._queryParams.loadsAllData())l=Zc(n.serverSyncTree_,e._path,a);else{const d=Fc(n.serverSyncTree_,e);l=PR(n.serverSyncTree_,e._path,a,d)}return Ci(n.eventQueue_,e._path,l),Dh(n.serverSyncTree_,e,t,null,!0),a},r=>(td(n,"get for query "+on(e)+" failed: "+r),Promise.reject(new Error(r))))}function kO(n,e,t,i,r){td(n,"set",{path:e.toString(),value:t,priority:i});const a=Ap(n),l=rn(t,i),d=_v(n.serverSyncTree_,e),f=FR(l,d,a),h=bv(n),y=kR(n.serverSyncTree_,e,f,h,!0);wp(n.eventQueue_,y),n.server_.put(e.toString(),l.val(!0),(E,I)=>{const N=E==="ok";N||Pn("set at "+e+" failed: "+E);const U=Gr(n.serverSyncTree_,h,!N);Ci(n.eventQueue_,e,U),W_(n,r,E,I)});const T=Nv(n,e);Vl(n,T),Ci(n.eventQueue_,T,[])}function PO(n,e,t,i){td(n,"update",{path:e.toString(),value:t});let r=!0;const a=Ap(n),l={};if(Cn(t,(d,f)=>{r=!1,l[d]=OR(Ut(e,d),rn(f),n.serverSyncTree_,a)}),r)Tn("update() called with empty data.  Don't do anything."),W_(n,i,"ok",void 0);else{const d=bv(n),f=ZU(n.serverSyncTree_,e,l,d);wp(n.eventQueue_,f),n.server_.merge(e.toString(),t,(h,y)=>{const T=h==="ok";T||Pn("update at "+e+" failed: "+h);const E=Gr(n.serverSyncTree_,d,!T),I=E.length>0?Vl(n,e):e;Ci(n.eventQueue_,I,E),W_(n,i,h,y)}),Cn(t,h=>{const y=Nv(n,Ut(e,h));Vl(n,y)}),Ci(n.eventQueue_,e,[])}}function LO(n){td(n,"onDisconnectEvents");const e=Ap(n),t=wh();G_(n.onDisconnect_,st(),(r,a)=>{const l=OR(r,a,n.serverSyncTree_,e);yR(t,r,l)});let i=[];G_(t,st(),(r,a)=>{i=i.concat(Zc(n.serverSyncTree_,r,a));const l=Nv(n,r);Vl(n,l)}),n.onDisconnect_=wh(),Ci(n.eventQueue_,st(),i)}function VO(n,e,t){let i;Ge(e._path)===".info"?i=j_(n.infoSyncTree_,e,t):i=j_(n.serverSyncTree_,e,t),KR(n.eventQueue_,e._path,i)}function UO(n,e,t){let i;Ge(e._path)===".info"?i=Dh(n.infoSyncTree_,e,t):i=Dh(n.serverSyncTree_,e,t),KR(n.eventQueue_,e._path,i)}function OO(n){n.persistentConnection_&&n.persistentConnection_.interrupt(IO)}function td(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Tn(t,...e)}function W_(n,e,t,i){e&&Kl(()=>{if(t==="ok")e(null);else{const r=(t||"error").toUpperCase();let a=r;i&&(a+=": "+i);const l=new Error(a);l.code=r,e(l)}})}function jR(n,e,t){return _v(n.serverSyncTree_,e,t)||Re.EMPTY_NODE}function Rv(n,e=n.transactionQueueTree_){if(e||Ip(n,e),jl(e)){const t=WR(n,e);he(t.length>0,"Sending zero length transaction queue"),t.every(r=>r.status===0)&&FO(n,ed(e),t)}else BR(e)&&Sp(e,t=>{Rv(n,t)})}function FO(n,e,t){const i=t.map(h=>h.currentWriteId),r=jR(n,e,i);let a=r;const l=r.hash();for(let h=0;h<t.length;h++){const y=t[h];he(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const T=kn(e,y.path);a=a.updateChild(T,y.currentOutputSnapshotRaw)}const d=a.val(!0),f=e;n.server_.put(f.toString(),d,h=>{td(n,"transaction put response",{path:f.toString(),status:h});let y=[];if(h==="ok"){const T=[];for(let E=0;E<t.length;E++)t[E].status=2,y=y.concat(Gr(n.serverSyncTree_,t[E].currentWriteId)),t[E].onComplete&&T.push(()=>t[E].onComplete(null,!0,t[E].currentOutputSnapshotResolved)),t[E].unwatcher();Ip(n,Av(n.transactionQueueTree_,e)),Rv(n,n.transactionQueueTree_),Ci(n.eventQueue_,e,y);for(let E=0;E<T.length;E++)Kl(T[E])}else{if(h==="datastale")for(let T=0;T<t.length;T++)t[T].status===3?t[T].status=4:t[T].status=0;else{Pn("transaction at "+f.toString()+" failed: "+h);for(let T=0;T<t.length;T++)t[T].status=4,t[T].abortReason=h}Vl(n,e)}},l)}function Vl(n,e){const t=JR(n,e),i=ed(t),r=WR(n,t);return qO(n,r,i),i}function qO(n,e,t){if(e.length===0)return;const i=[];let r=[];const l=e.filter(d=>d.status===0).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const f=e[d],h=kn(t,f.path);let y=!1,T;if(he(h!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),f.status===4)y=!0,T=f.abortReason,r=r.concat(Gr(n.serverSyncTree_,f.currentWriteId,!0));else if(f.status===0)if(f.retryCount>=xO)y=!0,T="maxretry",r=r.concat(Gr(n.serverSyncTree_,f.currentWriteId,!0));else{const E=jR(n,f.path,l);f.currentInputSnapshot=E;const I=e[d].update(E.val());if(I!==void 0){Cp("transaction failed: Data returned ",I,f.path);let N=rn(I);typeof I=="object"&&I!=null&&Cs(I,".priority")||(N=N.updatePriority(E.getPriority()));const O=f.currentWriteId,K=Ap(n),Z=FR(N,E,K);f.currentOutputSnapshotRaw=N,f.currentOutputSnapshotResolved=Z,f.currentWriteId=bv(n),l.splice(l.indexOf(O),1),r=r.concat(kR(n.serverSyncTree_,f.path,Z,f.currentWriteId,f.applyLocally)),r=r.concat(Gr(n.serverSyncTree_,O,!0))}else y=!0,T="nodata",r=r.concat(Gr(n.serverSyncTree_,f.currentWriteId,!0))}Ci(n.eventQueue_,t,r),r=[],y&&(e[d].status=2,(function(E){setTimeout(E,Math.floor(0))})(e[d].unwatcher),e[d].onComplete&&(T==="nodata"?i.push(()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot)):i.push(()=>e[d].onComplete(new Error(T),!1,null))))}Ip(n,n.transactionQueueTree_);for(let d=0;d<i.length;d++)Kl(i[d]);Rv(n,n.transactionQueueTree_)}function JR(n,e){let t,i=n.transactionQueueTree_;for(t=Ge(e);t!==null&&jl(i)===void 0;)i=Av(i,t),e=At(e),t=Ge(e);return i}function WR(n,e){const t=[];return QR(n,e,t),t.sort((i,r)=>i.order-r.order),t}function QR(n,e,t){const i=jl(e);if(i)for(let r=0;r<i.length;r++)t.push(i[r]);Sp(e,r=>{QR(n,r,t)})}function Ip(n,e){const t=jl(e);if(t){let i=0;for(let r=0;r<t.length;r++)t[r].status!==2&&(t[i]=t[r],i++);t.length=i,qR(e,t.length>0?t:void 0)}Sp(e,i=>{Ip(n,i)})}function Nv(n,e){const t=ed(JR(n,e)),i=Av(n.transactionQueueTree_,e);return hO(i,r=>{s_(n,r)}),s_(n,i),GR(i,r=>{s_(n,r)}),t}function s_(n,e){const t=jl(e);if(t){const i=[];let r=[],a=-1;for(let l=0;l<t.length;l++)t[l].status===3||(t[l].status===1?(he(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):(he(t[l].status===0,"Unexpected transaction status in abort"),t[l].unwatcher(),r=r.concat(Gr(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&i.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));a===-1?qR(e,void 0):t.length=a+1,Ci(n.eventQueue_,ed(e),r);for(let l=0;l<i.length;l++)Kl(i[l])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(n){let e="";const t=n.split("/");for(let i=0;i<t.length;i++)if(t[i].length>0){let r=t[i];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}e+="/"+r}return e}function GO(n){const e={};n.charAt(0)==="?"&&(n=n.substring(1));for(const t of n.split("&")){if(t.length===0)continue;const i=t.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):Pn(`Invalid query segment '${t}' in query '${n}'`)}return e}const Rw=function(n,e){const t=HO(n),i=t.namespace;t.domain==="firebase.com"&&Qs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&t.domain!=="localhost"&&Qs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||WV();const r=t.scheme==="ws"||t.scheme==="wss";return{repoInfo:new tR(t.host,t.secure,i,r,e,"",i!==t.subdomain),path:new vt(t.pathString)}},HO=function(n){let e="",t="",i="",r="",a="",l=!0,d="https",f=443;if(typeof n=="string"){let h=n.indexOf("//");h>=0&&(d=n.substring(0,h-1),n=n.substring(h+2));let y=n.indexOf("/");y===-1&&(y=n.length);let T=n.indexOf("?");T===-1&&(T=n.length),e=n.substring(0,Math.min(y,T)),y<T&&(r=BO(n.substring(y,T)));const E=GO(n.substring(Math.min(n.length,T)));h=e.indexOf(":"),h>=0?(l=d==="https"||d==="wss",f=parseInt(e.substring(h+1),10)):h=e.length;const I=e.slice(0,h);if(I.toLowerCase()==="localhost")t="localhost";else if(I.split(".").length<=2)t=I;else{const N=e.indexOf(".");i=e.substring(0,N).toLowerCase(),t=e.substring(N+1),a=i}"ns"in E&&(a=E.ns)}return{host:e,port:f,domain:t,subdomain:i,secure:l,scheme:d,pathString:r,namespace:a}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(e,t,i,r){this.eventType=e,this.eventRegistration=t,this.snapshot=i,this.prevName=r}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+on(this.snapshot.exportVal())}}class YO{constructor(e,t,i){this.eventRegistration=e,this.error=t,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return he(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv{constructor(e,t,i,r){this._repo=e,this._path=t,this._queryParams=i,this._orderByCalled=r}get key(){return $e(this._path)?null:sv(this._path)}get ref(){return new tr(this._repo,this._path)}get _queryIdentifier(){const e=mw(this._queryParams),t=ev(e);return t==="{}"?"default":t}get _queryObject(){return mw(this._queryParams)}isEqual(e){if(e=xt(e),!(e instanceof Mv))return!1;const t=this._repo===e._repo,i=rv(this._path,e._path),r=this._queryIdentifier===e._queryIdentifier;return t&&i&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+k4(this._path)}}class tr extends Mv{constructor(e,t){super(e,t,new uv,!1)}get parent(){const e=cR(this._path);return e===null?null:new tr(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class qc{constructor(e,t,i){this._node=e,this.ref=t,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new vt(e),i=Q_(this.ref,e);return new qc(this._node.getChild(t),i,Ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,r)=>e(new qc(r,Q_(this.ref,i),Ft)))}hasChild(e){const t=new vt(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pa(n,e){return n=xt(n),n._checkNotDeleted("ref"),e!==void 0?Q_(n._root,e):n._root}function Q_(n,e){return n=xt(n),Ge(n._path)===null?SO("child","path",e):zR("child","path",e),new tr(n._repo,Ut(n._path,e))}function KO(n){return YR("remove",n._path),ZR(n,null)}function ZR(n,e){n=xt(n),YR("set",n._path),vO("set",e,n._path);const t=new Gc;return kO(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function xp(n,e){EO("update",e,n._path);const t=new Gc;return PO(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function eN(n){n=xt(n);const e=new XR(()=>{}),t=new bp(e);return DO(n._repo,n,t).then(i=>new qc(i,new tr(n._repo,n._path),n._queryParams.getIndex()))}class bp{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,t){const i=t._queryParams.getIndex();return new zO("value",this,new qc(e.snapshotNode,new tr(t._repo,t._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new YO(this,e,t):null}matches(e){return e instanceof bp?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function $O(n,e,t,i,r){const a=new XR(t,void 0),l=new bp(a);return VO(n._repo,n,l),()=>UO(n._repo,n,l)}function tN(n,e,t,i){return $O(n,"value",e)}YU(tr);WU(tr);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jO="FIREBASE_DATABASE_EMULATOR_HOST",X_={};let JO=!1;function WO(n,e,t,i){const r=e.lastIndexOf(":"),a=e.substring(0,r),l=lo(a);n.repoInfo_=new tR(e,l,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0,t),i&&(n.authTokenProvider_=i)}function QO(n,e,t,i,r){let a=i||n.options.databaseURL;a===void 0&&(n.options.projectId||Qs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Tn("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let l=Rw(a,r),d=l.repoInfo,f;typeof process<"u"&&QC&&(f=QC[jO]),f?(a=`http://${f}?ns=${d.namespace}`,l=Rw(a,r),d=l.repoInfo):l.repoInfo.secure;const h=new a4(n.name,n.options,e);CO("Invalid Firebase Database URL",l),$e(l.path)||Qs("Database URL must point to the root of a Firebase Database (not including a child path).");const y=ZO(d,n,h,new o4(n,t));return new e3(y,n)}function XO(n,e){const t=X_[e];(!t||t[n.key]!==n)&&Qs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),OO(n),delete t[n.key]}function ZO(n,e,t,i){let r=X_[e.name];r||(r={},X_[e.name]=r);let a=r[n.toURLString()];return a&&Qs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new bO(n,JO,t,i),r[n.toURLString()]=a,a}class e3{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(RO(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new tr(this._repo,st())),this._rootInternal}_delete(){return this._rootInternal!==null&&(XO(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Qs("Cannot call "+e+" on a deleted database.")}}function t3(n=Jh(),e){const t=uo(n,"database").getImmediate({identifier:e});if(!t._instanceStarted){const i=GI("database");i&&n3(t,...i)}return t}function n3(n,e,t,i={}){n=xt(n),n._checkNotDeleted("useEmulator");const r=`${e}:${t}`,a=n._repoInternal;if(n._instanceStarted){if(r===n._repoInternal.repoInfo_.host&&Es(i,a.repoInfo_.emulatorOptions))return;Qs("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let l;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&Qs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new Xf(Xf.OWNER);else if(i.mockUserToken){const d=typeof i.mockUserToken=="string"?i.mockUserToken:YI(i.mockUserToken,n.app.options.projectId);l=new Xf(d)}lo(e)&&(gy(e),_y("Database",!0)),WO(a,r,i,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i3(n){zV(la),Hi(new Si("database",(e,{instanceIdentifier:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return QO(i,r,a,t)},"PUBLIC").setMultipleInstances(!0)),Kn(XC,ZC,n),Kn(XC,ZC,"esm2020")}$s.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)};$s.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)};i3();var s3="firebase",r3="12.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kn(s3,r3,"app");function nN(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const o3=nN,iN=new aa("auth","Firebase",nN());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kh=new Hc("@firebase/auth");function a3(n,...e){kh.logLevel<=Ke.WARN&&kh.warn(`Auth (${la}): ${n}`,...e)}function Zf(n,...e){kh.logLevel<=Ke.ERROR&&kh.error(`Auth (${la}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xs(n,...e){throw Dv(n,...e)}function vs(n,...e){return Dv(n,...e)}function sN(n,e,t){const i={...o3(),[e]:t};return new aa("auth","Firebase",i).create(e,{appName:n.name})}function Qo(n){return sN(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Dv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return iN.create(n,...e)}function ke(n,e,...t){if(!n)throw Dv(e,...t)}function Ys(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Zf(e),new Error(e)}function Zs(n,e){n||Ys(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function l3(){return Nw()==="http:"||Nw()==="https:"}function Nw(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(l3()||KI()||"connection"in navigator)?navigator.onLine:!0}function c3(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Zs(t>e,"Short delay should be less than long delay!"),this.isMobile=yy()||$I()}get(){return u3()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kv(n,e){Zs(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rN{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ys("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ys("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ys("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],h3=new nd(3e4,6e4);function Pv(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Jl(n,e,t,i,r={}){return oN(n,r,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const d=Fl({key:n.config.apiKey,...l}).slice(1),f=await n._getAdditionalHeaders();f["Content-Type"]="application/json",n.languageCode&&(f["X-Firebase-Locale"]=n.languageCode);const h={method:e,headers:f,...a};return eD()||(h.referrerPolicy="no-referrer"),n.emulatorConfig&&lo(n.emulatorConfig.host)&&(h.credentials="include"),rN.fetch()(await aN(n,n.config.apiHost,t,d),h)})}async function oN(n,e,t){n._canInitEmulator=!1;const i={...d3,...e};try{const r=new m3(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw zf(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const d=a.ok?l.errorMessage:l.error.message,[f,h]=d.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw zf(n,"credential-already-in-use",l);if(f==="EMAIL_EXISTS")throw zf(n,"email-already-in-use",l);if(f==="USER_DISABLED")throw zf(n,"user-disabled",l);const y=i[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw sN(n,y,h);Xs(n,y)}}catch(r){if(r instanceof Yi)throw r;Xs(n,"network-request-failed",{message:String(r)})}}async function p3(n,e,t,i,r={}){const a=await Jl(n,e,t,i,r);return"mfaPendingCredential"in a&&Xs(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function aN(n,e,t,i){const r=`${e}${t}?${i}`,a=n,l=a.config.emulator?kv(n.config,r):`${n.config.apiScheme}://${r}`;return f3.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}class m3{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(vs(this.auth,"network-request-failed")),h3.get())})}}function zf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=vs(n,e,i);return r.customData._tokenResponse=t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g3(n,e){return Jl(n,"POST","/v1/accounts:delete",e)}async function Ph(n,e){return Jl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ec(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _3(n,e=!1){const t=xt(n),i=await t.getIdToken(e),r=Lv(i);ke(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:Ec(r_(r.auth_time)),issuedAtTime:Ec(r_(r.iat)),expirationTime:Ec(r_(r.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function r_(n){return Number(n)*1e3}function Lv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Zf("JWT malformed, contained fewer than 3 sections"),null;try{const r=ah(t);return r?JSON.parse(r):(Zf("Failed to decode base64 JWT payload"),null)}catch(r){return Zf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function Mw(n){const e=Lv(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bc(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Yi&&y3(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function y3({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ey{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ec(this.lastLoginAt),this.creationTime=Ec(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lh(n){var T;const e=n.auth,t=await n.getIdToken(),i=await Bc(n,Ph(e,{idToken:t}));ke(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(T=r.providerUserInfo)!=null&&T.length?lN(r.providerUserInfo):[],l=E3(n.providerData,a),d=n.isAnonymous,f=!(n.email&&r.passwordHash)&&!(l!=null&&l.length),h=d?f:!1,y={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new ey(r.createdAt,r.lastLoginAt),isAnonymous:h};Object.assign(n,y)}async function T3(n){const e=xt(n);await Lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function E3(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function lN(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S3(n,e){const t=await oN(n,{},async()=>{const i=Fl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,l=await aN(n,r,"/v1/token",`key=${a}`),d=await n._getAdditionalHeaders();d["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:d,body:i};return n.emulatorConfig&&lo(n.emulatorConfig.host)&&(f.credentials="include"),rN.fetch()(l,f)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function C3(n,e){return Jl(n,"POST","/v2/accounts:revokeToken",Pv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Mw(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Mw(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await S3(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,l=new _l;return i&&(ke(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(ke(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),a&&(ke(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _l,this.toJSON())}_performRefresh(){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Fi{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new v3(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ey(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Bc(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _3(this,e)}reload(){return T3(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Fi({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Lh(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Vi(this.auth.app))return Promise.reject(Qo(this.auth));const e=await this.getIdToken();return await Bc(this,g3(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,d=t.tenantId??void 0,f=t._redirectEventId??void 0,h=t.createdAt??void 0,y=t.lastLoginAt??void 0,{uid:T,emailVerified:E,isAnonymous:I,providerData:N,stsTokenManager:U}=t;ke(T&&U,e,"internal-error");const O=_l.fromJSON(this.name,U);ke(typeof T=="string",e,"internal-error"),Vr(i,e.name),Vr(r,e.name),ke(typeof E=="boolean",e,"internal-error"),ke(typeof I=="boolean",e,"internal-error"),Vr(a,e.name),Vr(l,e.name),Vr(d,e.name),Vr(f,e.name),Vr(h,e.name),Vr(y,e.name);const K=new Fi({uid:T,auth:e,email:r,emailVerified:E,displayName:i,isAnonymous:I,photoURL:l,phoneNumber:a,tenantId:d,stsTokenManager:O,createdAt:h,lastLoginAt:y});return N&&Array.isArray(N)&&(K.providerData=N.map(Z=>({...Z}))),f&&(K._redirectEventId=f),K}static async _fromIdTokenResponse(e,t,i=!1){const r=new _l;r.updateFromServerResponse(t);const a=new Fi({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Lh(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];ke(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?lN(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),d=new _l;d.updateFromIdToken(i);const f=new Fi({uid:r.localId,auth:e,stsTokenManager:d,isAnonymous:l}),h={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new ey(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(f,h),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=new Map;function Ks(n){Zs(n instanceof Function,"Expected a class definition");let e=Dw.get(n);return e?(Zs(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Dw.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uN{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}uN.type="NONE";const kw=uN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(n,e,t){return`firebase:${n}:${e}:${t}`}class yl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=eh(this.userKey,r.apiKey,a),this.fullPersistenceKey=eh("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Ph(this.auth,{idToken:e}).catch(()=>{});return t?Fi._fromGetAccountInfoResponse(this.auth,t,e):null}return Fi._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new yl(Ks(kw),e,i);const r=(await Promise.all(t.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let a=r[0]||Ks(kw);const l=eh(i,e.config.apiKey,e.name);let d=null;for(const h of t)try{const y=await h._get(l);if(y){let T;if(typeof y=="string"){const E=await Ph(e,{idToken:y}).catch(()=>{});if(!E)break;T=await Fi._fromGetAccountInfoResponse(e,E,y)}else T=Fi._fromJSON(e,y);h!==a&&(d=T),a=h;break}}catch{}const f=r.filter(h=>h._shouldAllowMigration);return!a._shouldAllowMigration||!f.length?new yl(a,e,i):(a=f[0],d&&await a._set(l,d.toJSON()),await Promise.all(t.map(async h=>{if(h!==a)try{await h._remove(l)}catch{}})),new yl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(hN(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(cN(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(mN(e))return"Blackberry";if(gN(e))return"Webos";if(dN(e))return"Safari";if((e.includes("chrome/")||fN(e))&&!e.includes("edge/"))return"Chrome";if(pN(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function cN(n=Rn()){return/firefox\//i.test(n)}function dN(n=Rn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function fN(n=Rn()){return/crios\//i.test(n)}function hN(n=Rn()){return/iemobile/i.test(n)}function pN(n=Rn()){return/android/i.test(n)}function mN(n=Rn()){return/blackberry/i.test(n)}function gN(n=Rn()){return/webos/i.test(n)}function Vv(n=Rn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function w3(n=Rn()){var e;return Vv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function A3(){return tD()&&document.documentMode===10}function _N(n=Rn()){return Vv(n)||pN(n)||gN(n)||mN(n)||/windows phone/i.test(n)||hN(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yN(n,e=[]){let t;switch(n){case"Browser":t=Pw(Rn());break;case"Worker":t=`${Pw(Rn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${la}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I3{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((l,d)=>{try{const f=e(a);l(f)}catch(f){d(f)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x3(n,e={}){return Jl(n,"GET","/v2/passwordPolicy",Pv(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=6;class R3{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??b3,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lw(this),this.idTokenSubscription=new Lw(this),this.beforeStateQueue=new I3(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=iN,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Ks(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await yl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Ph(this,{idToken:e}),i=await Fi._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(Vi(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(d=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(d,d))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,d=i==null?void 0:i._redirectEventId,f=await this.tryRedirectSignIn(e);(!l||l===d)&&(f!=null&&f.user)&&(i=f.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Lh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=c3()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Vi(this.app))return Promise.reject(Qo(this));const t=e?xt(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Vi(this.app)?Promise.reject(Qo(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Vi(this.app)?Promise.reject(Qo(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Ks(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await x3(this),t=new R3(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new aa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await C3(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Ks(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await yl.create(this,[Ks(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const d=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(d,this,"internal-error"),d.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const f=e.addObserver(t,i,r);return()=>{l=!0,f()}}else{const f=e.addObserver(t);return()=>{l=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=yN(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(Vi(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&a3(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Uv(n){return xt(n)}class Lw{constructor(e){this.auth=e,this.observer=null,this.addObserver=dD(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ov={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M3(n){Ov=n}function D3(n){return Ov.loadJS(n)}function k3(){return Ov.gapiScript}function P3(n){return`__${n}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3(n,e){const t=uo(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(Es(a,e??{}))return r;Xs(r,"already-initialized")}return t.initialize({options:e})}function V3(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Ks);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function U3(n,e,t){const i=Uv(n);ke(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=vN(e),{host:l,port:d}=O3(e),f=d===null?"":`:${d}`,h={url:`${a}//${l}${f}/`},y=Object.freeze({host:l,port:d,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){ke(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),ke(Es(h,i.config.emulator)&&Es(y,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=h,i.emulatorConfig=y,i.settings.appVerificationDisabledForTesting=!0,lo(l)?(gy(`${a}//${l}${f}`),_y("Auth",!0)):F3()}function vN(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function O3(n){const e=vN(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:Vw(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:Vw(l)}}}function Vw(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function F3(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ys("not implemented")}_getIdTokenResponse(e){return Ys("not implemented")}_linkToIdToken(e,t){return Ys("not implemented")}_getReauthenticationResolver(e){return Ys("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vl(n,e){return p3(n,"POST","/v1/accounts:signInWithIdp",Pv(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="http://localhost";class sa extends TN{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Xs("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const l=new sa(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return vl(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,vl(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,vl(e,t)}buildRequest(){const e={requestUri:q3,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Fl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EN{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id extends EN{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur extends id{constructor(){super("facebook.com")}static credential(e){return sa._fromParams({providerId:Ur.PROVIDER_ID,signInMethod:Ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ur.credentialFromTaggedObject(e)}static credentialFromError(e){return Ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ur.credential(e.oauthAccessToken)}catch{return null}}}Ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or extends id{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sa._fromParams({providerId:Or.PROVIDER_ID,signInMethod:Or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Or.credentialFromTaggedObject(e)}static credentialFromError(e){return Or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Or.credential(t,i)}catch{return null}}}Or.GOOGLE_SIGN_IN_METHOD="google.com";Or.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr extends id{constructor(){super("github.com")}static credential(e){return sa._fromParams({providerId:Fr.PROVIDER_ID,signInMethod:Fr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fr.credentialFromTaggedObject(e)}static credentialFromError(e){return Fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fr.credential(e.oauthAccessToken)}catch{return null}}}Fr.GITHUB_SIGN_IN_METHOD="github.com";Fr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr extends id{constructor(){super("twitter.com")}static credential(e,t){return sa._fromParams({providerId:qr.PROVIDER_ID,signInMethod:qr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return qr.credentialFromTaggedObject(e)}static credentialFromError(e){return qr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return qr.credential(t,i)}catch{return null}}}qr.TWITTER_SIGN_IN_METHOD="twitter.com";qr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Fi._fromIdTokenResponse(e,i,r),l=Uw(i);return new Ul({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=Uw(i);return new Ul({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function Uw(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh extends Yi{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Vh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Vh(e,t,i,r)}}function SN(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Vh._fromErrorAndOperation(n,a,e,i):a})}async function B3(n,e,t=!1){const i=await Bc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ul._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function G3(n,e,t=!1){const{auth:i}=n;if(Vi(i.app))return Promise.reject(Qo(i));const r="reauthenticate";try{const a=await Bc(n,SN(i,r,e,n),t);ke(a.idToken,i,"internal-error");const l=Lv(a.idToken);ke(l,i,"internal-error");const{sub:d}=l;return ke(n.uid===d,i,"user-mismatch"),Ul._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Xs(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3(n,e,t=!1){if(Vi(n.app))return Promise.reject(Qo(n));const i="signIn",r=await SN(n,i,e),a=await Ul._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}function z3(n,e,t,i){return xt(n).onIdTokenChanged(e,t,i)}function Y3(n,e,t){return xt(n).beforeAuthStateChanged(e,t)}function K3(n){return xt(n).signOut()}const Uh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Uh,"1"),this.storage.removeItem(Uh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $3=1e3,j3=10;class wN extends CN{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=_N(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,d,f)=>{this.notifyListeners(l,f)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);A3()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,j3):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},$3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}wN.type="LOCAL";const J3=wN;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AN extends CN{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}AN.type="SESSION";const IN=AN;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Rp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const d=Array.from(l).map(async h=>h(t.origin,a)),f=await W3(d);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:f})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Rp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((d,f)=>{const h=Fv("",20);r.port1.start();const y=setTimeout(()=>{f(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(T){const E=T;if(E.data.eventId===h)switch(E.data.status){case"ack":clearTimeout(y),a=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),d(E.data.response);break;default:clearTimeout(y),clearTimeout(a),f(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:h,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ts(){return window}function X3(n){Ts().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xN(){return typeof Ts().WorkerGlobalScope<"u"&&typeof Ts().importScripts=="function"}async function Z3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function e5(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function t5(){return xN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="firebaseLocalStorageDb",n5=1,Oh="firebaseLocalStorage",RN="fbase_key";class sd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Np(n,e){return n.transaction([Oh],e?"readwrite":"readonly").objectStore(Oh)}function i5(){const n=indexedDB.deleteDatabase(bN);return new sd(n).toPromise()}function ty(){const n=indexedDB.open(bN,n5);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Oh,{keyPath:RN})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Oh)?e(i):(i.close(),await i5(),e(await ty()))})})}async function Ow(n,e,t){const i=Np(n,!0).put({[RN]:e,value:t});return new sd(i).toPromise()}async function s5(n,e){const t=Np(n,!1).get(e),i=await new sd(t).toPromise();return i===void 0?null:i.value}function Fw(n,e){const t=Np(n,!0).delete(e);return new sd(t).toPromise()}const r5=800,o5=3;class NN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ty(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>o5)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Rp._getInstance(t5()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await Z3(),!this.activeServiceWorker)return;this.sender=new Q3(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||e5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ty();return await Ow(e,Uh,"1"),await Fw(e,Uh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Ow(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>s5(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Fw(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=Np(r,!1).getAll();return new sd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),r5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NN.type="LOCAL";const a5=NN;new nd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l5(n,e){return e?Ks(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qv extends TN{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return vl(e,this._buildIdpRequest())}_linkToIdToken(e,t){return vl(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return vl(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function u5(n){return H3(n.auth,new qv(n),n.bypassAuthState)}function c5(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),G3(t,new qv(n),n.bypassAuthState)}async function d5(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),B3(t,new qv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:l,type:d}=e;if(l){this.reject(l);return}const f={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(d)(f))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u5;case"linkViaPopup":case"linkViaRedirect":return d5;case"reauthViaPopup":case"reauthViaRedirect":return c5;default:Xs(this.auth,"internal-error")}}resolve(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Zs(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f5=new nd(2e3,1e4);class dl extends MN{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,dl.currentPopupAction&&dl.currentPopupAction.cancel(),dl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Zs(this.filter.length===1,"Popup operations only handle one event");const e=Fv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(vs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(vs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,dl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f5.get())};e()}}dl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h5="pendingRedirect",th=new Map;class p5 extends MN{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=th.get(this.auth._key());if(!e){try{const i=await m5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}th.set(this.auth._key(),e)}return this.bypassAuthState||th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m5(n,e){const t=y5(e),i=_5(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function g5(n,e){th.set(n._key(),e)}function _5(n){return Ks(n._redirectPersistence)}function y5(n){return eh(h5,n.config.apiKey,n.name)}async function v5(n,e,t=!1){if(Vi(n.app))return Promise.reject(Qo(n));const i=Uv(n),r=l5(i,e),l=await new p5(i,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T5=600*1e3;class E5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S5(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!DN(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(vs(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=T5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qw(e))}saveEventToCache(e){this.cachedEventUids.add(qw(e)),this.lastProcessedEventTime=Date.now()}}function qw(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function DN({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function S5(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DN(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C5(n,e={}){return Jl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,A5=/^https?/;async function I5(n){if(n.config.emulator)return;const{authorizedDomains:e}=await C5(n);for(const t of e)try{if(x5(t))return}catch{}Xs(n,"unauthorized-domain")}function x5(n){const e=Z_(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!A5.test(t))return!1;if(w5.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b5=new nd(3e4,6e4);function Bw(){const n=Ts().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function R5(n){return new Promise((e,t)=>{var r,a,l;function i(){Bw(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bw(),t(vs(n,"network-request-failed"))},timeout:b5.get()})}if((a=(r=Ts().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=Ts().gapi)!=null&&l.load)i();else{const d=P3("iframefcb");return Ts()[d]=()=>{gapi.load?i():t(vs(n,"network-request-failed"))},D3(`${k3()}?onload=${d}`).catch(f=>t(f))}}).catch(e=>{throw nh=null,e})}let nh=null;function N5(n){return nh=nh||R5(n),nh}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=new nd(5e3,15e3),D5="__/auth/iframe",k5="emulator/auth/iframe",P5={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L5=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V5(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?kv(e,k5):`https://${n.config.authDomain}/${D5}`,i={apiKey:e.apiKey,appName:n.name,v:la},r=L5.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${Fl(i).slice(1)}`}async function U5(n){const e=await N5(n),t=Ts().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:V5(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:P5,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const l=vs(n,"network-request-failed"),d=Ts().setTimeout(()=>{a(l)},M5.get());function f(){Ts().clearTimeout(d),r(i)}i.ping(f).then(f,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},F5=500,q5=600,B5="_blank",G5="http://localhost";class Gw{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function H5(n,e,t,i=F5,r=q5){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let d="";const f={...O5,width:i.toString(),height:r.toString(),top:a,left:l},h=Rn().toLowerCase();t&&(d=fN(h)?B5:t),cN(h)&&(e=e||G5,f.scrollbars="yes");const y=Object.entries(f).reduce((E,[I,N])=>`${E}${I}=${N},`,"");if(w3(h)&&d!=="_self")return z5(e||"",d),new Gw(null);const T=window.open(e||"",d,y);ke(T,n,"popup-blocked");try{T.focus()}catch{}return new Gw(T)}function z5(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y5="__/auth/handler",K5="emulator/auth/handler",$5=encodeURIComponent("fac");async function Hw(n,e,t,i,r,a){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:la,eventId:r};if(e instanceof EN){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",h_(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[y,T]of Object.entries({}))l[y]=T}if(e instanceof id){const y=e.getScopes().filter(T=>T!=="");y.length>0&&(l.scopes=y.join(","))}n.tenantId&&(l.tid=n.tenantId);const d=l;for(const y of Object.keys(d))d[y]===void 0&&delete d[y];const f=await n._getAppCheckToken(),h=f?`#${$5}=${encodeURIComponent(f)}`:"";return`${j5(n)}?${Fl(d).slice(1)}${h}`}function j5({config:n}){return n.emulator?kv(n,K5):`https://${n.authDomain}/${Y5}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="webStorageSupport";class J5{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IN,this._completeRedirectFn=v5,this._overrideRedirectResult=g5}async _openPopup(e,t,i,r){var l;Zs((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await Hw(e,t,i,Z_(),r);return H5(e,a,Fv())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await Hw(e,t,i,Z_(),r);return X3(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(Zs(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await U5(e),i=new E5(e);return t.register("authEvent",r=>(ke(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(o_,{type:o_},r=>{var l;const a=(l=r==null?void 0:r[0])==null?void 0:l[o_];a!==void 0&&t(!!a),Xs(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=I5(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return _N()||dN()||Vv()}}const W5=J5;var zw="@firebase/auth",Yw="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X5(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z5(n){Hi(new Si("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:d}=i.options;ke(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const f={apiKey:l,authDomain:d,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:yN(n)},h=new N3(i,r,a,f);return V3(h,t),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Hi(new Si("auth-internal",e=>{const t=Uv(e.getProvider("auth").getImmediate());return(i=>new Q5(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Kn(zw,Yw,X5(n)),Kn(zw,Yw,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6=300,t6=zI("authIdTokenMaxAge")||e6;let Kw=null;const n6=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>t6)return;const r=t==null?void 0:t.token;Kw!==r&&(Kw=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function i6(n=Jh()){const e=uo(n,"auth");if(e.isInitialized())return e.getImmediate();const t=L3(n,{popupRedirectResolver:W5,persistence:[a5,J3,IN]}),i=zI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=n6(a.toString());Y3(t,l,()=>l(t.currentUser)),z3(t,d=>l(d))}}const r=BI("auth");return r&&U3(t,`http://${r}`),t}function s6(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}M3({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=vs("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",s6().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z5("Browser");const kN="@firebase/installations",Bv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PN=1e4,LN=`w:${Bv}`,VN="FIS_v2",r6="https://firebaseinstallations.googleapis.com/v1",o6=3600*1e3,a6="installations",l6="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u6={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ra=new aa(a6,l6,u6);function UN(n){return n instanceof Yi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ON({projectId:n}){return`${r6}/projects/${n}/installations`}function FN(n){return{token:n.token,requestStatus:2,expiresIn:d6(n.expiresIn),creationTime:Date.now()}}async function qN(n,e){const i=(await e.json()).error;return ra.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function BN({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function c6(n,{refreshToken:e}){const t=BN(n);return t.append("Authorization",f6(e)),t}async function GN(n){const e=await n();return e.status>=500&&e.status<600?n():e}function d6(n){return Number(n.replace("s","000"))}function f6(n){return`${VN} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=ON(n),r=BN(n),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const l={fid:t,authVersion:VN,appId:n.appId,sdkVersion:LN},d={method:"POST",headers:r,body:JSON.stringify(l)},f=await GN(()=>fetch(i,d));if(f.ok){const h=await f.json();return{fid:h.fid||t,registrationStatus:2,refreshToken:h.refreshToken,authToken:FN(h.authToken)}}else throw await qN("Create Installation",f)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=/^[cdef][\w-]{21}$/,ny="";function g6(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=_6(n);return m6.test(t)?t:ny}catch{return ny}}function _6(n){return p6(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zN=new Map;function YN(n,e){const t=Mp(n);KN(t,e),y6(t,e)}function KN(n,e){const t=zN.get(n);if(t)for(const i of t)i(e)}function y6(n,e){const t=v6();t&&t.postMessage({key:n,fid:e}),T6()}let jo=null;function v6(){return!jo&&"BroadcastChannel"in self&&(jo=new BroadcastChannel("[Firebase] FID Change"),jo.onmessage=n=>{KN(n.data.key,n.data.fid)}),jo}function T6(){zN.size===0&&jo&&(jo.close(),jo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E6="firebase-installations-database",S6=1,oa="firebase-installations-store";let a_=null;function Gv(){return a_||(a_=ZI(E6,S6,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(oa)}}})),a_}async function Fh(n,e){const t=Mp(n),r=(await Gv()).transaction(oa,"readwrite"),a=r.objectStore(oa),l=await a.get(t);return await a.put(e,t),await r.done,(!l||l.fid!==e.fid)&&YN(n,e.fid),e}async function $N(n){const e=Mp(n),i=(await Gv()).transaction(oa,"readwrite");await i.objectStore(oa).delete(e),await i.done}async function Dp(n,e){const t=Mp(n),r=(await Gv()).transaction(oa,"readwrite"),a=r.objectStore(oa),l=await a.get(t),d=e(l);return d===void 0?await a.delete(t):await a.put(d,t),await r.done,d&&(!l||l.fid!==d.fid)&&YN(n,d.fid),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hv(n){let e;const t=await Dp(n.appConfig,i=>{const r=C6(i),a=w6(n,r);return e=a.registrationPromise,a.installationEntry});return t.fid===ny?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function C6(n){const e=n||{fid:g6(),registrationStatus:0};return jN(e)}function w6(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ra.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=A6(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:I6(n)}:{installationEntry:e}}async function A6(n,e){try{const t=await h6(n,e);return Fh(n.appConfig,t)}catch(t){throw UN(t)&&t.customData.serverCode===409?await $N(n.appConfig):await Fh(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function I6(n){let e=await $w(n.appConfig);for(;e.registrationStatus===1;)await HN(100),e=await $w(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await Hv(n);return i||t}return e}function $w(n){return Dp(n,e=>{if(!e)throw ra.create("installation-not-found");return jN(e)})}function jN(n){return x6(n)?{fid:n.fid,registrationStatus:0}:n}function x6(n){return n.registrationStatus===1&&n.registrationTime+PN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b6({appConfig:n,heartbeatServiceProvider:e},t){const i=R6(n,t),r=c6(n,t),a=e.getImmediate({optional:!0});if(a){const h=await a.getHeartbeatsHeader();h&&r.append("x-firebase-client",h)}const l={installation:{sdkVersion:LN,appId:n.appId}},d={method:"POST",headers:r,body:JSON.stringify(l)},f=await GN(()=>fetch(i,d));if(f.ok){const h=await f.json();return FN(h)}else throw await qN("Generate Auth Token",f)}function R6(n,{fid:e}){return`${ON(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zv(n,e=!1){let t;const i=await Dp(n.appConfig,a=>{if(!JN(a))throw ra.create("not-registered");const l=a.authToken;if(!e&&D6(l))return a;if(l.requestStatus===1)return t=N6(n,e),a;{if(!navigator.onLine)throw ra.create("app-offline");const d=P6(a);return t=M6(n,d),d}});return t?await t:i.authToken}async function N6(n,e){let t=await jw(n.appConfig);for(;t.authToken.requestStatus===1;)await HN(100),t=await jw(n.appConfig);const i=t.authToken;return i.requestStatus===0?zv(n,e):i}function jw(n){return Dp(n,e=>{if(!JN(e))throw ra.create("not-registered");const t=e.authToken;return L6(t)?{...e,authToken:{requestStatus:0}}:e})}async function M6(n,e){try{const t=await b6(n,e),i={...e,authToken:t};return await Fh(n.appConfig,i),t}catch(t){if(UN(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await $N(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Fh(n.appConfig,i)}throw t}}function JN(n){return n!==void 0&&n.registrationStatus===2}function D6(n){return n.requestStatus===2&&!k6(n)}function k6(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+o6}function P6(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function L6(n){return n.requestStatus===1&&n.requestTime+PN<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V6(n){const e=n,{installationEntry:t,registrationPromise:i}=await Hv(e);return i?i.catch(console.error):zv(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U6(n,e=!1){const t=n;return await O6(t),(await zv(t,e)).token}async function O6(n){const{registrationPromise:e}=await Hv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F6(n){if(!n||!n.options)throw l_("App Configuration");if(!n.name)throw l_("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw l_(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function l_(n){return ra.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN="installations",q6="installations-internal",B6=n=>{const e=n.getProvider("app").getImmediate(),t=F6(e),i=uo(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},G6=n=>{const e=n.getProvider("app").getImmediate(),t=uo(e,WN).getImmediate();return{getId:()=>V6(t),getToken:r=>U6(t,r)}};function H6(){Hi(new Si(WN,B6,"PUBLIC")),Hi(new Si(q6,G6,"PRIVATE"))}H6();Kn(kN,Bv);Kn(kN,Bv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="analytics",z6="firebase_id",Y6="origin",K6=60*1e3,$6="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Yv="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ln=new Hc("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j6={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},si=new aa("analytics","Analytics",j6);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J6(n){if(!n.startsWith(Yv)){const e=si.create("invalid-gtag-resource",{gtagURL:n});return Ln.warn(e.message),""}return n}function QN(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function W6(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function Q6(n,e){const t=W6("firebase-js-sdk-policy",{createScriptURL:J6}),i=document.createElement("script"),r=`${Yv}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function X6(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function Z6(n,e,t,i,r,a){const l=i[r];try{if(l)await e[l];else{const f=(await QN(t)).find(h=>h.measurementId===r);f&&await e[f.appId]}}catch(d){Ln.error(d)}n("config",r,a)}async function eF(n,e,t,i,r){try{let a=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const d=await QN(t);for(const f of l){const h=d.find(T=>T.measurementId===f),y=h&&e[h.appId];if(y)a.push(y);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",i,r||{})}catch(a){Ln.error(a)}}function tF(n,e,t,i){async function r(a,...l){try{if(a==="event"){const[d,f]=l;await eF(n,e,t,d,f)}else if(a==="config"){const[d,f]=l;await Z6(n,e,t,i,d,f)}else if(a==="consent"){const[d,f]=l;n("consent",d,f)}else if(a==="get"){const[d,f,h]=l;n("get",d,f,h)}else if(a==="set"){const[d]=l;n("set",d)}else n(a,...l)}catch(d){Ln.error(d)}}return r}function nF(n,e,t,i,r){let a=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(a=window[r]),window[r]=tF(a,n,e,t),{gtagCore:a,wrappedGtag:window[r]}}function iF(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(Yv)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sF=30,rF=1e3;class oF{constructor(e={},t=rF){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const XN=new oF;function aF(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function lF(n){var l;const{appId:e,apiKey:t}=n,i={method:"GET",headers:aF(t)},r=$6.replace("{app-id}",e),a=await fetch(r,i);if(a.status!==200&&a.status!==304){let d="";try{const f=await a.json();(l=f.error)!=null&&l.message&&(d=f.error.message)}catch{}throw si.create("config-fetch-failed",{httpStatus:a.status,responseMessage:d})}return a.json()}async function uF(n,e=XN,t){const{appId:i,apiKey:r,measurementId:a}=n.options;if(!i)throw si.create("no-app-id");if(!r){if(a)return{measurementId:a,appId:i};throw si.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},d=new fF;return setTimeout(async()=>{d.abort()},K6),ZN({appId:i,apiKey:r,measurementId:a},l,d,e)}async function ZN(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=XN){var d;const{appId:a,measurementId:l}=n;try{await cF(i,e)}catch(f){if(l)return Ln.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:a,measurementId:l};throw f}try{const f=await lF(n);return r.deleteThrottleMetadata(a),f}catch(f){const h=f;if(!dF(h)){if(r.deleteThrottleMetadata(a),l)return Ln.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:l};throw f}const y=Number((d=h==null?void 0:h.customData)==null?void 0:d.httpStatus)===503?GS(t,r.intervalMillis,sF):GS(t,r.intervalMillis),T={throttleEndTimeMillis:Date.now()+y,backoffCount:t+1};return r.setThrottleMetadata(a,T),Ln.debug(`Calling attemptFetch again in ${y} millis`),ZN(n,T,i,r)}}function cF(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),a=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(a),i(si.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function dF(n){if(!(n instanceof Yi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class fF{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function hF(n,e,t,i,r){if(r&&r.global){n("event",t,i);return}else{const a=await e,l={...i,send_to:a};n("event",t,l)}}async function pF(n,e,t,i){if(i&&i.global){const r={};for(const a of Object.keys(t))r[`user_properties.${a}`]=t[a];return n("set",r),Promise.resolve()}else{const r=await e;n("config",r,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mF(){if(jI())try{await JI()}catch(n){return Ln.warn(si.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return Ln.warn(si.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function gF(n,e,t,i,r,a,l){const d=uF(n);d.then(E=>{t[E.measurementId]=E.appId,n.options.measurementId&&E.measurementId!==n.options.measurementId&&Ln.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${E.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(E=>Ln.error(E)),e.push(d);const f=mF().then(E=>{if(E)return i.getId()}),[h,y]=await Promise.all([d,f]);iF(a)||Q6(a,h.measurementId),r("js",new Date);const T=(l==null?void 0:l.config)??{};return T[Y6]="firebase",T.update=!0,y!=null&&(T[z6]=y),r("config",h.measurementId,T),h.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _F{constructor(e){this.app=e}_delete(){return delete Tl[this.app.options.appId],Promise.resolve()}}let Tl={},Jw=[];const Ww={};let u_="dataLayer",yF="gtag",Qw,Kv,Xw=!1;function vF(){const n=[];if(KI()&&n.push("This is a browser extension environment."),sD()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=si.create("invalid-analytics-context",{errorInfo:e});Ln.warn(t.message)}}function TF(n,e,t){vF();const i=n.options.appId;if(!i)throw si.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ln.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw si.create("no-api-key");if(Tl[i]!=null)throw si.create("already-exists",{id:i});if(!Xw){X6(u_);const{wrappedGtag:a,gtagCore:l}=nF(Tl,Jw,Ww,u_,yF);Kv=a,Qw=l,Xw=!0}return Tl[i]=gF(n,Jw,Ww,e,Qw,u_,t),new _F(n)}function EF(n=Jh()){n=xt(n);const e=uo(n,qh);return e.isInitialized()?e.getImmediate():SF(n)}function SF(n,e={}){const t=uo(n,qh);if(t.isInitialized()){const r=t.getImmediate();if(Es(e,t.getOptions()))return r;throw si.create("already-initialized")}return t.initialize({options:e})}function CF(n,e,t){n=xt(n),pF(Kv,Tl[n.app.options.appId],e,t).catch(i=>Ln.error(i))}function wF(n,e,t,i){n=xt(n),hF(Kv,Tl[n.app.options.appId],e,t,i).catch(r=>Ln.error(r))}const Zw="@firebase/analytics",eA="0.10.19";function AF(){Hi(new Si(qh,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return TF(i,r,t)},"PUBLIC")),Hi(new Si("analytics-internal",n,"PRIVATE")),Kn(Zw,eA),Kn(Zw,eA,"esm2020");function n(e){try{const t=e.getProvider(qh).getImmediate();return{logEvent:(i,r,a)=>wF(t,i,r,a),setUserProperties:(i,r)=>CF(t,i,r)}}catch(t){throw si.create("interop-component-reg-failed",{reason:t})}}}AF();const IF="AIzaSyBvqdLc9Bw84wZp1G63GKVMZB1dyc4XkdA",xF="https://portal-icone-4eb8e-default-rtdb.firebaseio.com",bF="portal-icone-4eb8e",RF="portal-icone-4eb8e.firebaseapp.com",NF="portal-icone-4eb8e.firebasestorage.app",MF="289992630080",DF="1:289992630080:web:3cbe972721d22c6ec824a5",kF="G-58YNBK8ZC4",PF={apiKey:IF,authDomain:RF,databaseURL:xF,projectId:bF,storageBucket:NF,messagingSenderId:MF,appId:DF,measurementId:kF},kp=ex(PF);EF(kp);const LF=i6(kp),ma=t3(kp),rd=EV(kp),Jo="user",VF="pendente",UF=1024*1024,$v="userPhotos",ao=n=>n.trim().toLowerCase(),od=n=>ao(n).replace(/\./g,",").replace(/[#$\[\]]/g,"_"),OF=n=>ao(n).replace(/[.#$/\[\]]/g,"_"),e1=n=>cp(rd,$v,ao(n)),FF=async(n,e)=>{const t=OF(n);if(t===e)return null;const i=pa(ma,`users/${t}`),r=await eN(i);if(!r.exists())return null;const a=r.val();return await KO(i),a??null},qF=async n=>{if(!n.email)return{role:n.role??Jo,displayName:n.displayName??"",isActive:n.isActive??!0};const e=od(n.email),t=pa(ma,`users/${e}`);let i=await eN(t);const r={email:ao(n.email),displayName:n.displayName??"",photoDocPath:`${$v}/${ao(n.email)}`,isActive:n.isActive??!0};if(!i.exists()){const f=await FF(n.email,e),h=(f==null?void 0:f.role)??Jo,y=typeof(f==null?void 0:f.isActive)=="boolean"?f.isActive:!0,T={...r,...f??{},role:h,isActive:y,createdAt:(f==null?void 0:f.createdAt)??Date.now(),updatedAt:Date.now()};return await ZR(t,T),{role:h,displayName:T.displayName||"",isActive:y}}const a=i.val()??{},l=a.role||Jo,d={};return a.role||(d.role=Jo),a.photoDocPath||(d.photoDocPath=r.photoDocPath),typeof a.isActive!="boolean"&&(d.isActive=!0),n.displayName&&a.displayName!==n.displayName&&(d.displayName=n.displayName),Object.keys(d).length&&(d.updatedAt=Date.now(),await xp(t,d)),{role:l,displayName:d.displayName??a.displayName??n.displayName??"",isActive:d.isActive??a.isActive??!0}},BF=async n=>{var t;if(!n)return null;const e=await Ob(e1(n));return e.exists()?((t=e.data())==null?void 0:t.photoData)??null:null},GF=async n=>{var i;if(!n)return null;const e=n.split("/").filter(Boolean);if(!e.length)return null;const t=await Ob(cp(rd,...e));return t.exists()?((i=t.data())==null?void 0:i.photoData)??null:null},Pp=async n=>{if(!n.email)return{...n,role:n.role??Jo};const e=await qF(n),t=await BF(n.email);return{...n,role:e.role,displayName:e.displayName||n.displayName,photoURL:t??n.photoURL,isActive:e.isActive}},HF=async(n,e)=>{if(!n)return;if(e&&e.length>UF)throw new Error("A imagem final ainda possui mais de 1MB. Tente uma foto menor.");await OV(e1(n),{photoData:e??null,updatedAt:GV()},{merge:!0});const t=od(n);await xp(pa(ma,`users/${t}`),{photoDocPath:`${$v}/${ao(n)}`,updatedAt:Date.now()})},zF=async(n,e)=>{if(!n)throw new Error("Informe o email do usurio.");const t=od(n);return await xp(pa(ma,`users/${t}`),{email:ao(n),role:e,updatedAt:Date.now()}),e},YF=async(n,e)=>{if(!n)throw new Error("Informe o email do usurio.");const t=od(n);await xp(pa(ma,`users/${t}`),{email:ao(n),isActive:e,updatedAt:Date.now()})},KF=(n,e)=>{if(!n)return()=>{};const t=od(n),i=pa(ma,`users/${t}`);return tN(i,a=>{if(!a.exists()){e({hasAccess:!1,reason:"revoked"});return}const l=a.val()??{},d=l.isActive!==!1,f=l.role??Jo;if(!d){e({hasAccess:!1,reason:"revoked"});return}if(f===VF){e({hasAccess:!1,reason:"pending"});return}e({hasAccess:!0,reason:null})})},t1=n=>{const e=pa(ma,"users");return tN(e,async i=>{const r=i.val()??{},a=Object.entries(r),l=await Promise.all(a.map(async([d,f])=>{const h=f.email??d.replace(/,/g,"."),y=await GF(f.photoDocPath);return{email:h,displayName:f.displayName??h,role:f.role??Jo,photoURL:y??null,birthday:typeof f.birthday=="string"?f.birthday:void 0,isActive:f.isActive!==!1}}));n(l.sort((d,f)=>(d.displayName||"").localeCompare(f.displayName||"")))})},$F=new Intl.DateTimeFormat("pt-BR",{month:"long"}),Bh=[{top:"24%",left:"25%"},{top:"24%",left:"75%"},{top:"50%",left:"50%"},{top:"76%",left:"25%"},{top:"76%",left:"75%"}],tA=["#FBC02D","#FB8C00","#4FC3F7","#E0E0E0","#BDBDBD"],nA=n=>{const e=$F.format(n);return e.charAt(0).toUpperCase()+e.slice(1)},jF=n=>{if(!n)return null;const[e,t,i]=n.split("-");if(!t||!i)return null;const r=Number(t)-1,a=Number(i);return Number.isNaN(r)||Number.isNaN(a)?null:{month:r,day:a,label:`${a.toString().padStart(2,"0")}/${(r+1).toString().padStart(2,"0")}`}},JF=(n,e)=>{if(!e)return{top:"50%",left:"50%"};const t=n-Bh.length,i=Math.max(e-Bh.length,1),r=t/i*Math.PI*2,a=25,l=50+Math.sin(r)*a,d=50+Math.cos(r)*a;return{top:`${l}%`,left:`${d}%`}},WF=n=>n.split(" ").filter(Boolean).slice(0,2).map(e=>{var t;return((t=e[0])==null?void 0:t.toUpperCase())??""}).join(""),QF=({onClose:n,onSave:e,authorName:t,authorPhotoURL:i})=>{const[r,a]=X.useState(""),[l,d]=X.useState(""),f=r.trim()||"Ttulo do comunicado",h=l.trim()||"Digite o comunicado para ver a pr-visualizao aqui.",y=LI(new Date),T=t||"Portal cone",E=r.trim().length>0&&l.trim().length>0,I=N=>{N.preventDefault(),E&&(e({title:r.trim(),content:l.trim()}),a(""),d(""),n())};return S.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/80 backdrop-blur-sm px-4 py-6 transition-opacity","aria-modal":"true",role:"dialog",onClick:n,children:S.jsxs("div",{className:"w-full max-w-4xl scale-100 overflow-hidden rounded-3xl bg-white dark:bg-[#111D34] shadow-2xl ring-1 ring-black/5 dark:ring-white/10 transition-all",onClick:N=>N.stopPropagation(),children:[S.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 dark:border-white/10 bg-gray-50 dark:bg-[#0B1324] px-8 py-5",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Novo Comunicado"}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Preencha as informaes para compartilhar com a equipe."})]}),S.jsx("button",{onClick:n,className:"rounded-full p-2 text-gray-400 hover:bg-gray-200 hover:text-gray-600 dark:text-slate-400 dark:hover:bg-white/5 dark:hover:text-white transition-colors","aria-label":"Fechar modal",children:S.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsxs("div",{className:"grid gap-8 px-8 py-8 lg:grid-cols-2",children:[S.jsxs("form",{className:"space-y-6",onSubmit:I,children:[S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Ttulo do Comunicado"}),S.jsx("input",{type:"text",value:r,onChange:N=>a(N.target.value),maxLength:120,placeholder:"Ex: Reunio geral de novembro",className:"w-full rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-[#1F2A40] px-4 py-3 text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 outline-none transition focus:border-orange-500 focus:ring-1 focus:ring-orange-500",autoFocus:!0})]}),S.jsxs("div",{className:"space-y-2",children:[S.jsx("label",{className:"block text-sm font-semibold text-gray-700 dark:text-slate-300",children:"Contedo"}),S.jsx("textarea",{value:l,onChange:N=>d(N.target.value),maxLength:600,placeholder:"Descreva os detalhes do comunicado aqui...",rows:8,className:"w-full resize-none rounded-xl border border-gray-300 dark:border-white/10 bg-white dark:bg-[#1F2A40] px-4 py-3 text-sm text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-slate-500 outline-none transition focus:border-orange-500 focus:ring-1 focus:ring-orange-500"})]}),S.jsxs("div",{className:"flex gap-3 pt-2",children:[S.jsx("button",{type:"submit",disabled:!E,className:`flex-1 rounded-xl bg-orange-500 px-6 py-3 text-sm font-bold text-white shadow-lg transition-all hover:bg-orange-600 hover:shadow-orange-500/30 ${E?"hover:scale-[1.02]":"cursor-not-allowed opacity-60"}`,children:"Publicar"}),S.jsx("button",{type:"button",onClick:n,className:"rounded-xl border border-gray-300 dark:border-white/10 px-6 py-3 text-sm font-semibold text-gray-700 dark:text-slate-300 transition hover:bg-gray-50 dark:hover:bg-white/5 hover:text-gray-900 dark:hover:text-white",children:"Cancelar"})]})]}),S.jsxs("div",{className:"flex flex-col",children:[S.jsx("p",{className:"mb-3 text-xs font-bold uppercase tracking-wider text-gray-500 dark:text-slate-500",children:"Pr-visualizao"}),S.jsx("div",{className:"flex-1 rounded-2xl border border-gray-200 dark:border-white/5 bg-gray-50 dark:bg-[#0B1324] p-6 shadow-inner",children:S.jsxs("div",{className:"flex items-start gap-4",children:[S.jsx("div",{className:"flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-orange-500/10 text-orange-500",children:S.jsx(hy,{className:"h-5 w-5"})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:f}),S.jsx("p",{className:"mt-2 text-sm leading-relaxed text-gray-600 dark:text-slate-300",children:h}),S.jsxs("div",{className:"mt-4 flex items-center gap-2 text-xs text-gray-500 dark:text-slate-500",children:[i?S.jsx("img",{src:i,className:"h-5 w-5 rounded-full object-cover",alt:T}):S.jsx("span",{className:"font-medium text-gray-600 dark:text-slate-400",children:T}),S.jsx("span",{children:""}),S.jsx("span",{children:y})]})]})]})})]})]})]})})},XF=({onClose:n,announcements:e,onCreateAnnouncement:t,authorName:i,authorPhotoURL:r,onViewersClick:a,canSeeViews:l,userRole:d})=>{const[f,h]=X.useState("announcements"),[y,T]=X.useState([]),[E,I]=X.useState(!1),N=X.useRef(!1),[U,O]=X.useState(!1),[,K]=X.useState(0);X.useEffect(()=>{const R=setInterval(()=>{K(M=>M+1)},6e4);return()=>clearInterval(R)},[]),X.useEffect(()=>{if(f!=="birthdays")return;let R=!1;N.current||I(!0);const M=t1(D=>{R||(N.current=!0,T(D),I(!1))});return()=>{R=!0,M&&M()}},[f]);const Z=new Date,j=Z.getMonth(),ae=X.useMemo(()=>y.map(R=>{const M=jF(R.birthday);return!M||M.month!==j?null:{id:R.email||`${R.displayName}-${M.day}`,name:R.displayName||R.email||"Colaborador",day:M.day,dayLabel:M.label,photoURL:R.photoURL}}).filter(R=>!!R).sort((R,M)=>R.day-M.day),[y,j]),me=()=>S.jsxs("div",{className:"space-y-6",children:[S.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[S.jsxs("div",{children:[S.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"ltimas Atualizaes"}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Fique por dentro de tudo que acontece no Colgio cone"})]}),d==="admin"&&S.jsxs("button",{onClick:()=>O(!0),className:"flex w-fit items-center gap-2 rounded-xl bg-orange-500 px-5 py-2.5 text-sm font-bold text-white shadow-lg shadow-orange-500/20 transition-all hover:bg-orange-600 hover:scale-105 active:scale-95",children:[S.jsx("span",{className:"text-lg leading-none",children:"+"}),"Novo Comunicado"]})]}),S.jsx("div",{className:"space-y-4",children:e.length?e.map(R=>{var L;const M=((L=R.views)==null?void 0:L.length)??0,D=R.createdAt?VI(R.createdAt):null;return S.jsx("div",{className:"group relative flex flex-col gap-4 rounded-2xl border border-gray-200 dark:border-white/5 bg-white dark:bg-[#111D34] p-6 shadow-xl transition-all hover:border-gray-300 dark:hover:border-white/10 hover:bg-gray-50 dark:hover:bg-[#15223D]",children:S.jsxs("div",{className:"flex-1",children:[S.jsxs("div",{className:"flex flex-col justify-between gap-2 sm:flex-row sm:items-start",children:[S.jsxs("div",{className:"flex items-start gap-3",children:[S.jsx("div",{className:"mt-1 flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-lg bg-blue-500/10 text-blue-400",children:S.jsx(rh,{className:"h-5 w-5"})}),S.jsxs("div",{children:[S.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:R.title}),S.jsx("p",{className:"mt-2 whitespace-pre-line text-sm leading-relaxed text-gray-600 dark:text-slate-300",children:R.content})]})]}),S.jsxs("div",{className:"flex flex-col items-end gap-2",children:[S.jsx("div",{className:"flex items-center gap-2 self-start sm:self-auto",children:S.jsxs("span",{className:"flex items-center gap-1.5 rounded-md bg-gray-100 dark:bg-[#0B1324] px-3 py-1.5 text-xs font-medium text-gray-500 dark:text-slate-400 border border-gray-200 dark:border-white/5",children:[S.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),R.date]})}),D&&S.jsxs("div",{className:"flex items-center gap-1.5 rounded-full bg-orange-500/10 px-3 py-1 text-xs font-bold text-orange-400 border border-orange-500/20",children:[S.jsx(PI,{className:"h-3.5 w-3.5"}),D]})]})]}),S.jsxs("div",{className:"mt-5 flex items-center justify-between border-t border-gray-100 dark:border-white/5 pt-4 pl-11",children:[S.jsx("div",{className:"flex items-center gap-2 text-xs font-medium text-gray-500 dark:text-slate-500",children:R.author?S.jsxs("div",{className:"flex items-center gap-2 rounded-full bg-gray-100 dark:bg-[#0B1324] px-2 py-1 pr-3 border border-gray-200 dark:border-white/5",children:[R.authorPhotoURL?S.jsx("img",{src:R.authorPhotoURL,alt:R.author,className:"h-5 w-5 rounded-full object-cover"}):S.jsx("div",{className:"flex h-5 w-5 items-center justify-center rounded-full bg-gray-300 dark:bg-slate-700 text-gray-600 dark:text-slate-300",children:R.author.charAt(0).toUpperCase()}),S.jsx("span",{className:"text-gray-700 dark:text-slate-300",children:R.author})]}):S.jsx("span",{children:"Portal cone"})}),l&&S.jsx("button",{type:"button",onClick:()=>a(R.id),className:"group/viewers flex items-center gap-2 rounded-lg px-2 py-1 text-xs font-semibold text-blue-400 transition hover:bg-blue-500/10",children:S.jsxs("span",{className:"group-hover/viewers:underline",children:[M," visualiza",M===1?"o":"es"]})})]})]})},R.id)}):S.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center rounded-3xl border-2 border-dashed border-gray-200 dark:border-white/5 bg-gray-50/50 dark:bg-[#111D34]/50",children:[S.jsx("div",{className:"flex h-16 w-16 items-center justify-center rounded-full bg-gray-100 dark:bg-[#1F2A40]",children:S.jsx(hy,{className:"h-8 w-8 text-gray-400 dark:text-slate-500"})}),S.jsx("p",{className:"mt-4 font-medium text-gray-600 dark:text-slate-300",children:"Nenhum comunicado publicado."}),d==="admin"?S.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-500",children:'Clique em "Novo Comunicado" para comear.'}):S.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-500",children:"Fique atento, novidades em breve."})]})})]}),ce=()=>{if(E)return S.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-gray-500 dark:text-slate-400",children:[S.jsx("div",{className:"h-8 w-8 animate-spin rounded-full border-2 border-gray-600 dark:border-slate-600 border-t-orange-500"}),S.jsx("p",{className:"mt-4 text-sm font-medium",children:"Carregando aniversariantes..."})]});if(!ae.length)return S.jsxs("div",{className:"flex flex-col items-center justify-center rounded-3xl border border-dashed border-gray-200 dark:border-white/10 bg-white dark:bg-[#111D34] py-20 text-center",children:[S.jsx("div",{className:"text-4xl mb-4",children:""}),S.jsxs("p",{className:"font-medium text-gray-600 dark:text-slate-300",children:["Nenhum aniversariante em ",nA(Z),"."]})]});const R=nA(Z);return S.jsx("div",{className:"overflow-hidden rounded-[2rem] border border-gray-200 dark:border-white/10 bg-white dark:bg-[#111D34] shadow-xl",children:S.jsxs("div",{className:"aniversaries-font-inter relative mx-auto w-full max-w-4xl overflow-hidden bg-white dark:bg-[#0B1324]",children:[S.jsxs("header",{className:"relative bg-orange-600 px-8 py-10 text-center shadow-orange-900/20",children:[S.jsxs("div",{className:"relative z-10",children:[S.jsx("p",{className:"text-xs font-bold uppercase tracking-[0.2em] text-white/90",children:"Celebraes de"}),S.jsx("p",{className:"aniversaries-font-cursive mt-2 text-5xl text-white drop-shadow-lg sm:text-6xl",children:R})]}),S.jsx("div",{className:"absolute top-6 right-8 rotate-12 text-4xl opacity-30 text-white mix-blend-overlay",children:""}),S.jsx("div",{className:"absolute top-16 right-24 -rotate-12 text-3xl opacity-30 text-white mix-blend-overlay",children:""})]}),S.jsxs("div",{className:"relative h-[600px] w-full bg-white dark:bg-[#0B1324] sm:h-[700px]",children:[S.jsx("div",{className:"absolute left-1/2 top-1/2 h-[300px] w-[300px] -translate-x-1/2 -translate-y-1/2 rounded-full border border-gray-200 dark:border-white/5"}),S.jsx("div",{className:"absolute left-1/2 top-1/2 h-[500px] w-[500px] -translate-x-1/2 -translate-y-1/2 rounded-full border border-gray-200 dark:border-white/5"}),S.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 opacity-20 blur-sm",children:S.jsx("img",{src:"https://iconecolegioecurso.com.br/wp-content/uploads/2022/08/xlogo_icone_site.png.pagespeed.ic_.QgXP3GszLC.webp",alt:"Logo",className:"w-32 grayscale"})}),ae.map((M,D)=>{const L=D<Bh.length?Bh[D]:JF(D,ae.length),P=tA[D%tA.length];return S.jsxs("div",{className:"absolute flex w-[140px] flex-col items-center text-center transition-transform hover:z-10 hover:scale-110 sm:w-[160px]",style:{top:L.top,left:L.left,transform:"translate(-50%, -50%)"},children:[S.jsxs("div",{className:"relative mb-3 group",children:[S.jsx("div",{className:"absolute -inset-1 rounded-full bg-gray-100 dark:bg-white/5 blur-md transition group-hover:bg-gray-200 dark:group-hover:bg-white/10"}),M.photoURL?S.jsx("img",{src:M.photoURL,alt:`Foto de ${M.name}`,className:"relative h-20 w-20 rounded-full border-[3px] object-cover shadow-2xl sm:h-24 sm:w-24",style:{borderColor:P}}):S.jsx("div",{className:"relative flex h-20 w-20 items-center justify-center rounded-full border-[3px] text-xl font-bold text-white shadow-2xl sm:h-24 sm:w-24 bg-gradient-to-br from-gray-300 to-gray-400 dark:from-[#1F2A40] dark:to-[#111D34]",style:{borderColor:P},children:WF(M.name)}),S.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 whitespace-nowrap rounded-full px-3 py-0.5 text-xs font-bold text-white shadow-lg ring-1 ring-black/20",style:{backgroundColor:P},children:M.dayLabel})]}),S.jsx("div",{className:"w-full px-2",children:S.jsx("p",{className:"truncate text-sm font-medium text-gray-700 dark:text-slate-200 sm:text-base",children:M.name})})]},M.id)})]})]})})};return S.jsxs(S.Fragment,{children:[S.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 dark:bg-black/90 backdrop-blur-sm px-4 py-6 transition-opacity",role:"dialog","aria-modal":"true",onClick:n,children:S.jsxs("div",{className:"flex h-full max-h-[90vh] w-full max-w-5xl flex-col overflow-hidden rounded-3xl bg-white dark:bg-[#0B1324] shadow-2xl ring-1 ring-black/5 dark:ring-white/10 transition-all",onClick:R=>R.stopPropagation(),children:[S.jsxs("div",{className:"relative flex items-center justify-between border-b border-gray-200 dark:border-white/5 bg-white dark:bg-[#0B1324] px-8 py-6",children:[S.jsxs("div",{className:"flex items-center gap-4",children:[S.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-2xl bg-gray-100 dark:bg-[#1F2A40] text-orange-500 shadow-inner",children:S.jsx(rh,{className:"h-6 w-6"})}),S.jsxs("div",{children:[S.jsx("h2",{className:"text-2xl font-bold text-gray-900 dark:text-white tracking-tight",children:"Central de Comunicados"}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-slate-400",children:"Acompanhe as novidades e avisos importantes"})]})]}),S.jsx("button",{onClick:n,className:"rounded-full p-2 text-gray-400 hover:bg-gray-100 hover:text-gray-600 dark:text-slate-400 dark:hover:bg-white/5 dark:hover:text-white transition-colors","aria-label":"Fechar modal",children:S.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:S.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),S.jsx("div",{className:"flex border-b border-gray-200 dark:border-white/5 bg-white dark:bg-[#0B1324] px-8",children:["announcements","birthdays"].map(R=>{const M=f===R;return S.jsxs("button",{onClick:()=>h(R),className:`relative mr-8 py-4 text-sm font-semibold transition-colors ${M?"text-orange-500":"text-gray-500 hover:text-gray-700 dark:text-slate-400 dark:hover:text-slate-200"}`,children:[R==="announcements"?"Comunicados":"Aniversariantes",M&&S.jsx("span",{className:"absolute bottom-0 left-0 h-0.5 w-full rounded-t-full bg-orange-500 shadow-[0_0_10px_rgba(249,115,22,0.5)]"})]},R)})}),S.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50 dark:bg-[#0B1324] p-4 sm:p-8 custom-scrollbar",children:f==="announcements"?me():ce()})]})}),U&&S.jsx(QF,{onClose:()=>O(!1),onSave:t,authorName:i,authorPhotoURL:r})]})},ZF=({announcement:n,onClose:e})=>{const t=[...n.views??[]].sort((i,r)=>new Date(r.viewedAt).getTime()-new Date(i.viewedAt).getTime());return S.jsx("div",{className:"fixed inset-0 z-[70] flex items-center justify-center bg-black/70 px-4 py-6",role:"dialog","aria-modal":"true",onClick:e,children:S.jsxs("div",{className:"w-full max-w-xl overflow-hidden rounded-2xl bg-white shadow-2xl dark:bg-slate-900",onClick:i=>i.stopPropagation(),children:[S.jsxs("div",{className:"flex items-center justify-between border-b border-slate-200 px-6 py-4 dark:border-slate-800",children:[S.jsxs("div",{children:[S.jsx("p",{className:"text-lg font-semibold text-slate-900 dark:text-white",children:"Quem visualizou"}),S.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:n.title})]}),S.jsx("button",{onClick:e,className:"rounded-full p-2 text-slate-500 transition hover:bg-slate-100 hover:text-slate-700 dark:text-slate-400 dark:hover:bg-slate-800","aria-label":"Fechar modal de visualizaes",children:""})]}),S.jsx("div",{className:"max-h-[75vh] space-y-4 overflow-y-auto px-6 py-5",children:t.length?t.map(i=>S.jsxs("div",{className:"flex items-center gap-4 rounded-2xl border border-slate-100 bg-slate-50 p-3 dark:border-slate-800 dark:bg-slate-800/40",children:[i.photoURL?S.jsx("img",{src:i.photoURL,alt:i.name,className:"h-12 w-12 rounded-full object-cover"}):S.jsx("div",{className:"flex h-12 w-12 items-center justify-center rounded-full bg-slate-200 text-slate-600 dark:bg-slate-700 dark:text-slate-200",children:S.jsx(Cc,{className:"h-6 w-6"})}),S.jsxs("div",{className:"flex-1",children:[S.jsx("p",{className:"font-semibold text-slate-900 dark:text-white",children:i.name}),S.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Visualizou em ",q2(i.viewedAt)]})]})]},`${i.viewerId}-${i.viewedAt}`)):S.jsx("p",{className:"text-center text-sm text-slate-500 dark:text-slate-400",children:"Ningum visualizou este comunicado ainda."})})]})})},eq=[{id:1,name:"Ana Silva",role:"Gerente de Marketing",avatarUrl:"https://picsum.photos/id/1011/100/100"},{id:2,name:"Bruno Costa",role:"Desenvolvedor Snior",avatarUrl:"https://picsum.photos/id/1005/100/100"},{id:3,name:"Carla Dias",role:"Analista de RH",avatarUrl:"https://picsum.photos/id/1027/100/100"},{id:4,name:"Diego Martins",role:"Designer UI/UX",avatarUrl:"https://picsum.photos/id/1012/100/100"}],tq=()=>S.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md",children:[S.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 mb-4 flex items-center",children:[S.jsx(py,{className:"w-6 h-6 mr-3 text-blue-600"}),"Equipe"]}),S.jsx("div",{className:"space-y-4",children:eq.map(n=>S.jsxs("div",{className:"flex items-center space-x-4",children:[S.jsx("img",{className:"h-12 w-12 rounded-full object-cover",src:n.avatarUrl,alt:n.name}),S.jsxs("div",{children:[S.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200 ",children:n.name}),S.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 ",children:n.role})]})]},n.id))})]});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let nq,iq;function sq(){return{geminiUrl:nq,vertexUrl:iq}}function rq(n,e,t,i){var r,a;if(!(n!=null&&n.baseUrl)){const l=sq();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:t:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class nr{}function _e(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function g(n,e,t){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const d=l.slice(0,-2);if(!(d in n))if(Array.isArray(t))n[d]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[d])){const f=n[d];if(Array.isArray(t))for(let h=0;h<f.length;h++){const y=f[h];g(y,e.slice(a+1),t[h])}else for(const h of f)g(h,e.slice(a+1),t)}return}else if(l.endsWith("[0]")){const d=l.slice(0,-3);d in n||(n[d]=[{}]);const f=n[d];g(f[0],e.slice(a+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const l=n[a];return Array.isArray(l)?l.map(d=>p(d,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function oq(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),l=new Set;let d=-1;for(let f=0;f<r.length;f++)if(r[f]==="*"){d=f;break}if(d!==-1&&a.length>d)for(let f=d;f<a.length;f++){const h=a[f];h!=="*"&&!h.endsWith("[]")&&!h.endsWith("[0]")&&l.add(h)}iy(n,r,a,0,l)}}function iy(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),d=n;if(l in d&&Array.isArray(d[l]))for(const f of d[l])iy(f,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,d=Object.keys(l).filter(h=>!h.startsWith("_")&&!r.has(h)),f={};for(const h of d)f[h]=l[h];for(const[h,y]of Object.entries(f)){const T=[];for(const E of t.slice(i))E==="*"?T.push(h):T.push(E);g(l,T,y)}for(const h of d)delete l[h]}}else{const l=n;a in l&&iy(l[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jv(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function aq(n){const e={},t=p(n,["operationName"]);t!=null&&g(e,["operationName"],t);const i=p(n,["resourceName"]);return i!=null&&g(e,["_url","resourceName"],i),e}function lq(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],cq(l)),e}function uq(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],dq(l)),e}function cq(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>fq(l))),g(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function dq(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>hq(l))),g(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function fq(n){const e={},t=p(n,["video"]);return t!=null&&g(e,["video"],vq(t)),e}function hq(n){const e={},t=p(n,["_self"]);return t!=null&&g(e,["video"],Tq(t)),e}function pq(n){const e={},t=p(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function mq(n){const e={},t=p(n,["operationName"]);return t!=null&&g(e,["_url","operationName"],t),e}function gq(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],_q(l)),e}function _q(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&g(e,["parent"],i);const r=p(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function n1(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],yq(l)),e}function yq(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&g(e,["parent"],i);const r=p(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function vq(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],jv(i));const r=p(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function Tq(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],jv(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var iA;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(iA||(iA={}));var sA;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(sA||(sA={}));var rA;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(rA||(rA={}));var Hr;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Hr||(Hr={}));var oA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(oA||(oA={}));var aA;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(aA||(aA={}));var lA;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(lA||(lA={}));var uA;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(uA||(uA={}));var cA;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(cA||(cA={}));var dA;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(dA||(dA={}));var fA;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(fA||(fA={}));var hA;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(hA||(hA={}));var pA;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE"})(pA||(pA={}));var mA;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(mA||(mA={}));var gA;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(gA||(gA={}));var _A;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(_A||(_A={}));var yA;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(yA||(yA={}));var vA;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(vA||(vA={}));var Gh;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Gh||(Gh={}));var TA;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(TA||(TA={}));var EA;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(EA||(EA={}));var SA;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(SA||(SA={}));var sy;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(sy||(sy={}));var CA;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(CA||(CA={}));var wA;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(wA||(wA={}));var AA;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(AA||(AA={}));var IA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(IA||(IA={}));var xA;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(xA||(xA={}));var bA;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(bA||(bA={}));var RA;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(RA||(RA={}));var NA;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(NA||(NA={}));var MA;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(MA||(MA={}));var DA;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(DA||(DA={}));var kA;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(kA||(kA={}));var PA;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(PA||(PA={}));var LA;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(LA||(LA={}));var VA;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(VA||(VA={}));var UA;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(UA||(UA={}));var OA;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(OA||(OA={}));var FA;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(FA||(FA={}));var qA;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(qA||(qA={}));var BA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(BA||(BA={}));var GA;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(GA||(GA={}));var HA;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(HA||(HA={}));var zA;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(zA||(zA={}));var YA;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(YA||(YA={}));var KA;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(KA||(KA={}));var $A;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})($A||($A={}));var jA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(jA||(jA={}));var JA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(JA||(JA={}));var WA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(WA||(WA={}));var QA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(QA||(QA={}));var fl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(fl||(fl={}));class ry{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class oc{get text(){var e,t,i,r,a,l,d,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let h="",y=!1;const T=[];for(const E of(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[I,N]of Object.entries(E))I!=="text"&&I!=="thought"&&(N!==null||N!==void 0)&&T.push(I);if(typeof E.text=="string"){if(typeof E.thought=="boolean"&&E.thought)continue;y=!0,h+=E.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),y?h:void 0}get data(){var e,t,i,r,a,l,d,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let h="";const y=[];for(const T of(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)!==null&&f!==void 0?f:[]){for(const[E,I]of Object.entries(T))E!=="inlineData"&&(I!==null||I!==void 0)&&y.push(E);T.inlineData&&typeof T.inlineData.data=="string"&&(h+=atob(T.inlineData.data))}return y.length>0&&console.warn(`there are non-data parts ${y} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),h.length>0?btoa(h):void 0}get functionCalls(){var e,t,i,r,a,l,d,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const h=(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(y=>y.functionCall).map(y=>y.functionCall).filter(y=>y!==void 0);if((h==null?void 0:h.length)!==0)return h}get executableCode(){var e,t,i,r,a,l,d,f,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const y=(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.code}get codeExecutionResult(){var e,t,i,r,a,l,d,f,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const y=(f=(d=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||d===void 0?void 0:d.parts)===null||f===void 0?void 0:f.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((y==null?void 0:y.length)!==0)return(h=y==null?void 0:y[0])===null||h===void 0?void 0:h.output}}class XA{}class ZA{}class Eq{}class Sq{}class Cq{}class wq{}class eI{}class tI{}class nI{}class Aq{}class Hh{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Hh;let r;const a=e;return t?r=uq(a):r=lq(a),Object.assign(i,r),i}}class iI{}class sI{}class rI{}class Iq{}class xq{}class bq{}class Jv{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Jv,a=gq(e);return Object.assign(i,a),i}}class Rq{}class Nq{}class Mq{}class oI{}class Dq{get text(){var e,t,i;let r="",a=!1;const l=[];for(const d of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,h]of Object.entries(d))f!=="text"&&f!=="thought"&&h!==null&&l.push(f);if(typeof d.text=="string"){if(typeof d.thought=="boolean"&&d.thought)continue;a=!0,r+=d.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const l of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[d,f]of Object.entries(l))d!=="inlineData"&&f!==null&&a.push(d);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class kq{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class Wv{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new Wv,a=n1(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function i1(n,e){const t=rt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function s1(n){return Array.isArray(n)?n.map(e=>zh(e)):[zh(n)]}function zh(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function r1(n){const e=zh(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function o1(n){const e=zh(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function aI(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function a1(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>aI(e)):[aI(n)]}function oy(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function lI(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function uI(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function bn(n){if(n==null)throw new Error("ContentUnion is required");return oy(n)?n:{role:"user",parts:a1(n)}}function Qv(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=bn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=bn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>bn(t)):[bn(e)]}function Ei(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(lI(n)||uI(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[bn(n)]}const e=[],t=[],i=oy(n[0]);for(const r of n){const a=oy(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(lI(r)||uI(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:a1(t)}),e}function Pq(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Hr).includes(t[0].toUpperCase())?t[0].toUpperCase():Hr.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Hr).includes(i.toUpperCase())?i.toUpperCase():Hr.TYPE_UNSPECIFIED})}}function El(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&Pq(n.type,e);for(const[l,d]of Object.entries(n))if(d!=null)if(l=="type"){if(d==="null")throw new Error("type: null can not be the only possible type for the field.");if(d instanceof Array)continue;e.type=Object.values(Hr).includes(d.toUpperCase())?d.toUpperCase():Hr.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=El(d);else if(i.includes(l)){const f=[];for(const h of d){if(h.type=="null"){e.nullable=!0;continue}f.push(El(h))}e[l]=f}else if(r.includes(l)){const f={};for(const[h,y]of Object.entries(d))f[h]=El(y);e[l]=f}else{if(l==="additionalProperties")continue;e[l]=d}return e}function Xv(n){return El(n)}function Zv(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function e0(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function Wl(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=El(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=El(e.response));return n}function Ql(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Lq(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function ir(n,e){if(typeof e!="string")throw new Error("name must be a string");return Lq(n,e,"cachedContents")}function l1(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ho(n){return jv(n)}function Vq(n){return n!=null&&typeof n=="object"&&"name"in n}function Uq(n){return n!=null&&typeof n=="object"&&"video"in n}function Oq(n){return n!=null&&typeof n=="object"&&"uri"in n}function u1(n){var e;let t;if(Vq(n)&&(t=n.name),!(Oq(n)&&(t=n.uri,t===void 0))&&!(Uq(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function c1(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function d1(n){for(const e of["models","tunedModels","publisherModels"])if(Fq(n,e))return n[e];return[]}function Fq(n,e){return n!==null&&typeof n=="object"&&e in n}function qq(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Bq(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=qq(r,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function f1(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function Gq(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function h1(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const f=l.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function Xl(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function p1(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hq(n){const e={},t=p(n,["responsesFile"]);t!=null&&g(e,["fileName"],t);const i=p(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>T9(l))),g(e,["inlinedResponses"],a)}const r=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["inlinedEmbedContentResponses"],a)}return e}function zq(n){const e={},t=p(n,["predictionsFormat"]);t!=null&&g(e,["format"],t);const i=p(n,["gcsDestination","outputUriPrefix"]);i!=null&&g(e,["gcsUri"],i);const r=p(n,["bigqueryDestination","outputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function Yq(n){const e={},t=p(n,["format"]);t!=null&&g(e,["predictionsFormat"],t);const i=p(n,["gcsUri"]);i!=null&&g(e,["gcsDestination","outputUriPrefix"],i);const r=p(n,["bigqueryUri"]);if(r!=null&&g(e,["bigqueryDestination","outputUri"],r),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function ih(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata","displayName"]);i!=null&&g(e,["displayName"],i);const r=p(n,["metadata","state"]);r!=null&&g(e,["state"],p1(r));const a=p(n,["metadata","createTime"]);a!=null&&g(e,["createTime"],a);const l=p(n,["metadata","endTime"]);l!=null&&g(e,["endTime"],l);const d=p(n,["metadata","updateTime"]);d!=null&&g(e,["updateTime"],d);const f=p(n,["metadata","model"]);f!=null&&g(e,["model"],f);const h=p(n,["metadata","output"]);return h!=null&&g(e,["dest"],Hq(h1(h))),e}function ay(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(n,["state"]);r!=null&&g(e,["state"],p1(r));const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["createTime"]);l!=null&&g(e,["createTime"],l);const d=p(n,["startTime"]);d!=null&&g(e,["startTime"],d);const f=p(n,["endTime"]);f!=null&&g(e,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&g(e,["updateTime"],h);const y=p(n,["model"]);y!=null&&g(e,["model"],y);const T=p(n,["inputConfig"]);T!=null&&g(e,["src"],Kq(T));const E=p(n,["outputConfig"]);E!=null&&g(e,["dest"],zq(h1(E)));const I=p(n,["completionStats"]);return I!=null&&g(e,["completionStats"],I),e}function Kq(n){const e={},t=p(n,["instancesFormat"]);t!=null&&g(e,["format"],t);const i=p(n,["gcsSource","uris"]);i!=null&&g(e,["gcsUri"],i);const r=p(n,["bigquerySource","inputUri"]);return r!=null&&g(e,["bigqueryUri"],r),e}function $q(n,e){const t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&g(t,["fileName"],i);const r=p(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>v9(n,l))),g(t,["requests","requests"],a)}return t}function jq(n){const e={},t=p(n,["format"]);t!=null&&g(e,["instancesFormat"],t);const i=p(n,["gcsUri"]);i!=null&&g(e,["gcsSource","uris"],i);const r=p(n,["bigqueryUri"]);if(r!=null&&g(e,["bigquerySource","inputUri"],r),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Jq(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Wq(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Xl(n,i)),t}function Qq(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Xl(n,i)),t}function Xq(n){const e={},t=p(n,["content"]);t!=null&&g(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],Zq(i));const r=p(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(n,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const d=p(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const f=p(n,["index"]);f!=null&&g(e,["index"],f);const h=p(n,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(n,["safetyRatings"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["safetyRatings"],E)}const T=p(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function Zq(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function m1(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>x9(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function e9(n,e){const t={},i=p(n,["displayName"]);if(e!==void 0&&i!=null&&g(e,["batch","displayName"],i),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function t9(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(n,["dest"]);return e!==void 0&&r!=null&&g(e,["outputConfig"],Yq(Gq(r))),t}function cI(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["src"]);r!=null&&g(t,["batch","inputConfig"],$q(n,f1(n,r)));const a=p(e,["config"]);return a!=null&&e9(a,t),t}function n9(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["model"],rt(n,i));const r=p(e,["src"]);r!=null&&g(t,["inputConfig"],jq(f1(n,r)));const a=p(e,["config"]);return a!=null&&t9(a,t),t}function i9(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["batch","displayName"],i),t}function s9(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["src"]);r!=null&&g(t,["batch","inputConfig"],d9(n,r));const a=p(e,["config"]);return a!=null&&i9(a,t),t}function r9(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Xl(n,i)),t}function o9(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Xl(n,i)),t}function a9(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);return a!=null&&g(e,["error"],a),e}function l9(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);return a!=null&&g(e,["error"],a),e}function u9(n,e){const t={},i=p(e,["contents"]);if(i!=null){let a=Qv(n,i);Array.isArray(a)&&(a=a.map(l=>l)),g(t,["requests[]","request","content"],a)}const r=p(e,["config"]);return r!=null&&(g(t,["_self"],c9(r,t)),oq(t,{"requests[].*":"requests[].request.*"})),t}function c9(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function d9(n,e){const t={},i=p(e,["fileName"]);i!=null&&g(t,["file_name"],i);const r=p(e,["inlinedRequests"]);return r!=null&&g(t,["requests"],u9(n,r)),t}function f9(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function h9(n,e,t){const i={},r=p(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],m1(bn(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const d=p(e,["topK"]);d!=null&&g(i,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&g(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const T=p(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const E=p(e,["logprobs"]);E!=null&&g(i,["logprobs"],E);const I=p(e,["presencePenalty"]);I!=null&&g(i,["presencePenalty"],I);const N=p(e,["frequencyPenalty"]);N!=null&&g(i,["frequencyPenalty"],N);const U=p(e,["seed"]);U!=null&&g(i,["seed"],U);const O=p(e,["responseMimeType"]);O!=null&&g(i,["responseMimeType"],O);const K=p(e,["responseSchema"]);K!=null&&g(i,["responseSchema"],Xv(K));const Z=p(e,["responseJsonSchema"]);if(Z!=null&&g(i,["responseJsonSchema"],Z),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=p(e,["safetySettings"]);if(t!==void 0&&j!=null){let q=j;Array.isArray(q)&&(q=q.map(k=>b9(k))),g(t,["safetySettings"],q)}const ae=p(e,["tools"]);if(t!==void 0&&ae!=null){let q=Ql(ae);Array.isArray(q)&&(q=q.map(k=>R9(Wl(k)))),g(t,["tools"],q)}const me=p(e,["toolConfig"]);if(t!==void 0&&me!=null&&g(t,["toolConfig"],me),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=p(e,["cachedContent"]);t!==void 0&&ce!=null&&g(t,["cachedContent"],ir(n,ce));const R=p(e,["responseModalities"]);R!=null&&g(i,["responseModalities"],R);const M=p(e,["mediaResolution"]);M!=null&&g(i,["mediaResolution"],M);const D=p(e,["speechConfig"]);if(D!=null&&g(i,["speechConfig"],Zv(D)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=p(e,["thinkingConfig"]);L!=null&&g(i,["thinkingConfig"],L);const P=p(e,["imageConfig"]);return P!=null&&g(i,["imageConfig"],P),i}function p9(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>Xq(h))),g(e,["candidates"],f)}const r=p(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(n,["responseId"]);l!=null&&g(e,["responseId"],l);const d=p(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function m9(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Xl(n,i)),t}function g9(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],Xl(n,i)),t}function _9(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function y9(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function v9(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["request","model"],rt(n,i));const r=p(e,["contents"]);if(r!=null){let d=Ei(r);Array.isArray(d)&&(d=d.map(f=>m1(f))),g(t,["request","contents"],d)}const a=p(e,["metadata"]);a!=null&&g(t,["metadata"],a);const l=p(e,["config"]);return l!=null&&g(t,["request","generationConfig"],h9(n,l,p(t,["request"],{}))),t}function T9(n){const e={},t=p(n,["response"]);t!=null&&g(e,["response"],p9(t));const i=p(n,["error"]);return i!=null&&g(e,["error"],i),e}function E9(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);if(e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function S9(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);e!==void 0&&r!=null&&g(e,["_query","pageToken"],r);const a=p(n,["filter"]);return e!==void 0&&a!=null&&g(e,["_query","filter"],a),t}function C9(n){const e={},t=p(n,["config"]);return t!=null&&E9(t,e),e}function w9(n){const e={},t=p(n,["config"]);return t!=null&&S9(t,e),e}function A9(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>ih(l))),g(e,["batchJobs"],a)}return e}function I9(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>ay(l))),g(e,["batchJobs"],a)}return e}function x9(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],f9(a));const l=p(n,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const d=p(n,["inlineData"]);d!=null&&g(e,["inlineData"],Jq(d));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function b9(n){const e={},t=p(n,["category"]);if(t!=null&&g(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function R9(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],_9(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],y9(f));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var er;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(er||(er={}));class ga{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class N9 extends nr{constructor(e){super(),this.apiClient=e,this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)},this.list=async(t={})=>new ga(er.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}createInlinedGenerateContentRequest(e){const t=cI(this.apiClient,e),i=t._url,r=_e("{model}:batchGenerateContent",i),d=t.batch.inputConfig.requests,f=d.requests,h=[];for(const y of f){const T=Object.assign({},y);if(T.systemInstruction){const E=T.systemInstruction;delete T.systemInstruction;const I=T.request;I.systemInstruction=E,T.request=I}h.push(T)}return d.requests=h,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=n9(this.apiClient,e);return d=_e("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>ay(y))}else{const h=cI(this.apiClient,e);return d=_e("{model}:batchGenerateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>ih(y))}}async createEmbeddingsInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=s9(this.apiClient,e);return a=_e("{model}:asyncBatchEmbedContent",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>ih(f))}}async get(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=g9(this.apiClient,e);return d=_e("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>ay(y))}else{const h=m9(this.apiClient,e);return d=_e("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>ih(y))}}async cancel(e){var t,i,r,a;let l="",d={};if(this.apiClient.isVertexAI()){const f=Qq(this.apiClient,e);l=_e("batchPredictionJobs/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=Wq(this.apiClient,e);l=_e("batches/{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=w9(e);return d=_e("batchPredictionJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=I9(y),E=new oI;return Object.assign(E,T),E})}else{const h=C9(e);return d=_e("batches",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=A9(y),E=new oI;return Object.assign(E,T),E})}}async delete(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=o9(this.apiClient,e);return d=_e("batchPredictionJobs/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>l9(y))}else{const h=r9(this.apiClient,e);return d=_e("batches/{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>a9(y))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M9(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function dI(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>X9(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function D9(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let y=Ei(l);Array.isArray(y)&&(y=y.map(T=>dI(T))),g(e,["contents"],y)}const d=p(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],dI(bn(d)));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let y=f;Array.isArray(y)&&(y=y.map(T=>Z9(T))),g(e,["tools"],y)}const h=p(n,["toolConfig"]);if(e!==void 0&&h!=null&&g(e,["toolConfig"],h),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function k9(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(n,["expireTime"]);e!==void 0&&r!=null&&g(e,["expireTime"],r);const a=p(n,["displayName"]);e!==void 0&&a!=null&&g(e,["displayName"],a);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let T=Ei(l);Array.isArray(T)&&(T=T.map(E=>E)),g(e,["contents"],T)}const d=p(n,["systemInstruction"]);e!==void 0&&d!=null&&g(e,["systemInstruction"],bn(d));const f=p(n,["tools"]);if(e!==void 0&&f!=null){let T=f;Array.isArray(T)&&(T=T.map(E=>eB(E))),g(e,["tools"],T)}const h=p(n,["toolConfig"]);e!==void 0&&h!=null&&g(e,["toolConfig"],h);const y=p(n,["kmsKeyName"]);return e!==void 0&&y!=null&&g(e,["encryption_spec","kmsKeyName"],y),t}function P9(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["model"],i1(n,i));const r=p(e,["config"]);return r!=null&&D9(r,t),t}function L9(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["model"],i1(n,i));const r=p(e,["config"]);return r!=null&&k9(r,t),t}function V9(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],ir(n,i)),t}function U9(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],ir(n,i)),t}function O9(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function F9(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function q9(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function B9(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&g(e,["description"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&g(e,["response"],l);const d=p(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function G9(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],ir(n,i)),t}function H9(n,e){const t={},i=p(e,["name"]);return i!=null&&g(t,["_url","name"],ir(n,i)),t}function z9(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function Y9(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function K9(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function $9(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function j9(n){const e={},t=p(n,["config"]);return t!=null&&K9(t,e),e}function J9(n){const e={},t=p(n,["config"]);return t!=null&&$9(t,e),e}function W9(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function Q9(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["cachedContents"],a)}return e}function X9(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],q9(a));const l=p(n,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const d=p(n,["inlineData"]);d!=null&&g(e,["inlineData"],M9(d));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function Z9(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],z9(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],Y9(f));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function eB(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>B9(E))),g(e,["functionDeclarations"],T)}const i=p(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(n,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const d=p(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(n,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function tB(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function nB(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&g(e,["ttl"],i);const r=p(n,["expireTime"]);return e!==void 0&&r!=null&&g(e,["expireTime"],r),t}function iB(n,e){const t={},i=p(e,["name"]);i!=null&&g(t,["_url","name"],ir(n,i));const r=p(e,["config"]);return r!=null&&tB(r,t),t}function sB(n,e){const t={},i=p(e,["name"]);i!=null&&g(t,["_url","name"],ir(n,i));const r=p(e,["config"]);return r!=null&&nB(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class rB extends nr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ga(er.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=L9(this.apiClient,e);return d=_e("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=P9(this.apiClient,e);return d=_e("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async get(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=H9(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=G9(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async delete(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=U9(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=F9(y),E=new sI;return Object.assign(E,T),E})}else{const h=V9(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=O9(y),E=new sI;return Object.assign(E,T),E})}}async update(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=sB(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>y)}else{const h=iB(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>y)}}async listInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=J9(e);return d=_e("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=Q9(y),E=new rI;return Object.assign(E,T),E})}else{const h=j9(e);return d=_e("cachedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=W9(y),E=new rI;return Object.assign(E,T),E})}}}function fI(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Nt(n){return this instanceof Nt?(this.v=n,this):new Nt(n)}function Sl(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(I){return function(N){return Promise.resolve(N).then(I,T)}}function d(I,N){i[I]&&(r[I]=function(U){return new Promise(function(O,K){a.push([I,U,O,K])>1||f(I,U)})},N&&(r[I]=N(r[I])))}function f(I,N){try{h(i[I](N))}catch(U){E(a[0][3],U)}}function h(I){I.value instanceof Nt?Promise.resolve(I.value.v).then(y,T):E(a[0][2],I)}function y(I){f("next",I)}function T(I){f("throw",I)}function E(I,N){I(N),a.shift(),a.length&&f(a[0][0],a[0][1])}}function Sc(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof fI=="function"?fI(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(l){return new Promise(function(d,f){l=n[a](l),r(d,f,l.done,l.value)})}}function r(a,l,d,f){Promise.resolve(f).then(function(h){a({value:h,done:d})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oB(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:g1(t)}function g1(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function aB(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function hI(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!g1(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class lB{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new uB(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class uB{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),aB(a)}async sendMessage(e){var t;await this.sendPromise;const i=bn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,l,d;const f=await r,h=(l=(a=f.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,y=f.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let E=[];y!=null&&(E=(d=y.slice(T))!==null&&d!==void 0?d:[]);const I=h?[h]:[];this.recordHistory(i,I,E)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=bn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?hI(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,r;return Sl(this,arguments,function*(){var l,d,f,h;const y=[];try{for(var T=!0,E=Sc(e),I;I=yield Nt(E.next()),l=I.done,!l;T=!0){h=I.value,T=!1;const N=h;if(oB(N)){const U=(r=(i=N.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;U!==void 0&&y.push(U)}yield yield Nt(N)}}catch(N){d={error:N}}finally{try{!T&&!l&&(f=E.return)&&(yield Nt(f.call(E)))}finally{if(d)throw d.error}}this.recordHistory(t,y)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...hI(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lp extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,Lp.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cB(n){const e={},t=p(n,["file"]);return t!=null&&g(e,["file"],t),e}function dB(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function fB(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","file"],u1(t)),e}function hB(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function pB(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","file"],u1(t)),e}function mB(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function gB(n){const e={},t=p(n,["config"]);return t!=null&&mB(t,e),e}function _B(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yB extends nr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ga(er.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=gB(e);return a=_e("files",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const h=_B(f),y=new Rq;return Object.assign(y,h),y})}}async createInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=cB(e);return a=_e("upload/v1beta/files",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=dB(f),y=new Nq;return Object.assign(y,h),y})}}async get(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pB(e);return a=_e("files/{file}",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=fB(e);return a=_e("files/{file}",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const h=hB(f),y=new Mq;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sh(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function vB(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>PB(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function TB(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function EB(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&g(e,["description"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&g(e,["response"],l);const d=p(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function SB(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=p(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const d=p(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const f=p(n,["logprobs"]);f!=null&&g(e,["logprobs"],f);const h=p(n,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(n,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const T=p(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const E=p(n,["responseLogprobs"]);E!=null&&g(e,["responseLogprobs"],E);const I=p(n,["responseMimeType"]);I!=null&&g(e,["responseMimeType"],I);const N=p(n,["responseModalities"]);N!=null&&g(e,["responseModalities"],N);const U=p(n,["responseSchema"]);U!=null&&g(e,["responseSchema"],U);const O=p(n,["routingConfig"]);O!=null&&g(e,["routingConfig"],O);const K=p(n,["seed"]);K!=null&&g(e,["seed"],K);const Z=p(n,["speechConfig"]);Z!=null&&g(e,["speechConfig"],_1(Z));const j=p(n,["stopSequences"]);j!=null&&g(e,["stopSequences"],j);const ae=p(n,["temperature"]);ae!=null&&g(e,["temperature"],ae);const me=p(n,["thinkingConfig"]);me!=null&&g(e,["thinkingConfig"],me);const ce=p(n,["topK"]);ce!=null&&g(e,["topK"],ce);const R=p(n,["topP"]);if(R!=null&&g(e,["topP"],R),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function CB(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function wB(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function AB(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const d=p(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(n,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const T=p(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],e0(T));const E=p(n,["thinkingConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","thinkingConfig"],E);const I=p(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],I);const N=p(n,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],vB(bn(N)));const U=p(n,["tools"]);if(e!==void 0&&U!=null){let ce=Ql(U);Array.isArray(ce)&&(ce=ce.map(R=>VB(Wl(R)))),g(e,["setup","tools"],ce)}const O=p(n,["sessionResumption"]);e!==void 0&&O!=null&&g(e,["setup","sessionResumption"],LB(O));const K=p(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","inputAudioTranscription"],K);const Z=p(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&g(e,["setup","outputAudioTranscription"],Z);const j=p(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&g(e,["setup","realtimeInputConfig"],j);const ae=p(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&g(e,["setup","contextWindowCompression"],ae);const me=p(n,["proactivity"]);return e!==void 0&&me!=null&&g(e,["setup","proactivity"],me),t}function IB(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],SB(i));const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const d=p(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(n,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const T=p(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],_1(e0(T)));const E=p(n,["thinkingConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","thinkingConfig"],E);const I=p(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],I);const N=p(n,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],bn(N));const U=p(n,["tools"]);if(e!==void 0&&U!=null){let ce=Ql(U);Array.isArray(ce)&&(ce=ce.map(R=>UB(Wl(R)))),g(e,["setup","tools"],ce)}const O=p(n,["sessionResumption"]);e!==void 0&&O!=null&&g(e,["setup","sessionResumption"],O);const K=p(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","inputAudioTranscription"],K);const Z=p(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&g(e,["setup","outputAudioTranscription"],Z);const j=p(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&g(e,["setup","realtimeInputConfig"],j);const ae=p(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&g(e,["setup","contextWindowCompression"],ae);const me=p(n,["proactivity"]);return e!==void 0&&me!=null&&g(e,["setup","proactivity"],me),t}function xB(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["setup","model"],rt(n,i));const r=p(e,["config"]);return r!=null&&g(t,["config"],AB(r,t)),t}function bB(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["setup","model"],rt(n,i));const r=p(e,["config"]);return r!=null&&g(t,["config"],IB(r,t)),t}function RB(n){const e={},t=p(n,["musicGenerationConfig"]);return t!=null&&g(e,["musicGenerationConfig"],t),e}function NB(n){const e={},t=p(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["weightedPrompts"],i)}return e}function MB(n){const e={},t=p(n,["media"]);if(t!=null){let h=s1(t);Array.isArray(h)&&(h=h.map(y=>sh(y))),g(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&g(e,["audio"],sh(o1(i)));const r=p(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(n,["video"]);a!=null&&g(e,["video"],sh(r1(a)));const l=p(n,["text"]);l!=null&&g(e,["text"],l);const d=p(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const f=p(n,["activityEnd"]);return f!=null&&g(e,["activityEnd"],f),e}function DB(n){const e={},t=p(n,["media"]);if(t!=null){let h=s1(t);Array.isArray(h)&&(h=h.map(y=>y)),g(e,["mediaChunks"],h)}const i=p(n,["audio"]);i!=null&&g(e,["audio"],o1(i));const r=p(n,["audioStreamEnd"]);r!=null&&g(e,["audioStreamEnd"],r);const a=p(n,["video"]);a!=null&&g(e,["video"],r1(a));const l=p(n,["text"]);l!=null&&g(e,["text"],l);const d=p(n,["activityStart"]);d!=null&&g(e,["activityStart"],d);const f=p(n,["activityEnd"]);return f!=null&&g(e,["activityEnd"],f),e}function kB(n){const e={},t=p(n,["setupComplete"]);t!=null&&g(e,["setupComplete"],t);const i=p(n,["serverContent"]);i!=null&&g(e,["serverContent"],i);const r=p(n,["toolCall"]);r!=null&&g(e,["toolCall"],r);const a=p(n,["toolCallCancellation"]);a!=null&&g(e,["toolCallCancellation"],a);const l=p(n,["usageMetadata"]);l!=null&&g(e,["usageMetadata"],OB(l));const d=p(n,["goAway"]);d!=null&&g(e,["goAway"],d);const f=p(n,["sessionResumptionUpdate"]);return f!=null&&g(e,["sessionResumptionUpdate"],f),e}function PB(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],TB(a));const l=p(n,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const d=p(n,["inlineData"]);d!=null&&g(e,["inlineData"],sh(d));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function LB(n){const e={},t=p(n,["handle"]);if(t!=null&&g(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function _1(n){const e={},t=p(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=p(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function VB(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],CB(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],wB(f));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function UB(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>EB(E))),g(e,["functionDeclarations"],T)}const i=p(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(n,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const d=p(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(n,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function OB(n){const e={},t=p(n,["promptTokenCount"]);t!=null&&g(e,["promptTokenCount"],t);const i=p(n,["cachedContentTokenCount"]);i!=null&&g(e,["cachedContentTokenCount"],i);const r=p(n,["candidatesTokenCount"]);r!=null&&g(e,["responseTokenCount"],r);const a=p(n,["toolUsePromptTokenCount"]);a!=null&&g(e,["toolUsePromptTokenCount"],a);const l=p(n,["thoughtsTokenCount"]);l!=null&&g(e,["thoughtsTokenCount"],l);const d=p(n,["totalTokenCount"]);d!=null&&g(e,["totalTokenCount"],d);const f=p(n,["promptTokensDetails"]);if(f!=null){let I=f;Array.isArray(I)&&(I=I.map(N=>N)),g(e,["promptTokensDetails"],I)}const h=p(n,["cacheTokensDetails"]);if(h!=null){let I=h;Array.isArray(I)&&(I=I.map(N=>N)),g(e,["cacheTokensDetails"],I)}const y=p(n,["candidatesTokensDetails"]);if(y!=null){let I=y;Array.isArray(I)&&(I=I.map(N=>N)),g(e,["responseTokensDetails"],I)}const T=p(n,["toolUsePromptTokensDetails"]);if(T!=null){let I=T;Array.isArray(I)&&(I=I.map(N=>N)),g(e,["toolUsePromptTokensDetails"],I)}const E=p(n,["trafficType"]);return E!=null&&g(e,["trafficType"],E),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FB(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function qB(n){const e={},t=p(n,["content"]);t!=null&&g(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&g(e,["citationMetadata"],BB(i));const r=p(n,["tokenCount"]);r!=null&&g(e,["tokenCount"],r);const a=p(n,["finishReason"]);a!=null&&g(e,["finishReason"],a);const l=p(n,["avgLogprobs"]);l!=null&&g(e,["avgLogprobs"],l);const d=p(n,["groundingMetadata"]);d!=null&&g(e,["groundingMetadata"],d);const f=p(n,["index"]);f!=null&&g(e,["index"],f);const h=p(n,["logprobsResult"]);h!=null&&g(e,["logprobsResult"],h);const y=p(n,["safetyRatings"]);if(y!=null){let E=y;Array.isArray(E)&&(E=E.map(I=>I)),g(e,["safetyRatings"],E)}const T=p(n,["urlContextMetadata"]);return T!=null&&g(e,["urlContextMetadata"],T),e}function BB(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),g(e,["citations"],i)}return e}function GB(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["contents"]);if(r!=null){let a=Ei(r);Array.isArray(a)&&(a=a.map(l=>l)),g(t,["contents"],a)}return t}function HB(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["tokensInfo"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["tokensInfo"],r)}return e}function zB(n){const e={},t=p(n,["values"]);t!=null&&g(e,["values"],t);const i=p(n,["statistics"]);return i!=null&&g(e,["statistics"],YB(i)),e}function YB(n){const e={},t=p(n,["truncated"]);t!=null&&g(e,["truncated"],t);const i=p(n,["token_count"]);return i!=null&&g(e,["tokenCount"],i),e}function Vp(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>WG(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function KB(n){const e={},t=p(n,["controlType"]);t!=null&&g(e,["controlType"],t);const i=p(n,["enableControlImageComputation"]);return i!=null&&g(e,["computeControl"],i),e}function $B(n){const e={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function jB(n,e){const t={},i=p(n,["systemInstruction"]);e!==void 0&&i!=null&&g(e,["systemInstruction"],bn(i));const r=p(n,["tools"]);if(e!==void 0&&r!=null){let l=r;Array.isArray(l)&&(l=l.map(d=>S1(d))),g(e,["tools"],l)}const a=p(n,["generationConfig"]);return e!==void 0&&a!=null&&g(e,["generationConfig"],UG(a)),t}function JB(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["contents"]);if(r!=null){let l=Ei(r);Array.isArray(l)&&(l=l.map(d=>Vp(d))),g(t,["contents"],l)}const a=p(e,["config"]);return a!=null&&$B(a),t}function WB(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["contents"]);if(r!=null){let l=Ei(r);Array.isArray(l)&&(l=l.map(d=>d)),g(t,["contents"],l)}const a=p(e,["config"]);return a!=null&&jB(a,t),t}function QB(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["totalTokens"]);i!=null&&g(e,["totalTokens"],i);const r=p(n,["cachedContentTokenCount"]);return r!=null&&g(e,["cachedContentTokenCount"],r),e}function XB(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["totalTokens"]);return i!=null&&g(e,["totalTokens"],i),e}function ZB(n,e){const t={},i=p(e,["model"]);return i!=null&&g(t,["_url","name"],rt(n,i)),t}function eG(n,e){const t={},i=p(e,["model"]);return i!=null&&g(t,["_url","name"],rt(n,i)),t}function tG(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function nG(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}function iG(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const d=p(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const f=p(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(n,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const T=p(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const E=p(n,["includeRaiReason"]);e!==void 0&&E!=null&&g(e,["parameters","includeRaiReason"],E);const I=p(n,["language"]);e!==void 0&&I!=null&&g(e,["parameters","language"],I);const N=p(n,["outputMimeType"]);e!==void 0&&N!=null&&g(e,["parameters","outputOptions","mimeType"],N);const U=p(n,["outputCompressionQuality"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","compressionQuality"],U);const O=p(n,["addWatermark"]);e!==void 0&&O!=null&&g(e,["parameters","addWatermark"],O);const K=p(n,["labels"]);e!==void 0&&K!=null&&g(e,["labels"],K);const Z=p(n,["editMode"]);e!==void 0&&Z!=null&&g(e,["parameters","editMode"],Z);const j=p(n,["baseSteps"]);return e!==void 0&&j!=null&&g(e,["parameters","editConfig","baseSteps"],j),t}function sG(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["referenceImages"]);if(a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>n7(f))),g(t,["instances[0]","referenceImages"],d)}const l=p(e,["config"]);return l!=null&&iG(l,t),t}function rG(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Up(a))),g(e,["generatedImages"],r)}return e}function oG(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&g(e,["requests[]","taskType"],i);const r=p(n,["title"]);e!==void 0&&r!=null&&g(e,["requests[]","title"],r);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&g(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function aG(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&g(e,["instances[]","task_type"],i);const r=p(n,["title"]);e!==void 0&&r!=null&&g(e,["instances[]","title"],r);const a=p(n,["outputDimensionality"]);e!==void 0&&a!=null&&g(e,["parameters","outputDimensionality"],a);const l=p(n,["mimeType"]);e!==void 0&&l!=null&&g(e,["instances[]","mimeType"],l);const d=p(n,["autoTruncate"]);return e!==void 0&&d!=null&&g(e,["parameters","autoTruncate"],d),t}function lG(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["contents"]);if(r!=null){let d=Qv(n,r);Array.isArray(d)&&(d=d.map(f=>f)),g(t,["requests[]","content"],d)}const a=p(e,["config"]);a!=null&&oG(a,t);const l=p(e,["model"]);return l!==void 0&&g(t,["requests[]","model"],rt(n,l)),t}function uG(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["contents"]);if(r!=null){let l=Qv(n,r);Array.isArray(l)&&(l=l.map(d=>d)),g(t,["instances[]","content"],l)}const a=p(e,["config"]);return a!=null&&aG(a,t),t}function cG(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["embeddings"],a)}const r=p(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function dG(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions[]","embeddings"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>zB(l))),g(e,["embeddings"],a)}const r=p(n,["metadata"]);return r!=null&&g(e,["metadata"],r),e}function fG(n){const e={},t=p(n,["endpoint"]);t!=null&&g(e,["name"],t);const i=p(n,["deployedModelId"]);return i!=null&&g(e,["deployedModelId"],i),e}function hG(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function pG(n){const e={};if(p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=p(n,["description"]);t!=null&&g(e,["description"],t);const i=p(n,["name"]);i!=null&&g(e,["name"],i);const r=p(n,["parameters"]);r!=null&&g(e,["parameters"],r);const a=p(n,["parametersJsonSchema"]);a!=null&&g(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&g(e,["response"],l);const d=p(n,["responseJsonSchema"]);return d!=null&&g(e,["responseJsonSchema"],d),e}function mG(n,e,t){const i={},r=p(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],Vp(bn(r)));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const d=p(e,["topK"]);d!=null&&g(i,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&g(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const T=p(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const E=p(e,["logprobs"]);E!=null&&g(i,["logprobs"],E);const I=p(e,["presencePenalty"]);I!=null&&g(i,["presencePenalty"],I);const N=p(e,["frequencyPenalty"]);N!=null&&g(i,["frequencyPenalty"],N);const U=p(e,["seed"]);U!=null&&g(i,["seed"],U);const O=p(e,["responseMimeType"]);O!=null&&g(i,["responseMimeType"],O);const K=p(e,["responseSchema"]);K!=null&&g(i,["responseSchema"],Xv(K));const Z=p(e,["responseJsonSchema"]);if(Z!=null&&g(i,["responseJsonSchema"],Z),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const j=p(e,["safetySettings"]);if(t!==void 0&&j!=null){let q=j;Array.isArray(q)&&(q=q.map(k=>i7(k))),g(t,["safetySettings"],q)}const ae=p(e,["tools"]);if(t!==void 0&&ae!=null){let q=Ql(ae);Array.isArray(q)&&(q=q.map(k=>u7(Wl(k)))),g(t,["tools"],q)}const me=p(e,["toolConfig"]);if(t!==void 0&&me!=null&&g(t,["toolConfig"],me),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const ce=p(e,["cachedContent"]);t!==void 0&&ce!=null&&g(t,["cachedContent"],ir(n,ce));const R=p(e,["responseModalities"]);R!=null&&g(i,["responseModalities"],R);const M=p(e,["mediaResolution"]);M!=null&&g(i,["mediaResolution"],M);const D=p(e,["speechConfig"]);if(D!=null&&g(i,["speechConfig"],Zv(D)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const L=p(e,["thinkingConfig"]);L!=null&&g(i,["thinkingConfig"],L);const P=p(e,["imageConfig"]);return P!=null&&g(i,["imageConfig"],P),i}function gG(n,e,t){const i={},r=p(e,["systemInstruction"]);t!==void 0&&r!=null&&g(t,["systemInstruction"],bn(r));const a=p(e,["temperature"]);a!=null&&g(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&g(i,["topP"],l);const d=p(e,["topK"]);d!=null&&g(i,["topK"],d);const f=p(e,["candidateCount"]);f!=null&&g(i,["candidateCount"],f);const h=p(e,["maxOutputTokens"]);h!=null&&g(i,["maxOutputTokens"],h);const y=p(e,["stopSequences"]);y!=null&&g(i,["stopSequences"],y);const T=p(e,["responseLogprobs"]);T!=null&&g(i,["responseLogprobs"],T);const E=p(e,["logprobs"]);E!=null&&g(i,["logprobs"],E);const I=p(e,["presencePenalty"]);I!=null&&g(i,["presencePenalty"],I);const N=p(e,["frequencyPenalty"]);N!=null&&g(i,["frequencyPenalty"],N);const U=p(e,["seed"]);U!=null&&g(i,["seed"],U);const O=p(e,["responseMimeType"]);O!=null&&g(i,["responseMimeType"],O);const K=p(e,["responseSchema"]);K!=null&&g(i,["responseSchema"],Xv(K));const Z=p(e,["responseJsonSchema"]);Z!=null&&g(i,["responseJsonSchema"],Z);const j=p(e,["routingConfig"]);j!=null&&g(i,["routingConfig"],j);const ae=p(e,["modelSelectionConfig"]);ae!=null&&g(i,["modelConfig"],ae);const me=p(e,["safetySettings"]);if(t!==void 0&&me!=null){let W=me;Array.isArray(W)&&(W=W.map(ue=>ue)),g(t,["safetySettings"],W)}const ce=p(e,["tools"]);if(t!==void 0&&ce!=null){let W=Ql(ce);Array.isArray(W)&&(W=W.map(ue=>S1(Wl(ue)))),g(t,["tools"],W)}const R=p(e,["toolConfig"]);t!==void 0&&R!=null&&g(t,["toolConfig"],R);const M=p(e,["labels"]);t!==void 0&&M!=null&&g(t,["labels"],M);const D=p(e,["cachedContent"]);t!==void 0&&D!=null&&g(t,["cachedContent"],ir(n,D));const L=p(e,["responseModalities"]);L!=null&&g(i,["responseModalities"],L);const P=p(e,["mediaResolution"]);P!=null&&g(i,["mediaResolution"],P);const q=p(e,["speechConfig"]);q!=null&&g(i,["speechConfig"],E1(Zv(q)));const k=p(e,["audioTimestamp"]);k!=null&&g(i,["audioTimestamp"],k);const Be=p(e,["thinkingConfig"]);Be!=null&&g(i,["thinkingConfig"],Be);const ht=p(e,["imageConfig"]);return ht!=null&&g(i,["imageConfig"],ht),i}function pI(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["contents"]);if(r!=null){let l=Ei(r);Array.isArray(l)&&(l=l.map(d=>Vp(d))),g(t,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(t,["generationConfig"],mG(n,a,t)),t}function mI(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["contents"]);if(r!=null){let l=Ei(r);Array.isArray(l)&&(l=l.map(d=>d)),g(t,["contents"],l)}const a=p(e,["config"]);return a!=null&&g(t,["generationConfig"],gG(n,a,t)),t}function gI(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let f=i;Array.isArray(f)&&(f=f.map(h=>qB(h))),g(e,["candidates"],f)}const r=p(n,["modelVersion"]);r!=null&&g(e,["modelVersion"],r);const a=p(n,["promptFeedback"]);a!=null&&g(e,["promptFeedback"],a);const l=p(n,["responseId"]);l!=null&&g(e,["responseId"],l);const d=p(n,["usageMetadata"]);return d!=null&&g(e,["usageMetadata"],d),e}function _I(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(y=>y)),g(e,["candidates"],h)}const r=p(n,["createTime"]);r!=null&&g(e,["createTime"],r);const a=p(n,["modelVersion"]);a!=null&&g(e,["modelVersion"],a);const l=p(n,["promptFeedback"]);l!=null&&g(e,["promptFeedback"],l);const d=p(n,["responseId"]);d!=null&&g(e,["responseId"],d);const f=p(n,["usageMetadata"]);return f!=null&&g(e,["usageMetadata"],f),e}function _G(n,e){const t={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(n,["aspectRatio"]);e!==void 0&&r!=null&&g(e,["parameters","aspectRatio"],r);const a=p(n,["guidanceScale"]);if(e!==void 0&&a!=null&&g(e,["parameters","guidanceScale"],a),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(n,["safetyFilterLevel"]);e!==void 0&&l!=null&&g(e,["parameters","safetySetting"],l);const d=p(n,["personGeneration"]);e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d);const f=p(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&g(e,["parameters","includeSafetyAttributes"],f);const h=p(n,["includeRaiReason"]);e!==void 0&&h!=null&&g(e,["parameters","includeRaiReason"],h);const y=p(n,["language"]);e!==void 0&&y!=null&&g(e,["parameters","language"],y);const T=p(n,["outputMimeType"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","mimeType"],T);const E=p(n,["outputCompressionQuality"]);if(e!==void 0&&E!=null&&g(e,["parameters","outputOptions","compressionQuality"],E),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const I=p(n,["imageSize"]);if(e!==void 0&&I!=null&&g(e,["parameters","sampleImageSize"],I),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function yG(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(n,["negativePrompt"]);e!==void 0&&r!=null&&g(e,["parameters","negativePrompt"],r);const a=p(n,["numberOfImages"]);e!==void 0&&a!=null&&g(e,["parameters","sampleCount"],a);const l=p(n,["aspectRatio"]);e!==void 0&&l!=null&&g(e,["parameters","aspectRatio"],l);const d=p(n,["guidanceScale"]);e!==void 0&&d!=null&&g(e,["parameters","guidanceScale"],d);const f=p(n,["seed"]);e!==void 0&&f!=null&&g(e,["parameters","seed"],f);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&g(e,["parameters","safetySetting"],h);const y=p(n,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const T=p(n,["includeSafetyAttributes"]);e!==void 0&&T!=null&&g(e,["parameters","includeSafetyAttributes"],T);const E=p(n,["includeRaiReason"]);e!==void 0&&E!=null&&g(e,["parameters","includeRaiReason"],E);const I=p(n,["language"]);e!==void 0&&I!=null&&g(e,["parameters","language"],I);const N=p(n,["outputMimeType"]);e!==void 0&&N!=null&&g(e,["parameters","outputOptions","mimeType"],N);const U=p(n,["outputCompressionQuality"]);e!==void 0&&U!=null&&g(e,["parameters","outputOptions","compressionQuality"],U);const O=p(n,["addWatermark"]);e!==void 0&&O!=null&&g(e,["parameters","addWatermark"],O);const K=p(n,["labels"]);e!==void 0&&K!=null&&g(e,["labels"],K);const Z=p(n,["imageSize"]);e!==void 0&&Z!=null&&g(e,["parameters","sampleImageSize"],Z);const j=p(n,["enhancePrompt"]);return e!==void 0&&j!=null&&g(e,["parameters","enhancePrompt"],j),t}function vG(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&_G(a,t),t}function TG(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["config"]);return a!=null&&yG(a,t),t}function EG(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>kG(l))),g(e,["generatedImages"],a)}const r=p(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],v1(r)),e}function SG(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>Up(l))),g(e,["generatedImages"],a)}const r=p(n,["positivePromptSafetyAttributes"]);return r!=null&&g(e,["positivePromptSafetyAttributes"],T1(r)),e}function CG(n,e){const t={},i=p(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=p(n,["durationSeconds"]);if(e!==void 0&&r!=null&&g(e,["parameters","durationSeconds"],r),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=p(n,["aspectRatio"]);e!==void 0&&a!=null&&g(e,["parameters","aspectRatio"],a);const l=p(n,["resolution"]);e!==void 0&&l!=null&&g(e,["parameters","resolution"],l);const d=p(n,["personGeneration"]);if(e!==void 0&&d!=null&&g(e,["parameters","personGeneration"],d),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=p(n,["negativePrompt"]);e!==void 0&&f!=null&&g(e,["parameters","negativePrompt"],f);const h=p(n,["enhancePrompt"]);if(e!==void 0&&h!=null&&g(e,["parameters","enhancePrompt"],h),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const y=p(n,["lastFrame"]);e!==void 0&&y!=null&&g(e,["instances[0]","lastFrame"],Op(y));const T=p(n,["referenceImages"]);if(e!==void 0&&T!=null){let E=T;Array.isArray(E)&&(E=E.map(I=>S7(I))),g(e,["instances[0]","referenceImages"],E)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function wG(n,e){const t={},i=p(n,["numberOfVideos"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&g(e,["parameters","storageUri"],r);const a=p(n,["fps"]);e!==void 0&&a!=null&&g(e,["parameters","fps"],a);const l=p(n,["durationSeconds"]);e!==void 0&&l!=null&&g(e,["parameters","durationSeconds"],l);const d=p(n,["seed"]);e!==void 0&&d!=null&&g(e,["parameters","seed"],d);const f=p(n,["aspectRatio"]);e!==void 0&&f!=null&&g(e,["parameters","aspectRatio"],f);const h=p(n,["resolution"]);e!==void 0&&h!=null&&g(e,["parameters","resolution"],h);const y=p(n,["personGeneration"]);e!==void 0&&y!=null&&g(e,["parameters","personGeneration"],y);const T=p(n,["pubsubTopic"]);e!==void 0&&T!=null&&g(e,["parameters","pubsubTopic"],T);const E=p(n,["negativePrompt"]);e!==void 0&&E!=null&&g(e,["parameters","negativePrompt"],E);const I=p(n,["enhancePrompt"]);e!==void 0&&I!=null&&g(e,["parameters","enhancePrompt"],I);const N=p(n,["generateAudio"]);e!==void 0&&N!=null&&g(e,["parameters","generateAudio"],N);const U=p(n,["lastFrame"]);e!==void 0&&U!=null&&g(e,["instances[0]","lastFrame"],Ki(U));const O=p(n,["referenceImages"]);if(e!==void 0&&O!=null){let j=O;Array.isArray(j)&&(j=j.map(ae=>C7(ae))),g(e,["instances[0]","referenceImages"],j)}const K=p(n,["mask"]);e!==void 0&&K!=null&&g(e,["instances[0]","mask"],E7(K));const Z=p(n,["compressionQuality"]);return e!==void 0&&Z!=null&&g(e,["parameters","compressionQuality"],Z),t}function AG(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response","generateVideoResponse"]);return l!=null&&g(e,["response"],RG(l)),e}function IG(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],NG(l)),e}function xG(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(t,["instances[0]","image"],Op(a));const l=p(e,["video"]);l!=null&&g(t,["instances[0]","video"],C1(l));const d=p(e,["source"]);d!=null&&MG(d,t);const f=p(e,["config"]);return f!=null&&CG(f,t),t}function bG(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["prompt"]);r!=null&&g(t,["instances[0]","prompt"],r);const a=p(e,["image"]);a!=null&&g(t,["instances[0]","image"],Ki(a));const l=p(e,["video"]);l!=null&&g(t,["instances[0]","video"],w1(l));const d=p(e,["source"]);d!=null&&DG(d,t);const f=p(e,["config"]);return f!=null&&wG(f,t),t}function RG(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>LG(l))),g(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function NG(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>VG(l))),g(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&g(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&g(e,["raiMediaFilteredReasons"],r),e}function MG(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],Op(r));const a=p(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],C1(a)),t}function DG(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],Ki(r));const a=p(n,["video"]);return e!==void 0&&a!=null&&g(e,["instances[0]","video"],w1(a)),t}function kG(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["image"],GG(t));const i=p(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(n,["_self"]);return r!=null&&g(e,["safetyAttributes"],v1(r)),e}function Up(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["image"],y1(t));const i=p(n,["raiFilteredReason"]);i!=null&&g(e,["raiFilteredReason"],i);const r=p(n,["_self"]);r!=null&&g(e,["safetyAttributes"],T1(r));const a=p(n,["prompt"]);return a!=null&&g(e,["enhancedPrompt"],a),e}function PG(n){const e={},t=p(n,["_self"]);t!=null&&g(e,["mask"],y1(t));const i=p(n,["labels"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(e,["labels"],r)}return e}function LG(n){const e={},t=p(n,["video"]);return t!=null&&g(e,["video"],v7(t)),e}function VG(n){const e={},t=p(n,["_self"]);return t!=null&&g(e,["video"],T7(t)),e}function UG(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&g(e,["modelConfig"],t);const i=p(n,["responseJsonSchema"]);i!=null&&g(e,["responseJsonSchema"],i);const r=p(n,["audioTimestamp"]);r!=null&&g(e,["audioTimestamp"],r);const a=p(n,["candidateCount"]);a!=null&&g(e,["candidateCount"],a);const l=p(n,["enableAffectiveDialog"]);l!=null&&g(e,["enableAffectiveDialog"],l);const d=p(n,["frequencyPenalty"]);d!=null&&g(e,["frequencyPenalty"],d);const f=p(n,["logprobs"]);f!=null&&g(e,["logprobs"],f);const h=p(n,["maxOutputTokens"]);h!=null&&g(e,["maxOutputTokens"],h);const y=p(n,["mediaResolution"]);y!=null&&g(e,["mediaResolution"],y);const T=p(n,["presencePenalty"]);T!=null&&g(e,["presencePenalty"],T);const E=p(n,["responseLogprobs"]);E!=null&&g(e,["responseLogprobs"],E);const I=p(n,["responseMimeType"]);I!=null&&g(e,["responseMimeType"],I);const N=p(n,["responseModalities"]);N!=null&&g(e,["responseModalities"],N);const U=p(n,["responseSchema"]);U!=null&&g(e,["responseSchema"],U);const O=p(n,["routingConfig"]);O!=null&&g(e,["routingConfig"],O);const K=p(n,["seed"]);K!=null&&g(e,["seed"],K);const Z=p(n,["speechConfig"]);Z!=null&&g(e,["speechConfig"],E1(Z));const j=p(n,["stopSequences"]);j!=null&&g(e,["stopSequences"],j);const ae=p(n,["temperature"]);ae!=null&&g(e,["temperature"],ae);const me=p(n,["thinkingConfig"]);me!=null&&g(e,["thinkingConfig"],me);const ce=p(n,["topK"]);ce!=null&&g(e,["topK"],ce);const R=p(n,["topP"]);if(R!=null&&g(e,["topP"],R),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function OG(n,e){const t={},i=p(e,["model"]);return i!=null&&g(t,["_url","name"],rt(n,i)),t}function FG(n,e){const t={},i=p(e,["model"]);return i!=null&&g(t,["_url","name"],rt(n,i)),t}function qG(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function BG(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function GG(n){const e={},t=p(n,["bytesBase64Encoded"]);t!=null&&g(e,["imageBytes"],ho(t));const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function y1(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&g(e,["imageBytes"],ho(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function Op(n){const e={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=p(n,["imageBytes"]);t!=null&&g(e,["bytesBase64Encoded"],ho(t));const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Ki(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["gcsUri"],t);const i=p(n,["imageBytes"]);i!=null&&g(e,["bytesBase64Encoded"],ho(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function HG(n,e,t){const i={},r=p(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const l=p(e,["filter"]);t!==void 0&&l!=null&&g(t,["_query","filter"],l);const d=p(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],c1(n,d)),i}function zG(n,e,t){const i={},r=p(e,["pageSize"]);t!==void 0&&r!=null&&g(t,["_query","pageSize"],r);const a=p(e,["pageToken"]);t!==void 0&&a!=null&&g(t,["_query","pageToken"],a);const l=p(e,["filter"]);t!==void 0&&l!=null&&g(t,["_query","filter"],l);const d=p(e,["queryBase"]);return t!==void 0&&d!=null&&g(t,["_url","models_url"],c1(n,d)),i}function YG(n,e){const t={},i=p(e,["config"]);return i!=null&&HG(n,i,t),t}function KG(n,e){const t={},i=p(e,["config"]);return i!=null&&zG(n,i,t),t}function $G(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["_self"]);if(r!=null){let a=d1(r);Array.isArray(a)&&(a=a.map(l=>ly(l))),g(e,["models"],a)}return e}function jG(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["_self"]);if(r!=null){let a=d1(r);Array.isArray(a)&&(a=a.map(l=>uy(l))),g(e,["models"],a)}return e}function JG(n){const e={},t=p(n,["maskMode"]);t!=null&&g(e,["maskMode"],t);const i=p(n,["segmentationClasses"]);i!=null&&g(e,["maskClasses"],i);const r=p(n,["maskDilation"]);return r!=null&&g(e,["dilation"],r),e}function ly(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(n,["description"]);r!=null&&g(e,["description"],r);const a=p(n,["version"]);a!=null&&g(e,["version"],a);const l=p(n,["_self"]);l!=null&&g(e,["tunedModelInfo"],c7(l));const d=p(n,["inputTokenLimit"]);d!=null&&g(e,["inputTokenLimit"],d);const f=p(n,["outputTokenLimit"]);f!=null&&g(e,["outputTokenLimit"],f);const h=p(n,["supportedGenerationMethods"]);return h!=null&&g(e,["supportedActions"],h),e}function uy(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["displayName"]);i!=null&&g(e,["displayName"],i);const r=p(n,["description"]);r!=null&&g(e,["description"],r);const a=p(n,["versionId"]);a!=null&&g(e,["version"],a);const l=p(n,["deployedModels"]);if(l!=null){let T=l;Array.isArray(T)&&(T=T.map(E=>fG(E))),g(e,["endpoints"],T)}const d=p(n,["labels"]);d!=null&&g(e,["labels"],d);const f=p(n,["_self"]);f!=null&&g(e,["tunedModelInfo"],d7(f));const h=p(n,["defaultCheckpointId"]);h!=null&&g(e,["defaultCheckpointId"],h);const y=p(n,["checkpoints"]);if(y!=null){let T=y;Array.isArray(T)&&(T=T.map(E=>E)),g(e,["checkpoints"],T)}return e}function WG(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],hG(a));const l=p(n,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const d=p(n,["inlineData"]);d!=null&&g(e,["inlineData"],FB(d));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function QG(n){const e={},t=p(n,["productImage"]);return t!=null&&g(e,["image"],Ki(t)),e}function XG(n,e){const t={},i=p(n,["numberOfImages"]);e!==void 0&&i!=null&&g(e,["parameters","sampleCount"],i);const r=p(n,["baseSteps"]);e!==void 0&&r!=null&&g(e,["parameters","editConfig","baseSteps"],r);const a=p(n,["outputGcsUri"]);e!==void 0&&a!=null&&g(e,["parameters","storageUri"],a);const l=p(n,["seed"]);e!==void 0&&l!=null&&g(e,["parameters","seed"],l);const d=p(n,["safetyFilterLevel"]);e!==void 0&&d!=null&&g(e,["parameters","safetySetting"],d);const f=p(n,["personGeneration"]);e!==void 0&&f!=null&&g(e,["parameters","personGeneration"],f);const h=p(n,["addWatermark"]);e!==void 0&&h!=null&&g(e,["parameters","addWatermark"],h);const y=p(n,["outputMimeType"]);e!==void 0&&y!=null&&g(e,["parameters","outputOptions","mimeType"],y);const T=p(n,["outputCompressionQuality"]);e!==void 0&&T!=null&&g(e,["parameters","outputOptions","compressionQuality"],T);const E=p(n,["enhancePrompt"]);e!==void 0&&E!=null&&g(e,["parameters","enhancePrompt"],E);const I=p(n,["labels"]);return e!==void 0&&I!=null&&g(e,["labels"],I),t}function ZG(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["source"]);r!=null&&t7(r,t);const a=p(e,["config"]);return a!=null&&XG(a,t),t}function e7(n){const e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Up(r))),g(e,["generatedImages"],i)}return e}function t7(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(n,["personImage"]);e!==void 0&&r!=null&&g(e,["instances[0]","personImage","image"],Ki(r));const a=p(n,["productImages"]);if(e!==void 0&&a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>QG(d))),g(e,["instances[0]","productImages"],l)}return t}function n7(n){const e={},t=p(n,["referenceImage"]);t!=null&&g(e,["referenceImage"],Ki(t));const i=p(n,["referenceId"]);i!=null&&g(e,["referenceId"],i);const r=p(n,["referenceType"]);r!=null&&g(e,["referenceType"],r);const a=p(n,["maskImageConfig"]);a!=null&&g(e,["maskImageConfig"],JG(a));const l=p(n,["controlImageConfig"]);l!=null&&g(e,["controlImageConfig"],KB(l));const d=p(n,["styleImageConfig"]);d!=null&&g(e,["styleImageConfig"],d);const f=p(n,["subjectImageConfig"]);return f!=null&&g(e,["subjectImageConfig"],f),e}function v1(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=p(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function T1(n){const e={},t=p(n,["safetyAttributes","categories"]);t!=null&&g(e,["categories"],t);const i=p(n,["safetyAttributes","scores"]);i!=null&&g(e,["scores"],i);const r=p(n,["contentType"]);return r!=null&&g(e,["contentType"],r),e}function i7(n){const e={},t=p(n,["category"]);if(t!=null&&g(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(n,["threshold"]);return i!=null&&g(e,["threshold"],i),e}function s7(n){const e={},t=p(n,["image"]);return t!=null&&g(e,["image"],Ki(t)),e}function r7(n,e){const t={},i=p(n,["mode"]);e!==void 0&&i!=null&&g(e,["parameters","mode"],i);const r=p(n,["maxPredictions"]);e!==void 0&&r!=null&&g(e,["parameters","maxPredictions"],r);const a=p(n,["confidenceThreshold"]);e!==void 0&&a!=null&&g(e,["parameters","confidenceThreshold"],a);const l=p(n,["maskDilation"]);e!==void 0&&l!=null&&g(e,["parameters","maskDilation"],l);const d=p(n,["binaryColorThreshold"]);e!==void 0&&d!=null&&g(e,["parameters","binaryColorThreshold"],d);const f=p(n,["labels"]);return e!==void 0&&f!=null&&g(e,["labels"],f),t}function o7(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["source"]);r!=null&&l7(r,t);const a=p(e,["config"]);return a!=null&&r7(a,t),t}function a7(n){const e={},t=p(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>PG(r))),g(e,["generatedMasks"],i)}return e}function l7(n,e){const t={},i=p(n,["prompt"]);e!==void 0&&i!=null&&g(e,["instances[0]","prompt"],i);const r=p(n,["image"]);e!==void 0&&r!=null&&g(e,["instances[0]","image"],Ki(r));const a=p(n,["scribbleImage"]);return e!==void 0&&a!=null&&g(e,["instances[0]","scribble"],s7(a)),t}function E1(n){const e={},t=p(n,["languageCode"]);t!=null&&g(e,["languageCode"],t);const i=p(n,["voiceConfig"]);if(i!=null&&g(e,["voiceConfig"],i),p(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function u7(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],qG(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],BG(f));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}function S1(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let T=t;Array.isArray(T)&&(T=T.map(E=>pG(E))),g(e,["functionDeclarations"],T)}const i=p(n,["retrieval"]);i!=null&&g(e,["retrieval"],i);const r=p(n,["googleSearchRetrieval"]);r!=null&&g(e,["googleSearchRetrieval"],r);const a=p(n,["computerUse"]);if(a!=null&&g(e,["computerUse"],a),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const l=p(n,["codeExecution"]);l!=null&&g(e,["codeExecution"],l);const d=p(n,["enterpriseWebSearch"]);d!=null&&g(e,["enterpriseWebSearch"],d);const f=p(n,["googleMaps"]);f!=null&&g(e,["googleMaps"],f);const h=p(n,["googleSearch"]);h!=null&&g(e,["googleSearch"],h);const y=p(n,["urlContext"]);return y!=null&&g(e,["urlContext"],y),e}function c7(n){const e={},t=p(n,["baseModel"]);t!=null&&g(e,["baseModel"],t);const i=p(n,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function d7(n){const e={},t=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&g(e,["baseModel"],t);const i=p(n,["createTime"]);i!=null&&g(e,["createTime"],i);const r=p(n,["updateTime"]);return r!=null&&g(e,["updateTime"],r),e}function f7(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function h7(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&g(e,["displayName"],i);const r=p(n,["description"]);e!==void 0&&r!=null&&g(e,["description"],r);const a=p(n,["defaultCheckpointId"]);return e!==void 0&&a!=null&&g(e,["defaultCheckpointId"],a),t}function p7(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","name"],rt(n,i));const r=p(e,["config"]);return r!=null&&f7(r,t),t}function m7(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["config"]);return r!=null&&h7(r,t),t}function g7(n,e){const t={},i=p(n,["outputGcsUri"]);e!==void 0&&i!=null&&g(e,["parameters","storageUri"],i);const r=p(n,["safetyFilterLevel"]);e!==void 0&&r!=null&&g(e,["parameters","safetySetting"],r);const a=p(n,["personGeneration"]);e!==void 0&&a!=null&&g(e,["parameters","personGeneration"],a);const l=p(n,["includeRaiReason"]);e!==void 0&&l!=null&&g(e,["parameters","includeRaiReason"],l);const d=p(n,["outputMimeType"]);e!==void 0&&d!=null&&g(e,["parameters","outputOptions","mimeType"],d);const f=p(n,["outputCompressionQuality"]);e!==void 0&&f!=null&&g(e,["parameters","outputOptions","compressionQuality"],f);const h=p(n,["enhanceInputImage"]);e!==void 0&&h!=null&&g(e,["parameters","upscaleConfig","enhanceInputImage"],h);const y=p(n,["imagePreservationFactor"]);e!==void 0&&y!=null&&g(e,["parameters","upscaleConfig","imagePreservationFactor"],y);const T=p(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const E=p(n,["numberOfImages"]);e!==void 0&&E!=null&&g(e,["parameters","sampleCount"],E);const I=p(n,["mode"]);return e!==void 0&&I!=null&&g(e,["parameters","mode"],I),t}function _7(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["_url","model"],rt(n,i));const r=p(e,["image"]);r!=null&&g(t,["instances[0]","image"],Ki(r));const a=p(e,["upscaleFactor"]);a!=null&&g(t,["parameters","upscaleConfig","upscaleFactor"],a);const l=p(e,["config"]);return l!=null&&g7(l,t),t}function y7(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>Up(a))),g(e,["generatedImages"],r)}return e}function v7(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&g(e,["videoBytes"],ho(i));const r=p(n,["encoding"]);return r!=null&&g(e,["mimeType"],r),e}function T7(n){const e={},t=p(n,["gcsUri"]);t!=null&&g(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&g(e,["videoBytes"],ho(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}function E7(n){const e={},t=p(n,["image"]);t!=null&&g(e,["_self"],Ki(t));const i=p(n,["maskMode"]);return i!=null&&g(e,["maskMode"],i),e}function S7(n){const e={},t=p(n,["image"]);t!=null&&g(e,["image"],Op(t));const i=p(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function C7(n){const e={},t=p(n,["image"]);t!=null&&g(e,["image"],Ki(t));const i=p(n,["referenceType"]);return i!=null&&g(e,["referenceType"],i),e}function C1(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["uri"],t);const i=p(n,["videoBytes"]);i!=null&&g(e,["encodedVideo"],ho(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["encoding"],r),e}function w1(n){const e={},t=p(n,["uri"]);t!=null&&g(e,["gcsUri"],t);const i=p(n,["videoBytes"]);i!=null&&g(e,["bytesBase64Encoded"],ho(i));const r=p(n,["mimeType"]);return r!=null&&g(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const w7="Content-Type",A7="X-Server-Timeout",I7="User-Agent",cy="x-goog-api-client",x7="1.29.0",b7=`google-genai-sdk/${x7}`,R7="v1beta1",N7="v1beta",yI=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class M7{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:R7,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:N7,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[l,d]of Object.entries(e.queryParams))r.searchParams.append(l,String(d));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,l=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const d=setTimeout(()=>a.abort(),t.timeout);d&&typeof d.unref=="function"&&d.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=l}return t&&t.extraBody!==null&&D7(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await vI(r),new ry(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await vI(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return Sl(this,arguments,function*(){const r=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";for(;;){const{done:d,value:f}=yield Nt(r.read());if(d){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const h=a.decode(f,{stream:!0});try{const T=JSON.parse(h);if("error"in T){const E=JSON.parse(JSON.stringify(T.error)),I=E.status,N=E.code,U=`got status: ${I}. ${JSON.stringify(T)}`;if(N>=400&&N<600)throw new Lp({message:U,status:N})}}catch(T){if(T.name==="ApiError")throw T}l+=h;let y=l.match(yI);for(;y;){const T=y[1];try{const E=new Response(T,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Nt(new ry(E)),l=l.slice(y[0].length),y=l.match(yI)}catch(E){throw new Error(`exception parsing stream chunk ${T}. ${E}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=b7+" "+this.clientOptions.userAgentExtra;return e[I7]=t,e[cy]=t,e[w7]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(A7,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);r.sizeBytes=String(l.size);const d=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:l.type;if(d===void 0||d==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=d;const f={file:r},h=this.getFileName(e),y=_e("upload/v1beta/files",f._url),T=await this.fetchUploadUrl(y,r.sizeBytes,r.mimeType,h,f,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const a=this.clientOptions.uploader,l=await a.stat(t),d=String(l.size),f=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const h=`upload/v1beta/${e}:uploadToFileSearchStore`,y=this.getFileName(t),T={};i!=null&&i.customMetadata&&(T.customMetadata=i.customMetadata),i!=null&&i.chunkingConfig&&(T.chunkingConfig=i.chunkingConfig);const E=await this.fetchUploadUrl(h,d,f,y,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,E,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,a,l){var d;let f={};l?f=l:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const h=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:f});if(!h||!(h!=null&&h.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const y=(d=h==null?void 0:h.headers)===null||d===void 0?void 0:d["x-goog-upload-url"];if(y===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return y}}async function vI(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new Lp({message:r,status:t}):new Error(r)}}function D7(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const d=Object.assign({},a);for(const f in l)if(Object.prototype.hasOwnProperty.call(l,f)){const h=l[f],y=d[f];h&&typeof h=="object"&&!Array.isArray(h)&&y&&typeof y=="object"&&!Array.isArray(y)?d[f]=i(y,h):(y&&h&&typeof y!=typeof h&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof y}, New type: ${typeof h}. Overwriting.`),d[f]=h)}return d}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const k7="mcp_used/unknown";let P7=!1;function A1(n){for(const e of n)if(L7(e)||typeof e=="object"&&"inputSchema"in e)return!0;return P7}function I1(n){var e;const t=(e=n[cy])!==null&&e!==void 0?e:"";n[cy]=(t+` ${k7}`).trimStart()}function L7(n){return n!==null&&typeof n=="object"&&n instanceof t0}function V7(n,e=100){return Sl(this,arguments,function*(){let i,r=0;for(;r<e;){const a=yield Nt(n.listTools({cursor:i}));for(const l of a.tools)yield yield Nt(l),r++;if(!a.nextCursor)break;i=a.nextCursor}})}class t0{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new t0(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},l=[];for(const y of this.mcpClients)try{for(var d=!0,f=(t=void 0,Sc(V7(y))),h;h=await f.next(),e=h.done,!e;d=!0){r=h.value,d=!1;const T=r;l.push(T);const E=T.name;if(a[E])throw new Error(`Duplicate function name ${E} found in MCP tools. Please ensure function names are unique.`);a[E]=y}}catch(T){t={error:T}}finally{try{!d&&!e&&(i=f.return)&&await i.call(f)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),Bq(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function U7(n,e,t){const i=new kq;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class O7{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=B7(this.apiClient.getDefaultHeaders()),d=this.apiClient.getApiKey(),f=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${d}`;let h=()=>{};const y=new Promise(j=>{h=j}),T=e.callbacks,E=function(){h({})},I=this.apiClient,N={onopen:E,onmessage:j=>{U7(I,T.onmessage,j)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(j){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(j){}},U=this.webSocketFactory.create(f,q7(l),N);U.connect(),await y;const Z={setup:{model:rt(this.apiClient,e.model)}};return U.send(JSON.stringify(Z)),new F7(U,this.apiClient)}}class F7{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=NB(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=RB(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(fl.PLAY)}pause(){this.sendPlaybackControl(fl.PAUSE)}stop(){this.sendPlaybackControl(fl.STOP)}resetContext(){this.sendPlaybackControl(fl.RESET_CONTEXT)}close(){this.conn.close()}}function q7(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function B7(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const G7="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function H7(n,e,t){const i=new Dq;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const l=kB(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class z7{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new O7(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,l,d;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),h=this.apiClient.getApiVersion();let y;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&A1(e.config.tools)&&I1(T);const E=j7(T);if(this.apiClient.isVertexAI())y=`${f}/ws/google.cloud.aiplatform.${h}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(E,y);else{const D=this.apiClient.getApiKey();let L="BidiGenerateContent",P="key";D!=null&&D.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),h!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),L="BidiGenerateContentConstrained",P="access_token"),y=`${f}/ws/google.ai.generativelanguage.${h}.GenerativeService.${L}?${P}=${D}`}let I=()=>{};const N=new Promise(D=>{I=D}),U=e.callbacks,O=function(){var D;(D=U==null?void 0:U.onopen)===null||D===void 0||D.call(U),I({})},K=this.apiClient,Z={onopen:O,onmessage:D=>{H7(K,U.onmessage,D)},onerror:(t=U==null?void 0:U.onerror)!==null&&t!==void 0?t:function(D){},onclose:(i=U==null?void 0:U.onclose)!==null&&i!==void 0?i:function(D){}},j=this.webSocketFactory.create(y,$7(E),Z);j.connect(),await N;let ae=rt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&ae.startsWith("publishers/")){const D=this.apiClient.getProject(),L=this.apiClient.getLocation();ae=`projects/${D}/locations/${L}/`+ae}let me={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Gh.AUDIO]}:e.config.responseModalities=[Gh.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const ce=(d=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[],R=[];for(const D of ce)if(this.isCallableTool(D)){const L=D;R.push(await L.tool())}else R.push(D);R.length>0&&(e.config.tools=R);const M={model:ae,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?me=bB(this.apiClient,M):me=xB(this.apiClient,M),delete me.config,j.send(JSON.stringify(me)),new K7(j,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const Y7={turnComplete:!0};class K7{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=Ei(t.turns),e.isVertexAI()||(i=i.map(r=>Vp(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(G7)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},Y7),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:DB(e)}:t={realtimeInput:MB(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function $7(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function j7(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TI=10;function EI(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Cl(l)){r=!0;break}if(!r)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Cl(n){return"callTool"in n&&typeof n.callTool=="function"}function J7(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Cl(r)))!==null&&i!==void 0?i:!1}function SI(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(Cl(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(r)}),t}function CI(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class W7 extends nr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,a,l,d;const f=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!J7(t)||EI(t.config))return await this.generateContentInternal(f);const h=SI(t);if(h.length>0){const U=h.map(O=>`tools[${O}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${U}.`)}let y,T;const E=Ei(f.contents),I=(a=(r=(i=f.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:TI;let N=0;for(;N<I&&(y=await this.generateContentInternal(f),!(!y.functionCalls||y.functionCalls.length===0));){const U=y.candidates[0].content,O=[];for(const K of(d=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&d!==void 0?d:[])if(Cl(K)){const j=await K.callTool(y.functionCalls);O.push(...j)}N++,T={role:"user",parts:O},f.contents=Ei(f.contents),f.contents.push(U),f.contents.push(T),CI(f.config)&&(E.push(U),E.push(T))}return CI(f.config)&&(y.automaticFunctionCallingHistory=E),y},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),EI(t.config)){const r=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(r)}const i=SI(t);if(i.length>0){const r=i.map(a=>`tools[${a}]`).join(", ");throw new Error(`Incompatible tools found at ${r}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const l=[];if(i!=null&&i.generatedImages)for(const f of i.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((r=f==null?void 0:f.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=f==null?void 0:f.safetyAttributes:l.push(f);let d;return a?d={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:d={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},d}),this.list=async t=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new ga(er.PAGED_ITEM_MODELS,d=>this.listInternal(d),await this.listInternal(l),l)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,l,d,f;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((f=(d=t.source)===null||d===void 0?void 0:d.video)===null||f===void 0)&&f.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const l=await Promise.all(a.map(async f=>Cl(f)?await f.tool():f)),d={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(d.config.tools=l,e.config&&e.config.tools&&A1(e.config.tools)){const f=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let h=Object.assign({},f);Object.keys(h).length===0&&(h=this.apiClient.getDefaultHeaders()),I1(h),d.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:h})}return d}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const l of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Cl(l)){const d=l,f=await d.tool();for(const h of(r=f.functionDeclarations)!==null&&r!==void 0?r:[]){if(!h.name)throw new Error("Function declaration name is required.");if(a.has(h.name))throw new Error(`Duplicate tool declaration name: ${h.name}`);a.set(h.name,d)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:TI;let l=!1,d=0;const f=await this.initAfcToolsMap(e);return(function(h,y,T){var E,I;return Sl(this,arguments,function*(){for(var N,U,O,K;d<a;){l&&(d++,l=!1);const me=yield Nt(h.processParamsMaybeAddMcpUsage(T)),ce=yield Nt(h.generateContentStreamInternal(me)),R=[],M=[];try{for(var Z=!0,j=(U=void 0,Sc(ce)),ae;ae=yield Nt(j.next()),N=ae.done,!N;Z=!0){K=ae.value,Z=!1;const D=K;if(yield yield Nt(D),D.candidates&&(!((E=D.candidates[0])===null||E===void 0)&&E.content)){M.push(D.candidates[0].content);for(const L of(I=D.candidates[0].content.parts)!==null&&I!==void 0?I:[])if(d<a&&L.functionCall){if(!L.functionCall.name)throw new Error("Function call name was not returned by the model.");if(y.has(L.functionCall.name)){const P=yield Nt(y.get(L.functionCall.name).callTool([L.functionCall]));R.push(...P)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${y.keys()}, mising tool: ${L.functionCall.name}`)}}}}catch(D){U={error:D}}finally{try{!Z&&!N&&(O=j.return)&&(yield Nt(O.call(j)))}finally{if(U)throw U.error}}if(R.length>0){l=!0;const D=new oc;D.candidates=[{content:{role:"user",parts:R}}],yield yield Nt(D);const L=[];L.push(...M),L.push({role:"user",parts:R});const P=Ei(T.contents).concat(L);T.contents=P}else break}})})(this,f,e)}async generateContentInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=mI(this.apiClient,e);return d=_e("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=_I(y),E=new oc;return Object.assign(E,T),E})}else{const h=pI(this.apiClient,e);return d=_e("{model}:generateContent",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=gI(y),E=new oc;return Object.assign(E,T),E})}}async generateContentStreamInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=mI(this.apiClient,e);return d=_e("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(T){return Sl(this,arguments,function*(){var E,I,N,U;try{for(var O=!0,K=Sc(T),Z;Z=yield Nt(K.next()),E=Z.done,!E;O=!0){U=Z.value,O=!1;const j=U,ae=_I(yield Nt(j.json()));ae.sdkHttpResponse={headers:j.headers};const me=new oc;Object.assign(me,ae),yield yield Nt(me)}}catch(j){I={error:j}}finally{try{!O&&!E&&(N=K.return)&&(yield Nt(N.call(K)))}finally{if(I)throw I.error}}})})}else{const h=pI(this.apiClient,e);return d=_e("{model}:streamGenerateContent?alt=sse",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.requestStream({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(T){return Sl(this,arguments,function*(){var E,I,N,U;try{for(var O=!0,K=Sc(T),Z;Z=yield Nt(K.next()),E=Z.done,!E;O=!0){U=Z.value,O=!1;const j=U,ae=gI(yield Nt(j.json()));ae.sdkHttpResponse={headers:j.headers};const me=new oc;Object.assign(me,ae),yield yield Nt(me)}}catch(j){I={error:j}}finally{try{!O&&!E&&(N=K.return)&&(yield Nt(N.call(K)))}finally{if(I)throw I.error}}})})}}async embedContent(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=uG(this.apiClient,e);return d=_e("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=dG(y),E=new XA;return Object.assign(E,T),E})}else{const h=lG(this.apiClient,e);return d=_e("{model}:batchEmbedContents",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=cG(y),E=new XA;return Object.assign(E,T),E})}}async generateImagesInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=TG(this.apiClient,e);return d=_e("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=SG(y),E=new ZA;return Object.assign(E,T),E})}else{const h=vG(this.apiClient,e);return d=_e("{model}:predict",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=EG(y),E=new ZA;return Object.assign(E,T),E})}}async editImageInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const d=sG(this.apiClient,e);return a=_e("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const h=rG(f),y=new Eq;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const d=_7(this.apiClient,e);return a=_e("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const h=y7(f),y=new Sq;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const d=ZG(this.apiClient,e);return a=_e("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=e7(f),y=new Cq;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const d=o7(this.apiClient,e);return a=_e("{model}:predict",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=a7(f),y=new wq;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=FG(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>uy(y))}else{const h=OG(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>ly(y))}}async listInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=KG(this.apiClient,e);return d=_e("{models_url}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=jG(y),E=new eI;return Object.assign(E,T),E})}else{const h=YG(this.apiClient,e);return d=_e("{models_url}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=$G(y),E=new eI;return Object.assign(E,T),E})}}async update(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=m7(this.apiClient,e);return d=_e("{model}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>uy(y))}else{const h=p7(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>ly(y))}}async delete(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=eG(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=nG(y),E=new tI;return Object.assign(E,T),E})}else{const h=ZB(this.apiClient,e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=tG(y),E=new tI;return Object.assign(E,T),E})}}async countTokens(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=WB(this.apiClient,e);return d=_e("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=XB(y),E=new nI;return Object.assign(E,T),E})}else{const h=JB(this.apiClient,e);return d=_e("{model}:countTokens",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=QB(y),E=new nI;return Object.assign(E,T),E})}}async computeTokens(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const d=GB(this.apiClient,e);return a=_e("{model}:computeTokens",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>{const h=HB(f),y=new Aq;return Object.assign(y,h),y})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=bG(this.apiClient,e);return d=_e("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l.then(y=>{const T=IG(y),E=new Hh;return Object.assign(E,T),E})}else{const h=xG(this.apiClient,e);return d=_e("{model}:predictLongRunning",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l.then(y=>{const T=AG(y),E=new Hh;return Object.assign(E,T),E})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q7 extends nr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=mq(e);return d=_e("{operationName}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json()),l}else{const h=pq(e);return d=_e("{operationName}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json()),l}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const d=aq(e);return a=_e("{resourceName}:fetchPredictOperation",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function X7(n){const e={},t=p(n,["data"]);if(t!=null&&g(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function Z7(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>aH(a))),g(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&g(e,["role"],i),e}function eH(n,e,t){const i={},r=p(e,["expireTime"]);t!==void 0&&r!=null&&g(t,["expireTime"],r);const a=p(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&g(t,["newSessionExpireTime"],a);const l=p(e,["uses"]);t!==void 0&&l!=null&&g(t,["uses"],l);const d=p(e,["liveConnectConstraints"]);t!==void 0&&d!=null&&g(t,["bidiGenerateContentSetup"],oH(n,d));const f=p(e,["lockAdditionalFields"]);return t!==void 0&&f!=null&&g(t,["fieldMask"],f),i}function tH(n,e){const t={},i=p(e,["config"]);return i!=null&&g(t,["config"],eH(n,i,t)),t}function nH(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&g(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&g(e,["mimeType"],i),e}function iH(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&g(e,["enableWidget"],t),e}function sH(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&g(e,["timeRangeFilter"],t),e}function rH(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&g(e,["setup","generationConfig"],i);const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&g(e,["setup","generationConfig","responseModalities"],r);const a=p(n,["temperature"]);e!==void 0&&a!=null&&g(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&g(e,["setup","generationConfig","topP"],l);const d=p(n,["topK"]);e!==void 0&&d!=null&&g(e,["setup","generationConfig","topK"],d);const f=p(n,["maxOutputTokens"]);e!==void 0&&f!=null&&g(e,["setup","generationConfig","maxOutputTokens"],f);const h=p(n,["mediaResolution"]);e!==void 0&&h!=null&&g(e,["setup","generationConfig","mediaResolution"],h);const y=p(n,["seed"]);e!==void 0&&y!=null&&g(e,["setup","generationConfig","seed"],y);const T=p(n,["speechConfig"]);e!==void 0&&T!=null&&g(e,["setup","generationConfig","speechConfig"],e0(T));const E=p(n,["thinkingConfig"]);e!==void 0&&E!=null&&g(e,["setup","generationConfig","thinkingConfig"],E);const I=p(n,["enableAffectiveDialog"]);e!==void 0&&I!=null&&g(e,["setup","generationConfig","enableAffectiveDialog"],I);const N=p(n,["systemInstruction"]);e!==void 0&&N!=null&&g(e,["setup","systemInstruction"],Z7(bn(N)));const U=p(n,["tools"]);if(e!==void 0&&U!=null){let ce=Ql(U);Array.isArray(ce)&&(ce=ce.map(R=>uH(Wl(R)))),g(e,["setup","tools"],ce)}const O=p(n,["sessionResumption"]);e!==void 0&&O!=null&&g(e,["setup","sessionResumption"],lH(O));const K=p(n,["inputAudioTranscription"]);e!==void 0&&K!=null&&g(e,["setup","inputAudioTranscription"],K);const Z=p(n,["outputAudioTranscription"]);e!==void 0&&Z!=null&&g(e,["setup","outputAudioTranscription"],Z);const j=p(n,["realtimeInputConfig"]);e!==void 0&&j!=null&&g(e,["setup","realtimeInputConfig"],j);const ae=p(n,["contextWindowCompression"]);e!==void 0&&ae!=null&&g(e,["setup","contextWindowCompression"],ae);const me=p(n,["proactivity"]);return e!==void 0&&me!=null&&g(e,["setup","proactivity"],me),t}function oH(n,e){const t={},i=p(e,["model"]);i!=null&&g(t,["setup","model"],rt(n,i));const r=p(e,["config"]);return r!=null&&g(t,["config"],rH(r,t)),t}function aH(n){const e={},t=p(n,["functionCall"]);t!=null&&g(e,["functionCall"],t);const i=p(n,["codeExecutionResult"]);i!=null&&g(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&g(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&g(e,["fileData"],nH(a));const l=p(n,["functionResponse"]);l!=null&&g(e,["functionResponse"],l);const d=p(n,["inlineData"]);d!=null&&g(e,["inlineData"],X7(d));const f=p(n,["text"]);f!=null&&g(e,["text"],f);const h=p(n,["thought"]);h!=null&&g(e,["thought"],h);const y=p(n,["thoughtSignature"]);y!=null&&g(e,["thoughtSignature"],y);const T=p(n,["videoMetadata"]);return T!=null&&g(e,["videoMetadata"],T),e}function lH(n){const e={},t=p(n,["handle"]);if(t!=null&&g(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function uH(n){const e={},t=p(n,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(T=>T)),g(e,["functionDeclarations"],y)}if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["googleSearchRetrieval"]);i!=null&&g(e,["googleSearchRetrieval"],i);const r=p(n,["computerUse"]);r!=null&&g(e,["computerUse"],r);const a=p(n,["fileSearch"]);a!=null&&g(e,["fileSearch"],a);const l=p(n,["codeExecution"]);if(l!=null&&g(e,["codeExecution"],l),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const d=p(n,["googleMaps"]);d!=null&&g(e,["googleMaps"],iH(d));const f=p(n,["googleSearch"]);f!=null&&g(e,["googleSearch"],sH(f));const h=p(n,["urlContext"]);return h!=null&&g(e,["urlContext"],h),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cH(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function dH(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=cH(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let d=[];r.length>0&&(d=r.map(h=>l.includes(h)?`generationConfig.${h}`:h));const f=[];a&&f.push(a),d.length>0&&f.push(...d),f.length>0?n.fieldMask=f.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class fH extends nr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const d=tH(this.apiClient,e);a=_e("auth_tokens",d._url),l=d._query,delete d.config,delete d._url,delete d._query;const f=dH(d,e.config);return r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hH(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&g(e,["displayName"],i),t}function pH(n){const e={},t=p(n,["config"]);return t!=null&&hH(t,e),e}function mH(n,e){const t={},i=p(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function gH(n){const e={},t=p(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=p(n,["config"]);return i!=null&&mH(i,e),e}function _H(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function yH(n,e){const t={},i=p(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["customMetadata"],a)}const r=p(n,["chunkingConfig"]);return e!==void 0&&r!=null&&g(e,["chunkingConfig"],r),t}function vH(n){const e={},t=p(n,["name"]);t!=null&&g(e,["name"],t);const i=p(n,["metadata"]);i!=null&&g(e,["metadata"],i);const r=p(n,["done"]);r!=null&&g(e,["done"],r);const a=p(n,["error"]);a!=null&&g(e,["error"],a);const l=p(n,["response"]);return l!=null&&g(e,["response"],EH(l)),e}function TH(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=p(n,["fileName"]);i!=null&&g(e,["fileName"],i);const r=p(n,["config"]);return r!=null&&yH(r,e),e}function EH(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&g(e,["parent"],i);const r=p(n,["documentName"]);return r!=null&&g(e,["documentName"],r),e}function SH(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function CH(n){const e={},t=p(n,["config"]);return t!=null&&SH(t,e),e}function wH(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["fileSearchStores"],a)}return e}function AH(n,e){const t={},i=p(n,["mimeType"]);e!==void 0&&i!=null&&g(e,["mimeType"],i);const r=p(n,["displayName"]);e!==void 0&&r!=null&&g(e,["displayName"],r);const a=p(n,["customMetadata"]);if(e!==void 0&&a!=null){let d=a;Array.isArray(d)&&(d=d.map(f=>f)),g(e,["customMetadata"],d)}const l=p(n,["chunkingConfig"]);return e!==void 0&&l!=null&&g(e,["chunkingConfig"],l),t}function IH(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&g(e,["_url","file_search_store_name"],t);const i=p(n,["config"]);return i!=null&&AH(i,e),e}function xH(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&g(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bH(n,e){const t={},i=p(n,["force"]);return e!==void 0&&i!=null&&g(e,["_query","force"],i),t}function RH(n){const e={},t=p(n,["name"]);t!=null&&g(e,["_url","name"],t);const i=p(n,["config"]);return i!=null&&bH(i,e),e}function NH(n){const e={},t=p(n,["name"]);return t!=null&&g(e,["_url","name"],t),e}function MH(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&g(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&g(e,["_query","pageToken"],r),t}function DH(n){const e={},t=p(n,["parent"]);t!=null&&g(e,["_url","parent"],t);const i=p(n,["config"]);return i!=null&&MH(i,e),e}function kH(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&g(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&g(e,["nextPageToken"],i);const r=p(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),g(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class PH extends nr{constructor(e){super(),this.apiClient=e,this.list=async t=>new ga(er.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=NH(e);return a=_e("{name}",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=RH(e);r=_e("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=DH(e);return a=_e("{parent}/documents",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=kH(f),y=new Iq;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class LH extends nr{constructor(e,t=new PH(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new ga(er.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=pH(e);return a=_e("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async get(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=_H(e);return a=_e("{name}",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=gH(e);r=_e("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=CH(e);return a=_e("fileSearchStores",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=wH(f),y=new xq;return Object.assign(y,h),y})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=IH(e);return a=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=xH(f),y=new bq;return Object.assign(y,h),y})}}async importFile(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=TH(e);return a=_e("{file_search_store_name}:importFile",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>{const h=vH(f),y=new Jv;return Object.assign(y,h),y})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function VH(n,e){const t={},i=p(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function UH(n,e){const t={},i=p(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function OH(n,e,t){const i={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&g(e,["displayName"],r),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(n,["epochCount"]);e!==void 0&&a!=null&&g(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(n,["learningRateMultiplier"]);if(l!=null&&g(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const d=p(n,["batchSize"]);e!==void 0&&d!=null&&g(e,["tuningTask","hyperparameters","batchSize"],d);const f=p(n,["learningRate"]);if(e!==void 0&&f!=null&&g(e,["tuningTask","hyperparameters","learningRate"],f),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return i}function FH(n,e,t){const i={};let r=p(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const I=p(n,["validationDataset"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec"],wI(I))}else if(r==="PREFERENCE_TUNING"){const I=p(n,["validationDataset"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec"],wI(I))}const a=p(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&g(e,["tunedModelDisplayName"],a);const l=p(n,["description"]);e!==void 0&&l!=null&&g(e,["description"],l);let d=p(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const I=p(n,["epochCount"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec","hyperParameters","epochCount"],I)}else if(d==="PREFERENCE_TUNING"){const I=p(n,["epochCount"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],I)}let f=p(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const I=p(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],I)}else if(f==="PREFERENCE_TUNING"){const I=p(n,["learningRateMultiplier"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],I)}let h=p(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const I=p(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec","exportLastCheckpointOnly"],I)}else if(h==="PREFERENCE_TUNING"){const I=p(n,["exportLastCheckpointOnly"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],I)}let y=p(t,["config","method"]);if(y===void 0&&(y="SUPERVISED_FINE_TUNING"),y==="SUPERVISED_FINE_TUNING"){const I=p(n,["adapterSize"]);e!==void 0&&I!=null&&g(e,["supervisedTuningSpec","hyperParameters","adapterSize"],I)}else if(y==="PREFERENCE_TUNING"){const I=p(n,["adapterSize"]);e!==void 0&&I!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],I)}if(p(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(p(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const T=p(n,["labels"]);e!==void 0&&T!=null&&g(e,["labels"],T);const E=p(n,["beta"]);return e!==void 0&&E!=null&&g(e,["preferenceOptimizationSpec","hyperParameters","beta"],E),i}function qH(n,e){const t={},i=p(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const r=p(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const a=p(n,["trainingDataset"]);a!=null&&QH(a);const l=p(n,["config"]);return l!=null&&OH(l,t),t}function BH(n,e){const t={},i=p(n,["baseModel"]);i!=null&&g(t,["baseModel"],i);const r=p(n,["preTunedModel"]);r!=null&&g(t,["preTunedModel"],r);const a=p(n,["trainingDataset"]);a!=null&&XH(a,t,e);const l=p(n,["config"]);return l!=null&&FH(l,t,e),t}function GH(n,e){const t={},i=p(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function HH(n,e){const t={},i=p(n,["name"]);return i!=null&&g(t,["_url","name"],i),t}function zH(n,e,t){const i={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function YH(n,e,t){const i={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&g(e,["_query","pageSize"],r);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&g(e,["_query","pageToken"],a);const l=p(n,["filter"]);return e!==void 0&&l!=null&&g(e,["_query","filter"],l),i}function KH(n,e){const t={},i=p(n,["config"]);return i!=null&&zH(i,t),t}function $H(n,e){const t={},i=p(n,["config"]);return i!=null&&YH(i,t),t}function jH(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const a=p(n,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>x1(d))),g(t,["tuningJobs"],l)}return t}function JH(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["nextPageToken"]);r!=null&&g(t,["nextPageToken"],r);const a=p(n,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(d=>dy(d))),g(t,["tuningJobs"],l)}return t}function WH(n,e){const t={},i=p(n,["name"]);i!=null&&g(t,["model"],i);const r=p(n,["name"]);return r!=null&&g(t,["endpoint"],r),t}function QH(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),g(t,["examples","examples"],r)}return t}function XH(n,e,t){const i={};let r=p(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}let a=p(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&g(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}if(p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function x1(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["name"]);r!=null&&g(t,["name"],r);const a=p(n,["state"]);a!=null&&g(t,["state"],l1(a));const l=p(n,["createTime"]);l!=null&&g(t,["createTime"],l);const d=p(n,["tuningTask","startTime"]);d!=null&&g(t,["startTime"],d);const f=p(n,["tuningTask","completeTime"]);f!=null&&g(t,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&g(t,["updateTime"],h);const y=p(n,["description"]);y!=null&&g(t,["description"],y);const T=p(n,["baseModel"]);T!=null&&g(t,["baseModel"],T);const E=p(n,["_self"]);return E!=null&&g(t,["tunedModel"],WH(E)),t}function dy(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["name"]);r!=null&&g(t,["name"],r);const a=p(n,["state"]);a!=null&&g(t,["state"],l1(a));const l=p(n,["createTime"]);l!=null&&g(t,["createTime"],l);const d=p(n,["startTime"]);d!=null&&g(t,["startTime"],d);const f=p(n,["endTime"]);f!=null&&g(t,["endTime"],f);const h=p(n,["updateTime"]);h!=null&&g(t,["updateTime"],h);const y=p(n,["error"]);y!=null&&g(t,["error"],y);const T=p(n,["description"]);T!=null&&g(t,["description"],T);const E=p(n,["baseModel"]);E!=null&&g(t,["baseModel"],E);const I=p(n,["tunedModel"]);I!=null&&g(t,["tunedModel"],I);const N=p(n,["preTunedModel"]);N!=null&&g(t,["preTunedModel"],N);const U=p(n,["supervisedTuningSpec"]);U!=null&&g(t,["supervisedTuningSpec"],U);const O=p(n,["preferenceOptimizationSpec"]);O!=null&&g(t,["preferenceOptimizationSpec"],O);const K=p(n,["tuningDataStats"]);K!=null&&g(t,["tuningDataStats"],K);const Z=p(n,["encryptionSpec"]);Z!=null&&g(t,["encryptionSpec"],Z);const j=p(n,["partnerModelTuningSpec"]);j!=null&&g(t,["partnerModelTuningSpec"],j);const ae=p(n,["customBaseModel"]);ae!=null&&g(t,["customBaseModel"],ae);const me=p(n,["experiment"]);me!=null&&g(t,["experiment"],me);const ce=p(n,["labels"]);ce!=null&&g(t,["labels"],ce);const R=p(n,["outputUri"]);R!=null&&g(t,["outputUri"],R);const M=p(n,["pipelineJob"]);M!=null&&g(t,["pipelineJob"],M);const D=p(n,["serviceAccount"]);D!=null&&g(t,["serviceAccount"],D);const L=p(n,["tunedModelDisplayName"]);L!=null&&g(t,["tunedModelDisplayName"],L);const P=p(n,["veoTuningSpec"]);return P!=null&&g(t,["veoTuningSpec"],P),t}function ZH(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&g(t,["sdkHttpResponse"],i);const r=p(n,["name"]);r!=null&&g(t,["name"],r);const a=p(n,["metadata"]);a!=null&&g(t,["metadata"],a);const l=p(n,["done"]);l!=null&&g(t,["done"],l);const d=p(n,["error"]);return d!=null&&g(t,["error"],d),t}function wI(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&g(t,["validationDatasetUri"],i);const r=p(n,["vertexDatasetResource"]);return r!=null&&g(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e8 extends nr{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new ga(er.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:sy.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=HH(e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>dy(y))}else{const h=GH(e);return d=_e("{name}",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>x1(y))}}async listInternal(e){var t,i,r,a;let l,d="",f={};if(this.apiClient.isVertexAI()){const h=$H(e);return d=_e("tuningJobs",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=JH(y),E=new iI;return Object.assign(E,T),E})}else{const h=KH(e);return d=_e("tunedModels",h._url),f=h._query,delete h._url,delete h._query,l=this.apiClient.request({path:d,queryParams:f,body:JSON.stringify(h),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(y=>y.json().then(T=>{const E=T;return E.sdkHttpResponse={headers:y.headers},E})),l.then(y=>{const T=jH(y),E=new iI;return Object.assign(E,T),E})}}async cancel(e){var t,i,r,a;let l="",d={};if(this.apiClient.isVertexAI()){const f=UH(e);l=_e("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const f=VH(e);l=_e("{name}:cancel",f._url),d=f._query,delete f._url,delete f._query,await this.apiClient.request({path:l,queryParams:d,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async tuneInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const d=BH(e,e);return a=_e("tuningJobs",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>dy(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const d=qH(e);return a=_e("tunedModels",d._url),l=d._query,delete d._url,delete d._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(h=>{const y=h;return y.sdkHttpResponse={headers:f.headers},y})),r.then(f=>ZH(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class t8{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const n8=1024*1024*8,i8=3,s8=1e3,r8=2,Yh="x-goog-upload-status";async function o8(n,e,t){var i;const r=await b1(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Yh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function a8(n,e,t){var i;const r=await b1(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Yh])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=n1(a),d=new Wv;return Object.assign(d,l),d}async function b1(n,e,t){var i,r;let a=0,l=0,d=new ry(new Response),f="upload";for(a=n.size;l<a;){const h=Math.min(n8,a-l),y=n.slice(l,l+h);l+h>=a&&(f+=", finalize");let T=0,E=s8;for(;T<i8&&(d=await t.request({path:"",body:y,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(l),"Content-Length":String(h)}}}),!(!((i=d==null?void 0:d.headers)===null||i===void 0)&&i[Yh]));)T++,await u8(E),E=E*r8;if(l+=h,((r=d==null?void 0:d.headers)===null||r===void 0?void 0:r[Yh])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return d}async function l8(n){return{size:n.size,type:n.type}}function u8(n){return new Promise(e=>setTimeout(e,n))}class c8{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await o8(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await a8(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await l8(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d8{create(e,t,i){return new f8(e,t,i)}}class f8{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AI="x-goog-api-key";class h8{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(AI)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(AI,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const p8="gl-node/";class m8{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=rq(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new h8(this.apiKey);this.apiClient=new M7({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:p8+"web",uploader:new c8,downloader:new t8}),this.models=new W7(this.apiClient),this.live=new z7(this.apiClient,r,new d8),this.batches=new N9(this.apiClient),this.chats=new lB(this.models,this.apiClient),this.caches=new rB(this.apiClient),this.files=new yB(this.apiClient),this.operations=new Q7(this.apiClient),this.authTokens=new fH(this.apiClient),this.tunings=new e8(this.apiClient),this.fileSearchStores=new LH(this.apiClient)}}console.warn("Missing process.env.API_KEY environment variable for Gemini API. Chat features may not work.");new m8({apiKey:""});async function g8(n){return"Erro: Chave de API do Gemini no configurada ou invlida."}const _8=()=>{const[n,e]=X.useState([]),[t,i]=X.useState(""),[r,a]=X.useState(!1),[l,d]=X.useState(null),f=X.useRef(null),h=()=>{var E;(E=f.current)==null||E.scrollIntoView({behavior:"smooth"})};X.useEffect(()=>{h()},[n]);const y=async()=>{if(t.trim()===""||r)return;const E={role:"user",text:t};e(I=>[...I,E]),i(""),a(!0),d(null);try{const N={role:"model",text:await g8(t)};e(U=>[...U,N])}catch(I){d("Desculpe, no foi possvel obter uma resposta. Tente novamente."),console.error(I)}finally{a(!1)}},T=E=>{E.key==="Enter"&&y()};return S.jsxs("div",{className:"bg-white dark:bg-slate-800 p-6 rounded-lg shadow-md flex flex-col h-[600px]",children:[S.jsxs("div",{className:"flex-grow overflow-y-auto pr-4 -mr-4 mb-4 space-y-4",children:[n.map((E,I)=>S.jsx("div",{className:`flex ${E.role==="user"?"justify-end":"justify-start"}`,children:S.jsx("div",{className:`max-w-xs md:max-w-md lg:max-w-lg px-4 py-2 rounded-2xl ${E.role==="user"?"bg-blue-600 text-white rounded-br-none":"bg-gray-200 dark:bg-slate-600 text-gray-800 dark:text-gray-200 rounded-bl-none"}`,children:S.jsx("p",{className:"whitespace-pre-wrap",children:E.text})})},I)),r&&S.jsx("div",{className:"flex justify-start",children:S.jsx("div",{className:"bg-gray-200 dark:bg-slate-600 text-gray-800 dark:text-gray-200 rounded-2xl rounded-bl-none px-4 py-2",children:S.jsxs("div",{className:"flex items-center space-x-2",children:[S.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse"}),S.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse delay-75"}),S.jsx("div",{className:"w-2 h-2 bg-gray-500 rounded-full animate-pulse delay-150"})]})})}),l&&S.jsx("p",{className:"text-red-500 text-sm",children:l}),S.jsx("div",{ref:f})]}),S.jsxs("div",{className:"mt-auto flex items-center space-x-2 border-t border-gray-200 dark:border-slate-700 pt-4",children:[S.jsx("input",{type:"text",value:t,onChange:E=>i(E.target.value),onKeyPress:T,placeholder:"Pergunte algo sobre a empresa...",className:"flex-grow p-3 border border-gray-300 bg-white dark:bg-slate-700 text-gray-800 dark:text-gray-200 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-slate-600",disabled:r}),S.jsx("button",{onClick:y,disabled:r||t.trim()==="",className:"bg-blue-600 text-white p-3 rounded-full hover:bg-blue-700 disabled:bg-blue-400 disabled:cursor-not-allowed transition-colors duration-200 flex-shrink-0",children:S.jsx(v2,{className:"w-6 h-6"})})]})]})},y8=[{id:1,name:"Gmail",url:"#",icon:E2},{id:2,name:"Drive",url:"#",icon:S2},{id:3,name:"Docs",url:"#",icon:C2},{id:4,name:"Sheets",url:"#",icon:w2},{id:5,name:"Calendrio",url:"#",icon:I2},{id:6,name:"YouTube",url:"#",icon:A2},{id:7,name:"Keep",url:"#",icon:x2}],v8=()=>{const[n,e]=X.useState(!1),t=X.useRef(null);return X.useEffect(()=>{function i(r){t.current&&!t.current.contains(r.target)&&e(!1)}return document.addEventListener("mousedown",i),()=>{document.removeEventListener("mousedown",i)}},[t]),S.jsxs("div",{className:"relative",ref:t,children:[S.jsx("button",{onClick:()=>e(!n),className:"p-2 rounded-full hover:bg-gray-100 dark:hover:bg-slate-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500","aria-label":"Aplicativos cone","aria-haspopup":"true","aria-expanded":n,children:S.jsx(T2,{className:"w-5 h-5 text-gray-600 dark:text-gray-400"})}),n&&S.jsx("div",{className:"absolute right-0 mt-2 w-80 bg-white dark:bg-slate-800 rounded-lg shadow-xl border border-gray-200 dark:border-slate-700 z-50",role:"menu",children:S.jsx("div",{className:"p-4",children:S.jsx("div",{className:"grid grid-cols-3 gap-4",children:y8.map(i=>S.jsxs("a",{href:i.url,className:"flex flex-col items-center justify-center p-3 rounded-lg hover:bg-gray-100 dark:hover:bg-slate-700 transition-colors duration-200",role:"menuitem",children:[S.jsx("div",{className:"w-12 h-12 mb-2 flex items-center justify-center",children:S.jsx(i.icon,{className:"w-10 h-10"})}),S.jsx("span",{className:"text-xs text-center text-gray-800 dark:text-gray-200 ",children:i.name})]},i.id))})})})]})},_a=({isOpen:n,onClose:e,title:t,children:i,isClosable:r=!0})=>n?S.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center transition-opacity duration-300","aria-modal":"true",role:"dialog",onClick:r?e:void 0,children:[S.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md m-4 transform transition-all duration-300 scale-95 opacity-0 animate-fade-in-scale",onClick:a=>a.stopPropagation(),children:[S.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-slate-700",children:[S.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-gray-100",children:t}),r&&S.jsx("button",{onClick:e,className:"text-gray-400 hover:bg-gray-200 dark:hover:bg-slate-600 rounded-lg text-sm p-1.5 ml-auto inline-flex items-center","aria-label":"Close modal",children:S.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:S.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),S.jsx("div",{className:"p-6",children:i})]}),S.jsx("style",{children:`
        @keyframes fadeInScale {
          from {
            opacity: 0;
            transform: scale(0.95);
          }
          to {
            opacity: 1;
            transform: scale(1);
          }
        }
        .animate-fade-in-scale {
          animation: fadeInScale 0.2s ease-out forwards;
        }
      `})]}):null,II="gcse-script",T8="e04673d07373944ab",Yf="portal-search-results",xI="gcse-dark-style",E8=`
.gsc-control-cse,
.gsc-control-cse .gsc-table-result,
.gsc-results .gsc-result,
.gsc-results .gsc-result .gs-bidi-start-align {
  background-color: #0F172A !important;
  color: #E2E8F0 !important;
  border: none !important;
}
.gsc-control-cse .gsc-result, .gs-result .gsc-result {
  border-bottom: 1px solid rgba(226,232,240,0.1) !important;
}
.gsc-webResult.gsc-result .gs-title,
.gs-webResult .gs-snippet b {
  color: #F97316 !important;
}
.gsc-tabsArea,
.gsc-above-wrapper-area,
.gsc-refinementsArea,
.gsc-above-wrapper-area-container {
  background-color: #0F172A !important;
  border-color: rgba(226,232,240,0.2) !important;
}
.gsc-refinementHeader, .gsc-refinementBlock {
  background-color: transparent !important;
}
.gsc-orderby-label,
.gsc-orderby-container,
.gsc-selected-option-container,
.gsc-option-selector {
  color: #E2E8F0 !important;
  background-color: #0F172A !important;
  border-color: rgba(226,232,240,0.2) !important;
}
.gs-webResult.gs-result:hover {
  background-color: rgba(15, 23, 42, 0.6) !important;
}
.gsc-result-info {
  color: #CBD5F5 !important;
}
.gsc-webResult .gsc-result .gs-snippet,
.gsc-webResult .gsc-result .gs-visibleUrl-short,
.gsc-webResult .gsc-result .gs-visibleUrl,
.gs-webResult .gs-snippet {
  color: #CBD5F5 !important;
}
.gsc-thumbnail-inside,
.gs-promotion-image-box,
.gs-promotion-text-cell {
  background-color: transparent !important;
}
.gsc-input-box,
input.gsc-input,
input.gsc-search-button-v2 {
  background-color: #1F2A40 !important;
  color: #E2E8F0 !important;
  border-color: rgba(148,163,184,0.4) !important;
}
.gsc-search-button-v2 {
  background-color: #F97316 !important;
  color: #0F172A !important;
}
.gsc-refinementHeader .gsc-refinementLabel {
  color: #F97316 !important;
}
`,S8="https://suggestqueries.google.com/complete/search?client=firefox&hl=pt-BR&q=",bI="portal-search-suggestions",C8=25,w8="__portalSuggestCb__",A8=/^(https?:\/\/)?(([\w-]+\.)+[a-z\u00c0-\u017f]{2,}|localhost|\d{1,3}(\.\d{1,3}){3})(:\d+)?(\/[^\s]*)?$/i,RI=n=>n.trim().toLowerCase(),I8=n=>{const e=n.trim();return!e||/\s/.test(e)?!1:A8.test(e)},x8=n=>/^[a-z]+:\/\//i.test(n)?n:`https://${n}`,b8=n=>{try{const e=new URL(n);return`https://www.google.com/s2/favicons?sz=128&domain_url=${encodeURIComponent(e.origin)}`}catch{return"https://www.google.com/s2/favicons?sz=128&domain_url=https://www.google.com"}},R8=n=>n?/^https?:\/\//i.test(n)?n:`https://${n}`:"",N8=({currentUser:n})=>{const[e,t]=X.useState(""),[i,r]=X.useState(!1),[a,l]=X.useState([]),[d,f]=X.useState(!1),[h,y]=X.useState(!1),[T,E]=X.useState(-1),I=X.useRef(null),N=X.useRef(new Map),U=X.useRef(null),[O,K]=X.useState(!0),[Z,j]=X.useState([]),[ae,me]=X.useState(!1),[ce,R]=X.useState({name:"",url:""}),[M,D]=X.useState(null),L="https://iconecolegioecurso.com.br/wp-content/uploads/2022/08/xlogo_icone_site.png.pagespeed.ic_.QgXP3GszLC.webp",P=!i,q=X.useCallback((se,de)=>{const xe=RI(se);if(!xe)return;const Tt=N.current;if(Tt.set(xe,de),Tt.size>C8){const Ct=Tt.keys().next().value;Ct&&Tt.delete(Ct)}},[]),k=X.useCallback(se=>{const de=RI(se);if(de)return N.current.get(de)},[]),Be=n!=null&&n.email?`shortcuts:${n.email}`:null,ht=se=>{const de=e.trim();if(!de)return se;const xe=se.toLowerCase(),Tt=de.toLowerCase(),Ct=xe.indexOf(Tt);if(Ct===-1)return se;const Pt=Ct+de.length;return S.jsxs(S.Fragment,{children:[se.slice(0,Ct),S.jsx("span",{className:"text-orange-400",children:se.slice(Ct,Pt)}),se.slice(Pt)]})},W=X.useCallback(se=>{if(!I8(se))return!1;const de=x8(se);return window.open(de,"_blank","noopener,noreferrer"),r(!1),!0},[]);X.useEffect(()=>{if(!Be){j([]);return}try{const se=localStorage.getItem(Be);if(se){const de=JSON.parse(se);j(de)}else j([])}catch(se){console.error("Failed to parse shortcuts",se),j([])}},[Be]),X.useEffect(()=>{Be&&localStorage.setItem(Be,JSON.stringify(Z))},[Z,Be]),X.useEffect(()=>{const se=de=>{de.target.closest("[data-shortcut-menu]")||D(null)};return window.addEventListener("click",se),()=>window.removeEventListener("click",se)},[]);const ue=X.useCallback(()=>{var de;const se=U.current;if(se){if(se.callbackName){const xe=window;typeof xe[se.callbackName]=="function"&&delete xe[se.callbackName]}(de=se.script)!=null&&de.parentNode&&se.script.parentNode.removeChild(se.script),U.current=null}},[]),le=X.useCallback((se=!1)=>{var de;ue(),K(!1),l([]),y(!1),E(-1),(de=I.current)==null||de.blur(),se&&t("")},[ue]),Te=X.useCallback(()=>{var se,de;try{const xe=window.google,Tt=(de=(se=xe==null?void 0:xe.search)==null?void 0:se.cse)==null?void 0:de.element;if(!Tt)return!1;try{return Tt.getElement(Yf)||Tt.render({div:"portal-search-results",tag:"searchresults-only",gname:Yf},void 0),!0}catch(Ct){return console.warn("Google CSE render attempted but failed:",Ct),!1}}catch(xe){return console.error("Error accessing Google CSE:",xe),!1}},[]);X.useEffect(()=>{const se=()=>{if(document.getElementById(xI))return;const xe=document.createElement("style");xe.id=xI,xe.textContent=E8,document.head.appendChild(xe)};if(window.__gcse=window.__gcse||{},window.__gcse.parsetags="explicit",window.__gcse.callback=()=>{se(),Te()},document.getElementById(II)){se(),setTimeout(Te,100);return}const de=document.createElement("script");de.id=II,de.src=`https://cse.google.com/cse.js?cx=${T8}`,de.async=!0,de.onload=()=>{se(),Te()},document.body.appendChild(de)},[Te]);const Ce=X.useCallback(se=>{var Tt,Ct,Pt,ri,pt;const de=se.trim();if(!de)return!1;const xe=()=>{const Et=`https://www.google.com/search?q=${encodeURIComponent(de)}`;window.open(Et,"_blank","noopener,noreferrer")};try{const Et=window.google;let $n=(Ct=(Tt=Et==null?void 0:Et.search)==null?void 0:Tt.cse)==null?void 0:Ct.element;if($n||Te()&&($n=(pt=(ri=(Pt=window.google)==null?void 0:Pt.search)==null?void 0:ri.cse)==null?void 0:pt.element),$n){const po=$n.getElement(Yf);if(po)return po.execute(de),r(!0),!0}}catch(Et){console.warn("Google CSE execute failed, falling back",Et)}return xe(),!1},[Te]),F=se=>{se.preventDefault();const de=e.trim();if(!de)return;const xe=W(de);xe||Ce(de)||console.warn("Google CSE ainda est carregando."),le(xe)},te=X.useCallback(()=>{window.open("https://www.google.com/","_blank","noopener,noreferrer"),le(!1)},[le]),fe=X.useCallback(se=>{n&&(R(se?{id:se.id,name:se.name,url:se.url}:{name:"",url:""}),me(!0),D(null))},[n]),ge=X.useCallback(se=>{j(de=>de.filter(xe=>xe.id!==se)),D(de=>de===se?null:de)},[]),Ie=X.useCallback(()=>{me(!1),R({name:"",url:""})},[]),Me=X.useCallback(se=>{se.preventDefault();const de=ce.name.trim(),xe=R8(ce.url.trim());if(!de||!xe)return;const Tt=b8(xe);if(ce.id)j(Ct=>Ct.map(Pt=>Pt.id===ce.id?{...Pt,name:de,url:xe,faviconUrl:Tt}:Pt));else{const Ct=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`${Date.now()}`;j(Pt=>[...Pt,{id:Ct,name:de,url:xe,faviconUrl:Tt}])}Ie()},[Ie,ce]),De=X.useCallback(se=>{const de=se.trim();if(!de){l([]),y(!1),E(-1),ue();return}const xe=k(de);if(xe){l(xe),y(O&&xe.length>0),E(xe.length?0:-1),ue();return}ue(),f(!0);const Tt=`${w8}${Date.now().toString(36)}${Math.random().toString(36).slice(2,7)}`,Ct=window;Ct[Tt]=ri=>{const pt=Array.isArray(ri)&&Array.isArray(ri[1])?ri[1].slice(0,6).filter(Boolean):[];q(de,pt),l(pt),y(O&&pt.length>0),E(pt.length?0:-1),f(!1),ue()};const Pt=document.createElement("script");Pt.src=`${S8}${encodeURIComponent(de)}&callback=${Tt}`,Pt.async=!0,Pt.onerror=()=>{console.error("No foi possvel carregar sugestes de pesquisa."),f(!1),l([]),y(!1),E(-1),ue()},document.body.appendChild(Pt),U.current={script:Pt,callbackName:Tt}},[q,O,ue,k]);X.useEffect(()=>{const se=e.trim();if(!se){l([]),y(!1),E(-1),f(!1),ue();return}const de=window.setTimeout(()=>{De(se)},200);return()=>{clearTimeout(de),ue()}},[ue,De,e]);const et=se=>{t(se);const de=W(se);de||Ce(se),le(de)},je=se=>{!h||!a.length||(se.key==="ArrowDown"?(se.preventDefault(),E(de=>(de+1)%a.length)):se.key==="ArrowUp"?(se.preventDefault(),E(de=>(de-1+a.length)%a.length)):se.key==="Enter"&&T>=0||se.key==="Tab"&&T>=0?(se.preventDefault(),et(a[T])):se.key==="Escape"&&y(!1))},Pe=()=>{setTimeout(()=>{y(!1)},100)},ot=T>=0?`suggestion-option-${T}`:void 0;return S.jsxs("div",{className:"flex flex-col h-full flex-1 bg-gray-50 text-slate-900 dark:bg-[#0F172A] dark:text-gray-100",children:[S.jsx("header",{className:"flex items-center justify-end p-4 sm:p-6",children:S.jsxs("div",{className:"flex items-center space-x-4 text-sm text-slate-600 dark:text-gray-100",children:[S.jsx("a",{href:"https://mail.google.com",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"Gmail"}),S.jsx("a",{href:"https://www.google.com/imghp",target:"_blank",rel:"noopener noreferrer",className:"hover:underline",children:"Imagens"}),S.jsx(v8,{})]})}),S.jsxs("main",{className:`flex-grow flex flex-col items-center px-4 transition-all duration-300 ${P?"justify-center pb-20":"justify-start"}`,style:{marginTop:P?0:"0",paddingTop:P?"0":"2rem"},children:[P&&S.jsx("img",{className:"h-24 w-auto mb-8",src:L,alt:"cone Logo"}),S.jsxs("form",{onSubmit:F,className:`w-full ${P?"sm:max-w-xl md:max-w-2xl":"sm:max-w-2xl md:max-w-3xl"} transition-all duration-300`,children:[S.jsxs("div",{className:"relative",children:[S.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:S.jsx(N2,{className:"h-5 w-5 text-gray-400 dark:text-gray-500"})}),S.jsx("input",{ref:I,type:"search",name:"q",role:"combobox",autoComplete:"off",autoCorrect:"off",spellCheck:!1,value:e,onChange:se=>{t(se.target.value),K(!0),y(!0)},onKeyDown:je,onFocus:()=>{a.length&&O&&y(!0)},onBlur:Pe,"aria-autocomplete":"list","aria-controls":bI,"aria-expanded":h,"aria-haspopup":"listbox","aria-activedescendant":ot,placeholder:"Pesquisar no Google ou digitar um URL",className:"w-full p-4 pl-12 text-gray-100 bg-[#1F2937] border border-transparent rounded-full focus:outline-none focus:ring-2 focus:ring-slate-500 shadow-inner",required:!0}),h&&(a.length>0||d)&&S.jsxs("ul",{id:bI,role:"listbox","aria-label":"Sugestes de pesquisa",className:"absolute z-20 mt-2 max-h-64 w-full overflow-auto rounded-2xl border border-slate-700 bg-[#11182b] text-sm shadow-2xl custom-scrollbar",children:[a.map((se,de)=>S.jsx("li",{id:`suggestion-option-${de}`,role:"option","aria-selected":T===de,className:`cursor-pointer px-4 py-3 text-slate-200 hover:bg-[#1c243a] ${T===de?"bg-[#1c243a]":""}`,onMouseDown:xe=>{xe.preventDefault(),et(se)},onMouseEnter:()=>E(de),children:ht(se)},se)),d&&S.jsx("li",{className:"px-4 py-2 text-xs text-slate-400",children:"Buscando sugestes..."})]})]}),P&&S.jsx("div",{className:"flex justify-center mt-6",children:S.jsx("button",{type:"button",onClick:te,className:"bg-gray-100 dark:bg-slate-700 text-gray-800 dark:text-gray-200 px-4 py-2 rounded-md hover:bg-gray-200 dark:hover:bg-slate-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 text-sm",children:"Pesquisa Google"})})]}),n&&S.jsx("section",{className:`w-full ${P?"sm:max-w-xl md:max-w-2xl":"sm:max-w-2xl md:max-w-3xl"} mt-8`,children:S.jsx("div",{className:`flex flex-wrap gap-4 ${P?"justify-center":""}`,children:Z.map(se=>S.jsxs("div",{className:"group relative w-36 cursor-pointer rounded-2xl border border-transparent bg-white/90 p-4 text-center text-slate-700 shadow hover:border-blue-500 dark:bg-slate-800 dark:text-slate-100",onClick:()=>window.open(se.url,"_blank","noopener,noreferrer"),children:[S.jsx("img",{src:se.faviconUrl,alt:"",className:"mx-auto h-12 w-12 rounded-full border border-slate-200 bg-white object-contain p-2 dark:border-slate-700",onError:de=>{de.currentTarget.onerror=null,de.currentTarget.src="https://www.google.com/s2/favicons?sz=128&domain_url=https://www.google.com"}}),S.jsx("p",{className:"mt-2 text-sm font-medium truncate",children:se.name}),S.jsx("button",{type:"button","data-shortcut-menu":!0,onClick:de=>{de.stopPropagation(),D(xe=>xe===se.id?null:se.id)},"aria-label":"Mais opcoes",className:"absolute right-2 top-2 flex h-8 w-8 items-center justify-center rounded-full bg-slate-900/60 text-white opacity-0 transition group-hover:opacity-100",children:"..."}),M===se.id&&S.jsxs("div",{"data-shortcut-menu":!0,className:"absolute right-2 top-12 z-10 w-32 rounded-lg border border-slate-200 bg-white p-1 text-left text-sm shadow-lg dark:border-slate-700 dark:bg-slate-900",children:[S.jsx("button",{type:"button",className:"flex w-full items-center rounded-md px-3 py-2 text-slate-600 hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-800",onClick:de=>{de.stopPropagation(),fe(se)},children:"Editar"}),S.jsx("button",{type:"button",className:"flex w-full items-center rounded-md px-3 py-2 text-red-600 hover:bg-red-50 dark:hover:bg-red-500/10",onClick:de=>{de.stopPropagation(),ge(se.id)},children:"Excluir"})]})]},se.id))})}),S.jsx("div",{className:"w-full sm:max-w-2xl md:max-w-3xl mt-10",children:S.jsx("div",{id:"portal-search-results",className:`rounded-3xl bg-[#0F172A] p-4 text-left text-gray-100 shadow-2xl ${i?"block max-h-[70vh] overflow-y-auto pr-2 custom-scrollbar":"hidden"}`,"data-gname":Yf})})]}),ae&&S.jsx(_a,{isOpen:ae,onClose:Ie,title:ce.id?"Editar atalho":"Novo atalho",children:S.jsxs("form",{onSubmit:Me,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"Nome"}),S.jsx("input",{type:"text",value:ce.name,onChange:se=>R(de=>({...de,name:se.target.value})),className:"mt-1 block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-slate-700 dark:text-slate-200",children:"URL"}),S.jsx("input",{type:"url",value:ce.url,onChange:se=>R(de=>({...de,url:se.target.value})),placeholder:"https://exemplo.com",className:"mt-1 block w-full rounded-lg border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-100",required:!0})]}),S.jsxs("div",{className:"flex justify-end gap-3",children:[S.jsx("button",{type:"button",onClick:Ie,className:"rounded-lg border border-slate-300 px-4 py-2 text-sm font-medium text-slate-600 hover:bg-slate-50 dark:border-slate-600 dark:text-slate-200 dark:hover:bg-slate-700",children:"Cancelar"}),S.jsx("button",{type:"submit",disabled:!ce.name.trim()||!ce.url.trim(),className:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-semibold text-white transition hover:bg-blue-700 disabled:cursor-not-allowed disabled:opacity-60",children:"Salvar"})]})]})})]})},M8=()=>S.jsx("div",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:S.jsxs("div",{className:"max-w-4xl mx-auto",children:[S.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[S.jsx(py,{className:"w-8 h-8 text-slate-500 dark:text-slate-400"}),S.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Departamento de Recursos Humanos"})]}),S.jsx("div",{className:"flex justify-center",children:S.jsx("div",{className:"max-w-sm w-full",children:S.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-3xl p-8 shadow-2xl border border-gray-200 dark:border-slate-700",children:[S.jsxs("div",{className:"flex items-start space-x-6",children:[S.jsx("div",{className:"bg-orange-500/20 p-4 rounded-2xl flex-shrink-0",children:S.jsx(D2,{className:"w-8 h-8 text-orange-400"})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm uppercase tracking-wide text-orange-500 font-semibold",children:"Portal interno"}),S.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Contra-Cheque"}),S.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Pegue seu contra-cheque aqui."})]})]}),S.jsx("div",{className:"mt-8",children:S.jsx("a",{href:"https://gestaoderhicone.netlify.app/",target:"_blank",rel:"noopener noreferrer",className:"block text-center w-full bg-orange-500 text-white font-semibold py-3 px-6 rounded-2xl hover:bg-orange-600 transition-all duration-300 shadow-lg shadow-orange-500/20",children:"Acessar"})})]})})})]})}),D8=()=>S.jsx("div",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:S.jsxs("div",{className:"max-w-4xl mx-auto",children:[S.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[S.jsx(c_,{className:"w-8 h-8 text-slate-500 dark:text-slate-400"}),S.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Setor Pedaggico"})]}),S.jsx("div",{className:"flex justify-center",children:S.jsx("div",{className:"max-w-sm w-full",children:S.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-3xl p-8 shadow-2xl border border-gray-200 dark:border-slate-700",children:[S.jsxs("div",{className:"flex items-start space-x-6",children:[S.jsx("div",{className:"bg-blue-500/20 p-4 rounded-2xl flex-shrink-0",children:S.jsx(c_,{className:"w-8 h-8 text-blue-500"})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm uppercase tracking-wide text-blue-500 font-semibold",children:"Portal interno"}),S.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Portal de Notas"}),S.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Acesse o sistema para lanar VAD, VAO e VAF."})]})]}),S.jsx("div",{className:"mt-8",children:S.jsx("a",{href:"https://sysgrade.netlify.app/",target:"_blank",rel:"noopener noreferrer",className:"block text-center w-full bg-blue-500 text-white font-semibold py-3 px-6 rounded-2xl hover:bg-blue-600 transition-all duration-300 shadow-lg shadow-blue-500/20",children:"Acessar"})})]})})})]})}),k8=[{name:"Sponte",url:"https://www.sponteeducacional.net.br/",favicon:"https://www.sponteeducacional.net.br/favicon.png",bgColor:"bg-purple-500/10",shadowColor:"shadow-purple-500/20",hoverColor:"hover:bg-purple-600",buttonColor:"bg-purple-500"},{name:"COC",url:"https://jornada.coc.com.br",favicon:"https://cdn-icons-png.flaticon.com/512/2702/2702111.png",bgColor:"bg-green-500/10",shadowColor:"shadow-green-500/20",hoverColor:"hover:bg-green-600",buttonColor:"bg-green-500"},{name:"ClassAPP",url:"https://www.classapp.com.br/",favicon:"https://cdn.prod.website-files.com/5cf6646fb1bedb1cac953e0c/5d4b1190c03a647ade4f1fa4_favicon-classapp.png",bgColor:"bg-cyan-500/10",shadowColor:"shadow-cyan-500/20",hoverColor:"hover:bg-cyan-600",buttonColor:"bg-cyan-500"}],P8=()=>S.jsx("div",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:S.jsxs("div",{className:"max-w-4xl mx-auto",children:[S.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[S.jsx(DI,{className:"w-8 h-8 text-slate-500 dark:text-slate-400"}),S.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Aplicativos Nativos"})]}),S.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:k8.map(n=>S.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-3xl p-6 shadow-xl border border-gray-200 dark:border-slate-700 flex flex-col transition-transform duration-300 hover:-translate-y-1",children:[S.jsxs("div",{className:"flex items-start space-x-4",children:[S.jsx("div",{className:`${n.bgColor} p-3 rounded-2xl flex-shrink-0 flex items-center justify-center w-12 h-12`,children:S.jsx("img",{src:n.favicon,alt:`${n.name} logo`,className:"w-6 h-6 object-contain"})}),S.jsx("div",{children:S.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:n.name})})]}),S.jsx("div",{className:"mt-6 flex-grow flex items-end",children:S.jsxs("a",{href:n.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center text-center w-full ${n.buttonColor} text-white font-semibold py-3 px-6 rounded-xl ${n.hoverColor} transition-all duration-300 shadow-lg ${n.shadowColor}`,children:["Acessar ",S.jsx(M2,{className:"w-4 h-4 ml-2"})]})})]},n.name))})]})}),L8=()=>S.jsx("div",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:S.jsxs("div",{className:"max-w-4xl mx-auto",children:[S.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[S.jsx(d_,{className:"w-8 h-8 text-slate-500 dark:text-slate-400"}),S.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Setor de Compras"})]}),S.jsx("div",{className:"flex justify-center",children:S.jsx("div",{className:"max-w-sm w-full",children:S.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-3xl p-8 shadow-2xl border border-gray-200 dark:border-slate-700",children:[S.jsxs("div",{className:"flex items-start space-x-6",children:[S.jsx("div",{className:"bg-teal-500/20 p-4 rounded-2xl flex-shrink-0",children:S.jsx(d_,{className:"w-8 h-8 text-teal-500"})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm uppercase tracking-wide text-teal-500 font-semibold",children:"Portal interno"}),S.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Compras"}),S.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Acesse o sistema de requisies e acompanhamento de compras."})]})]}),S.jsx("div",{className:"mt-8",children:S.jsx("a",{href:"https://iconeshop.netlify.app/",target:"_blank",rel:"noopener noreferrer",className:"block text-center w-full bg-teal-500 text-white font-semibold py-3 px-6 rounded-2xl hover:bg-teal-600 transition-all duration-300 shadow-lg shadow-teal-500/20",children:"Abrir portal de compras"})})]})})})]})}),V8=()=>S.jsx("div",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:S.jsxs("div",{className:"max-w-4xl mx-auto",children:[S.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[S.jsx(f_,{className:"w-8 h-8 text-slate-500 dark:text-slate-400"}),S.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-slate-100",children:"Departamento de Tecnologia e Inovao"})]}),S.jsx("div",{className:"flex justify-center",children:S.jsx("div",{className:"max-w-sm w-full",children:S.jsxs("div",{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm rounded-3xl p-8 shadow-2xl border border-gray-200 dark:border-slate-700",children:[S.jsxs("div",{className:"flex items-start space-x-6",children:[S.jsx("div",{className:"bg-yellow-500/20 p-4 rounded-2xl flex-shrink-0",children:S.jsx(f_,{className:"w-8 h-8 text-yellow-500"})}),S.jsxs("div",{children:[S.jsx("p",{className:"text-sm uppercase tracking-wide text-yellow-500 font-semibold",children:"Suporte Tcnico"}),S.jsx("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:"Abertura de Chamados"}),S.jsx("p",{className:"mt-2 text-sm text-slate-600 dark:text-slate-300",children:"Abra um chamado."})]})]}),S.jsx("div",{className:"mt-8",children:S.jsx("a",{href:"https://helpdeskicone.netlify.app/",target:"_blank",rel:"noopener noreferrer",className:"block text-center w-full bg-yellow-500 text-white font-semibold py-3 px-6 rounded-2xl hover:bg-yellow-600 transition-all duration-300 shadow-lg shadow-yellow-500/20",children:"Acessar"})})]})})})]})}),U8=({currentUser:n})=>{const[e,t]=X.useState([]),[i,r]=X.useState(!0),[a,l]=X.useState(null),[d,f]=X.useState(null),[h,y]=X.useState(null),T=(n==null?void 0:n.role)==="admin";X.useEffect(()=>{if(!T){t([]);return}const N=t1(U=>{t(U),r(!1)});return()=>{N&&N()}},[T]);const E=async N=>{if(!N.email)return;l(null);const U=N.isActive!==!1;f(N.email);try{await YF(N.email,!U)}catch(O){l((O==null?void 0:O.message)||"No foi possvel atualizar o acesso no momento.")}finally{f(null)}},I=async(N,U)=>{if(!(!N.email||N.role===U)){l(null),y(N.email);try{await zF(N.email,U)}catch(O){l((O==null?void 0:O.message)||"No foi possvel atualizar o papel no momento.")}finally{y(null)}}};return T?S.jsx("div",{className:"min-h-full w-full bg-[#0B1324] px-4 py-10 text-slate-100 sm:px-6",children:S.jsxs("div",{className:"mx-auto max-w-4xl space-y-8",children:[S.jsxs("header",{className:"text-center sm:text-left",children:[S.jsx("p",{className:"text-3xl font-black text-[#F55225] sm:text-[2.75rem]",children:"Painel do Administrador"}),S.jsx("p",{className:"mt-2 text-base text-slate-300",children:"Gerencie o acesso de todos os usurios do sistema."})]}),S.jsxs("div",{className:"overflow-hidden rounded-3xl border border-white/10 bg-[#111D34] shadow-2xl",children:[S.jsxs("div",{className:"grid grid-cols-[minmax(0,2fr)_auto] bg-[#16213A] px-6 py-3 text-xs font-semibold uppercase tracking-[0.2em] text-slate-300",children:[S.jsx("span",{children:"Usurio"}),S.jsx("span",{className:"text-right",children:"Acesso"})]}),a&&S.jsx("div",{className:"mx-6 mt-4 rounded-xl border border-red-500/40 bg-red-500/10 px-4 py-3 text-sm text-red-200",children:a}),i?S.jsx("div",{className:"px-6 py-10 text-sm text-slate-400",children:"Carregando usurios..."}):e.length===0?S.jsx("div",{className:"px-6 py-10 text-sm text-slate-400",children:"Nenhum usurio encontrado."}):S.jsx("ul",{children:e.map((N,U)=>{const O=N.isActive!==!1,K=N.email===(n==null?void 0:n.email),Z=U===e.length-1;return S.jsxs("li",{className:`flex flex-col gap-4 px-6 py-4 text-sm sm:flex-row sm:items-center sm:justify-between ${Z?"":"border-b border-white/10"}`,children:[S.jsxs("div",{className:"flex min-w-0 flex-1 items-start gap-3 sm:items-center",children:[N.photoURL?S.jsx("img",{src:N.photoURL,className:"h-10 w-10 rounded-full object-cover",alt:N.displayName||N.email}):S.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-[#1F2A40] text-slate-400",children:S.jsx(Cc,{className:"h-6 w-6"})}),S.jsx("div",{className:"min-w-0 flex-1",children:S.jsxs("div",{className:"flex flex-col gap-2",children:[S.jsxs("div",{className:"flex flex-col",children:[S.jsx("p",{className:"truncate text-base font-semibold text-white",children:N.displayName||N.email}),S.jsx("p",{className:"truncate text-xs text-slate-400",children:N.email})]}),S.jsxs("div",{className:"flex flex-col gap-2 text-xs uppercase tracking-wide text-slate-400 sm:flex-row sm:items-center",children:[S.jsx("span",{className:"text-[0.65rem] text-slate-500",children:"Papel"}),S.jsxs("select",{value:N.role??"user",onChange:j=>I(N,j.target.value),disabled:h===N.email||N.email===(n==null?void 0:n.email),className:"w-full rounded-lg border border-white/10 bg-[#1F2A40] px-3 py-2 text-xs font-semibold text-white outline-none transition hover:border-orange-400 focus:border-orange-400 sm:w-40",children:[S.jsx("option",{value:"pendente",children:"Pendente"}),S.jsx("option",{value:"user",children:"Usurio"}),S.jsx("option",{value:"admin",children:"Admin"})]})]})]})})]}),S.jsx("button",{type:"button",onClick:()=>E(N),disabled:K||d===N.email,className:`relative inline-flex h-6 w-12 items-center self-start rounded-full transition sm:self-auto ${O?"bg-[#FF7600]":"bg-slate-500/60"} ${K||d===N.email?"opacity-60":""}`,"aria-label":`Alternar acesso para ${N.email}`,children:S.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition ${O?"translate-x-6":"translate-x-1"}`})})]},N.email)})})]})]})}):S.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 bg-slate-900 px-4 py-10 text-center text-white",children:[S.jsx(kI,{className:"h-16 w-16 text-orange-400"}),S.jsxs("div",{children:[S.jsx("p",{className:"text-2xl font-semibold",children:"Acesso restrito"}),S.jsx("p",{className:"mt-2 text-sm text-slate-300",children:"Voc precisa de permisses administrativas para visualizar esta pgina."})]})]})},n0="https://script.google.com/macros/s/AKfycbzENVKNAqCA95Ofv4urTkC5w6Eqj8q4JUtIfw0TM1j-QuT3x94PpR2gsdZkeieycNNupw/exec";async function R1(n){const e=new TextEncoder().encode(n),t=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(t)).map(r=>r.toString(16).padStart(2,"0")).join("")}async function i0(n){if(!n.ok)throw new Error(`A resposta da rede no foi bem-sucedida (status: ${n.status})`);const e=await n.text();if(e.toLowerCase().includes("<html"))throw console.error("Received HTML response instead of JSON:",e),new Error("O script retornou uma pgina inesperada. Verifique as permisses de acesso do script.");try{const t=JSON.parse(e);if(t.ok===!1)throw t.msg&&t.msg.includes("Ao POST invlida")?(console.error("Backend error:",t.msg),new Error("Erro de configurao do servidor: A ao solicitada no est implementada no script do Google Apps. Verifique se a funo 'doPost' lida com todas as aes necessrias (como 'updateProfile').")):new Error(t.msg||"Ocorreu um erro desconhecido no backend.");return t}catch(t){throw console.error("Failed to parse JSON response or invalid response structure:",e,t),t instanceof Error?t:new Error("Resposta invlida do servidor.")}}async function s0(n){try{const e=await fetch(n0,{method:"POST",mode:"cors",headers:{"Content-Type":"text/plain;charset=utf-8"},body:JSON.stringify(n)});return i0(e)}catch(e){throw e instanceof TypeError?new Error("Falha na comunicao com o servidor. Verifique se o backend est configurado para aceitar requisies (CORS) e se a funo doPost est implementada no Google Apps Script."):e}}const O8=async({name:n,email:e,password:t,birthday:i})=>{const r=await R1(t),a=await s0({action:"signUp",name:n,email:e,passwordHash:r,birthday:i});if(!a.user)throw new Error(a.msg||"Ocorreu um erro ao criar a conta.");const l=await Pp(a.user);if(l.isActive===!1)throw new Error("Seu acesso est suspenso. Procure um administrador.");return l},F8=async({email:n,password:e})=>{const t=await R1(e),i=await s0({action:"signIn",email:n,passwordHash:t});if(!i.user)throw new Error(i.msg||"Ocorreu um erro ao fazer login.");const r=await Pp(i.user);if(r.isActive===!1)throw new Error("Seu acesso est suspenso. Procure um administrador.");if(r.role==="pendente")throw new Error("Seu cadastro est pendente de aprovao. Aguarde um administrador liberar seu acesso.");return r},q8=async n=>{const e={action:"updateProfile",email:n.email};let t=!1;if("displayName"in n&&(e.displayName=n.displayName,t=!0),"photoURL"in n&&(e.photoURL=n.photoURL,t=!0),"birthday"in n&&(e.birthday=n.birthday,t=!0),"cpf"in n&&(e.cpf=n.cpf,t=!0),!t)throw new Error("Nenhuma informao foi enviada para atualizao.");const i=await s0(e);if(!i.user)throw new Error(i.msg||"Ocorreu um erro ao atualizar o perfil.");return"photoURL"in e&&await HF(n.email,e.photoURL??null),Pp(i.user)},B8=async n=>{const e=new URLSearchParams({action:"requestReset",email:n}),t=await fetch(`${n0}?${e.toString()}`);return(await i0(t)).msg},G8=async({email:n,code:e,newPassword:t})=>{const i=new URLSearchParams({action:"confirmReset",email:n,code:e,newPassword:t}),r=await fetch(`${n0}?${i.toString()}`);return(await i0(r)).msg},NI=async()=>{try{await K3(LF)}catch(n){console.error("Error signing out from Firebase:",n)}localStorage.removeItem("currentUser")},H8=({onClose:n,onSignUpClick:e,onForgotPasswordClick:t,onLoginSuccess:i})=>{const[r,a]=X.useState(""),[l,d]=X.useState(""),[f,h]=X.useState(""),[y,T]=X.useState(!1),E=async I=>{I.preventDefault(),T(!0),h("");try{const N=await F8({email:r,password:l});i(N)}catch(N){h(N.message||"Falha ao fazer login. Verifique suas credenciais.")}finally{T(!1)}};return S.jsx(_a,{isOpen:!0,onClose:n,title:"Entrar na sua conta",children:S.jsxs("div",{className:"space-y-4",children:[f&&S.jsx("p",{className:"text-red-500 text-sm text-center bg-red-100 dark:bg-red-900/50 p-2 rounded-md",children:f}),S.jsxs("form",{onSubmit:E,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),S.jsx("input",{type:"email",value:r,onChange:I=>a(I.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha"}),S.jsx("input",{type:"password",value:l,onChange:I=>d(I.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),S.jsx("button",{type:"submit",disabled:y,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:y?"Entrando...":"Entrar com Email"})]}),S.jsx("div",{className:"text-sm text-center",children:S.jsx("button",{onClick:t,className:"font-medium text-blue-600 hover:text-blue-500",children:"Esqueceu sua senha?"})}),S.jsxs("div",{className:"text-sm text-center",children:["No tem uma conta? ",S.jsx("button",{onClick:e,className:"font-medium text-blue-600 hover:text-blue-500",children:"Cadastre-se"})]})]})})},z8=({onClose:n,onLoginClick:e,onSignUpDetails:t})=>{const[i,r]=X.useState(""),[a,l]=X.useState(""),[d,f]=X.useState(""),[h,y]=X.useState(""),[T,E]=X.useState(!1),[I,N]=X.useState(!1),[U,O]=X.useState(""),[K,Z]=X.useState(!1),j=async ae=>{if(ae.preventDefault(),O(""),d.length<6){O("A senha deve ter pelo menos 6 caracteres.");return}if(d!==h){O("As senhas no coincidem.");return}Z(!0),t({name:i,email:a,password:d})};return S.jsx(_a,{isOpen:!0,onClose:n,title:"Criar uma conta",children:S.jsxs("div",{className:"space-y-4",children:[U&&S.jsx("p",{className:"text-red-500 text-sm text-center bg-red-100 dark:bg-red-900/50 p-2 rounded-md",children:U}),S.jsxs("form",{onSubmit:j,className:"space-y-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome"}),S.jsx("input",{type:"text",value:i,onChange:ae=>r(ae.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),S.jsx("input",{type:"email",value:a,onChange:ae=>l(ae.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Senha"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:T?"text":"password",value:d,onChange:ae=>f(ae.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 pr-10",required:!0}),S.jsx("button",{type:"button",onClick:()=>E(!T),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500","aria-label":T?"Esconder senha":"Mostrar senha",children:T?S.jsx(US,{className:"h-5 w-5"}):S.jsx(VS,{className:"h-5 w-5"})})]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Confirmar Senha"}),S.jsxs("div",{className:"relative",children:[S.jsx("input",{type:I?"text":"password",value:h,onChange:ae=>y(ae.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500 pr-10",required:!0}),S.jsx("button",{type:"button",onClick:()=>N(!I),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500","aria-label":I?"Esconder senha":"Mostrar senha",children:I?S.jsx(US,{className:"h-5 w-5"}):S.jsx(VS,{className:"h-5 w-5"})})]})]}),S.jsx("button",{type:"submit",disabled:K,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:K?"Continuando...":"Continuar"})]}),S.jsxs("div",{className:"text-sm text-center",children:["J tem uma conta? ",S.jsx("button",{onClick:e,className:"font-medium text-blue-600 hover:text-blue-500",children:"Faa login"})]})]})})},Y8=({onClose:n,onLoginClick:e,onResetRequestSuccess:t})=>{const[i,r]=X.useState(""),[a,l]=X.useState(""),[d,f]=X.useState(""),[h,y]=X.useState(!1),T=async E=>{E.preventDefault(),y(!0),l(""),f("");try{await B8(i),f("Solicitao enviada! Verifique seu e-mail para o cdigo de redefinio."),setTimeout(()=>{t(i)},2e3)}catch(I){l(I.message||"Falha ao enviar e-mail. Verifique o endereo e tente novamente.")}y(!1)};return S.jsx(_a,{isOpen:!0,onClose:n,title:"Redefinir Senha",children:S.jsxs("div",{className:"space-y-4",children:[a&&S.jsx("p",{className:"text-red-500 text-sm text-center bg-red-100 dark:bg-red-900/50 p-2 rounded-md",children:a}),d&&S.jsx("p",{className:"text-green-600 text-sm text-center bg-green-100 dark:bg-green-900/50 p-2 rounded-md",children:d}),S.jsxs("form",{onSubmit:T,className:"space-y-4",children:[S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Digite seu endereo de e-mail e enviaremos um cdigo para redefinir sua senha."}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Email"}),S.jsx("input",{type:"email",value:i,onChange:E=>r(E.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0,disabled:h||!!d})]}),S.jsx("button",{type:"submit",disabled:h||!!d,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:h?"Enviando...":"Enviar Cdigo de Redefinio"})]}),S.jsx("div",{className:"text-sm text-center",children:S.jsx("button",{onClick:e,className:"font-medium text-blue-600 hover:text-blue-500",children:"Voltar para o Login"})})]})})},K8=({onClose:n,onLoginClick:e,email:t})=>{const[i,r]=X.useState(""),[a,l]=X.useState(""),[d,f]=X.useState(""),[h,y]=X.useState(""),[T,E]=X.useState(!1),I=async N=>{if(N.preventDefault(),a.length<6){f("A nova senha deve ter pelo menos 6 caracteres.");return}E(!0),f(""),y("");try{const U=await G8({email:t,code:i,newPassword:a});y(U||"Senha redefinida com sucesso! Voc j pode fazer o login."),setTimeout(()=>{e()},2e3)}catch(U){f(U.message||"Falha ao redefinir a senha. Verifique o cdigo e tente novamente.")}E(!1)};return S.jsx(_a,{isOpen:!0,onClose:n,title:"Confirmar Redefinio",children:S.jsxs("div",{className:"space-y-4",children:[d&&S.jsx("p",{className:"text-red-500 text-sm text-center bg-red-100 dark:bg-red-900/50 p-2 rounded-md",children:d}),h&&S.jsx("p",{className:"text-green-600 text-sm text-center bg-green-100 dark:bg-green-900/50 p-2 rounded-md",children:h}),!h&&S.jsxs("form",{onSubmit:I,className:"space-y-4",children:[S.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Um cdigo foi enviado para ",S.jsx("strong",{children:t}),". Por favor, insira o cdigo e sua nova senha."]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Cdigo de Verificao"}),S.jsx("input",{type:"text",value:i,onChange:N=>r(N.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nova Senha"}),S.jsx("input",{type:"password",value:a,onChange:N=>l(N.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),S.jsx("button",{type:"submit",disabled:T,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:T?"Redefinindo...":"Redefinir Senha"})]}),S.jsx("div",{className:"text-sm text-center",children:S.jsx("button",{onClick:e,className:"font-medium text-blue-600 hover:text-blue-500",children:"Voltar para o Login"})})]})})},$8=({currentUser:n,onClose:e,onProfileUpdate:t})=>{const[i,r]=X.useState(n.displayName||""),[a,l]=X.useState(n.cpf||""),[d,f]=X.useState(n.photoURL||null),[h,y]=X.useState(null),T=n.birthday?n.birthday.split("-"):["","",""],[E,I]=X.useState(T[0]),[N,U]=X.useState(T[1]),[O,K]=X.useState(T[2]),[Z,j]=X.useState(""),[ae,me]=X.useState(""),[ce,R]=X.useState(!1),M=X.useRef(null),D=X.useMemo(()=>{const le=new Date().getFullYear(),Te=le-100,Ce=[];for(let F=le-16;F>=Te;F--)Ce.push(F);return Ce},[]),L=[{value:"01",label:"Janeiro"},{value:"02",label:"Fevereiro"},{value:"03",label:"Maro"},{value:"04",label:"Abril"},{value:"05",label:"Maio"},{value:"06",label:"Junho"},{value:"07",label:"Julho"},{value:"08",label:"Agosto"},{value:"09",label:"Setembro"},{value:"10",label:"Outubro"},{value:"11",label:"Novembro"},{value:"12",label:"Dezembro"}],P=X.useMemo(()=>!E||!N?31:new Date(parseInt(E),parseInt(N),0).getDate(),[E,N]),q=X.useMemo(()=>{const le=[];for(let Te=1;Te<=P;Te++)le.push(Te<10?`0${Te}`:`${Te}`);return le},[P]),k=le=>{r(le.target.value.toUpperCase())},Be=le=>le.replace(/\D/g,"").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d)/,"$1.$2").replace(/(\d{3})(\d{1,2})$/,"$1-$2").substring(0,14),ht=le=>{l(Be(le.target.value))},W=le=>{var F;const Te=(F=le.target.files)==null?void 0:F[0];if(!Te)return;j("");const Ce=new FileReader;Ce.onload=te=>{var ge;const fe=new Image;fe.onload=()=>{let De=fe.width,et=fe.height;De>et?De>512&&(et*=512/De,De=512):et>512&&(De*=512/et,et=512);const je=document.createElement("canvas");je.width=De,je.height=et;const Pe=je.getContext("2d");if(!Pe)return;Pe.drawImage(fe,0,0,De,et);let ot=.9,se=je.toDataURL("image/jpeg",ot);for(;se.length>1024*1024&&ot>.1;)ot-=.1,se=je.toDataURL("image/jpeg",ot);if(se.length>1024*1024){j("A imagem  muito grande, mesmo aps a compresso. Tente uma imagem menor.");return}f(se),y(se)},fe.src=(ge=te.target)==null?void 0:ge.result},Ce.readAsDataURL(Te)},ue=async le=>{if(le.preventDefault(),j(""),me(""),a&&a.replace(/\D/g,"").length!==11){j("O CPF deve conter 11 dgitos.");return}const Te=E&&N&&O?`${E}-${N}-${O}`:null;if(Te&&isNaN(new Date(Te).getTime())){j("Data de aniversrio invlida.");return}R(!0);const Ce={email:n.email};if(i!==(n.displayName||"")&&(Ce.displayName=i),h&&(Ce.photoURL=h),a!==(n.cpf||"")&&(Ce.cpf=a),Te!==(n.birthday||null)&&(Ce.birthday=Te??void 0),Object.keys(Ce).length<=1&&!h){j("Nenhuma alterao foi feita."),R(!1);return}try{const F=await q8(Ce);t(F),me("Perfil atualizado com sucesso!"),setTimeout(()=>{e()},1500)}catch(F){j(F.message||"Falha ao atualizar o perfil.")}finally{R(!1)}};return S.jsx(_a,{isOpen:!0,onClose:e,title:"Editar Perfil",children:S.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[Z&&S.jsx("p",{className:"text-red-500 text-sm text-center bg-red-100 dark:bg-red-900/50 p-2 rounded-md",children:Z}),ae&&S.jsx("p",{className:"text-green-600 text-sm text-center bg-green-100 dark:bg-green-900/50 p-2 rounded-md",children:ae}),S.jsx("div",{className:"flex flex-col items-center space-y-2",children:S.jsxs("div",{className:"relative",children:[d?S.jsx("img",{src:d,alt:"Prvia do perfil",className:"w-24 h-24 rounded-full object-cover"}):S.jsx(Cc,{className:"w-24 h-24 text-gray-300 dark:text-gray-600"}),S.jsx("button",{type:"button",onClick:()=>{var le;return(le=M.current)==null?void 0:le.click()},className:"absolute -bottom-1 -right-1 bg-blue-600 hover:bg-blue-700 text-white p-2 rounded-full border-2 border-white dark:border-slate-800","aria-label":"Mudar foto do perfil",children:S.jsx(U2,{className:"w-4 h-4"})}),S.jsx("input",{type:"file",ref:M,onChange:W,className:"hidden",accept:"image/png, image/jpeg, image/webp"})]})}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Nome Completo"}),S.jsx("input",{type:"text",value:i,onChange:k,className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm uppercase placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"CPF"}),S.jsx("input",{type:"text",value:a,onChange:ht,placeholder:"000.000.000-00",className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500"})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Data de Nascimento"}),S.jsxs("div",{className:"grid grid-cols-3 gap-4 mt-1",children:[S.jsx("div",{children:S.jsxs("select",{value:O,onChange:le=>K(le.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[S.jsx("option",{value:"",children:"Dia"}),q.map(le=>S.jsx("option",{value:le,children:le},le))]})}),S.jsx("div",{children:S.jsxs("select",{value:N,onChange:le=>U(le.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[S.jsx("option",{value:"",children:"Ms"}),L.map(le=>S.jsx("option",{value:le.value,children:le.label},le.value))]})}),S.jsx("div",{children:S.jsxs("select",{value:E,onChange:le=>I(le.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[S.jsx("option",{value:"",children:"Ano"}),D.map(le=>S.jsx("option",{value:le,children:le},le))]})})]})]}),S.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-4",children:[S.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md hover:bg-gray-50 dark:hover:bg-slate-600",children:"Cancelar"}),S.jsx("button",{type:"submit",disabled:ce,className:"px-4 py-2 text-sm font-medium text-white bg-orange-500 border border-transparent rounded-md shadow-sm hover:bg-orange-600 disabled:opacity-50",children:ce?"Salvando...":"Salvar Alteraes"})]})]})})},j8=({onSave:n,onClose:e,isLoading:t,error:i})=>{const[r,a]=X.useState(""),[l,d]=X.useState(""),[f,h]=X.useState(""),y=X.useMemo(()=>{const O=new Date().getFullYear(),K=O-100,Z=[];for(let j=O-16;j>=K;j--)Z.push(j);return Z},[]),T=[{value:"01",label:"Janeiro"},{value:"02",label:"Fevereiro"},{value:"03",label:"Maro"},{value:"04",label:"Abril"},{value:"05",label:"Maio"},{value:"06",label:"Junho"},{value:"07",label:"Julho"},{value:"08",label:"Agosto"},{value:"09",label:"Setembro"},{value:"10",label:"Outubro"},{value:"11",label:"Novembro"},{value:"12",label:"Dezembro"}],E=X.useMemo(()=>!f||!l?31:new Date(parseInt(f),parseInt(l),0).getDate(),[f,l]),I=X.useMemo(()=>{const O=[];for(let K=1;K<=E;K++)O.push(K<10?`0${K}`:`${K}`);return O},[E]),N=r&&l&&f&&!isNaN(new Date(`${f}-${l}-${r}`).getTime()),U=async()=>{N&&await n(`${f}-${l}-${r}`)};return S.jsx(_a,{isOpen:!0,onClose:e,title:"Quando  o seu aniversrio?",isClosable:!1,children:S.jsxs("div",{className:"space-y-4",children:[S.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Esta informao  necessria para concluir seu cadastro."}),i&&S.jsx("p",{className:"text-red-500 text-sm text-center bg-red-100 dark:bg-red-900/50 p-2 rounded-md",children:i}),S.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Dia"}),S.jsxs("select",{value:r,onChange:O=>a(O.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[S.jsx("option",{value:"",children:"Dia"}),I.map(O=>S.jsx("option",{value:O,children:O},O))]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ms"}),S.jsxs("select",{value:l,onChange:O=>d(O.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[S.jsx("option",{value:"",children:"Ms"}),T.map(O=>S.jsx("option",{value:O.value,children:O.label},O.value))]})]}),S.jsxs("div",{children:[S.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Ano"}),S.jsxs("select",{value:f,onChange:O=>h(O.target.value),className:"mt-1 block w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",children:[S.jsx("option",{value:"",children:"Ano"}),y.map(O=>S.jsx("option",{value:O,children:O},O))]})]})]}),S.jsx("button",{onClick:U,disabled:!N||t,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:t?"Salvando...":"Salvar Aniversrio"})]})})},r0="announcements",J8=async(n,e,t,i)=>{await qV(xb(rd,r0),{title:n,content:e,author:t,authorPhotoURL:i||null,date:LI(new Date),createdAt:Date.now(),views:[]})},W8=n=>{const e=Date.now()-1728e5,t=kV(xb(rd,r0),PV("createdAt",">",e),LV("createdAt","desc"));return BV(t,i=>{const r=i.docs.map(a=>({id:a.id,...a.data()}));n(r)})},Q8=async(n,e)=>{const t=cp(rd,r0,n);await FV(t,{views:HV(e)})},X8=()=>{const[n,e]=X.useState("Home"),[t,i]=X.useState(!1),[r,a]=X.useState(localStorage.getItem("theme")||"dark"),[l,d]=X.useState(null),[f,h]=X.useState(!0),[y,T]=X.useState(null),[E,I]=X.useState(null),[N,U]=X.useState(null),[O,K]=X.useState(null),[Z,j]=X.useState(!1),[ae,me]=X.useState([]),[ce,R]=X.useState(null),[M,D]=X.useState(!1),L=(l==null?void 0:l.email)??null,P=(l==null?void 0:l.displayName)??(l==null?void 0:l.email)??"Visitante",q=(l==null?void 0:l.photoURL)??null;X.useEffect(()=>{const Pe=W8(ot=>{me(ot)});return()=>Pe()},[]);const k=X.useCallback(()=>{L&&ae.forEach(Pe=>{(Pe.views??[]).some(se=>se.viewerId===L)||Q8(Pe.id,{viewerId:L,name:P,photoURL:q,viewedAt:new Date().toISOString()})})},[ae,L,P,q]),Be=Pe=>{d(Pe),localStorage.setItem("currentUser",JSON.stringify(Pe)),Ce()},ht=Pe=>{d(Pe),localStorage.setItem("currentUser",JSON.stringify(Pe))};X.useEffect(()=>{(async()=>{h(!0);try{const ot=localStorage.getItem("currentUser");if(ot){const se=JSON.parse(ot),de=await Pp(se);if(de.isActive===!1||de.role==="pendente"){await NI(),localStorage.removeItem("currentUser"),d(null),de.role==="pendente"&&alert("Seu cadastro ainda est pendente de aprovao. Aguarde um administrador liberar o acesso.");return}d(de),localStorage.setItem("currentUser",JSON.stringify(de))}}catch(ot){console.error("Failed to hydrate stored user",ot),localStorage.removeItem("currentUser")}finally{h(!1)}})()},[]),X.useEffect(()=>{l||D(!1)},[l]),X.useEffect(()=>{y==="announcements"&&M&&l&&k()},[y,M,l,k]),X.useEffect(()=>{if(ce===null)return;ae.some(ot=>ot.id===ce)||R(null)},[ae,ce]),X.useEffect(()=>{r==="dark"?(document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark")):(document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"))},[r]);const W=()=>{a(r==="light"?"dark":"light")},ue=()=>{i(!t)},le=X.useCallback(async Pe=>{await NI(),d(null),D(!1),e("Home"),Pe&&alert(Pe)},[]);X.useEffect(()=>{if(!(l!=null&&l.email))return;const Pe=KF(l.email,({hasAccess:ot,reason:se})=>{ot||le(se==="pending"?"Seu cadastro est pendente de aprovao. Aguarde at que um administrador libere o acesso.":"Seu acesso foi revogado.")});return()=>{Pe&&Pe()}},[l==null?void 0:l.email,le]);const Te=Pe=>{K(null),T(Pe)},Ce=()=>{T(null),I(null),U(null),K(null),j(!1)},F=Pe=>{I(Pe),Te("resetPassword")},te=Pe=>{U(Pe),T("birthday")},fe=async Pe=>{if(N){j(!0),K(null);try{const ot={...N,birthday:Pe},se=await O8(ot);if(se.role==="pendente"){Ce(),alert("Cadastro enviado! Aguarde um administrador aprovar seu acesso.");return}Be(se)}catch(ot){K(ot.message||"Falha ao criar conta. Tente novamente.")}finally{j(!1)}}},ge=async({title:Pe,content:ot})=>{const se=(l==null?void 0:l.displayName)||(l==null?void 0:l.email)||"Portal cone",de=(l==null?void 0:l.photoURL)||null;try{await J8(Pe,ot,se,de)}catch(xe){console.error("Failed to create announcement",xe),alert("Erro ao criar comunicado. Tente novamente.")}},Ie=()=>{l&&(D(!0),Te("announcements"))},Me=Pe=>{!l||!M||R(Pe)},De=()=>{R(null)},et=X.useMemo(()=>ce===null?null:ae.find(Pe=>Pe.id===ce)??null,[ce,ae]),je=!!(l&&M);return f?S.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 dark:bg-slate-900",children:[S.jsx("div",{className:"loader"})," "]}):S.jsxs("div",{className:"flex min-h-screen text-gray-800 bg-gray-50 dark:bg-slate-900 dark:text-gray-200",children:[S.jsx(F2,{activeItem:n,setActiveItem:e,isCollapsed:t,toggleSidebar:ue,theme:r,toggleTheme:W,currentUser:l,onLoginClick:()=>Te("login"),onLogoutClick:le,onEditProfileClick:()=>Te("editProfile"),onNotificationsClick:Ie}),S.jsx("main",{className:"flex-1 flex flex-col overflow-y-auto",children:n==="Home"?S.jsx(N8,{currentUser:l}):n==="Admin"?S.jsx(U8,{currentUser:l}):n==="RH"?S.jsx(M8,{}):n==="Compras"?S.jsx(L8,{}):n==="Pedaggico"?S.jsx(D8,{}):n==="Nativos"?S.jsx(P8,{}):n==="Tecnologia e Inovao"?S.jsx(V8,{}):S.jsx("div",{className:"flex-1 p-4 sm:p-6 lg:p-8",children:S.jsx("div",{className:"max-w-7xl mx-auto",children:S.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[S.jsx("div",{className:"md:col-span-2",children:S.jsx(_8,{})}),S.jsx(B2,{announcements:ae,onViewersClick:Me,canSeeViews:je}),S.jsx(tq,{})]})})})}),y==="login"&&S.jsx(H8,{onClose:Ce,onLoginSuccess:Be,onSignUpClick:()=>Te("signup"),onForgotPasswordClick:()=>Te("forgotPassword")}),y==="signup"&&S.jsx(z8,{onClose:Ce,onSignUpDetails:te,onLoginClick:()=>Te("login")}),y==="announcements"&&S.jsx(XF,{announcements:ae,onCreateAnnouncement:ge,authorName:(l==null?void 0:l.displayName)||(l==null?void 0:l.email)||"Portal cone",authorPhotoURL:l==null?void 0:l.photoURL,canSeeViews:je,onViewersClick:Me,onClose:Ce,userRole:l==null?void 0:l.role}),y==="birthday"&&S.jsx(j8,{onClose:Ce,onSave:fe,isLoading:Z,error:O}),je&&et&&S.jsx(ZF,{announcement:et,onClose:De}),y==="forgotPassword"&&S.jsx(Y8,{onClose:Ce,onLoginClick:()=>Te("login"),onResetRequestSuccess:F}),y==="resetPassword"&&E&&S.jsx(K8,{onClose:Ce,onLoginClick:()=>Te("login"),email:E}),y==="editProfile"&&l&&S.jsx($8,{currentUser:l,onClose:Ce,onProfileUpdate:ht})]})},N1=document.getElementById("root");if(!N1)throw new Error("Could not find root element to mount to");const Z8=y2.createRoot(N1);Z8.render(S.jsx(c2.StrictMode,{children:S.jsx(X8,{})}));
